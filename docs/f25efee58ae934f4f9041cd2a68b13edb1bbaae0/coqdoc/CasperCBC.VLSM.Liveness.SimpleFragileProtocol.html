<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.ListSet.html#"><span class="id" title="library">ListSet</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CasperCBC</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Preamble.html#"><span class="id" title="library">Lib.Preamble</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Classes.html#"><span class="id" title="library">Lib.Classes</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#"><span class="id" title="library">CBC.FullNode.Validator.State</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#"><span class="id" title="library">VLSM.Common</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.html#"><span class="id" title="library">VLSM.Liveness</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Composition.html#"><span class="id" title="library">VLSM.Composition</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Equivocation.html#"><span class="id" title="library">VLSM.Equivocation</span></a> <span class="comment">(*&nbsp;for&nbsp;has_been_sent&nbsp;*)</span><br/>
.<br/>

<br/>
</div>

<div class="doc">
This module defines a simple consensus protocol, and
proves that it is live when there are no synchronization faults.
 
<div class="paragraph"> </div>

<a id="lab80"></a><h1 class="section">Validators</h1>


<div class="paragraph"> </div>

The components are similar to <span class="inlinecode"><span class="id" title="var">CBC.FullNode.Validator</span></span>, except
that the states and messages all carry times, and the nodes
only send messages at the times given in a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Liveness.html#Plan"><span class="id" title="record">Plan</span></a></span>.
 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="Define_Component" class="idref" href="#Define_Component"><span class="id" title="section">Define_Component</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="C:1" class="idref" href="#C:1"><span class="id" title="binder">C</span></a> <a id="V:2" class="idref" href="#V:2"><span class="id" title="binder">V</span></a>:<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="EqC:3" class="idref" href="#EqC:3"><span class="id" title="binder">EqC</span></a>: <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#C:1"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="EqV:4" class="idref" href="#EqV:4"><span class="id" title="binder">EqV</span></a>: <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#V:2"><span class="id" title="variable">V</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c0:5" class="idref" href="#c0:5"><span class="id" title="binder">c0</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#C:1"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="plan:6" class="idref" href="#plan:6"><span class="id" title="binder">plan</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#V:2"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="validator_message" class="idref" href="#validator_message"><span class="id" title="inductive">validator_message</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="Msg" class="idref" href="#Msg"><span class="id" title="constructor">Msg</span></a> (<a id="time:9" class="idref" href="#time:9"><span class="id" title="binder">time</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="proposal:10" class="idref" href="#proposal:10"><span class="id" title="binder">proposal</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.C"><span class="id" title="variable">C</span></a>) (<a id="proposer:11" class="idref" href="#proposer:11"><span class="id" title="binder">proposer</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.V"><span class="id" title="variable">V</span></a>) (<a id="history:12" class="idref" href="#history:12"><span class="id" title="binder">history</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message:7"><span class="id" title="inductive">validator_message</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="validator_message_eq_dec" class="idref" href="#validator_message_eq_dec"><span class="id" title="instance">validator_message_eq_dec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">C</span> <span class="id" title="var">V</span> <span class="id" title="var">EqC</span> <span class="id" title="var">EqV</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="keyword">fix</span> <span class="id" title="var">validator_message_eq_dec</span> (<a id="m:18" class="idref" href="#m:18"><span class="id" title="binder">m</span></a> <a id="n:19" class="idref" href="#n:19"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">m</span>} : <a class="idref" href="CasperCBC.Lib.Classes.html#Decision"><span class="id" title="class">Decision</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:13"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:14"><span class="id" title="variable">n</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:13"><span class="id" title="variable">m</span></a>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:14"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Msg"><span class="id" title="constructor">Msg</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">c1</span> <span class="id" title="var">v1</span> <span class="id" title="var">msgs1</span>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Msg"><span class="id" title="constructor">Msg</span></a> <span class="id" title="var">t2</span> <span class="id" title="var">c2</span> <span class="id" title="var">v2</span> <span class="id" title="var">msgs2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">t1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">c1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">c2</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">v1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v2</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#list_eq_dec"><span class="id" title="lemma">list_eq_dec</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message_eq_dec:15"><span class="id" title="variable">validator_message_eq_dec</span></a> <span class="id" title="var">msgs1</span> <span class="id" title="var">msgs2</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>);<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="message_height" class="idref" href="#message_height"><span class="id" title="definition">message_height</span></a> (<a id="m:23" class="idref" href="#m:23"><span class="id" title="binder">m</span></a>: <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">m</span>}: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:23"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Msg"><span class="id" title="constructor">Msg</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">history</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#list_max"><span class="id" title="definition">list_max</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#message_height:24"><span class="id" title="definition">message_height</span></a> <span class="id" title="var">history</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="validator_message_well_founded" class="idref" href="#validator_message_well_founded"><span class="id" title="lemma">validator_message_well_founded</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="time:26" class="idref" href="#time:26"><span class="id" title="binder">time</span></a> <a id="c:27" class="idref" href="#c:27"><span class="id" title="binder">c</span></a> <a id="v:28" class="idref" href="#v:28"><span class="id" title="binder">v</span></a> <a id="history:29" class="idref" href="#history:29"><span class="id" title="binder">history</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Msg"><span class="id" title="constructor">Msg</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#time:26"><span class="id" title="variable">time</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#c:27"><span class="id" title="variable">c</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:28"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#history:29"><span class="id" title="variable">history</span></a>) <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#history:29"><span class="id" title="variable">history</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">c</span> <span class="id" title="var">v</span> <span class="id" title="var">hist</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#in_map"><span class="id" title="lemma">in_map</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span>:=<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#message_height"><span class="id" title="definition">message_height</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="k:31" class="idref" href="#k:31"><span class="id" title="binder">k</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#k:30"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#list_max"><span class="id" title="definition">list_max</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#message_height"><span class="id" title="definition">message_height</span></a> <span class="id" title="var">hist</span>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#message_height"><span class="id" title="definition">message_height</span></a> <span class="id" title="var">hist</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#list_max_le"><span class="id" title="lemma">list_max_le</span></a>;<span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.PeanoNat.html#Nat.nle_succ_diag_l"><span class="id" title="lemma">PeanoNat.Nat.nle_succ_diag_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="validator_state" class="idref" href="#validator_state"><span class="id" title="inductive">validator_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="State" class="idref" href="#State"><span class="id" title="constructor">State</span></a> (<a id="time:34" class="idref" href="#time:34"><span class="id" title="binder">time</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="received:35" class="idref" href="#received:35"><span class="id" title="binder">received</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sent:36" class="idref" href="#sent:36"><span class="id" title="binder">sent</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="finished_send:37" class="idref" href="#finished_send:37"><span class="id" title="binder">finished_send</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_time" class="idref" href="#validator_time"><span class="id" title="definition">validator_time</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">'(</span></a><a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">State</span></a> <a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">t</span></a> <a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">_</span></a> <a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">_</span></a> <a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">_</span></a><a id="pat:39" class="idref" href="#pat:39"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:38"><span class="id" title="variable">t</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="initial_validator_state" class="idref" href="#initial_validator_state"><span class="id" title="definition">initial_validator_state</span></a> (<a id="s:40" class="idref" href="#s:40"><span class="id" title="binder">s</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="t:41" class="idref" href="#t:41"><span class="id" title="binder">t</span></a>,<a id="msgs:42" class="idref" href="#msgs:42"><span class="id" title="binder">msgs</span></a>,<a id="log:43" class="idref" href="#log:43"><span class="id" title="binder">log</span></a>,<a id="flag:44" class="idref" href="#flag:44"><span class="id" title="binder">flag</span></a>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:40"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:41"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:42"><span class="id" title="variable">msgs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#log:43"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#flag:44"><span class="id" title="variable">flag</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="initial_validator_message" class="idref" href="#initial_validator_message"><span class="id" title="definition">initial_validator_message</span></a> (<a id="m:45" class="idref" href="#m:45"><span class="id" title="binder">m</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="validator_label" class="idref" href="#validator_label"><span class="id" title="inductive">validator_label</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="Proposal" class="idref" href="#Proposal"><span class="id" title="constructor">Proposal</span></a> (<a id="c:48" class="idref" href="#c:48"><span class="id" title="binder">c</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.C"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;| <a id="Tick" class="idref" href="#Tick"><span class="id" title="constructor">Tick</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="record_receive" class="idref" href="#record_receive"><span class="id" title="definition">record_receive</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="msg:49" class="idref" href="#msg:49"><span class="id" title="binder">msg</span></a> <a id="pat:54" class="idref" href="#pat:54"><span class="id" title="binder">'(</span></a><a id="pat:54" class="idref" href="#pat:54"><span class="id" title="binder">State</span></a> <a id="pat:54" class="idref" href="#pat:54"><span class="id" title="binder">t</span></a> <a id="pat:54" class="idref" href="#pat:54"><span class="id" title="binder">msgs</span></a> <a id="pat:54" class="idref" href="#pat:54"><span class="id" title="binder">log</span></a> <a id="pat:54" class="idref" href="#pat:54"><span class="id" title="binder">flag</span></a><a id="pat:54" class="idref" href="#pat:54"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:53"><span class="id" title="variable">t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.ListSet.html#set_add"><span class="id" title="definition">set_add</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:49"><span class="id" title="variable">msg</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:52"><span class="id" title="variable">msgs</span></a>) <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#log:51"><span class="id" title="variable">log</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#flag:50"><span class="id" title="variable">flag</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="record_send" class="idref" href="#record_send"><span class="id" title="definition">record_send</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="msg:55" class="idref" href="#msg:55"><span class="id" title="binder">msg</span></a> <a id="pat:60" class="idref" href="#pat:60"><span class="id" title="binder">'(</span></a><a id="pat:60" class="idref" href="#pat:60"><span class="id" title="binder">State</span></a> <a id="pat:60" class="idref" href="#pat:60"><span class="id" title="binder">t</span></a> <a id="pat:60" class="idref" href="#pat:60"><span class="id" title="binder">msgs</span></a> <a id="pat:60" class="idref" href="#pat:60"><span class="id" title="binder">log</span></a> <a id="pat:60" class="idref" href="#pat:60"><span class="id" title="binder">flag</span></a><a id="pat:60" class="idref" href="#pat:60"><span class="id" title="binder">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:59"><span class="id" title="variable">t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.ListSet.html#set_add"><span class="id" title="definition">set_add</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:55"><span class="id" title="variable">msg</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:58"><span class="id" title="variable">msgs</span></a>) (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:55"><span class="id" title="variable">msg</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#log:57"><span class="id" title="variable">log</span></a>) <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#flag:56"><span class="id" title="variable">flag</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="estimator:61" class="idref" href="#estimator:61"><span class="id" title="binder">estimator</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.C"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v:62" class="idref" href="#v:62"><span class="id" title="binder">v</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.V"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_transition" class="idref" href="#validator_transition"><span class="id" title="definition">validator_transition</span></a> (<a id="l:63" class="idref" href="#l:63"><span class="id" title="binder">l</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_label"><span class="id" title="inductive">validator_label</span></a>) (<a id="sim:64" class="idref" href="#sim:64"><span class="id" title="binder">sim</span></a>:(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>)) : (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:65" class="idref" href="#s:65"><span class="id" title="binder">s</span></a>,<a id="im:66" class="idref" href="#im:66"><span class="id" title="binder">im</span></a>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#sim:64"><span class="id" title="variable">sim</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#l:63"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Label&nbsp;is&nbsp;None&nbsp;for&nbsp;receiving&nbsp;messages&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:66"><span class="id" title="variable">im</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Receive&nbsp;the&nbsp;message&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#record_receive"><span class="id" title="definition">record_receive</span></a> <span class="id" title="var">m</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:65"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Receiving&nbsp;with&nbsp;no&nbsp;message&nbsp;will&nbsp;actually&nbsp;be&nbsp;ruled&nbsp;out<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;the&nbsp;validity&nbsp;predicate,&nbsp;just&nbsp;leave&nbsp;s&nbsp;unchanged&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:65"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Tick"><span class="id" title="constructor">Tick</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Advance&nbsp;clock&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="n:69" class="idref" href="#n:69"><span class="id" title="binder">n</span></a>,<a id="msgs:70" class="idref" href="#msgs:70"><span class="id" title="binder">msgs</span></a>,<a id="log:71" class="idref" href="#log:71"><span class="id" title="binder">log</span></a>,<a id="f:72" class="idref" href="#f:72"><span class="id" title="binder">f</span></a>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:65"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:69"><span class="id" title="variable">n</span></a>) <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:70"><span class="id" title="variable">msgs</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#log:71"><span class="id" title="variable">log</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Proposal"><span class="id" title="constructor">Proposal</span></a> <span class="id" title="var">c</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Send&nbsp;a&nbsp;proposal&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="n:73" class="idref" href="#n:73"><span class="id" title="binder">n</span></a>,<a id="msgs:74" class="idref" href="#msgs:74"><span class="id" title="binder">msgs</span></a>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:65"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="m:75" class="idref" href="#m:75"><span class="id" title="binder">m</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Msg"><span class="id" title="constructor">Msg</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:73"><span class="id" title="variable">n</span></a> <span class="id" title="var">c</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.v"><span class="id" title="variable">v</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:74"><span class="id" title="variable">msgs</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#record_send"><span class="id" title="definition">record_send</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:75"><span class="id" title="variable">m</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:65"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:75"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
"Mandatory flip-flopping"
     If the estimator allows multiple consensus values
     and the state has previously sent a proposals,
     the new proposal cannot match the immediately
     preceeding proposal.

<div class="paragraph"> </div>

     TODO: Is this sufficient for non-binary decisions?
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="flip_condition" class="idref" href="#flip_condition"><span class="id" title="definition">flip_condition</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.C"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">'(</span></a><a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">State</span></a> <a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">_</span></a> <a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">msgs</span></a> <a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">log</span></a> <a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">_</span></a><a id="pat:78" class="idref" href="#pat:78"><span class="id" title="binder">)</span></a> <a id="c:79" class="idref" href="#c:79"><span class="id" title="binder">c</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#log:76"><span class="id" title="variable">log</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Msg"><span class="id" title="constructor">Msg</span></a> <span class="id" title="var">_</span> <span class="id" title="var">c'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">_</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#c:79"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">c'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="c2:81" class="idref" href="#c2:81"><span class="id" title="binder">c2</span></a>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.estimator"><span class="id" title="variable">estimator</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:77"><span class="id" title="variable">msgs</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#c2:81"><span class="id" title="variable">c2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#c2:81"><span class="id" title="variable">c2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#c:79"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;This&nbsp;needs&nbsp;to&nbsp;be&nbsp;altered&nbsp;to&nbsp;require&nbsp;that&nbsp;we&nbsp;have&nbsp;recieved<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;earlier&nbsp;plan&nbsp;messages&nbsp;before&nbsp;we&nbsp;can&nbsp;assert&nbsp;or&nbsp;tick&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_valid" class="idref" href="#validator_valid"><span class="id" title="definition">validator_valid</span></a> (<a id="l:82" class="idref" href="#l:82"><span class="id" title="binder">l</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_label"><span class="id" title="inductive">validator_label</span></a>) (<a id="sim:83" class="idref" href="#sim:83"><span class="id" title="binder">sim</span></a>:(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>)) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:84" class="idref" href="#s:84"><span class="id" title="binder">s</span></a>,<a id="im:85" class="idref" href="#im:85"><span class="id" title="binder">im</span></a>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#sim:83"><span class="id" title="variable">sim</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#l:82"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:85"><span class="id" title="variable">im</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;May&nbsp;not&nbsp;receive&nbsp;with&nbsp;no&nbsp;message&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;A&nbsp;recevied&nbsp;message&nbsp;must<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;have&nbsp;not&nbsp;already&nbsp;been&nbsp;received,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;satisfy&nbsp;the&nbsp;full&nbsp;node&nbsp;condition<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3)&nbsp;must&nbsp;come&nbsp;from&nbsp;a&nbsp;time&nbsp;no&nbsp;earlier&nbsp;later&nbsp;than&nbsp;the&nbsp;clock&nbsp;of&nbsp;s,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;can&nbsp;only&nbsp;be&nbsp;received&nbsp;from&nbsp;the&nbsp;current&nbsp;clock&nbsp;if&nbsp;either<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s&nbsp;has&nbsp;already&nbsp;produced&nbsp;its&nbsp;own&nbsp;mesage&nbsp;for&nbsp;this&nbsp;time,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;this&nbsp;validator&nbsp;is&nbsp;not&nbsp;in&nbsp;the&nbsp;plan&nbsp;for&nbsp;this&nbsp;time&nbsp;at&nbsp;all<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> ((<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Msg"><span class="id" title="constructor">Msg</span></a> <span class="id" title="var">n</span>  <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">msg_just</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">m</span>) =&gt; <span class="id" title="keyword">let</span> (<a id="n':88" class="idref" href="#n':88"><span class="id" title="binder">n'</span></a>,<a id="msgs:89" class="idref" href="#msgs:89"><span class="id" title="binder">msgs</span></a>,<a id="log:90" class="idref" href="#log:90"><span class="id" title="binder">log</span></a>,<a id="f:91" class="idref" href="#f:91"><span class="id" title="binder">f</span></a>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:84"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">m</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:89"><span class="id" title="variable">msgs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#incl"><span class="id" title="definition">incl</span></a> <span class="id" title="var">msg_just</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:89"><span class="id" title="variable">msgs</span></a> <span class="comment">(*&nbsp;"full&nbsp;node&nbsp;condition"&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n':88"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n':88"><span class="id" title="variable">n'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#f:91"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.plan"><span class="id" title="variable">plan</span></a> <span class="id" title="var">n</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.v"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Tick"><span class="id" title="constructor">Tick</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:85"><span class="id" title="variable">im</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="keyword">let</span> (<a id="n:93" class="idref" href="#n:93"><span class="id" title="binder">n</span></a>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<a id="f:94" class="idref" href="#f:94"><span class="id" title="binder">f</span></a>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:84"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#f:94"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.plan"><span class="id" title="variable">plan</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Proposal"><span class="id" title="constructor">Proposal</span></a> <span class="id" title="var">c</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:85"><span class="id" title="variable">im</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <span class="id" title="keyword">let</span> (<a id="n:96" class="idref" href="#n:96"><span class="id" title="binder">n</span></a>,<a id="msgs:97" class="idref" href="#msgs:97"><span class="id" title="binder">msgs</span></a>,<a id="log:98" class="idref" href="#log:98"><span class="id" title="binder">log</span></a>,<a id="f:99" class="idref" href="#f:99"><span class="id" title="binder">f</span></a>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:84"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.estimator"><span class="id" title="variable">estimator</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:97"><span class="id" title="variable">msgs</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#flip_condition"><span class="id" title="definition">flip_condition</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:84"><span class="id" title="variable">s</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.plan"><span class="id" title="variable">plan</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:96"><span class="id" title="variable">n</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#f:99"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="Validator_type" class="idref" href="#Validator_type"><span class="id" title="instance">Validator_type</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_label"><span class="id" title="inductive">validator_label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="Validator_sign" class="idref" href="#Validator_sign"><span class="id" title="instance">Validator_sign</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator_type"><span class="id" title="instance">Validator_type</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#initial_validator_state"><span class="id" title="definition">initial_validator_state</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#initial_validator_message"><span class="id" title="definition">initial_validator_message</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#initial_validator_state"><span class="id" title="definition">initial_validator_state</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">_</span>) (<span class="id" title="keyword">fun</span> <a id="H:100" class="idref" href="#H:100"><span class="id" title="binder">H</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#H:100"><span class="id" title="variable">H</span></a>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> := (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Msg"><span class="id" title="constructor">Msg</span></a> 0 <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.c0"><span class="id" title="variable">c0</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component.v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="Validator_machine" class="idref" href="#Validator_machine"><span class="id" title="instance">Validator_machine</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator_sign"><span class="id" title="instance">Validator_sign</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_transition"><span class="id" title="definition">validator_transition</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_valid"><span class="id" title="definition">validator_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="Validator" class="idref" href="#Validator"><span class="id" title="definition">Validator</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator_machine"><span class="id" title="instance">Validator_machine</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_clock_fn" class="idref" href="#validator_clock_fn"><span class="id" title="definition">validator_clock_fn</span></a> (<a id="s:101" class="idref" href="#s:101"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">let</span> '(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> <span class="id" title="var">n</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:101"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="validator_clock_monotone" class="idref" href="#validator_clock_monotone"><span class="id" title="lemma">validator_clock_monotone</span></a>: <span class="id" title="keyword">forall</span> <a id="l:103" class="idref" href="#l:103"><span class="id" title="binder">l</span></a> <a id="s:104" class="idref" href="#s:104"><span class="id" title="binder">s</span></a> <a id="om:105" class="idref" href="#om:105"><span class="id" title="binder">om</span></a> <a id="s':106" class="idref" href="#s':106"><span class="id" title="binder">s'</span></a> <a id="om':107" class="idref" href="#om':107"><span class="id" title="binder">om'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#l:103"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:104"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om:105"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':106"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om':107"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_clock_fn"><span class="id" title="definition">validator_clock_fn</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:104"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_clock_fn"><span class="id" title="definition">validator_clock_fn</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':106"><span class="id" title="variable">s'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">C</span> <span class="id" title="var">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="keyword">context</span> [<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="keyword">match</span> ?<span class="id" title="var">X</span> <span class="id" title="keyword">with</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">_</span> <span class="id" title="keyword">end</span>)] =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">solve</span>[<span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_clock" class="idref" href="#validator_clock"><span class="id" title="definition">validator_clock</span></a>: <a class="idref" href="CasperCBC.VLSM.Liveness.html#ClockFor"><span class="id" title="record">ClockFor</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Liveness.html#clock"><span class="id" title="projection">clock</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_clock_fn"><span class="id" title="definition">validator_clock_fn</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.html#clock_monotone"><span class="id" title="projection">clock_monotone</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_clock_monotone"><span class="id" title="lemma">validator_clock_monotone</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_has_been_sent" class="idref" href="#validator_has_been_sent"><span class="id" title="definition">validator_has_been_sent</span></a> : <a class="idref" href="CasperCBC.VLSM.Equivocation.html#state_message_oracle"><span class="id" title="definition">state_message_oracle</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="pat:109" class="idref" href="#pat:109"><span class="id" title="binder">'(</span></a><a id="pat:109" class="idref" href="#pat:109"><span class="id" title="binder">State</span></a> <a id="pat:109" class="idref" href="#pat:109"><span class="id" title="binder">_</span></a> <a id="pat:109" class="idref" href="#pat:109"><span class="id" title="binder">_</span></a> <a id="pat:109" class="idref" href="#pat:109"><span class="id" title="binder">sent</span></a> <a id="pat:109" class="idref" href="#pat:109"><span class="id" title="binder">_</span></a><a id="pat:109" class="idref" href="#pat:109"><span class="id" title="binder">)</span></a> <a id="m:110" class="idref" href="#m:110"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:110"><span class="id" title="variable">m</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#sent:108"><span class="id" title="variable">sent</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_has_been_sent_dec" class="idref" href="#validator_has_been_sent_dec"><span class="id" title="definition">validator_has_been_sent_dec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_sent"><span class="id" title="definition">validator_has_been_sent</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="s:111" class="idref" href="#s:111"><span class="id" title="binder">s</span></a> <a id="m:112" class="idref" href="#m:112"><span class="id" title="binder">m</span></a> =&gt; <span class="id" title="keyword">let</span> '(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">sent</span> <span class="id" title="var">_</span>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:111"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:112"><span class="id" title="variable">m</span></a> <span class="id" title="var">sent</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="validator_initial_not_sent" class="idref" href="#validator_initial_not_sent"><span class="id" title="lemma">validator_initial_not_sent</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="s:114" class="idref" href="#s:114"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:114"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">forall</span> <a id="m:115" class="idref" href="#m:115"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_sent"><span class="id" title="definition">validator_has_been_sent</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:114"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:115"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] <span class="id" title="var">Hinit</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">sent</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinit</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="validator_transition_updates_sent" class="idref" href="#validator_transition_updates_sent"><span class="id" title="lemma">validator_transition_updates_sent</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="l:116" class="idref" href="#l:116"><span class="id" title="binder">l</span></a> <a id="s:117" class="idref" href="#s:117"><span class="id" title="binder">s</span></a> <a id="im:118" class="idref" href="#im:118"><span class="id" title="binder">im</span></a> <a id="s':119" class="idref" href="#s':119"><span class="id" title="binder">s'</span></a> <a id="om:120" class="idref" href="#om:120"><span class="id" title="binder">om</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#l:116"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:117"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:118"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':119"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om:120"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="msg:121" class="idref" href="#msg:121"><span class="id" title="binder">msg</span></a>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_sent"><span class="id" title="definition">validator_has_been_sent</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':119"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:121"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om:120"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:121"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_sent"><span class="id" title="definition">validator_has_been_sent</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:117"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:121"><span class="id" title="variable">msg</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">im</span> <span class="id" title="var">s'</span> <span class="id" title="var">om</span> <span class="id" title="var">Htrans</span> <span class="id" title="var">msg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [[]|];[| |<span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>;<span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_sent_stepwise_props" class="idref" href="#validator_sent_stepwise_props"><span class="id" title="definition">validator_sent_stepwise_props</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_sent_stepwise_props"><span class="id" title="definition">has_been_sent_stepwise_props</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_sent"><span class="id" title="definition">validator_has_been_sent</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Equivocation.html#oracle_no_inits"><span class="id" title="projection">oracle_no_inits</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_initial_not_sent"><span class="id" title="lemma">validator_initial_not_sent</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Equivocation.html#oracle_step_update"><span class="id" title="projection">oracle_step_update</span></a> <a id="l:122" class="idref" href="#l:122"><span class="id" title="binder">l</span></a> <a id="s:123" class="idref" href="#s:123"><span class="id" title="binder">s</span></a> <a id="im:124" class="idref" href="#im:124"><span class="id" title="binder">im</span></a> <a id="s':125" class="idref" href="#s':125"><span class="id" title="binder">s'</span></a> <a id="om:126" class="idref" href="#om:126"><span class="id" title="binder">om</span></a> <a id="H:127" class="idref" href="#H:127"><span class="id" title="binder">H</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_transition_updates_sent"><span class="id" title="lemma">validator_transition_updates_sent</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#l:122"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:123"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:124"><span class="id" title="variable">im</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':125"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om:126"><span class="id" title="variable">om</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#H:127"><span class="id" title="variable">H</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="validator_has_been_sent_capability" class="idref" href="#validator_has_been_sent_capability"><span class="id" title="instance">validator_has_been_sent_capability</span></a> : <a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_sent_capability"><span class="id" title="class">has_been_sent_capability</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_sent_capability_from_stepwise"><span class="id" title="lemma">has_been_sent_capability_from_stepwise</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_sent_dec"><span class="id" title="definition">validator_has_been_sent_dec</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_sent_stepwise_props"><span class="id" title="definition">validator_sent_stepwise_props</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_has_been_observed" class="idref" href="#validator_has_been_observed"><span class="id" title="definition">validator_has_been_observed</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <a id="pat:132" class="idref" href="#pat:132"><span class="id" title="binder">'(</span></a><a id="pat:132" class="idref" href="#pat:132"><span class="id" title="binder">State</span></a> <a id="pat:132" class="idref" href="#pat:132"><span class="id" title="binder">_</span></a> <a id="pat:132" class="idref" href="#pat:132"><span class="id" title="binder">received</span></a> <a id="pat:132" class="idref" href="#pat:132"><span class="id" title="binder">_</span></a> <a id="pat:132" class="idref" href="#pat:132"><span class="id" title="binder">_</span></a><a id="pat:132" class="idref" href="#pat:132"><span class="id" title="binder">)</span></a> <a id="m:133" class="idref" href="#m:133"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:130"><span class="id" title="variable">m</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#received:128"><span class="id" title="variable">received</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_has_been_observed_dec" class="idref" href="#validator_has_been_observed_dec"><span class="id" title="definition">validator_has_been_observed_dec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_observed"><span class="id" title="definition">validator_has_been_observed</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">EqV</span> <span class="id" title="var">EqC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="keyword">fun</span> <a id="s:137" class="idref" href="#s:137"><span class="id" title="binder">s</span></a> <a id="m:138" class="idref" href="#m:138"><span class="id" title="binder">m</span></a> =&gt; <span class="id" title="keyword">let</span> '(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> <span class="id" title="var">_</span> <span class="id" title="var">received</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:134"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:135"><span class="id" title="variable">m</span></a> <span class="id" title="var">received</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="validator_initial_not_observed" class="idref" href="#validator_initial_not_observed"><span class="id" title="lemma">validator_initial_not_observed</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="s:140" class="idref" href="#s:140"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:140"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">forall</span> <a id="m:141" class="idref" href="#m:141"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_observed"><span class="id" title="definition">validator_has_been_observed</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:140"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:141"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] <span class="id" title="var">Hinit</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">received</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) <span class="id" title="keyword">as</span> -&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinit</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="validator_transition_updates_observed" class="idref" href="#validator_transition_updates_observed"><span class="id" title="lemma">validator_transition_updates_observed</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="l:142" class="idref" href="#l:142"><span class="id" title="binder">l</span></a> <a id="s:143" class="idref" href="#s:143"><span class="id" title="binder">s</span></a> <a id="im:144" class="idref" href="#im:144"><span class="id" title="binder">im</span></a> <a id="s':145" class="idref" href="#s':145"><span class="id" title="binder">s'</span></a> <a id="om:146" class="idref" href="#om:146"><span class="id" title="binder">om</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a>) <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#l:142"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:143"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:144"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':145"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om:146"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="msg:147" class="idref" href="#msg:147"><span class="id" title="binder">msg</span></a>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_observed"><span class="id" title="definition">validator_has_been_observed</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':145"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:147"><span class="id" title="variable">msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:144"><span class="id" title="variable">im</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:147"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om:146"><span class="id" title="variable">om</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:147"><span class="id" title="variable">msg</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_observed"><span class="id" title="definition">validator_has_been_observed</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:143"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msg:147"><span class="id" title="variable">msg</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">im</span> <span class="id" title="var">s'</span> <span class="id" title="var">om</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hvalid</span>]] <span class="id" title="var">Htrans</span>] <span class="id" title="var">msg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<span class="id" title="var">In</span> <span class="id" title="var">flip_condition</span>] <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l'</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span>;[<span class="id" title="var">exfalso</span>;<span class="id" title="tactic">assumption</span>|<span class="id" title="tactic">clear</span> <span class="id" title="var">Hvalid</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.ListSet.html#set_add_iff"><span class="id" title="lemma">set_add_iff</span></a>;<span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span>;[<span class="id" title="var">exfalso</span>;<span class="id" title="tactic">assumption</span>|<span class="id" title="tactic">clear</span> <span class="id" title="var">Hvalid</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span>;[|<span class="id" title="var">exfalso</span>;<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.ListSet.html#set_add_iff"><span class="id" title="lemma">set_add_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_observed_stepwise_props" class="idref" href="#validator_observed_stepwise_props"><span class="id" title="definition">validator_observed_stepwise_props</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Equivocation.html#oracle_stepwise_props"><span class="id" title="record">oracle_stepwise_props</span></a> (<span class="id" title="var">vlsm</span>:=<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a>) <a class="idref" href="CasperCBC.VLSM.Equivocation.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_observed"><span class="id" title="definition">validator_has_been_observed</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= {| <a class="idref" href="CasperCBC.VLSM.Equivocation.html#oracle_no_inits"><span class="id" title="projection">oracle_no_inits</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_initial_not_observed"><span class="id" title="lemma">validator_initial_not_observed</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Equivocation.html#oracle_step_update"><span class="id" title="projection">oracle_step_update</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_transition_updates_observed"><span class="id" title="lemma">validator_transition_updates_observed</span></a>|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="validator_has_been_observed_capability" class="idref" href="#validator_has_been_observed_capability"><span class="id" title="instance">validator_has_been_observed_capability</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_observed_capability"><span class="id" title="class">has_been_observed_capability</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_observed"><span class="id" title="method">has_been_observed</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_observed"><span class="id" title="definition">validator_has_been_observed</span></a>: <a class="idref" href="CasperCBC.VLSM.Equivocation.html#state_message_oracle"><span class="id" title="definition">state_message_oracle</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_observed_dec"><span class="id" title="method">has_been_observed_dec</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_has_been_observed_dec"><span class="id" title="definition">validator_has_been_observed_dec</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Equivocation.html#has_been_observed_stepwise_props"><span class="id" title="method">has_been_observed_stepwise_props</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_observed_stepwise_props"><span class="id" title="definition">validator_observed_stepwise_props</span></a> |}.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Define_Component"><span class="id" title="section">Define_Component</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab81"></a><h1 class="section">Composition and Proofs</h1>


<div class="paragraph"> </div>

This section defines the composed protocol,
and gives proofs about it.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="Protocol_Proofs" class="idref" href="#Protocol_Proofs"><span class="id" title="section">Protocol_Proofs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="C:148" class="idref" href="#C:148"><span class="id" title="binder">C</span></a> <a id="V:149" class="idref" href="#V:149"><span class="id" title="binder">V</span></a>:<span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="EqC:150" class="idref" href="#EqC:150"><span class="id" title="binder">EqC</span></a>: <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#C:148"><span class="id" title="variable">C</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="EqV:151" class="idref" href="#EqV:151"><span class="id" title="binder">EqV</span></a>: <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#V:149"><span class="id" title="variable">V</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c0:152" class="idref" href="#c0:152"><span class="id" title="binder">c0</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#C:148"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="plan:153" class="idref" href="#plan:153"><span class="id" title="binder">plan</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#V:149"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="plan_dec:154" class="idref" href="#plan_dec:154"><span class="id" title="binder">plan_dec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#RelDecision"><span class="id" title="class">RelDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#plan:153"><span class="id" title="variable">plan</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ClientState:155" class="idref" href="#ClientState:155"><span class="id" title="binder">ClientState</span></a> := <a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#justification"><span class="id" title="inductive">State.justification</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#C:148"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#V:149"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="estimator:156" class="idref" href="#estimator:156"><span class="id" title="binder">estimator</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#C:148"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#V:149"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#C:148"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="validator_list:157" class="idref" href="#validator_list:157"><span class="id" title="binder">validator_list</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#V:149"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="validators_finite:158" class="idref" href="#validators_finite:158"><span class="id" title="binder">validators_finite</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FinFun.html#Listing"><span class="id" title="definition">FinFun.Listing</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_list:157"><span class="id" title="variable">validator_list</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="v0:159" class="idref" href="#v0:159"><span class="id" title="binder">v0</span></a>:<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#V:149"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="IM" class="idref" href="#IM"><span class="id" title="definition">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="v:160" class="idref" href="#v:160"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Validator"><span class="id" title="definition">Validator</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.c0"><span class="id" title="variable">c0</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.plan"><span class="id" title="variable">plan</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.estimator"><span class="id" title="variable">estimator</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:160"><span class="id" title="variable">v</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="simple_liveness_VLSM" class="idref" href="#simple_liveness_VLSM"><span class="id" title="definition">simple_liveness_VLSM</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">Composition.composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.v0"><span class="id" title="variable">v0</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="message_time" class="idref" href="#message_time"><span class="id" title="definition">message_time</span></a> (<a id="m:161" class="idref" href="#m:161"><span class="id" title="binder">m</span></a>: <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="n:162" class="idref" href="#n:162"><span class="id" title="binder">n</span></a>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#m:161"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:162"><span class="id" title="variable">n</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab82"></a><h3 class="section">Constructing a variant to show that</h3>

      a component's clock eventually ticks.
   
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="message_slots_before" class="idref" href="#message_slots_before"><span class="id" title="definition">message_slots_before</span></a> (<a id="t:163" class="idref" href="#t:163"><span class="id" title="binder">t</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="pat:166" class="idref" href="#pat:166"><span class="id" title="binder">'(</span></a><a id="pat:166" class="idref" href="#pat:166"><span class="id" title="binder">n</span></a><a id="pat:166" class="idref" href="#pat:166"><span class="id" title="binder">,</span></a><a id="pat:166" class="idref" href="#pat:166"><span class="id" title="binder">v</span></a><a id="pat:166" class="idref" href="#pat:166"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.plan"><span class="id" title="variable">plan</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:165"><span class="id" title="variable">n</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:164"><span class="id" title="variable">v</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.ListSet.html#set_prod"><span class="id" title="definition">set_prod</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0 <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:163"><span class="id" title="variable">t</span></a>) <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.validator_list"><span class="id" title="variable">validator_list</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="received_message_slots" class="idref" href="#received_message_slots"><span class="id" title="definition">received_message_slots</span></a> (<a id="msgs:167" class="idref" href="#msgs:167"><span class="id" title="binder">msgs</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">'(</span></a><a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">Msg</span></a> <a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">_</span></a> <a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">_</span></a> <a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">n</span></a> <a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">_</span></a> <a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">v</span></a> <a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">_</span></a><a id="pat:170" class="idref" href="#pat:170"><span class="id" title="binder">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#n:169"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:168"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#msgs:167"><span class="id" title="variable">msgs</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="unreceived_message_count_before" class="idref" href="#unreceived_message_count_before"><span class="id" title="definition">unreceived_message_count_before</span></a> (<a id="t:171" class="idref" href="#t:171"><span class="id" title="binder">t</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="s:172" class="idref" href="#s:172"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">msgs</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:172"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="received:174" class="idref" href="#received:174"><span class="id" title="binder">received</span></a> := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#received_message_slots"><span class="id" title="definition">received_message_slots</span></a> <span class="id" title="var">msgs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="slot:175" class="idref" href="#slot:175"><span class="id" title="binder">slot</span></a> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#decide_eq"><span class="id" title="abbreviation">decide_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#slot:175"><span class="id" title="variable">slot</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#received:174"><span class="id" title="variable">received</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#message_slots_before"><span class="id" title="definition">message_slots_before</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:171"><span class="id" title="variable">t</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_ticks_before" class="idref" href="#validator_ticks_before"><span class="id" title="definition">validator_ticks_before</span></a> (<a id="t:176" class="idref" href="#t:176"><span class="id" title="binder">t</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="s:177" class="idref" href="#s:177"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#State"><span class="id" title="constructor">State</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">time</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) := <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:177"><span class="id" title="variable">s</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:176"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">time</span>.<br/>

<br/>
</div>

<div class="doc">
The component variant is an upper bound on the number of transitions the component
      can take before its clock exceeds <tt>t</tt>, by counting the number of plan
      slots for which it hasn't sent or received a message, and the number
      of times it can tick.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="validator_variant" class="idref" href="#validator_variant"><span class="id" title="definition">validator_variant</span></a> (<a id="t:179" class="idref" href="#t:179"><span class="id" title="binder">t</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="s:180" class="idref" href="#s:180"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_state"><span class="id" title="inductive">validator_state</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#unreceived_message_count_before"><span class="id" title="definition">unreceived_message_count_before</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:179"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:180"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_ticks_before"><span class="id" title="definition">validator_ticks_before</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:179"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:180"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:181" class="idref" href="#constraint:181"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Liveness.html#no_synch_faults_no_equivocation_constraint"><span class="id" title="definition">no_synch_faults_no_equivocation_constraint</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.validators_finite"><span class="id" title="variable">validators_finite</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_clock"><span class="id" title="definition">validator_clock</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.c0"><span class="id" title="variable">c0</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.plan"><span class="id" title="variable">plan</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.estimator"><span class="id" title="variable">estimator</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#message_time"><span class="id" title="definition">message_time</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:182" class="idref" href="#X:182"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_message"><span class="id" title="inductive">validator_message</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.C"><span class="id" title="variable">C</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.V"><span class="id" title="variable">V</span></a>) := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.v0"><span class="id" title="variable">v0</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#constraint:181"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
The overall variant used to show a given component eventually
      ticks adds up the bound for each component.
      To show that a given component eventually reaches a time <tt>t0</tt>,
      an argument about the structure of the plan
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="eventually_ticks_variant" class="idref" href="#eventually_ticks_variant"><span class="id" title="definition">eventually_ticks_variant</span></a> <a id="t:183" class="idref" href="#t:183"><span class="id" title="binder">t</span></a> (<a id="s:184" class="idref" href="#s:184"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.X"><span class="id" title="variable">X</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#list_sum"><span class="id" title="definition">list_sum</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="v:185" class="idref" href="#v:185"><span class="id" title="binder">v</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_variant"><span class="id" title="definition">validator_variant</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:183"><span class="id" title="variable">t</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:184"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:185"><span class="id" title="variable">v</span></a>)) <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.validator_list"><span class="id" title="variable">validator_list</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_variant_progress" class="idref" href="#state_update_variant_progress"><span class="id" title="lemma">state_update_variant_progress</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="t:186" class="idref" href="#t:186"><span class="id" title="binder">t</span></a> <a id="s:187" class="idref" href="#s:187"><span class="id" title="binder">s</span></a> <a id="i:188" class="idref" href="#i:188"><span class="id" title="binder">i</span></a> <a id="si':189" class="idref" href="#si':189"><span class="id" title="binder">si'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_variant"><span class="id" title="definition">validator_variant</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:186"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#si':189"><span class="id" title="variable">si'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_variant"><span class="id" title="definition">validator_variant</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:186"><span class="id" title="variable">t</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:187"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#i:188"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#eventually_ticks_variant"><span class="id" title="definition">eventually_ticks_variant</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:186"><span class="id" title="variable">t</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:187"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#i:188"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#si':189"><span class="id" title="variable">si'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#eventually_ticks_variant"><span class="id" title="definition">eventually_ticks_variant</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:186"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:187"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">validators_finite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">si'</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">s'</span> := <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">si'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <a id="v:191" class="idref" href="#v:191"><span class="id" title="binder">v</span></a>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_variant"><span class="id" title="definition">validator_variant</span></a> <span class="id" title="var">t</span> (<span class="id" title="var">s'</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:190"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_variant"><span class="id" title="definition">validator_variant</span></a> <span class="id" title="var">t</span> (<span class="id" title="var">s</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:190"><span class="id" title="variable">v</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s'</span>,<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.PeanoNat.html#Nat.lt_le_incl"><span class="id" title="lemma">PeanoNat.Nat.lt_le_incl</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#le_n"><span class="id" title="constructor">le_n</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#eventually_ticks_variant"><span class="id" title="definition">eventually_ticks_variant</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">i</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.validator_list"><span class="id" title="variable">validator_list</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.validators_finite"><span class="id" title="variable">validators_finite</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">X</span> <span class="id" title="var">constraint</span> <span class="id" title="var">validators_finite</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.validator_list"><span class="id" title="variable">validator_list</span></a>;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [-&gt;|<span class="id" title="var">Hin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.PeanoNat.html#Nat.add_lt_le_mono"><span class="id" title="lemma">PeanoNat.Nat.add_lt_le_mono</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">replace</span> (<span class="id" title="var">s'</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">si'</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s'</span>,<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>));[|<span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">clear</span> -<span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">a</span> <span class="id" title="var">l'</span>];<span class="id" title="tactic">simpl</span>;[|<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span>)];<span class="id" title="var">Lia.lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.PeanoNat.html#Nat.add_le_lt_mono"><span class="id" title="lemma">PeanoNat.Nat.add_le_lt_mono</span></a>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;this&nbsp;property&nbsp;will&nbsp;not&nbsp;actually&nbsp;be&nbsp;true&nbsp;until<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;we&nbsp;add&nbsp;a&nbsp;restriction&nbsp;about&nbsp;waiting&nbsp;for&nbsp;expected&nbsp;messages<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;synchronization&nbsp;constraint&nbsp;and&nbsp;the&nbsp;validator&nbsp;definition.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perhaps&nbsp;this&nbsp;will&nbsp;also&nbsp;need&nbsp;to&nbsp;use&nbsp;a&nbsp;later&nbsp;time&nbsp;than&nbsp;&lt;&lt;&lt;=&nbsp;t&gt;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;&lt;&lt;H_times&gt;&gt;&nbsp;and&nbsp;the&nbsp;conclusion,&nbsp;depending&nbsp;how&nbsp;closely&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modified&nbsp;conditions&nbsp;will&nbsp;keep&nbsp;the&nbsp;times&nbsp;of&nbsp;different&nbsp;nodes.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="early_validator_limits_clock_advance" class="idref" href="#early_validator_limits_clock_advance"><span class="id" title="lemma">early_validator_limits_clock_advance</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="v:192" class="idref" href="#v:192"><span class="id" title="binder">v</span></a> <a id="t:193" class="idref" href="#t:193"><span class="id" title="binder">t</span></a> (<a id="s:194" class="idref" href="#s:194"><span class="id" title="binder">s</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="H_time:195" class="idref" href="#H_time:195"><span class="id" title="binder">H_time</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_time"><span class="id" title="definition">validator_time</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:194"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:192"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:193"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="H_plan:196" class="idref" href="#H_plan:196"><span class="id" title="binder">H_plan</span></a> : <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.plan"><span class="id" title="variable">plan</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:193"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#v:192"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="H_times:198" class="idref" href="#H_times:198"><span class="id" title="binder">H_times</span></a> : <span class="id" title="keyword">forall</span> <a id="i:197" class="idref" href="#i:197"><span class="id" title="binder">i</span></a>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_time"><span class="id" title="definition">validator_time</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:194"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#i:197"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:193"><span class="id" title="variable">t</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="l:199" class="idref" href="#l:199"><span class="id" title="binder">l</span></a> <a id="im:200" class="idref" href="#im:200"><span class="id" title="binder">im</span></a> <a id="s':201" class="idref" href="#s':201"><span class="id" title="binder">s'</span></a> <a id="om:202" class="idref" href="#om:202"><span class="id" title="binder">om</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#l:199"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:194"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:200"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':201"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om:202"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="i:203" class="idref" href="#i:203"><span class="id" title="binder">i</span></a>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_time"><span class="id" title="definition">validator_time</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':201"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#i:203"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:193"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
If all validator clock are below the time used in the
      variant, the the variant decreases.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="eventually_ticks_variant_progress" class="idref" href="#eventually_ticks_variant_progress"><span class="id" title="lemma">eventually_ticks_variant_progress</span></a> <a id="t:204" class="idref" href="#t:204"><span class="id" title="binder">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:205" class="idref" href="#l:205"><span class="id" title="binder">l</span></a> (<a id="s:206" class="idref" href="#s:206"><span class="id" title="binder">s</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.X"><span class="id" title="variable">X</span></a>) <a id="im:207" class="idref" href="#im:207"><span class="id" title="binder">im</span></a> <a id="s':208" class="idref" href="#s':208"><span class="id" title="binder">s'</span></a> <a id="om:209" class="idref" href="#om:209"><span class="id" title="binder">om</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="H_times:211" class="idref" href="#H_times:211"><span class="id" title="binder">H_times</span></a> : <span class="id" title="keyword">forall</span> <a id="i:210" class="idref" href="#i:210"><span class="id" title="binder">i</span></a>, <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_time"><span class="id" title="definition">validator_time</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:206"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#i:210"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:204"><span class="id" title="variable">t</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#l:205"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:206"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#im:207"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':208"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#om:209"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#eventually_ticks_variant"><span class="id" title="definition">eventually_ticks_variant</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:204"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s':208"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#eventually_ticks_variant"><span class="id" title="definition">eventually_ticks_variant</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#t:204"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#s:206"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">li</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">om</span> <span class="id" title="var">into</span> <span class="id" title="var">_om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">li</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">im</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">li</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">c</span>|]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;When&nbsp;sending&nbsp;a&nbsp;message,&nbsp;the&nbsp;sender&nbsp;recording&nbsp;their<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;own&nbsp;message&nbsp;decreases&nbsp;the&nbsp;number&nbsp;of&nbsp;unreceived&nbsp;slots<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;their&nbsp;own&nbsp;variant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#state_update_variant_progress"><span class="id" title="lemma">state_update_variant_progress</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_variant"><span class="id" title="definition">validator_variant</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_ticks_before"><span class="id" title="definition">validator_ticks_before</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.Plus.html#plus_lt_compat_r"><span class="id" title="lemma">Plus.plus_lt_compat_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;will&nbsp;need&nbsp;to&nbsp;rely&nbsp;on&nbsp;an&nbsp;invariant&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conclude&nbsp;that&nbsp;received&nbsp;can't&nbsp;already&nbsp;have&nbsp;a<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;for&nbsp;the&nbsp;slot&nbsp;(time,i)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;finish&nbsp;this&nbsp;inequality&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;A&nbsp;node&nbsp;ticking&nbsp;decreases&nbsp;the&nbsp;clock-based&nbsp;apart<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;variant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#state_update_variant_progress"><span class="id" title="lemma">state_update_variant_progress</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H_times</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>, <span class="id" title="var">H_times</span>, <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_variant"><span class="id" title="definition">validator_variant</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_ticks_before"><span class="id" title="definition">validator_ticks_before</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.Plus.html#plus_lt_compat_l"><span class="id" title="lemma">Plus.plus_lt_compat_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;Receiving&nbsp;a&nbsp;message&nbsp;fills&nbsp;one&nbsp;of&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receivers&nbsp;slots&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#state_update_variant_progress"><span class="id" title="lemma">state_update_variant_progress</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="comment">(*&nbsp;input&nbsp;message&nbsp;cannot&nbsp;be&nbsp;None&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> [<span class="id" title="var">Hcomponent_valid</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hcomponent_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">H_transition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#validator_variant"><span class="id" title="definition">validator_variant</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.Plus.html#plus_lt_compat_r"><span class="id" title="lemma">Plus.plus_lt_compat_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;will&nbsp;need&nbsp;to&nbsp;rely&nbsp;on&nbsp;an&nbsp;invariant&nbsp;to<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conclude&nbsp;that&nbsp;received&nbsp;can't&nbsp;already&nbsp;have&nbsp;a<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message&nbsp;for&nbsp;the&nbsp;slot&nbsp;(time,i)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;finish&nbsp;this&nbsp;inequality&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Admitted</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#Protocol_Proofs"><span class="id" title="section">Protocol_Proofs</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>

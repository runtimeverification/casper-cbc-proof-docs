<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FinFun.html#"><span class="id" title="library">Coq.Logic.FinFun</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.Epsilon.html#"><span class="id" title="library">Logic.Epsilon</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.Compare_dec.html#"><span class="id" title="library">Coq.Arith.Compare_dec</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">List</span> <span class="id" title="var">Notations</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CasperCBC</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Preamble.html#"><span class="id" title="library">Lib.Preamble</span></a> <a class="idref" href="CasperCBC.Lib.ListExtras.html#"><span class="id" title="library">Lib.ListExtras</span></a> <a class="idref" href="CasperCBC.Lib.ListSetExtras.html#"><span class="id" title="library">Lib.ListSetExtras</span></a> <a class="idref" href="CasperCBC.Lib.RealsExtras.html#"><span class="id" title="library">Lib.RealsExtras</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.CBC.Protocol.html#"><span class="id" title="library">CBC.Protocol</span></a> <a class="idref" href="CasperCBC.CBC.Common.html#"><span class="id" title="library">CBC.Common</span></a> <a class="idref" href="CasperCBC.CBC.Definitions.html#"><span class="id" title="library">CBC.Definitions</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#"><span class="id" title="library">VLSM.Common</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#"><span class="id" title="library">VLSM.Composition</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#"><span class="id" title="library">VLSM.ProjectionTraces</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;3.1&nbsp;Decisions&nbsp;on&nbsp;consensus&nbsp;values&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Need&nbsp;to&nbsp;add&nbsp;consensus&nbsp;values&nbsp;(and&nbsp;decision&nbsp;functions)&nbsp;to&nbsp;VLSM&nbsp;definitions?&nbsp;*)</span><br/>
<span class="id" title="keyword">Class</span> <a id="consensus_values" class="idref" href="#consensus_values"><span class="id" title="record">consensus_values</span></a> :=<br/>
&nbsp;&nbsp;{ <a id="C" class="idref" href="#C"><span class="id" title="projection">C</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="about_C" class="idref" href="#about_C"><span class="id" title="projection">about_C</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="c1:3" class="idref" href="#c1:3"><span class="id" title="binder">c1</span></a> <a id="c2:4" class="idref" href="#c2:4"><span class="id" title="binder">c2</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C:2"><span class="id" title="method">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:3"><span class="id" title="variable">c1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:4"><span class="id" title="variable">c2</span></a>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="decision" class="idref" href="#decision"><span class="id" title="definition">decision</span></a> {<a id="message:6" class="idref" href="#message:6"><span class="id" title="binder">message</span></a>} (<a id="T:7" class="idref" href="#T:7"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#message:6"><span class="id" title="variable">message</span></a>) {<a id="CV:8" class="idref" href="#CV:8"><span class="id" title="binder">CV</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#consensus_values"><span class="id" title="class">consensus_values</span></a>}<br/>
&nbsp;&nbsp;:= @<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#T:7"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="vdecision" class="idref" href="#vdecision"><span class="id" title="definition">vdecision</span></a> {<a id="message:9" class="idref" href="#message:9"><span class="id" title="binder">message</span></a>} (<a id="V:10" class="idref" href="#V:10"><span class="id" title="binder">V</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#message:9"><span class="id" title="variable">message</span></a>) {<a id="CV:11" class="idref" href="#CV:11"><span class="id" title="binder">CV</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#consensus_values"><span class="id" title="class">consensus_values</span></a>}<br/>
&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Decisions.html#decision"><span class="id" title="definition">decision</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#V:10"><span class="id" title="variable">V</span></a>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="CommuteSingleton" class="idref" href="#CommuteSingleton"><span class="id" title="section">CommuteSingleton</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:12" class="idref" href="#message:12"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="CV:13" class="idref" href="#CV:13"><span class="id" title="binder">CV</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#consensus_values"><span class="id" title="class">consensus_values</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="V:14" class="idref" href="#V:14"><span class="id" title="binder">V</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#message:12"><span class="id" title="variable">message</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;3.2.1&nbsp;Decision&nbsp;finality&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Definition&nbsp;of&nbsp;finality&nbsp;per&nbsp;document.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="final_original" class="idref" href="#final_original"><span class="id" title="definition">final_original</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="D:15" class="idref" href="#D:15"><span class="id" title="binder">D</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>) =&gt; <span class="id" title="keyword">forall</span> (<a id="tr:16" class="idref" href="#tr:16"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n1:17" class="idref" href="#n1:17"><span class="id" title="binder">n1</span></a> <a id="n2:18" class="idref" href="#n2:18"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="s1:19" class="idref" href="#s1:19"><span class="id" title="binder">s1</span></a> <a id="s2:20" class="idref" href="#s2:20"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="c1:21" class="idref" href="#c1:21"><span class="id" title="binder">c1</span></a> <a id="c2:22" class="idref" href="#c2:22"><span class="id" title="binder">c2</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:16"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#n1:17"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:19"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:16"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#n2:18"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:20"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Decisions.html#D:15"><span class="id" title="variable">D</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:19"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:21"><span class="id" title="variable">c1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Decisions.html#D:15"><span class="id" title="variable">D</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:20"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:22"><span class="id" title="variable">c2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:21"><span class="id" title="variable">c1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:22"><span class="id" title="variable">c2</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Definition&nbsp;of&nbsp;finality&nbsp;using&nbsp;in_futures,&nbsp;which&nbsp;plays&nbsp;better&nbsp;with&nbsp;the&nbsp;estimator&nbsp;property&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="final" class="idref" href="#final"><span class="id" title="definition">final</span></a>: <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="D:23" class="idref" href="#D:23"><span class="id" title="binder">D</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>) =&gt; <span class="id" title="keyword">forall</span> (<a id="s1:24" class="idref" href="#s1:24"><span class="id" title="binder">s1</span></a> <a id="s2:25" class="idref" href="#s2:25"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>) (<a id="c1:26" class="idref" href="#c1:26"><span class="id" title="binder">c1</span></a> <a id="c2:27" class="idref" href="#c2:27"><span class="id" title="binder">c2</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:24"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:25"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Decisions.html#D:23"><span class="id" title="variable">D</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:24"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:26"><span class="id" title="variable">c1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Decisions.html#D:23"><span class="id" title="variable">D</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:25"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:27"><span class="id" title="variable">c2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:26"><span class="id" title="variable">c1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:27"><span class="id" title="variable">c2</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;3.3.1&nbsp;Initial&nbsp;protocol&nbsp;state&nbsp;bivalence&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="bivalent" class="idref" href="#bivalent"><span class="id" title="definition">bivalent</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="D:28" class="idref" href="#D:28"><span class="id" title="binder">D</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;All&nbsp;initial&nbsp;states&nbsp;decide&nbsp;on&nbsp;None&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> (<a id="s0:29" class="idref" href="#s0:29"><span class="id" title="binder">s0</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s0:29"><span class="id" title="variable">s0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#D:28"><span class="id" title="variable">D</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s0:29"><span class="id" title="variable">s0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Every&nbsp;protocol&nbsp;trace&nbsp;(already&nbsp;beginning&nbsp;from&nbsp;an&nbsp;initial&nbsp;state)&nbsp;contains&nbsp;a&nbsp;state&nbsp;deciding&nbsp;on&nbsp;each&nbsp;consensus&nbsp;value&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> (<a id="c:30" class="idref" href="#c:30"><span class="id" title="binder">c</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>) ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:31" class="idref" href="#tr:31"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>) (<a id="s:32" class="idref" href="#s:32"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="n:33" class="idref" href="#n:33"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:31"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#n:33"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s:32"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#D:28"><span class="id" title="variable">D</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s:32"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:30"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;3.3.2&nbsp;No&nbsp;stuck&nbsp;states&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="stuck_free" class="idref" href="#stuck_free"><span class="id" title="definition">stuck_free</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="D:34" class="idref" href="#D:34"><span class="id" title="binder">D</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> (<a id="s:35" class="idref" href="#s:35"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:36" class="idref" href="#tr:36"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="decided_state:37" class="idref" href="#decided_state:37"><span class="id" title="binder">decided_state</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n_s:38" class="idref" href="#n_s:38"><span class="id" title="binder">n_s</span></a> <a id="n_decided:39" class="idref" href="#n_decided:39"><span class="id" title="binder">n_decided</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c:40" class="idref" href="#c:40"><span class="id" title="binder">c</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:36"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#n_s:38"><span class="id" title="variable">n_s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s:35"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:36"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#n_decided:39"><span class="id" title="variable">n_decided</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#decided_state:37"><span class="id" title="variable">decided_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#n_decided:39"><span class="id" title="variable">n_decided</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">&gt;=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#n_s:38"><span class="id" title="variable">n_s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#D:34"><span class="id" title="variable">D</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#decided_state:37"><span class="id" title="variable">decided_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:40"><span class="id" title="variable">c</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;3.3.3&nbsp;Protocol&nbsp;definition&nbsp;symmetry&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;How&nbsp;do&nbsp;we&nbsp;formalize&nbsp;this&nbsp;property&nbsp;set-theoretically?&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="behavior" class="idref" href="#behavior"><span class="id" title="definition">behavior</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="symmetric" class="idref" href="#symmetric"><span class="id" title="definition">symmetric</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="D:41" class="idref" href="#D:41"><span class="id" title="binder">D</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="f:42" class="idref" href="#f:42"><span class="id" title="binder">f</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton.V"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#behavior"><span class="id" title="definition">behavior</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#D:41"><span class="id" title="variable">D</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#behavior"><span class="id" title="definition">behavior</span></a> (<a class="idref" href="CasperCBC.VLSM.Decisions.html#f:42"><span class="id" title="variable">f</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#D:41"><span class="id" title="variable">D</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteSingleton"><span class="id" title="section">CommuteSingleton</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="CommuteIndexed" class="idref" href="#CommuteIndexed"><span class="id" title="section">CommuteIndexed</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="CV:43" class="idref" href="#CV:43"><span class="id" title="binder">CV</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#consensus_values"><span class="id" title="class">consensus_values</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:44" class="idref" href="#message:44"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="index:45" class="idref" href="#index:45"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="Heqd:46" class="idref" href="#Heqd:46"><span class="id" title="binder">Heqd</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:45"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IM:47" class="idref" href="#IM:47"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:45"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#message:44"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hi:48" class="idref" href="#Hi:48"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:45"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:49" class="idref" href="#constraint:49"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:47"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:47"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#message:44"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:50" class="idref" href="#X:50"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:47"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Hi:48"><span class="id" title="variable">Hi</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#constraint:49"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ID:52" class="idref" href="#ID:52"><span class="id" title="binder">ID</span></a> : <span class="id" title="keyword">forall</span> <a id="i:51" class="idref" href="#i:51"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:45"><span class="id" title="variable">index</span></a>, <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> (<a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:47"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:51"><span class="id" title="variable">i</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;**&nbsp;Decision&nbsp;consistency<br/>
<br/>
&nbsp;&nbsp;First,&nbsp;let&nbsp;us&nbsp;introduce&nbsp;a&nbsp;definition&nbsp;of&nbsp;consistency&nbsp;which<br/>
&nbsp;&nbsp;looks&nbsp;at&nbsp;states&nbsp;as&nbsp;belonging&nbsp;to&nbsp;a&nbsp;trace.<br/>
&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="consistent_original" class="idref" href="#consistent_original"><span class="id" title="definition">consistent_original</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:53" class="idref" href="#tr:53"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n1:54" class="idref" href="#n1:54"><span class="id" title="binder">n1</span></a> <a id="n2:55" class="idref" href="#n2:55"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="j:56" class="idref" href="#j:56"><span class="id" title="binder">j</span></a> <a id="k:57" class="idref" href="#k:57"><span class="id" title="binder">k</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.index"><span class="id" title="variable">index</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="s1:58" class="idref" href="#s1:58"><span class="id" title="binder">s1</span></a> <a id="s2:59" class="idref" href="#s2:59"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="c1:60" class="idref" href="#c1:60"><span class="id" title="binder">c1</span></a> <a id="c2:61" class="idref" href="#c2:61"><span class="id" title="binder">c2</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#j:56"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#k:57"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:53"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#n1:54"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:58"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:53"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#n2:55"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:59"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#j:56"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:58"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#j:56"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:60"><span class="id" title="variable">c1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#k:57"><span class="id" title="variable">k</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:59"><span class="id" title="variable">s2</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#k:57"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:61"><span class="id" title="variable">c2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:60"><span class="id" title="variable">c1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:61"><span class="id" title="variable">c2</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

  Now let us give an alternative definition based on <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a></span>:
  
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="consistent" class="idref" href="#consistent"><span class="id" title="definition">consistent</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:62" class="idref" href="#s1:62"><span class="id" title="binder">s1</span></a> <a id="s2:63" class="idref" href="#s2:63"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfuture:64" class="idref" href="#Hfuture:64"><span class="id" title="binder">Hfuture</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:62"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:63"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:65" class="idref" href="#j:65"><span class="id" title="binder">j</span></a> <a id="k:66" class="idref" href="#k:66"><span class="id" title="binder">k</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hneq:67" class="idref" href="#Hneq:67"><span class="id" title="binder">Hneq</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#j:65"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#k:66"><span class="id" title="variable">k</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c1:68" class="idref" href="#c1:68"><span class="id" title="binder">c1</span></a> <a id="c2:69" class="idref" href="#c2:69"><span class="id" title="binder">c2</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HDecided1:70" class="idref" href="#HDecided1:70"><span class="id" title="binder">HDecided1</span></a> : (<a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#j:65"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:62"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#j:65"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:68"><span class="id" title="variable">c1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HDecided2:71" class="idref" href="#HDecided2:71"><span class="id" title="binder">HDecided2</span></a> : (<a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#k:66"><span class="id" title="variable">k</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:63"><span class="id" title="variable">s2</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#k:66"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:69"><span class="id" title="variable">c2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, <a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:68"><span class="id" title="variable">c1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:69"><span class="id" title="variable">c2</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Next two results show that the two definitions above are equivalent.
  
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="consistent_to_original" class="idref" href="#consistent_to_original"><span class="id" title="lemma">consistent_to_original</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hconsistent:72" class="idref" href="#Hconsistent:72"><span class="id" title="binder">Hconsistent</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#consistent"><span class="id" title="definition">consistent</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Decisions.html#consistent_original"><span class="id" title="definition">consistent_original</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span> <span class="id" title="var">HD1</span> <span class="id" title="var">HD2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.Compare_dec.html#le_lt_dec"><span class="id" title="definition">le_lt_dec</span></a> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness_reverse"><span class="id" title="lemma">in_futures_witness_reverse</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">tr</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">l</span> <span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hfutures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hconsistent</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hfutures</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span> <span class="id" title="var">HD1</span> <span class="id" title="var">HD2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hle</span> : <span class="id" title="var">n2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">n1</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness_reverse"><span class="id" title="lemma">in_futures_witness_reverse</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s2</span> <span class="id" title="var">s1</span> <span class="id" title="var">tr</span> <span class="id" title="var">n2</span> <span class="id" title="var">n1</span> <span class="id" title="var">Hle</span> <span class="id" title="var">Hs2</span> <span class="id" title="var">Hs1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hfutures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hneq'</span> : <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">j</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">elim</span> <span class="id" title="var">Hneq</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hconsistent</span> <span class="id" title="var">s2</span> <span class="id" title="var">s1</span> <span class="id" title="var">Hfutures</span> <span class="id" title="var">k</span> <span class="id" title="var">j</span> <span class="id" title="var">Hneq'</span> <span class="id" title="var">c2</span> <span class="id" title="var">c1</span> <span class="id" title="var">HD2</span> <span class="id" title="var">HD1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="original_to_consistent" class="idref" href="#original_to_consistent"><span class="id" title="lemma">original_to_consistent</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Horiginal:73" class="idref" href="#Horiginal:73"><span class="id" title="binder">Horiginal</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#consistent_original"><span class="id" title="definition">consistent_original</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Decisions.html#consistent"><span class="id" title="definition">consistent</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#consistent"><span class="id" title="definition">consistent</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness"><span class="id" title="lemma">in_futures_witness</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hfuture</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">n1</span> [<span class="id" title="var">n2</span> [<span class="id" title="var">Hle</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Horiginal</span> <span class="id" title="var">tr</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span> <span class="id" title="var">HDecided1</span> <span class="id" title="var">HDecided2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The following is an attempt to include finality in the definition of consistency by dropping the requirement
      that (j &lt;&gt; k). 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="final_and_consistent" class="idref" href="#final_and_consistent"><span class="id" title="definition">final_and_consistent</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:74" class="idref" href="#s1:74"><span class="id" title="binder">s1</span></a> <a id="s2:75" class="idref" href="#s2:75"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfuture:76" class="idref" href="#Hfuture:76"><span class="id" title="binder">Hfuture</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:74"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:75"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:77" class="idref" href="#j:77"><span class="id" title="binder">j</span></a> <a id="k:78" class="idref" href="#k:78"><span class="id" title="binder">k</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c1:79" class="idref" href="#c1:79"><span class="id" title="binder">c1</span></a> <a id="c2:80" class="idref" href="#c2:80"><span class="id" title="binder">c2</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HDecided1:81" class="idref" href="#HDecided1:81"><span class="id" title="binder">HDecided1</span></a> : (<a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#j:77"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#s1:74"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#j:77"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:79"><span class="id" title="variable">c1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HDecided2:82" class="idref" href="#HDecided2:82"><span class="id" title="binder">HDecided2</span></a> : (<a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#k:78"><span class="id" title="variable">k</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#s2:75"><span class="id" title="variable">s2</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#k:78"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:80"><span class="id" title="variable">c2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, <a class="idref" href="CasperCBC.VLSM.Decisions.html#c1:79"><span class="id" title="variable">c1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c2:80"><span class="id" title="variable">c2</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="final_and_consistent_implies_final" class="idref" href="#final_and_consistent_implies_final"><span class="id" title="lemma">final_and_consistent_implies_final</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hcons:83" class="idref" href="#Hcons:83"><span class="id" title="binder">Hcons</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#final_and_consistent"><span class="id" title="definition">final_and_consistent</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:84" class="idref" href="#i:84"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfr:85" class="idref" href="#Hfr:85"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_projection_friendly"><span class="id" title="definition">finite_projection_friendly</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.Hi"><span class="id" title="variable">Hi</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:84"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Decisions.html#final"><span class="id" title="definition">final</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.Hi"><span class="id" title="variable">Hi</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:84"><span class="id" title="variable">i</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:84"><span class="id" title="variable">i</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span> <span class="id" title="var">Hfuturesi</span> <span class="id" title="var">HD1</span> <span class="id" title="var">HD2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#projection_friendly_in_futures"><span class="id" title="lemma">projection_friendly_in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.Hi"><span class="id" title="variable">Hi</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.constraint"><span class="id" title="variable">constraint</span></a> <span class="id" title="var">i</span> <span class="id" title="var">Hfr</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hfuturesi</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> [<span class="id" title="var">sX1</span> [<span class="id" title="var">sX2</span> [<span class="id" title="var">Hs1</span> [<span class="id" title="var">Hs2</span> <span class="id" title="var">HfuturesX</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hcons</span> <span class="id" title="var">sX1</span> <span class="id" title="var">sX2</span> <span class="id" title="var">HfuturesX</span> <span class="id" title="var">i</span> <span class="id" title="var">i</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span> <span class="id" title="var">HD1</span> <span class="id" title="var">HD2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="final_and_consistent_implies_consistent" class="idref" href="#final_and_consistent_implies_consistent"><span class="id" title="lemma">final_and_consistent_implies_consistent</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hcons:86" class="idref" href="#Hcons:86"><span class="id" title="binder">Hcons</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#final_and_consistent"><span class="id" title="definition">final_and_consistent</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Decisions.html#consistent"><span class="id" title="definition">consistent</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#consistent"><span class="id" title="definition">consistent</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hcons</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hfuture</span> <span class="id" title="var">j</span> <span class="id" title="var">k</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span> <span class="id" title="var">HDecided1</span> <span class="id" title="var">HDecided2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="live" class="idref" href="#live"><span class="id" title="definition">live</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:87" class="idref" href="#tr:87"><span class="id" title="binder">tr</span></a> : @<a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#complete_trace_prop"><span class="id" title="definition">complete_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:87"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="s:88" class="idref" href="#s:88"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a>) (<a id="n:89" class="idref" href="#n:89"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="i:90" class="idref" href="#i:90"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.index"><span class="id" title="variable">index</span></a>) (<a id="c:91" class="idref" href="#c:91"><span class="id" title="binder">c</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_nth"><span class="id" title="definition">trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#tr:87"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#n:89"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s:88"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:90"><span class="id" title="variable">i</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#s:88"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:90"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:91"><span class="id" title="variable">c</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#CommuteIndexed"><span class="id" title="section">CommuteIndexed</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Section&nbsp;5&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Estimators" class="idref" href="#Estimators"><span class="id" title="section">Estimators</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="CV:92" class="idref" href="#CV:92"><span class="id" title="binder">CV</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#consensus_values"><span class="id" title="class">consensus_values</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:93" class="idref" href="#message:93"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:94" class="idref" href="#X:94"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#message:93"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="D:95" class="idref" href="#D:95"><span class="id" title="binder">D</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#X:94"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="E:96" class="idref" href="#E:96"><span class="id" title="binder">E</span></a> : <a class="idref" href="CasperCBC.CBC.Common.html#Estimator"><span class="id" title="class">Estimator</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#X:94"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="estimates:97" class="idref" href="#estimates:97"><span class="id" title="binder">estimates</span></a> := @<a class="idref" href="CasperCBC.CBC.Common.html#estimator"><span class="id" title="method">estimator</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#E:96"><span class="id" title="variable">E</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decision_estimator_property" class="idref" href="#decision_estimator_property"><span class="id" title="definition">decision_estimator_property</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sigma:98" class="idref" href="#sigma:98"><span class="id" title="binder">sigma</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c:99" class="idref" href="#c:99"><span class="id" title="binder">c</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HD:100" class="idref" href="#HD:100"><span class="id" title="binder">HD</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.D"><span class="id" title="variable">D</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#sigma:98"><span class="id" title="variable">sigma</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:99"><span class="id" title="variable">c</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sigma':101" class="idref" href="#sigma':101"><span class="id" title="binder">sigma'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hreach:102" class="idref" href="#Hreach:102"><span class="id" title="binder">Hreach</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#sigma:98"><span class="id" title="variable">sigma</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#sigma':101"><span class="id" title="variable">sigma'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c':103" class="idref" href="#c':103"><span class="id" title="binder">c'</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hc':104" class="idref" href="#Hc':104"><span class="id" title="binder">Hc'</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.estimates"><span class="id" title="variable">estimates</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#sigma':101"><span class="id" title="variable">sigma'</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c':103"><span class="id" title="variable">c'</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Decisions.html#c':103"><span class="id" title="variable">c'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:99"><span class="id" title="variable">c</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="estimator_only_has_decision" class="idref" href="#estimator_only_has_decision"><span class="id" title="lemma">estimator_only_has_decision</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hde:105" class="idref" href="#Hde:105"><span class="id" title="binder">Hde</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#decision_estimator_property"><span class="id" title="definition">decision_estimator_property</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:106" class="idref" href="#s:106"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state"><span class="id" title="definition">protocol_state</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c:107" class="idref" href="#c:107"><span class="id" title="binder">c</span></a> <a id="c_other:108" class="idref" href="#c_other:108"><span class="id" title="binder">c_other</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hc:109" class="idref" href="#Hc:109"><span class="id" title="binder">Hc</span></a>  : <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.D"><span class="id" title="variable">D</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s:106"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:107"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hc_other:110" class="idref" href="#Hc_other:110"><span class="id" title="binder">Hc_other</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.estimates"><span class="id" title="variable">estimates</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s:106"><span class="id" title="variable">s</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#c_other:108"><span class="id" title="variable">c_other</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Decisions.html#c_other:108"><span class="id" title="variable">c_other</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:107"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hde</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">sigma</span> := <span class="id" title="var">s</span>) (<span class="id" title="var">sigma'</span>:= <span class="id" title="var">s</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_refl"><span class="id" title="lemma">in_futures_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="estimator_surely_has_decision" class="idref" href="#estimator_surely_has_decision"><span class="id" title="lemma">estimator_surely_has_decision</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hde:111" class="idref" href="#Hde:111"><span class="id" title="binder">Hde</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#decision_estimator_property"><span class="id" title="definition">decision_estimator_property</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:112" class="idref" href="#s:112"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state"><span class="id" title="definition">protocol_state</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c:113" class="idref" href="#c:113"><span class="id" title="binder">c</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hc:114" class="idref" href="#Hc:114"><span class="id" title="binder">Hc</span></a>  : <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.D"><span class="id" title="variable">D</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s:112"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:113"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.estimates"><span class="id" title="variable">estimates</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#s:112"><span class="id" title="variable">s</span></a>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#c:113"><span class="id" title="variable">c</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hc_other</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="c_other:116" class="idref" href="#c_other:116"><span class="id" title="binder">c_other</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.estimates"><span class="id" title="variable">estimates</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <span class="id" title="var">s</span>) <a class="idref" href="CasperCBC.VLSM.Decisions.html#c_other:115"><span class="id" title="variable">c_other</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.CBC.Common.html#estimator_total"><span class="id" title="method">estimator_total</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hc_other</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">c_other</span> <span class="id" title="var">Hc_other</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Heq</span> : <span class="id" title="var">c_other</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">c</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hde</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">sigma</span> := <span class="id" title="var">s</span>) (<span class="id" title="var">sigma'</span> := <span class="id" title="var">s</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_refl"><span class="id" title="lemma">in_futures_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;use&nbsp;the&nbsp;following&nbsp;intermediate&nbsp;result,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proven&nbsp;above&nbsp;(in&nbsp;two&nbsp;steps)&nbsp;via&nbsp;the&nbsp;estimator&nbsp;property:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1)&nbsp;If&nbsp;D(state)&nbsp;=&nbsp;Some&nbsp;c&nbsp;then&nbsp;Estimator(state)&nbsp;=&nbsp;{c}.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;then&nbsp;fix&nbsp;s1&nbsp;and&nbsp;s2,&nbsp;such&nbsp;that&nbsp;(in_futures&nbsp;s1&nbsp;s2)&nbsp;and&nbsp;both&nbsp;are&nbsp;decided&nbsp;and&nbsp;note&nbsp;the&nbsp;following:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)&nbsp;Estimator(s2)&nbsp;=&nbsp;{Decision(s2)},&nbsp;by&nbsp;(1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(3)&nbsp;Estimator(s2)&nbsp;=&nbsp;{Decision(s1)},&nbsp;by&nbsp;the&nbsp;estimator&nbsp;property.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;Decision(s2)&nbsp;=&nbsp;Decision(s1).<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="decision_estimator_finality" class="idref" href="#decision_estimator_finality"><span class="id" title="lemma">decision_estimator_finality</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Decisions.html#decision_estimator_property"><span class="id" title="definition">decision_estimator_property</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#final"><span class="id" title="definition">final</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.D"><span class="id" title="variable">D</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#final"><span class="id" title="definition">final</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_protocol_snd"><span class="id" title="lemma">in_futures_protocol_snd</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">H0</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hps2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#estimator_only_has_decision"><span class="id" title="lemma">estimator_only_has_decision</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">s</span> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hps2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#decision_estimator_property"><span class="id" title="definition">decision_estimator_property</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">c2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">c1</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">sigma</span> := <span class="id" title="var">s1</span>) (<span class="id" title="var">sigma'</span> := <span class="id" title="var">s2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Decisions.html#estimator_surely_has_decision"><span class="id" title="lemma">estimator_surely_has_decision</span></a> <span class="id" title="var">H</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hps2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#estimator_surely_has_decision"><span class="id" title="lemma">estimator_surely_has_decision</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Estimators"><span class="id" title="section">Estimators</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="composite_estimators" class="idref" href="#composite_estimators"><span class="id" title="section">composite_estimators</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="CV:117" class="idref" href="#CV:117"><span class="id" title="binder">CV</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#consensus_values"><span class="id" title="class">consensus_values</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:118" class="idref" href="#message:118"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="index:119" class="idref" href="#index:119"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="Heqd:120" class="idref" href="#Heqd:120"><span class="id" title="binder">Heqd</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:119"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IM:121" class="idref" href="#IM:121"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:119"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#message:118"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hi:122" class="idref" href="#Hi:122"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:119"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:123" class="idref" href="#constraint:123"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:121"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:121"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#message:118"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:124" class="idref" href="#X:124"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:121"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Hi:122"><span class="id" title="variable">Hi</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#constraint:123"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ID:126" class="idref" href="#ID:126"><span class="id" title="binder">ID</span></a> : <span class="id" title="keyword">forall</span> <a id="i:125" class="idref" href="#i:125"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:119"><span class="id" title="variable">index</span></a>, <a class="idref" href="CasperCBC.VLSM.Decisions.html#vdecision"><span class="id" title="definition">vdecision</span></a> (<a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:121"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:125"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IE:128" class="idref" href="#IE:128"><span class="id" title="binder">IE</span></a> : <span class="id" title="keyword">forall</span> <a id="i:127" class="idref" href="#i:127"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#index:119"><span class="id" title="variable">index</span></a>, <a class="idref" href="CasperCBC.CBC.Common.html#Estimator"><span class="id" title="class">Estimator</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Decisions.html#IM:121"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:127"><span class="id" title="variable">i</span></a>)) <a class="idref" href="CasperCBC.VLSM.Decisions.html#C"><span class="id" title="method">C</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_projection_decision_estimator_property" class="idref" href="#composite_projection_decision_estimator_property"><span class="id" title="definition">composite_projection_decision_estimator_property</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:129" class="idref" href="#i:129"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Decisions.html#composite_estimators.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Xi:130" class="idref" href="#Xi:130"><span class="id" title="binder">Xi</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#composite_estimators.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#composite_estimators.Hi"><span class="id" title="variable">Hi</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#composite_estimators.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:129"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Decisions.html#decision_estimator_property"><span class="id" title="definition">decision_estimator_property</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#Xi:130"><span class="id" title="variable">Xi</span></a> (<a class="idref" href="CasperCBC.VLSM.Decisions.html#composite_estimators.ID"><span class="id" title="variable">ID</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:129"><span class="id" title="variable">i</span></a>) (<a class="idref" href="CasperCBC.VLSM.Decisions.html#composite_estimators.IE"><span class="id" title="variable">IE</span></a> <a class="idref" href="CasperCBC.VLSM.Decisions.html#i:129"><span class="id" title="variable">i</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Decisions.html#composite_estimators"><span class="id" title="section">composite_estimators</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>

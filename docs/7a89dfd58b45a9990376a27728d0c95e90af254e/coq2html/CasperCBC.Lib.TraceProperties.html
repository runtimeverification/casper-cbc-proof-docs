
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module CasperCBC.Lib.TraceProperties</title>
<meta name="description" content="Documentation of Coq module CasperCBC.Lib.TraceProperties" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module CasperCBC.Lib.TraceProperties</h1>
<div class="coq">
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Equality.html">Program.Equality</a></span>.<br/>
<span class="id">From</span> <span class="id">CasperCBC</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="CasperCBC.Lib.SsrExport.html">Lib.SsrExport</a></span> <span class="id"><a href="CasperCBC.Lib.Traces.html">Lib.Traces</a></span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<span class="kwd">Unset</span> <span class="kwd">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="kwd">Import</span> <span class="id">Prenex</span> <span class="id">Implicits</span>.<br/>
<br/>
<h1> Core properties of possibly-infinite traces </h1>
<br/>
<div class="doc">The property encodings and many specific properties are adapted from the paper
<a href="https://arxiv.org/abs/1412.6579">A Hoare logic for the coinductive trace-based big-step semantics of While</a>. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TraceProperties">TraceProperties</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>}.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="trace">trace</a></span> := (@<span class="id"><a href="CasperCBC.Lib.Traces.html#trace">trace</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.A">A</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.B">B</a></span>).<br/>
<br/>
<div class="doc">We want to reason about trace properties that do not distinguish
bisimilar traces; these are called _setoid_ properties. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="setoidT">setoidT</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) :=<br/>
<span class="kwd">forall</span> <span class="id">tr0</span>, <span class="id">p</span> <span class="id">tr0</span> -&gt; <span class="kwd">forall</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt; <span class="id">p</span> <span class="id">tr1</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="propT">propT</a></span> := { <span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> | <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">p</span> }.<br/>
<br/>
<h2> Infiniteness property </h2>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="infiniteT">infiniteT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="infiniteT_delay">infiniteT_delay</a></span> : <span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">infiniteT</span> <span class="id">tr</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">infiniteT</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="infiniteT_setoidT">infiniteT_setoidT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof337')">Proof.</div>
<div class="proofscript" id="proof337">
<span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span> <span class="id">tr1</span> <span class="id">h1</span>.<br/>
<span class="id">invs</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h1</span>.<br/>
<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT_delay">infiniteT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="InfiniteT">InfiniteT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> <span class="id">tr</span>) <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT_setoidT">infiniteT_setoidT</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="infiniteT_cons">infiniteT_cons</a></span> : <span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>) -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof338')">Proof.</div>
<div class="proofscript" id="proof338">
<span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span> <span class="id">Hinf</span>.<br/>
<span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">Hinf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="infiniteT_trace_append">infiniteT_trace_append</a></span> :<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> <span class="id">tr</span> -&gt; <span class="kwd">forall</span> <span class="id">tr</span>', <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> (<span class="id">tr</span>' +++ <span class="id">tr</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof339')">Proof.</div>
<div class="proofscript" id="proof339">
<span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr</span> <span class="id">Htr</span>.<br/>
<span class="tactic">case</span> =&gt; [<span class="id">a</span>|<span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>']; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_nil">trace_append_nil</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_cons">trace_append_cons</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT_delay">infiniteT_delay</a></span>.<br/>
<span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">CIH</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="trace_append_infiniteT">trace_append_infiniteT</a></span> :<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> <span class="id">tr</span> -&gt; <span class="kwd">forall</span> <span class="id">tr</span>', <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> (<span class="id">tr</span> +++ <span class="id">tr</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof340')">Proof.</div>
<div class="proofscript" id="proof340">
<span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">case</span> =&gt; [<span class="id">a</span>|<span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span>] <span class="id">Hinf</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">Hinf</span>.<br/>
<span class="tactic">inversion</span> <span class="id">Hinf</span>; <span class="tactic">subst</span> =&gt; <span class="id">tr</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_cons">trace_append_cons</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT_delay">infiniteT_delay</a></span>.<br/>
<span class="tactic">exact</span>: <span class="id">CIH</span>.<br/>
Qed.</div>
<br/>
<h2> Finiteness property </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="finiteT">finiteT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="finiteT_nil">finiteT_nil</a></span> : <span class="kwd">forall</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finiteT</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>)<br/>
| <span class="id"><a name="finiteT_delay">finiteT_delay</a></span> : <span class="kwd">forall</span> (<span class="id">a</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.A">A</a></span>) (<span class="id">b</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.B">B</a></span>) <span class="id">tr</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finiteT</span> <span class="id">tr</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finiteT</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finiteT_setoidT">finiteT_setoidT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof341')">Proof.</div>
<div class="proofscript" id="proof341">
<span class="tactic">induction</span> 1.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_nil">finiteT_nil</a></span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_delay">finiteT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">IHfiniteT</span> <span class="id">_</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="FiniteT">FiniteT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span>) <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_setoidT">finiteT_setoidT</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="invert_finiteT_delay">invert_finiteT_delay</a></span> (<span class="id">a</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.A">A</a></span>) (<span class="id">b</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.B">B</a></span>) (<span class="id">tr</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span>)<br/>
&nbsp;(<span class="id">h</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>)) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof342')">Proof.</div>
<div class="proofscript" id="proof342">
 <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">h</span>. Defined.</div>
<br/>
<div class="doc">Equality coincides with bisimilarity for finite traces. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finiteT_bisim_eq">finiteT_bisim_eq</a></span> : <span class="kwd">forall</span> <span class="id">tr</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span> -&gt; <span class="kwd">forall</span> <span class="id">tr</span>', <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr</span> <span class="id">tr</span>' -&gt; <span class="id">tr</span> = <span class="id">tr</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof343')">Proof.</div>
<div class="proofscript" id="proof343">
<span class="tactic">move</span> =&gt; <span class="id">tr</span>.<br/>
<span class="tactic">elim</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">tr</span>' <span class="id">Hbis</span>; <span class="tactic">inversion</span> <span class="id">Hbis</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">Hfin</span> <span class="id">IH</span> <span class="id">tr</span>' <span class="id">Hbis</span>.<br/>
<span class="id">invs</span> <span class="id">Hbis</span>.<br/>
<span class="tactic">apply</span> <span class="id">IH</span> <span class="kwd">in</span> <span class="id">H3</span>.<br/>
<span class="tactic">by</span> <span class="tactic">rewrite</span> <span class="id">H3</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Basic connections between finiteness and infiniteness. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finiteT_infiniteT_not">finiteT_infiniteT_not</a></span> : <span class="kwd">forall</span> <span class="id">tr</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> <span class="id">tr</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof344')">Proof.</div>
<div class="proofscript" id="proof344">
<span class="tactic">move</span> =&gt; <span class="id">tr</span>; <span class="tactic">elim</span> =&gt; [<span class="id">a</span> <span class="id">Hinf</span>|<span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>' <span class="id">Hfin</span>]; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">Hinf</span>.<br/>
<span class="tactic">by</span> <span class="tactic">move</span> =&gt; <span class="id">IH</span> <span class="id">Hinf</span>; <span class="tactic">inversion</span> <span class="id">Hinf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="not_finiteT_infiniteT">not_finiteT_infiniteT</a></span> : <span class="kwd">forall</span> <span class="id">tr</span>,<br/>
&nbsp;~ <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT">infiniteT</a></span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof345')">Proof.</div>
<div class="proofscript" id="proof345">
<span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">case</span> =&gt; [<span class="id">a</span>|<span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>] <span class="id">Hfin</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">case</span>: <span class="id">Hfin</span>; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_nil">finiteT_nil</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT_delay">infiniteT_delay</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">CIH</span> =&gt; <span class="id">Hinf</span>.<br/>
<span class="tactic">case</span>: <span class="id">Hfin</span>.<br/>
<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_delay">finiteT_delay</a></span>.<br/>
Qed.</div>
<br/>
<h2> Final element properties </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="finalTA">finalTA</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.A">A</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="finalTA_nil">finalTA_nil</a></span> : <span class="kwd">forall</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finalTA</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>) <span class="id">a</span><br/>
| <span class="id"><a name="finalTA_delay">finalTA_delay</a></span> : <span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">a</span>' <span class="id">tr</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finalTA</span> <span class="id">tr</span> <span class="id">a</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finalTA</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>) <span class="id">a</span>'.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="finalTB">finalTB</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.B">B</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="finalTB_nil">finalTB_nil</a></span> : <span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">a</span>',<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finalTB</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>')) <span class="id">b</span><br/>
| <span class="id"><a name="finalTB_delay">finalTB_delay</a></span> : <span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">tr</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finalTB</span> <span class="id">tr</span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">finalTB</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>) <span class="id">b</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finalTA_finiteT">finalTA_finiteT</a></span> : <span class="kwd">forall</span> <span class="id">tr</span> <span class="id">a</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA">finalTA</a></span> <span class="id">tr</span> <span class="id">a</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof346')">Proof.</div>
<div class="proofscript" id="proof346">
<span class="tactic">refine</span> (<span class="id">fix</span> <span class="id">IH</span> <span class="id">tr</span> <span class="id">a</span> <span class="id">h</span> {<span class="kwd">struct</span> <span class="id">h</span>} := <span class="id">_</span>).<br/>
<span class="tactic">case</span>: <span class="id">tr</span> <span class="id">h</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">move</span> =&gt; <span class="id">a</span>' <span class="id">Hfin</span>; <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_nil">finiteT_nil</a></span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">a</span>' <span class="id">b</span> <span class="id">tr</span> <span class="id">Hfin</span>; <span class="id">invs</span> <span class="id">Hfin</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_delay">finiteT_delay</a></span>.<br/>
<span class="tactic">exact</span>: (<span class="id">IH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finalTB_finiteT">finalTB_finiteT</a></span> : <span class="kwd">forall</span> <span class="id">tr</span> <span class="id">b</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTB">finalTB</a></span> <span class="id">tr</span> <span class="id">b</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof347')">Proof.</div>
<div class="proofscript" id="proof347">
<span class="tactic">refine</span> (<span class="id">fix</span> <span class="id">IH</span> <span class="id">tr</span> <span class="id">b</span> <span class="id">h</span> {<span class="kwd">struct</span> <span class="id">h</span>} := <span class="id">_</span>).<br/>
<span class="tactic">case</span>: <span class="id">tr</span> <span class="id">h</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">Hfin</span>; <span class="id">invs</span> <span class="id">Hfin</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b0</span> <span class="id">tr</span> <span class="id">Hfin</span>; <span class="id">invs</span> <span class="id">Hfin</span>.<br/>
- <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_delay">finiteT_delay</a></span>; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_nil">finiteT_nil</a></span>.<br/>
- <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_delay">finiteT_delay</a></span>; <span class="tactic">exact</span>: (<span class="id">IH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="finalA">finalA</a></span> (<span class="id">tr</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span>) (<span class="id">h</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span>) {<span class="kwd">struct</span> <span class="id">h</span>} : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.A">A</a></span> :=<br/>
<span class="kwd">match</span> <span class="id">tr</span> <span class="kwd">as</span> <span class="id">tr</span>' <span class="kwd">return</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span>' -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.A">A</a></span>) <span class="kwd">with</span><br/>
| <span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span> =&gt; <span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">a</span><br/>
| <span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span> =&gt; <span class="kwd">fun</span> <span class="id">h</span> =&gt; <span class="id">finalA</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#invert_finiteT_delay">invert_finiteT_delay</a></span> <span class="id">h</span>)<br/>
<span class="kwd">end</span> <span class="id">h</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finiteT_finalTA">finiteT_finalTA</a></span> : <span class="kwd">forall</span> <span class="id">tr</span> (<span class="id">h</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT">finiteT</a></span> <span class="id">tr</span>),<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA">finalTA</a></span> <span class="id">tr</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalA">finalA</a></span> <span class="id">h</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof348')">Proof.</div>
<div class="proofscript" id="proof348">
<span class="tactic">refine</span> (<span class="id">fix</span> <span class="id">IH</span> <span class="id">tr</span> <span class="id">h</span> {<span class="kwd">struct</span> <span class="id">h</span>} := <span class="id">_</span>).<br/>
<span class="tactic">case</span>: <span class="id">tr</span> <span class="id">h</span> =&gt; [<span class="id">a</span>|<span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>] <span class="id">h</span>.<br/>
- <span class="tactic">by</span> <span class="tactic">dependent</span> <span class="tactic">inversion</span> <span class="id">h</span> =&gt; /=; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_nil">finalTA_nil</a></span>.<br/>
- <span class="tactic">by</span> <span class="tactic">dependent</span> <span class="tactic">inversion</span> <span class="id">h</span> =&gt; /=; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_delay">finalTA_delay</a></span>; <span class="tactic">apply</span> <span class="id">IH</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finalTA_hd_append_trace">finalTA_hd_append_trace</a></span> : <span class="kwd">forall</span> <span class="id">tr0</span> <span class="id">a</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA">finalTA</a></span> <span class="id">tr0</span> <span class="id">a</span> -&gt; <span class="kwd">forall</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr1</span> = <span class="id">a</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> (<span class="id">tr0</span> +++ <span class="id">tr1</span>) = <span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr0</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof349')">Proof.</div>
<div class="proofscript" id="proof349">
<span class="tactic">refine</span> (<span class="id">fix</span> <span class="id">IH</span> <span class="id">tr</span> <span class="id">a</span> <span class="id">h</span> {<span class="kwd">struct</span> <span class="id">h</span>} := <span class="id">_</span>).<br/>
<span class="tactic">case</span>: <span class="id">tr</span> <span class="id">h</span> =&gt; [<span class="id">a0</span>|<span class="id">a0</span> <span class="id">b</span> <span class="id">tr1</span>] <span class="id">Hfin</span> <span class="id">tr2</span> <span class="id">Hhd</span>; <span class="id">invs</span> <span class="id">Hfin</span>.<br/>
- <span class="tactic">by</span> <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_nil">trace_append_nil</a></span>.<br/>
- <span class="tactic">by</span> <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_cons">trace_append_cons</a></span>.<br/>
Qed.</div>
<br/>
<h2> Basic trace properties and connectives </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ttT">ttT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> := <span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ttT_setoidT">ttT_setoidT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttT">ttT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof350')">Proof.</div>
<div class="proofscript" id="proof350">
 <span class="tactic">by</span> []. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="TtT">TtT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttT">ttT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttT_setoidT">ttT_setoidT</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ffT">ffT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> := <span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ffT_setoidT">ffT_setoidT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ffT">ffT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof351')">Proof.</div>
<div class="proofscript" id="proof351">
 <span class="tactic">by</span> []. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="FfT">FfT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ffT">ffT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ffT_setoidT">ffT_setoidT</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="notT">notT</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> := <span class="kwd">fun</span> <span class="id">tr</span> =&gt; ~ <span class="id">p</span> <span class="id">tr</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="notT_setoidT">notT_setoidT</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">p</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#notT">notT</a></span> <span class="id">p</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof352')">Proof.</div>
<div class="proofscript" id="proof352">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">hp</span> <span class="id">tr</span> <span class="id">h1</span> <span class="id">tr</span>' <span class="id">h2</span> <span class="id">h3</span>.<br/>
<span class="id">have</span> := <span class="id">hp</span> <span class="id">_</span> <span class="id">h3</span> <span class="id">_</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_sym">bisim_sym</a></span> <span class="id">h2</span>).<br/>
<span class="tactic">exact</span>: <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="NotT">NotT</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f</span> <span class="id">hf</span> := <span class="id">p</span> <span class="kwd">in</span><br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#notT">notT</a></span> <span class="id">f</span>) (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#notT_setoidT">notT_setoidT</a></span> <span class="id">hf</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="satisfyT">satisfyT</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f0</span> <span class="id">h0</span> := <span class="id">p</span> <span class="kwd">in</span> <span class="id">f0</span> <span class="id">tr</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="ExT">ExT</a></span> {<span class="id">T</span>: <span class="kwd">Type</span>} (<span class="id">p</span>: <span class="id">T</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id">exists</span> <span class="id">x</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#satisfyT">satisfyT</a></span> (<span class="id">p</span> <span class="id">x</span>) <span class="id">tr</span>) <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof353')">Next Obligation.</div>
<div class="proofscript" id="proof353">
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> [<span class="id">x</span> <span class="id">h0</span>] <span class="id">tr1</span> <span class="id">h1</span>. <span class="id">exists</span> <span class="id">x</span>. <span class="tactic">destruct</span> (<span class="id">p</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">f0</span> <span class="id">h2</span>].<br/>
<span class="tactic">simpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>. <span class="tactic">exact</span>: <span class="id">h2</span> <span class="id">_</span> <span class="id">h0</span> <span class="id">_</span> <span class="id">h1</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="andT_setoidT">andT_setoidT</a></span> : <span class="kwd">forall</span> <span class="id">f0</span> <span class="id">f1</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">f0</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">f1</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> (<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id">f0</span> <span class="id">tr</span> /\ <span class="id">f1</span> <span class="id">tr</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof354')">Proof.</div>
<div class="proofscript" id="proof354">
<span class="tactic">move</span> =&gt; <span class="id">f0</span> <span class="id">f1</span> <span class="id">h0</span> <span class="id">h1</span> <span class="id">tr0</span> [<span class="id">h2</span> <span class="id">h3</span>] <span class="id">tr1</span> <span class="id">h4</span>. <span class="tactic">split</span>.<br/>
- <span class="tactic">exact</span>: (<span class="id">h0</span> <span class="id">_</span> <span class="id">h2</span> <span class="id">_</span> <span class="id">h4</span>).<br/>
- <span class="tactic">exact</span>: (<span class="id">h1</span> <span class="id">_</span> <span class="id">h3</span> <span class="id">_</span> <span class="id">h4</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="AndT">AndT</a></span> (<span class="id">p1</span> <span class="id">p2</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f0</span> <span class="id">h0</span> := <span class="id">p1</span> <span class="kwd">in</span><br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f1</span> <span class="id">h1</span> := <span class="id">p2</span> <span class="kwd">in</span><br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id">f0</span> <span class="id">tr</span> /\ <span class="id">f1</span> <span class="id">tr</span>) (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#andT_setoidT">andT_setoidT</a></span> <span class="id">h0</span> <span class="id">h1</span>).<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Infix</span> "<span class="id">andT</span>" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#AndT">AndT</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="orT_setoidT">orT_setoidT</a></span> : <span class="kwd">forall</span> <span class="id">f0</span> <span class="id">f1</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">f0</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">f1</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> (<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id">f0</span> <span class="id">tr</span> \/ <span class="id">f1</span> <span class="id">tr</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof355')">Proof.</div>
<div class="proofscript" id="proof355">
<span class="tactic">move</span> =&gt; <span class="id">f0</span> <span class="id">f1</span> <span class="id">h0</span> <span class="id">h1</span> <span class="id">tr0</span> [<span class="id">h2</span> | <span class="id">h2</span>] <span class="id">tr1</span> <span class="id">h3</span>.<br/>
- <span class="id">left</span>. <span class="tactic">exact</span>: <span class="id">h0</span> <span class="id">_</span> <span class="id">h2</span> <span class="id">_</span> <span class="id">h3</span>.<br/>
- <span class="id">right</span>. <span class="tactic">exact</span>: <span class="id">h1</span> <span class="id">_</span> <span class="id">h2</span> <span class="id">_</span> <span class="id">h3</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="OrT">OrT</a></span> (<span class="id">p1</span> <span class="id">p2</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f0</span> <span class="id">h0</span> := <span class="id">p1</span> <span class="kwd">in</span><br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f1</span> <span class="id">h1</span> := <span class="id">p2</span> <span class="kwd">in</span><br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id">f0</span> <span class="id">tr</span> \/ <span class="id">f1</span> <span class="id">tr</span>) (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#orT_setoidT">orT_setoidT</a></span> <span class="id">h0</span> <span class="id">h1</span>).<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Infix</span> "<span class="id">orT</span>" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#OrT">OrT</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="propT_imp">propT_imp</a></span> (<span class="id">p1</span> <span class="id">p2</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="kwd">Prop</span> :=<br/>
<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#satisfyT">satisfyT</a></span> <span class="id">p1</span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#satisfyT">satisfyT</a></span> <span class="id">p2</span> <span class="id">tr</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Infix</span> "=&gt;&gt;" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT_imp">propT_imp</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="propT_imp_conseq_L">propT_imp_conseq_L</a></span>: <span class="kwd">forall</span> <span class="id">p0</span> <span class="id">p1</span> <span class="id">q</span>, <span class="id">p0</span> =&gt;&gt; <span class="id">p1</span> -&gt; <span class="id">p1</span> =&gt;&gt; <span class="id">q</span> -&gt; <span class="id">p0</span> =&gt;&gt; <span class="id">q</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof356')">Proof.</div>
<div class="proofscript" id="proof356">
<span class="tactic">move</span> =&gt; <span class="id">p0</span> <span class="id">p1</span> <span class="id">q</span>. <span class="tactic">case</span>: <span class="id">p0</span> =&gt; [<span class="id">p0</span> <span class="id">hp0</span>].<br/>
<span class="tactic">case</span>: <span class="id">p1</span> =&gt; [<span class="id">p1</span> <span class="id">hp1</span>]. <span class="tactic">case</span>: <span class="id">q</span> =&gt; [<span class="id">q</span> <span class="id">hq</span>].<br/>
<span class="tactic">move</span> =&gt; <span class="id">h0</span> <span class="id">h1</span> <span class="id">tr0</span>. <span class="tactic">simpl</span>. <span class="tactic">move</span> =&gt; <span class="id">h2</span>. <span class="tactic">apply</span> <span class="id">h1</span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">h0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="propT_imp_conseq_R">propT_imp_conseq_R</a></span>: <span class="kwd">forall</span> <span class="id">p</span> <span class="id">q0</span> <span class="id">q1</span>,<br/>
&nbsp;<span class="id">q0</span> =&gt;&gt; <span class="id">q1</span> -&gt; <span class="id">p</span> =&gt;&gt; <span class="id">q0</span> -&gt; <span class="id">p</span> =&gt;&gt; <span class="id">q1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof357')">Proof.</div>
<div class="proofscript" id="proof357">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q0</span> <span class="id">q1</span>. <span class="tactic">destruct</span> <span class="id">p</span> <span class="kwd">as</span> [<span class="id">p</span> <span class="id">hp</span>].<br/>
<span class="tactic">destruct</span> <span class="id">q0</span> <span class="kwd">as</span> [<span class="id">q0</span> <span class="id">hq0</span>]. <span class="tactic">destruct</span> <span class="id">q1</span> <span class="kwd">as</span> [<span class="id">q1</span> <span class="id">hq1</span>].<br/>
<span class="tactic">move</span> =&gt; <span class="id">h0</span> <span class="id">h1</span> <span class="id">tr0</span>. <span class="tactic">simpl</span>. <span class="tactic">move</span> =&gt; <span class="id">h2</span>. <span class="tactic">apply</span> <span class="id">h0</span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="propT_imp_andT">propT_imp_andT</a></span>: <span class="kwd">forall</span> <span class="id">p</span> <span class="id">q0</span> <span class="id">q1</span>,<br/>
&nbsp;<span class="id">p</span> =&gt;&gt; <span class="id">q0</span> -&gt; <span class="id">p</span> =&gt;&gt; <span class="id">q1</span> -&gt; <span class="id">p</span> =&gt;&gt; (<span class="id">q0</span> <span class="id">andT</span> <span class="id">q1</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof358')">Proof.</div>
<div class="proofscript" id="proof358">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] [<span class="id">q0</span> <span class="id">hq0</span>] [<span class="id">q1</span> <span class="id">hq1</span>] <span class="id">h0</span> <span class="id">h1</span> <span class="id">tr0</span> <span class="id">h2</span>.<br/>
<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h2</span>. <span class="tactic">simpl</span>. <span class="tactic">split</span>.<br/>
- <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">h0</span>.<br/>
- <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="propT_imp_refl">propT_imp_refl</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, <span class="id">p</span> =&gt;&gt; <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof359')">Proof.</div>
<div class="proofscript" id="proof359">
 <span class="tactic">by</span> <span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">tr0</span> <span class="id">h0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="satisfyT_cont">satisfyT_cont</a></span> : <span class="kwd">forall</span> <span class="id">p0</span> <span class="id">p1</span>,<br/>
&nbsp;<span class="id">p0</span> =&gt;&gt; <span class="id">p1</span> -&gt; <span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#satisfyT">satisfyT</a></span> <span class="id">p0</span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#satisfyT">satisfyT</a></span> <span class="id">p1</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof360')">Proof.</div>
<div class="proofscript" id="proof360">
<span class="tactic">move</span> =&gt; [<span class="id">f0</span> <span class="id">h0</span>] [<span class="id">f1</span> <span class="id">h1</span>] <span class="id">h2</span> <span class="id">tr</span> <span class="id">h3</span>.<br/>
<span class="tactic">simpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h3</span>. <span class="tactic">exact</span>: <span class="id">h2</span> <span class="id">_</span> <span class="id">h3</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="propT_imp_trans">propT_imp_trans</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span> <span class="id">r</span>, <span class="id">p</span> =&gt;&gt; <span class="id">q</span> -&gt; <span class="id">q</span> =&gt;&gt; <span class="id">r</span> -&gt; <span class="id">p</span> =&gt;&gt; <span class="id">r</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof361')">Proof.</div>
<div class="proofscript" id="proof361">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q</span> <span class="id">r</span> <span class="id">h0</span> <span class="id">h1</span> <span class="id">tr0</span> <span class="id">h2</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#satisfyT_cont">satisfyT_cont</a></span> <span class="id">h1</span>).<br/>
<span class="tactic">by</span> <span class="tactic">apply</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#satisfyT_cont">satisfyT_cont</a></span> <span class="id">h0</span> <span class="id">h2</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="OrT_left">OrT_left</a></span> : <span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span>, <span class="id">p1</span> =&gt;&gt; (<span class="id">p1</span> <span class="id">orT</span> <span class="id">p2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof362')">Proof.</div>
<div class="proofscript" id="proof362">
<span class="tactic">move</span> =&gt; <span class="id">p1</span> <span class="id">p2</span> <span class="id">tr</span> <span class="id">h1</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">p1</span> <span class="kwd">as</span> [<span class="id">f1</span> <span class="id">hf1</span>].<br/>
<span class="tactic">destruct</span> <span class="id">p2</span> <span class="kwd">as</span> [<span class="id">f2</span> <span class="id">hf2</span>]. <span class="tactic">simpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h1</span>. <span class="tactic">by</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="OrT_right">OrT_right</a></span>: <span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span>, <span class="id">p2</span> =&gt;&gt; (<span class="id">p1</span> <span class="id">orT</span> <span class="id">p2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof363')">Proof.</div>
<div class="proofscript" id="proof363">
<span class="tactic">move</span> =&gt; <span class="id">p1</span> <span class="id">p2</span> <span class="id">tr</span> <span class="id">h1</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">p1</span> <span class="kwd">as</span> [<span class="id">f1</span> <span class="id">hf1</span>].<br/>
<span class="tactic">destruct</span> <span class="id">p2</span> <span class="kwd">as</span> [<span class="id">f2</span> <span class="id">hf2</span>]. <span class="tactic">simpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h1</span>. <span class="tactic">by</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<h2> Basic trace element properties and connectives </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="propA">propA</a></span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.A">A</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ttA">ttA</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span> := <span class="kwd">fun</span> <span class="id">a</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ffA">ffA</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span> := <span class="kwd">fun</span> <span class="id">a</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="propA_imp">propA_imp</a></span> (<span class="id">u1</span> <span class="id">u2</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) : <span class="kwd">Prop</span> := <span class="kwd">forall</span> <span class="id">a</span>, <span class="id">u1</span> <span class="id">a</span> -&gt; <span class="id">u2</span> <span class="id">a</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Infix</span> "-&gt;&gt;" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA_imp">propA_imp</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="andA">andA</a></span> (<span class="id">u1</span> <span class="id">u2</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span> := <span class="kwd">fun</span> <span class="id">a</span> =&gt; <span class="id">u1</span> <span class="id">a</span> /\ <span class="id">u2</span> <span class="id">a</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Infix</span> "<span class="id">andA</span>" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#andA">andA</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="exA">exA</a></span> {<span class="id">T</span> : <span class="kwd">Type</span>} (<span class="id">u</span>: <span class="id">T</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span> :=<br/>
<span class="kwd">fun</span> <span class="id">st</span> =&gt; <span class="id">exists</span> <span class="id">x</span>, <span class="id">u</span> <span class="id">x</span> <span class="id">st</span>.<br/>
<br/>
<h2> Singleton property </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="singletonT">singletonT</a></span> (<span class="id">u</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id">exists</span> <span class="id">a</span>, <span class="id">u</span> <span class="id">a</span> /\ <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="singletonT_setoidT">singletonT_setoidT</a></span> : <span class="kwd">forall</span> <span class="id">u</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof364')">Proof.</div>
<div class="proofscript" id="proof364">
<span class="tactic">move</span> =&gt; <span class="id">u</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span> <span class="id">tr1</span> <span class="id">h1</span>. <span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h2</span>]].<br/>
<span class="id">invs</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">h1</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span> =&gt; //.<br/>
<span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="singletonT_cont">singletonT_cont</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>, <span class="id">u</span> -&gt;&gt; <span class="id">v</span> -&gt;<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">v</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof365')">Proof.</div>
<div class="proofscript" id="proof365">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">huv</span> <span class="id">tr0</span> <span class="id">h0</span>. <span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="id">invs</span> <span class="id">h1</span>.<br/>
<span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span>; [ <span class="id">have</span> := <span class="id">huv</span> <span class="id">_</span> <span class="id">h0</span>; <span class="tactic">apply</span> | <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="singletonT_nil">singletonT_nil</a></span>: <span class="kwd">forall</span> <span class="id">u</span> <span class="id">a</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>) -&gt; <span class="id">u</span> <span class="id">a</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof366')">Proof.</div>
<div class="proofscript" id="proof366">
 <span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">st</span> [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">by</span> <span class="id">invs</span> <span class="id">h1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nil_singletonT">nil_singletonT</a></span> : <span class="kwd">forall</span> (<span class="id">u</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) <span class="id">a</span>, <span class="id">u</span> <span class="id">a</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof367')">Proof.</div>
<div class="proofscript" id="proof367">
 <span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">st</span> <span class="id">h0</span>. <span class="id">exists</span> <span class="id">st</span>. <span class="tactic">split</span>; [ <span class="id">done</span> | <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>]. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="SingletonT">SingletonT</a></span> (<span class="id">u</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span>) (@<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT_setoidT">singletonT_setoidT</a></span> <span class="id">u</span>).<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "[| <span class="id">p</span> |]" := (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#SingletonT">SingletonT</a></span> <span class="id">p</span>) (<span class="tactic">at</span> <span class="id">level</span> 80).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SingletonT_cont">SingletonT_cont</a></span>: <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>, <span class="id">u</span> -&gt;&gt; <span class="id">v</span> -&gt; [|<span class="id">u</span>|] =&gt;&gt; [|<span class="id">v</span>|].<br/>
<div class="toggleproof" onclick="toggleDisplay('proof368')">Proof.</div>
<div class="proofscript" id="proof368">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">h0</span> <span class="id">tr0</span> <span class="id">h1</span>. <span class="tactic">move</span>: <span class="id">h1</span> =&gt; [<span class="id">a</span> [<span class="id">h1</span> <span class="id">h2</span>]].<br/>
<span class="id">invs</span> <span class="id">h2</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span>; [ <span class="tactic">apply</span> (<span class="id">h0</span> <span class="id">_</span> <span class="id">h1</span>) | <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>].<br/>
Qed.</div>
<br/>
<h2> Duplicate element property </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="dupT">dupT</a></span> (<span class="id">u</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) (<span class="id">b</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.B">B</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id">exists</span> <span class="id">a</span>, <span class="id">u</span> <span class="id">a</span> /\ <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dupT_cont">dupT_cont</a></span>: <span class="kwd">forall</span> (<span class="id">u0</span> <span class="id">u1</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) <span class="id">b</span>,<br/>
&nbsp;<span class="id">u0</span> -&gt;&gt; <span class="id">u1</span> -&gt; <span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#dupT">dupT</a></span> <span class="id">u0</span> <span class="id">b</span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#dupT">dupT</a></span> <span class="id">u1</span> <span class="id">b</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof369')">Proof.</div>
<div class="proofscript" id="proof369">
<span class="tactic">move</span> =&gt; <span class="id">u0</span> <span class="id">u1</span> <span class="id">b</span> <span class="id">hu</span> <span class="id">tr</span> [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="id">invs</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">H1</span>.<br/>
<span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>. <span class="tactic">exact</span>: <span class="id">hu</span> <span class="id">_</span> <span class="id">h0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dupT_setoidT">dupT_setoidT</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">b</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#dupT">dupT</a></span> <span class="id">u</span> <span class="id">b</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof370')">Proof.</div>
<div class="proofscript" id="proof370">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">b</span> <span class="id">tr0</span> [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h1</span>]] <span class="id">tr1</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">H1</span>. <span class="id">invs</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">H3</span>.<br/>
<span class="id">exists</span> <span class="id">a</span>; <span class="tactic">split</span> =&gt; //.<br/>
<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="DupT">DupT</a></span> (<span class="id">u</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) (<span class="id">b</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.B">B</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#dupT">dupT</a></span> <span class="id">u</span> <span class="id">b</span>) (@<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#dupT_setoidT">dupT_setoidT</a></span> <span class="id">u</span> <span class="id">b</span>).<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "&lt;&lt; <span class="id">p</span> ; <span class="id">b</span> &gt;&gt;" := (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#DupT">DupT</a></span> <span class="id">p</span> <span class="id">b</span>) (<span class="tactic">at</span> <span class="id">level</span> 80).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DupT_cont">DupT_cont</a></span>: <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">b</span>, <span class="id">u</span> -&gt;&gt; <span class="id">v</span> -&gt; &lt;&lt;<span class="id">u</span>;<span class="id">b</span>&gt;&gt; =&gt;&gt; &lt;&lt;<span class="id">v</span>;<span class="id">b</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof371')">Proof.</div>
<div class="proofscript" id="proof371">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">b</span> <span class="id">h0</span> <span class="id">tr0</span> /=.<br/>
<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#dupT_cont">dupT_cont</a></span>.<br/>
Qed.</div>
<br/>
<h2> Follows property </h2>
<br/>
<div class="doc">The follows property holds for two traces when the first is a
prefix of the second, and <span class="bracket"><span class="id">p</span></span> holds for the suffix. </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="followsT">followsT</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="followsT_nil">followsT_nil</a></span> : <span class="kwd">forall</span> <span class="id">a</span> <span class="id">tr</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr</span> = <span class="id">a</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">p</span> <span class="id">tr</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">followsT</span> <span class="id">p</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>) <span class="id">tr</span><br/>
| <span class="id"><a name="followsT_delay">followsT_delay</a></span>: <span class="kwd">forall</span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span> <span class="id">tr</span>',<br/>
&nbsp;&nbsp;&nbsp;<span class="id">followsT</span> <span class="id">p</span> <span class="id">tr</span> <span class="id">tr</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">followsT</span> <span class="id">p</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>) (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>').<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_hd">followsT_hd</a></span>: <span class="kwd">forall</span> <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt; <span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr0</span> = <span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof372')">Proof.</div>
<div class="proofscript" id="proof372">
 <span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span>. <span class="tactic">by</span> <span class="id">invs</span> <span class="id">h0</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="followsT_dec">followsT_dec</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span> (<span class="id">h</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span>),<br/>
&nbsp;{ <span class="id">tr</span> &amp; { <span class="id">a</span> | <span class="id">tr0</span> = <span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span> /\ <span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr</span> = <span class="id">a</span> /\ <span class="id">p</span> <span class="id">tr</span> } } +<br/>
&nbsp;{ <span class="id">tr</span> &amp; { <span class="id">tr</span>' &amp; { <span class="id">a</span> &amp; { <span class="id">b</span> | <span class="id">tr0</span> = <span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span> /\ <span class="id">tr1</span> = <span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>' /\ <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr</span> <span class="id">tr</span>'} } } }.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof373')">Proof.</div>
<div class="proofscript" id="proof373">
<span class="tactic">intros</span>.<br/>
<span class="tactic">destruct</span> <span class="id">tr0</span>.<br/>
- <span class="id">left</span>; <span class="id">exists</span> <span class="id">tr1</span>; <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">h</span>; <span class="tactic">subst</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">tr1</span>.<br/>
&nbsp;&nbsp;* <span class="id">left</span>; <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>); <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">h</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;* <span class="id">right</span>; <span class="id">exists</span> <span class="id">tr0</span>; <span class="id">exists</span> <span class="id">tr1</span>; <span class="id">exists</span> <span class="id">a</span>; <span class="id">exists</span> <span class="id">b</span>; <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">h</span>; <span class="tactic">subst</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_setoidT">followsT_setoidT</a></span> : <span class="kwd">forall</span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">hp</span>: <span class="kwd">forall</span> <span class="id">tr0</span>, <span class="id">p</span> <span class="id">tr0</span> -&gt; <span class="kwd">forall</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt; <span class="id">p</span> <span class="id">tr1</span>),<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr0</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt;<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr2</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr0</span> <span class="id">tr2</span> -&gt; <span class="kwd">forall</span> <span class="id">tr3</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr1</span> <span class="id">tr3</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr2</span> <span class="id">tr3</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof374')">Proof.</div>
<div class="proofscript" id="proof374">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">hp</span>.<br/>
<span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span> <span class="id">tr2</span> <span class="id">h1</span> <span class="id">tr3</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="id">invs</span> <span class="id">h1</span>. <span class="id">have</span> <span class="id">h0</span> := <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_hd">bisim_hd</a></span> <span class="id">h2</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">by</span> <span class="tactic">apply</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> <span class="id">h0</span> (<span class="id">hp</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">_</span> <span class="id">h2</span>)).<br/>
- <span class="id">invs</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H5</span> <span class="id">_</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_setoidT_L">followsT_setoidT_L</a></span> : <span class="kwd">forall</span> <span class="id">p</span>,<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr0</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt;<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr2</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr0</span> <span class="id">tr2</span> -&gt;  <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr2</span> <span class="id">tr1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof375')">Proof.</div>
<div class="proofscript" id="proof375">
<span class="tactic">move</span> =&gt; <span class="id">p</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">move</span> =&gt;  <span class="id">tr</span> <span class="id">tr0</span> <span class="id">h0</span> <span class="id">tr1</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span>. <span class="tactic">reflexivity</span>. <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
- <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_setoidT_R">followsT_setoidT_R</a></span> : <span class="kwd">forall</span> (<span class="id">p</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;(<span class="id">hp</span>: <span class="kwd">forall</span> <span class="id">tr0</span>, <span class="id">p</span> <span class="id">tr0</span> -&gt; <span class="kwd">forall</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt; <span class="id">p</span> <span class="id">tr1</span>),<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr</span> <span class="id">tr0</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr</span> <span class="id">tr0</span> -&gt;<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt;  <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr</span> <span class="id">tr1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof376')">Proof.</div>
<div class="proofscript" id="proof376">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">hp</span>. <span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr</span> <span class="id">tr0</span> <span class="id">h0</span> <span class="id">tr1</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">symmetry</span>; <span class="tactic">apply</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_hd">bisim_hd</a></span> <span class="id">h1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">hp</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">_</span> <span class="id">h1</span>).<br/>
- <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span>  <span class="id">H</span> <span class="id">_</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_cont">followsT_cont</a></span> : <span class="kwd">forall</span> (<span class="id">p</span> <span class="id">q</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
(<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id">p</span> <span class="id">tr</span> -&gt; <span class="id">q</span> <span class="id">tr</span>) -&gt;<br/>
<span class="kwd">forall</span> <span class="id">tr0</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">q</span> <span class="id">tr0</span> <span class="id">tr1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof377')">Proof.</div>
<div class="proofscript" id="proof377">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q</span> <span class="id">hpq</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">have</span> := <span class="id">hpq</span> <span class="id">_</span> <span class="id">H0</span>; <span class="tactic">by</span> <span class="tactic">apply</span>.<br/>
- <span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">by</span> <span class="tactic">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_singletonT">followsT_singletonT</a></span>: <span class="kwd">forall</span> <span class="id">u</span> <span class="id">tr0</span> <span class="id">tr1</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span>) <span class="id">tr0</span> <span class="id">tr1</span> -&gt; <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim">bisim</a></span> <span class="id">tr0</span> <span class="id">tr1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof378')">Proof.</div>
<div class="proofscript" id="proof378">
<span class="tactic">move</span> =&gt; <span class="id">u</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">move</span>: <span class="id">H0</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">by</span> <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_cons">bisim_cons</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_singleton_andA_L">followsT_singleton_andA_L</a></span>: <span class="kwd">forall</span> <span class="id">u0</span> <span class="id">u1</span> <span class="id">tr0</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> (<span class="id">u0</span> <span class="id">andA</span> <span class="id">u1</span>)) <span class="id">tr0</span> <span class="id">tr0</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u0</span>) <span class="id">tr0</span> <span class="id">tr0</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof379')">Proof.</div>
<div class="proofscript" id="proof379">
<span class="tactic">move</span> =&gt; <span class="id">u0</span> <span class="id">u1</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">case</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">h0</span>. <span class="tactic">inversion</span> <span class="id">h0</span>. <span class="tactic">clear</span> <span class="id">H1</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span>: <span class="id">H3</span> =&gt; [<span class="id">a</span>' [<span class="id">h1</span> <span class="id">h2</span>]]. <span class="id">invs</span> <span class="id">h2</span>. <span class="tactic">move</span>: <span class="id">h1</span> =&gt; [<span class="id">h1</span> <span class="id">h2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>'. <span class="tactic">split</span>; [<span class="id">done</span> | <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>].<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">H0</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_singleton_andA_R">followsT_singleton_andA_R</a></span>: <span class="kwd">forall</span> <span class="id">u0</span> <span class="id">u1</span> <span class="id">tr0</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> (<span class="id">u0</span> <span class="id">andA</span> <span class="id">u1</span>)) <span class="id">tr0</span> <span class="id">tr0</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u1</span>) <span class="id">tr0</span> <span class="id">tr0</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof380')">Proof.</div>
<div class="proofscript" id="proof380">
<span class="tactic">move</span> =&gt; <span class="id">u0</span> <span class="id">u1</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">case</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">h0</span>. <span class="tactic">inversion</span> <span class="id">h0</span>. <span class="tactic">clear</span> <span class="id">H1</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span>: <span class="id">H3</span> =&gt; [<span class="id">a</span>' [<span class="id">h1</span> <span class="id">h2</span>]]. <span class="id">invs</span> <span class="id">h2</span>. <span class="tactic">move</span>: <span class="id">h1</span> =&gt; [<span class="id">h1</span> <span class="id">h2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>'. <span class="tactic">split</span>; [<span class="id">done</span> | <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>].<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">H0</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="singletonT_andA_followsT">singletonT_andA_followsT</a></span>: <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">tr</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span>) <span class="id">tr</span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">v</span>) <span class="id">tr</span> <span class="id">tr</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> (<span class="id">u</span> <span class="id">andA</span> <span class="id">v</span>)) <span class="id">tr</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof381')">Proof.</div>
<div class="proofscript" id="proof381">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">move</span> =&gt; <span class="id">tr</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="tactic">inversion</span> <span class="id">h0</span>; <span class="tactic">subst</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">inversion</span> <span class="id">h1</span>; <span class="tactic">subst</span>. <span class="tactic">clear</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT_nil">singletonT_nil</a></span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT_nil">singletonT_nil</a></span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">by</span> <span class="tactic">split</span>.<br/>
- <span class="tactic">subst</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">H1</span> <span class="id">H2</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_ttA">followsT_ttA</a></span> : <span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>) <span class="id">tr</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof382')">Proof.</div>
<div class="proofscript" id="proof382">
<span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">case</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<h2> Append property </h2>
<br/>
<div class="doc">The append property holds for a trace whenever it has
a prefix for which <span class="bracket"><span class="id">p1</span></span> holds, and <span class="bracket"><span class="id">p2</span></span> holds for the suffix. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="appendT">appendT</a></span> (<span class="id">p1</span> <span class="id">p2</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
<span class="kwd">fun</span> <span class="id">tr</span> =&gt; <span class="id">exists</span> <span class="id">tr</span>', <span class="id">p1</span> <span class="id">tr</span>' /\ <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p2</span> <span class="id">tr</span>' <span class="id">tr</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Infix</span> "*+*" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="appendT_cont">appendT_cont</a></span> : <span class="kwd">forall</span> (<span class="id">p0</span> <span class="id">p1</span> <span class="id">q0</span> <span class="id">q1</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;(<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id">p0</span> <span class="id">tr</span> -&gt; <span class="id">p1</span> <span class="id">tr</span>) -&gt;<br/>
&nbsp;(<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id">q0</span> <span class="id">tr</span> -&gt; <span class="id">q1</span> <span class="id">tr</span>) -&gt;<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p0</span> <span class="id">q0</span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p1</span> <span class="id">q1</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof383')">Proof.</div>
<div class="proofscript" id="proof383">
<span class="tactic">move</span> =&gt; <span class="id">p0</span> <span class="id">p1</span> <span class="id">q0</span> <span class="id">q1</span> <span class="id">hp</span> <span class="id">hq</span> <span class="id">tr</span> [<span class="id">tr0</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="id">exists</span> <span class="id">tr0</span>. <span class="tactic">split</span>. <span class="id">have</span> := <span class="id">hp</span> <span class="id">_</span> <span class="id">h0</span>; <span class="tactic">apply</span>. <span class="tactic">clear</span> <span class="id">h0</span>.<br/>
<span class="tactic">move</span>: <span class="id">tr0</span> <span class="id">tr</span> <span class="id">h1</span>. <span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="tactic">exact</span>: (<span class="id">hq</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
- <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="appendT_cont_L">appendT_cont_L</a></span> : <span class="kwd">forall</span> (<span class="id">p0</span> <span class="id">p1</span> <span class="id">q</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;(<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id">p0</span> <span class="id">tr</span> -&gt; <span class="id">p1</span> <span class="id">tr</span>) -&gt;<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr</span>, (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p0</span> <span class="id">q</span> <span class="id">tr</span>) -&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p1</span> <span class="id">q</span> <span class="id">tr</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof384')">Proof.</div>
<div class="proofscript" id="proof384">
<span class="tactic">move</span> =&gt; <span class="id">p0</span> <span class="id">p1</span> <span class="id">q</span> <span class="id">hp</span>. <span class="tactic">move</span> =&gt; <span class="id">tr</span> [<span class="id">tr0</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="id">exists</span> <span class="id">tr0</span>. <span class="tactic">split</span>. <span class="id">have</span> := <span class="id">hp</span> <span class="id">_</span> <span class="id">h0</span>; <span class="tactic">apply</span>. <span class="tactic">apply</span> <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="appendT_cont_R">appendT_cont_R</a></span>: <span class="kwd">forall</span> (<span class="id">p</span> <span class="id">q0</span> <span class="id">q1</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
(<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id">q0</span> <span class="id">tr</span> -&gt; <span class="id">q1</span> <span class="id">tr</span>) -&gt;<br/>
<span class="kwd">forall</span> <span class="id">tr</span>, (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p</span> <span class="id">q0</span> <span class="id">tr</span>) -&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p</span> <span class="id">q1</span> <span class="id">tr</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof385')">Proof.</div>
<div class="proofscript" id="proof385">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q0</span> <span class="id">q1</span> <span class="id">hq</span>. <span class="id">have</span> := (@<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT_cont">appendT_cont</a></span> <span class="id">p</span> <span class="id">p</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">hq</span>). <span class="tactic">apply</span> =&gt; //.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="appendT_setoidT">appendT_setoidT</a></span>: <span class="kwd">forall</span> (<span class="id">p0</span> <span class="id">p1</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">p1</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p0</span> <span class="id">p1</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof386')">Proof.</div>
<div class="proofscript" id="proof386">
<span class="tactic">move</span> =&gt; <span class="id">p0</span> <span class="id">p1</span> <span class="id">hp1</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span> <span class="id">tr1</span> <span class="id">h1</span>.<br/>
<span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">tr2</span> [<span class="id">h0</span> <span class="id">h2</span>]]. <span class="id">exists</span> <span class="id">tr2</span>. <span class="tactic">split</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">h0</span>.<br/>
<span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_setoidT_R">followsT_setoidT_R</a></span> <span class="id">hp1</span> <span class="id">h2</span> <span class="id">h1</span>. <span class="tactic">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_followsT">followsT_followsT</a></span>: <span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span> <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">tr2</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p</span> <span class="id">tr0</span> <span class="id">tr1</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">q</span> <span class="id">tr1</span> <span class="id">tr2</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id">p</span> *+* <span class="id">q</span>) <span class="id">tr0</span> <span class="id">tr2</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof387')">Proof.</div>
<div class="proofscript" id="proof387">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">case</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">tr1</span> <span class="id">tr2</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_hd">followsT_hd</a></span> <span class="id">h1</span> =&gt; <span class="id">h2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">tr1</span>. <span class="tactic">split</span> =&gt; //.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">tr2</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H3</span> <span class="id">H4</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="appendT_assoc_L">appendT_assoc_L</a></span> : <span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">p3</span> <span class="id">tr</span>,<br/>
&nbsp;(<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p1</span> <span class="id">p2</span>) <span class="id">p3</span>) <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p1</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p2</span> <span class="id">p3</span>) <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof388')">Proof.</div>
<div class="proofscript" id="proof388">
<span class="tactic">move</span> =&gt; <span class="id">p1</span> <span class="id">p2</span> <span class="id">p3</span> <span class="id">tr0</span> <span class="id">h1</span>. <span class="tactic">move</span>: <span class="id">h1</span> =&gt; [<span class="id">tr1</span> [<span class="id">h1</span> <span class="id">h2</span>]]. <span class="tactic">move</span>: <span class="id">h1</span> =&gt; [<span class="id">tr2</span> <span class="id">h1</span>].<br/>
<span class="tactic">move</span>: <span class="id">h1</span> =&gt; [<span class="id">h1</span> <span class="id">h3</span>]. <span class="id">exists</span> <span class="id">tr2</span>. <span class="tactic">split</span>; <span class="id">first</span> <span class="id">done</span>. <span class="tactic">clear</span> <span class="id">h1</span>.<br/>
<span class="tactic">move</span>: <span class="id">tr2</span> <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h2</span> <span class="id">h3</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">tr2</span> <span class="id">h1</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">h2</span>.<br/>
- <span class="id">have</span> <span class="id">h2</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_hd">followsT_hd</a></span> <span class="id">h1</span>. <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">h2</span>. <span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> <span class="id">h2</span>.  <span class="tactic">apply</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tr2</span>. <span class="tactic">by</span> <span class="tactic">split</span>.<br/>
- <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>. <span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span> <span class="id">H</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="appendT_finalTA">appendT_finalTA</a></span>: <span class="kwd">forall</span> (<span class="id">p</span> <span class="id">q</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">tr0</span> <span class="id">tr1</span>,<br/>
&nbsp;<span class="id">p</span> <span class="id">tr0</span> -&gt; <span class="id">q</span> <span class="id">tr1</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA">finalTA</a></span> <span class="id">tr0</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr1</span>) -&gt;<br/>
&nbsp;(<span class="id">p</span> *+* <span class="id">q</span>) (<span class="id">tr0</span> +++ <span class="id">tr1</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof389')">Proof.</div>
<div class="proofscript" id="proof389">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q</span> <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">hp</span> <span class="id">hq</span> <span class="id">hfin</span>. <span class="id">exists</span> <span class="id">tr0</span>. <span class="tactic">split</span> =&gt; //.<br/>
<span class="tactic">clear</span> <span class="id">hp</span>. <span class="tactic">move</span>: <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">hq</span> <span class="id">hfin</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">case</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">tr0</span> <span class="id">hq</span> <span class="id">h1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_nil">trace_append_nil</a></span>. <span class="id">invs</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">rewrite</span> [<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> +++ <span class="id">tr1</span>]<span class="id"><a href="CasperCBC.Lib.Traces.html#trace_destr">trace_destr</a></span> /=.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>. <span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">h0</span> <span class="id">H3</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="AppendT">AppendT</a></span> (<span class="id">p1</span> <span class="id">p2</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f0</span> <span class="id">h0</span> := <span class="id">p1</span> <span class="kwd">in</span><br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f1</span> <span class="id">h1</span> := <span class="id">p2</span> <span class="kwd">in</span><br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">f0</span> <span class="id">f1</span>) (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT_setoidT">appendT_setoidT</a></span> <span class="id">h1</span>).<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Infix</span> "***" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#AppendT">AppendT</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_assoc_L">AppendT_assoc_L</a></span>: <span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">p3</span>, ((<span class="id">p1</span> *** <span class="id">p2</span>) *** <span class="id">p3</span>) =&gt;&gt; (<span class="id">p1</span> *** <span class="id">p2</span> *** <span class="id">p3</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof390')">Proof.</div>
<div class="proofscript" id="proof390">
<span class="tactic">move</span> =&gt; <span class="id">p1</span> <span class="id">p2</span> <span class="id">p3</span> <span class="id">tr0</span> <span class="id">h1</span>. <span class="tactic">destruct</span> <span class="id">p1</span> <span class="kwd">as</span> [<span class="id">f1</span> <span class="id">hf1</span>]. <span class="tactic">destruct</span> <span class="id">p2</span> <span class="kwd">as</span> [<span class="id">f2</span> <span class="id">hf2</span>].<br/>
<span class="tactic">destruct</span> <span class="id">p3</span> <span class="kwd">as</span> [<span class="id">f3</span> <span class="id">hf3</span>]. <span class="tactic">simpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h1</span>. <span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT_assoc_L">appendT_assoc_L</a></span> <span class="id">h1</span>. <span class="tactic">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_cont">AppendT_cont</a></span> : <span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">q1</span> <span class="id">q2</span>, <span class="id">p1</span> =&gt;&gt; <span class="id">p2</span> -&gt; <span class="id">q1</span> =&gt;&gt; <span class="id">q2</span> -&gt; (<span class="id">p1</span> *** <span class="id">q1</span>) =&gt;&gt; (<span class="id">p2</span> *** <span class="id">q2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof391')">Proof.</div>
<div class="proofscript" id="proof391">
<span class="tactic">move</span> =&gt; <span class="id">p1</span> <span class="id">p2</span> <span class="id">q1</span> <span class="id">q2</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="tactic">destruct</span> <span class="id">p1</span> <span class="kwd">as</span> [<span class="id">p1</span> <span class="id">hp1</span>]. <span class="tactic">destruct</span> <span class="id">p2</span> <span class="kwd">as</span> [<span class="id">p2</span> <span class="id">hp2</span>].<br/>
<span class="tactic">destruct</span> <span class="id">q1</span> <span class="kwd">as</span> [<span class="id">q1</span> <span class="id">hq1</span>]. <span class="tactic">destruct</span> <span class="id">q2</span> <span class="kwd">as</span> [<span class="id">q2</span> <span class="id">hq2</span>].  <span class="tactic">move</span> =&gt; <span class="id">tr0</span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">h2</span>. <span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT_cont">appendT_cont</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">h2</span>. <span class="tactic">apply</span>. <span class="tactic">apply</span> <span class="id">h0</span>. <span class="tactic">apply</span> <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_cont_L">AppendT_cont_L</a></span>: <span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">q</span>, <span class="id">p1</span> =&gt;&gt; <span class="id">p2</span> -&gt; (<span class="id">p1</span> *** <span class="id">q</span>) =&gt;&gt; (<span class="id">p2</span> *** <span class="id">q</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof392')">Proof.</div>
<div class="proofscript" id="proof392">
<span class="tactic">move</span> =&gt; <span class="id">p1</span> <span class="id">p2</span> <span class="id">q</span> <span class="id">h0</span>. <span class="tactic">destruct</span> <span class="id">p1</span> <span class="kwd">as</span> [<span class="id">p1</span> <span class="id">hp1</span>]. <span class="tactic">destruct</span> <span class="id">p2</span> <span class="kwd">as</span> [<span class="id">p2</span> <span class="id">hp2</span>].<br/>
<span class="tactic">destruct</span> <span class="id">q</span> <span class="kwd">as</span> [<span class="id">q</span> <span class="id">hq</span>]. <span class="tactic">move</span> =&gt; <span class="id">tr0</span>. <span class="tactic">simpl</span>.<br/>
<span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT_cont_L">appendT_cont_L</a></span> <span class="id">h0</span>.  <span class="tactic">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_cont_R">AppendT_cont_R</a></span> : <span class="kwd">forall</span> <span class="id">q</span> <span class="id">p1</span> <span class="id">p2</span>, <span class="id">p1</span> =&gt;&gt; <span class="id">p2</span> -&gt; (<span class="id">q</span> *** <span class="id">p1</span>) =&gt;&gt; (<span class="id">q</span> *** <span class="id">p2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof393')">Proof.</div>
<div class="proofscript" id="proof393">
<span class="tactic">move</span> =&gt; <span class="id">q</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">h0</span>. <span class="tactic">destruct</span> <span class="id">p1</span> <span class="kwd">as</span> [<span class="id">p1</span> <span class="id">hp1</span>]. <span class="tactic">destruct</span> <span class="id">p2</span> <span class="kwd">as</span> [<span class="id">p2</span> <span class="id">hp2</span>].<br/>
<span class="tactic">destruct</span> <span class="id">q</span> <span class="kwd">as</span> [<span class="id">q</span> <span class="id">hq</span>]. <span class="tactic">move</span> =&gt; <span class="id">tr0</span>. <span class="tactic">simpl</span>. <span class="tactic">move</span> =&gt; <span class="id">h1</span>.<br/>
<span class="id">have</span> := (@<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT_cont">appendT_cont</a></span> <span class="id">q</span> <span class="id">q</span> <span class="id">p1</span> <span class="id">p2</span>). <span class="tactic">apply</span>. <span class="id">done</span>. <span class="tactic">apply</span> <span class="id">h0</span>.<br/>
<span class="tactic">exact</span> <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_ttA">AppendT_ttA</a></span>: <span class="kwd">forall</span> <span class="id">p</span>, <span class="id">p</span> =&gt;&gt; (<span class="id">p</span> *** [|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|]).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof394')">Proof.</div>
<div class="proofscript" id="proof394">
<span class="tactic">move</span> =&gt; [<span class="id">f</span> <span class="id">hp</span>] <span class="id">tr0</span> <span class="id">h0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>. <span class="tactic">simpl</span>. <span class="id">exists</span> <span class="id">tr0</span>.<br/>
<span class="tactic">split</span> =&gt; //. <span class="tactic">clear</span> <span class="id">h0</span> <span class="id">hp</span>. <span class="tactic">move</span>: <span class="id">tr0</span>. <span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">case</span>. <span class="tactic">move</span> =&gt; <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //.<br/>
<span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#nil_singletonT">nil_singletonT</a></span>. <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span>.<br/>
<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SingletonT_DupT_AppendT_andA_DupT">SingletonT_DupT_AppendT_andA_DupT</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">b</span>, ([|<span class="id">u</span>|] *** &lt;&lt;<span class="id">v</span>;<span class="id">b</span>&gt;&gt;) =&gt;&gt; &lt;&lt;<span class="id">u</span> <span class="id">andA</span> <span class="id">v</span>;<span class="id">b</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof395')">Proof.</div>
<div class="proofscript" id="proof395">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">b</span> <span class="id">tr0</span> [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">h0</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h2</span>]]. <span class="id">invs</span> <span class="id">h2</span>.<br/>
<span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">h1</span> <span class="id">h2</span>]]. <span class="id">invs</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>. <span class="id">exists</span> <span class="id">a</span>.<br/>
<span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>. <span class="tactic">by</span> <span class="tactic">split</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DupT_andA_AppendT_SingletonT_DupT">DupT_andA_AppendT_SingletonT_DupT</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">b</span>, &lt;&lt;<span class="id">u</span> <span class="id">andA</span> <span class="id">v</span>;<span class="id">b</span>&gt;&gt; =&gt;&gt; ([|<span class="id">u</span>|] *** &lt;&lt;<span class="id">v</span>;<span class="id">b</span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof396')">Proof.</div>
<div class="proofscript" id="proof396">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">b</span> <span class="id">tr0</span> [<span class="id">a</span> [[<span class="id">hu</span> <span class="id">hv</span>] <span class="id">h1</span>]]. <span class="id">invs</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">H1</span>. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>). <span class="tactic">split</span>.<br/>
- <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DupT_andA_AppendT_SingletonT">DupT_andA_AppendT_SingletonT</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">b</span>, &lt;&lt;<span class="id">u</span> <span class="id">andA</span> <span class="id">v</span>;<span class="id">b</span>&gt;&gt; =&gt;&gt; &lt;&lt;<span class="id">u</span>;<span class="id">b</span>&gt;&gt; *** [|<span class="id">v</span>|].<br/>
<div class="toggleproof" onclick="toggleDisplay('proof397')">Proof.</div>
<div class="proofscript" id="proof397">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">b</span> <span class="id">tr0</span> [<span class="id">a</span> [[<span class="id">hu</span> <span class="id">hv</span>] <span class="id">h0</span>]]. <span class="id">invs</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">H1</span>. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>)).<br/>
<span class="tactic">split</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DupT_AppendT_SingletonT_andA_DupT">DupT_AppendT_SingletonT_andA_DupT</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">b</span>, (&lt;&lt;<span class="id">u</span>;<span class="id">b</span>&gt;&gt; *** [|<span class="id">v</span>|]) =&gt;&gt; &lt;&lt;<span class="id">u</span> <span class="id">andA</span> <span class="id">v</span>;<span class="id">b</span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof398')">Proof.</div>
<div class="proofscript" id="proof398">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">b</span> <span class="id">tr0</span> [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">destruct</span> <span class="id">h0</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">hu</span> <span class="id">h0</span>]]. <span class="id">invs</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">H1</span>.<br/>
<span class="id">invs</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">H3</span>. <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">hv</span> <span class="id">h0</span>]]. <span class="id">invs</span> <span class="id">h0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">hu</span>. <span class="tactic">simpl</span>.<br/>
<span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_andA">AppendT_andA</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>, ([|<span class="id">u</span>|] *** [|<span class="id">v</span>|]) =&gt;&gt; [|<span class="id">u</span> <span class="id">andA</span> <span class="id">v</span>|].<br/>
<div class="toggleproof" onclick="toggleDisplay('proof399')">Proof.</div>
<div class="proofscript" id="proof399">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">tr0</span> [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">destruct</span> <span class="id">h0</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">hu</span> <span class="id">h0</span>]]. <span class="id">invs</span> <span class="id">h0</span>.<br/>
<span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">hv</span> <span class="id">h0</span>]]. <span class="id">invs</span> <span class="id">h0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">hu</span>. <span class="id">exists</span> <span class="id">a</span>.<br/>
<span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="andA_AppendT">andA_AppendT</a></span>: <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>, [|<span class="id">u</span> <span class="id">andA</span> <span class="id">v</span>|] =&gt;&gt; [|<span class="id">u</span>|] *** [|<span class="id">v</span>|].<br/>
<div class="toggleproof" onclick="toggleDisplay('proof400')">Proof.</div>
<div class="proofscript" id="proof400">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">tr0</span> [<span class="id">a</span> [[<span class="id">hu</span> <span class="id">hv</span>] <span class="id">h0</span>]]. <span class="id">invs</span> <span class="id">h0</span>. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>).<br/>
<span class="tactic">split</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //.<br/>
<span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SingletonT_AppendT">SingletonT_AppendT</a></span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">p</span>, ([|<span class="id">v</span>|] *** <span class="id">p</span>) =&gt;&gt; <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof401')">Proof.</div>
<div class="proofscript" id="proof401">
<span class="tactic">move</span> =&gt; <span class="id">v</span> [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr0</span>. <span class="tactic">simpl</span>. <span class="tactic">move</span> =&gt; [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="tactic">destruct</span> <span class="id">h0</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h2</span>]]. <span class="id">invs</span> <span class="id">h2</span>. <span class="tactic">by</span> <span class="id">invs</span> <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ttA_AppendT_implies">ttA_AppendT_implies</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, ([|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|] *** <span class="id">p</span>) =&gt;&gt; <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof402')">Proof.</div>
<div class="proofscript" id="proof402">
<span class="tactic">move</span> =&gt; <span class="id">p</span>.<br/>
<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#SingletonT_AppendT">SingletonT_AppendT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="implies_ttA_AppendT">implies_ttA_AppendT</a></span>: <span class="kwd">forall</span> <span class="id">p</span>, <span class="id">p</span> =&gt;&gt; [|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|] *** <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof403')">Proof.</div>
<div class="proofscript" id="proof403">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr0</span>; <span class="tactic">simpl</span> =&gt; <span class="id">htr0</span>. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr0</span>)). <span class="tactic">split</span>.<br/>
<span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr0</span>). <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="appendT_singletonT">appendT_singletonT</a></span>: <span class="kwd">forall</span> <span class="id">p</span> (<span class="id">hp</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">p</span>) <span class="id">u</span> <span class="id">tr</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span>) <span class="id">tr</span> -&gt; <span class="id">p</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof404')">Proof.</div>
<div class="proofscript" id="proof404">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">hp</span> <span class="id">u</span> <span class="id">tr0</span> <span class="id">h1</span>. <span class="tactic">move</span>: <span class="id">h1</span> =&gt; [<span class="id">tr1</span> [<span class="id">h1</span> <span class="id">h2</span>]].<br/>
<span class="id">have</span> <span class="id">h3</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_singletonT">followsT_singletonT</a></span> <span class="id">h2</span>.<br/>
<span class="tactic">exact</span>: <span class="id">hp</span> <span class="id">_</span> <span class="id">h1</span> <span class="id">_</span> <span class="id">h3</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_Singleton">AppendT_Singleton</a></span>: <span class="kwd">forall</span> <span class="id">p</span> <span class="id">v</span>, (<span class="id">p</span> *** [|<span class="id">v</span>|]) =&gt;&gt; <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof405')">Proof.</div>
<div class="proofscript" id="proof405">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">v</span> <span class="id">tr0</span>. <span class="tactic">simpl</span>. <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT_singletonT">appendT_singletonT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_ttA_implies">AppendT_ttA_implies</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, (<span class="id">p</span> *** [|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|]) =&gt;&gt; <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof406')">Proof.</div>
<div class="proofscript" id="proof406">
 <span class="tactic">move</span> =&gt; <span class="id">p</span>. <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#AppendT_Singleton">AppendT_Singleton</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="implies_AppendT_ttA">implies_AppendT_ttA</a></span>: <span class="kwd">forall</span> <span class="id">p</span>, <span class="id">p</span> =&gt;&gt; <span class="id">p</span> *** [|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|].<br/>
<div class="toggleproof" onclick="toggleDisplay('proof407')">Proof.</div>
<div class="proofscript" id="proof407">
 <span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr0</span>; <span class="tactic">simpl</span> =&gt; <span class="id">htr0</span>. <span class="id">exists</span> <span class="id">tr0</span>; <span class="tactic">split</span>; <span class="id">first</span> <span class="id">done</span>.<br/>
<span class="tactic">clear</span> <span class="id">hp</span> <span class="id">htr0</span>. <span class="tactic">move</span>: <span class="id">tr0</span>. <span class="id">cofix</span> <span class="id">hcoind</span>. <span class="tactic">case</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">by</span> <span class="tactic">split</span>; <span class="id">last</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">hcoind</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="TtT_AppendT_idem">TtT_AppendT_idem</a></span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span> *** <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span>) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof408')">Proof.</div>
<div class="proofscript" id="proof408">
 <span class="tactic">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_FiniteT_idem">AppendT_FiniteT_idem</a></span> : (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#FiniteT">FiniteT</a></span> *** <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#FiniteT">FiniteT</a></span>) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#FiniteT">FiniteT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof409')">Proof.</div>
<div class="proofscript" id="proof409">
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">move</span>: <span class="id">tr1</span> <span class="id">h0</span> <span class="id">tr0</span> <span class="id">h1</span>. <span class="tactic">induction</span> 1.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="id">done</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h1</span>. <span class="id">have</span> <span class="id">h1</span> := <span class="id">IHh0</span> <span class="id">_</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_delay">finiteT_delay</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">h1</span>. <span class="tactic">by</span> <span class="tactic">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FiniteT_AppendT_idem">FiniteT_AppendT_idem</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#FiniteT">FiniteT</a></span> =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#FiniteT">FiniteT</a></span> *** <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#FiniteT">FiniteT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof410')">Proof.</div>
<div class="proofscript" id="proof410">
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="tactic">simpl</span>. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr0</span>)). <span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_nil">finiteT_nil</a></span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FiniteT_SingletonT">FiniteT_SingletonT</a></span>: <span class="kwd">forall</span> <span class="id">u</span>, (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#FiniteT">FiniteT</a></span> *** [|<span class="id">u</span>|]) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#FiniteT">FiniteT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof411')">Proof.</div>
<div class="proofscript" id="proof411">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">tr</span> <span class="id">h0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="id">have</span> <span class="id">h2</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_singletonT">followsT_singletonT</a></span> <span class="id">h1</span> =&gt; {<span class="id">h1</span>}.<br/>
<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finiteT_setoidT">finiteT_setoidT</a></span> <span class="id">h0</span> <span class="id">h2</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="InfiniteT_implies_AppendT">InfiniteT_implies_AppendT</a></span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#InfiniteT">InfiniteT</a></span> =&gt;&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span> *** [|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ffA">ffA</a></span>|]).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof412')">Proof.</div>
<div class="proofscript" id="proof412">
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> [<span class="id">a</span> <span class="id">b</span> <span class="id">tr1</span>] <span class="id">hinfiniteT</span>. <span class="tactic">simpl</span>. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr1</span>). <span class="tactic">split</span> =&gt; //. <span class="tactic">clear</span> <span class="id">tr0</span>.<br/>
<span class="tactic">move</span>: <span class="id">a</span> <span class="id">b</span> <span class="id">tr1</span> <span class="id">hinfiniteT</span>. <span class="id">cofix</span> <span class="id">hcofix</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">h</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>. <span class="tactic">inversion</span> <span class="id">h</span>. <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id">hcofix</span>. <span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="AppendT_implies_InfiniteT">AppendT_implies_InfiniteT</a></span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span> *** [|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ffA">ffA</a></span>|]) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#InfiniteT">InfiniteT</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof413')">Proof.</div>
<div class="proofscript" id="proof413">
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> [<span class="id">tr1</span> [<span class="id">_</span> <span class="id">h1</span>]]. <span class="tactic">simpl</span>. <span class="tactic">move</span>: <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h1</span>. <span class="id">cofix</span> <span class="id">h0</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h1</span>.<br/>
<span class="tactic">inversion</span> <span class="id">h1</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">h1</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">h1</span> <span class="id">h2</span>]]. <span class="tactic">inversion</span> <span class="id">h1</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#infiniteT_delay">infiniteT_delay</a></span>. <span class="tactic">apply</span> (<span class="id">h0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>).<br/>
Qed.</div>
<br/>
<h2> Iteration property </h2>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="iterT">iterT</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="iterT_stop">iterT_stop</a></span> : <span class="kwd">forall</span> <span class="id">a</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">iterT</span> <span class="id">p</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>)<br/>
| <span class="id"><a name="iterT_loop">iterT_loop</a></span> : <span class="kwd">forall</span> <span class="id">tr</span> <span class="id">tr0</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">p</span> <span class="id">tr</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id">iterT</span> <span class="id">p</span>) <span class="id">tr</span> <span class="id">tr0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">iterT</span> <span class="id">p</span> <span class="id">tr0</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iterT_setoidT">iterT_setoidT</a></span> : <span class="kwd">forall</span> <span class="id">p</span> (<span class="id">hp</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> <span class="id">p</span>), <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof414')">Proof.</div>
<div class="proofscript" id="proof414">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">hp</span>. <span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="id">have</span> <span class="id">h0</span> : <span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#setoidT">setoidT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>) <span class="id">tr</span>).<br/>
- <span class="id">cofix</span> <span class="id">CIH1</span>. <span class="tactic">move</span> =&gt; <span class="id">tr</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span> <span class="id">tr1</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span>. <span class="tactic">symmetry</span>. <span class="tactic">apply</span>: <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_hd">bisim_hd</a></span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">_</span> <span class="id">h1</span>).<br/>
&nbsp;&nbsp;* <span class="id">invs</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">_</span> <span class="id">H4</span>).<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h1</span> <span class="id">tr1</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;* <span class="id">invs</span> <span class="id">h2</span>. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_stop">iterT_stop</a></span>.<br/>
&nbsp;&nbsp;* <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_loop">iterT_loop</a></span> <span class="id">H</span> (<span class="id">h0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">_</span> <span class="id">h2</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iterT_cont">iterT_cont</a></span>: <span class="kwd">forall</span> (<span class="id">p0</span> <span class="id">p1</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;(<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id">p0</span> <span class="id">tr</span> -&gt; <span class="id">p1</span> <span class="id">tr</span>) -&gt;<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p0</span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p1</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof415')">Proof.</div>
<div class="proofscript" id="proof415">
<span class="tactic">move</span> =&gt; <span class="id">p0</span> <span class="id">p1</span> <span class="id">hp</span>. <span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="id">have</span> <span class="id">h</span> : <span class="kwd">forall</span> <span class="id">tr0</span> <span class="id">tr1</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p0</span>) <span class="id">tr0</span> <span class="id">tr1</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p1</span>) <span class="id">tr0</span> <span class="id">tr1</span>.<br/>
&nbsp;<span class="id">cofix</span> <span class="id">CIH0</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;- <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>)).<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_stop">iterT_stop</a></span>.<br/>
- <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_loop">iterT_loop</a></span> (<span class="id">hp</span> <span class="id">_</span> <span class="id">H</span>)  (<span class="id">h</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iterT_appendT_dupT">iterT_appendT_dupT</a></span>: <span class="kwd">forall</span> (<span class="id">u</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span>) <span class="id">p</span> <span class="id">b</span> <span class="id">tr</span>,<br/>
&nbsp;<span class="id">u</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr</span>) -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#dupT">dupT</a></span> <span class="id">u</span> <span class="id">b</span>)) <span class="id">tr</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span>) <span class="id">tr</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof416')">Proof.</div>
<div class="proofscript" id="proof416">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">p</span> <span class="id">b</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">move</span> =&gt; <span class="id">tr</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h1</span>.<br/>
- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="tactic">by</span> <span class="tactic">split</span> =&gt; //; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="tactic">move</span>: <span class="id">H</span> =&gt; [<span class="id">tr1</span> [<span class="id">h2</span> <span class="id">h1</span>]]. <span class="tactic">clear</span> <span class="id">h2</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span>: <span class="id">tr</span> <span class="id">tr1</span> <span class="id">tr0</span> <span class="id">h1</span> <span class="id">H0</span>. <span class="id">cofix</span> <span class="id">CIH1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">tr2</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span>: <span class="id">H0</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h3</span>]]. <span class="id">invs</span> <span class="id">h3</span>. <span class="id">invs</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invs</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">H3</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">h0</span> <span class="id">H1</span>)).<br/>
&nbsp;&nbsp;- <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="IterT">IterT</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span> :=<br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f0</span> <span class="id">h0</span> := <span class="id">p</span> <span class="kwd">in</span><br/>
<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">f0</span>) (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_setoidT">iterT_setoidT</a></span> <span class="id">h0</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_cont">IterT_cont</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span>, <span class="id">p</span> =&gt;&gt; <span class="id">q</span> -&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>) =&gt;&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">q</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof417')">Proof.</div>
<div class="proofscript" id="proof417">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q</span> <span class="id">h0</span> <span class="id">tr0</span>. <span class="tactic">destruct</span> <span class="id">p</span> <span class="kwd">as</span> [<span class="id">p</span> <span class="id">hp</span>]. <span class="tactic">destruct</span> <span class="id">q</span> <span class="kwd">as</span> [<span class="id">q</span> <span class="id">hq</span>].<br/>
<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_cont">iterT_cont</a></span>. <span class="tactic">move</span> =&gt; <span class="id">tr1</span>. <span class="tactic">apply</span> <span class="id">h0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iterT_split_1">iterT_split_1</a></span>: <span class="kwd">forall</span> <span class="id">p</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span> <span class="id">tr</span> -&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span> <span class="id">tr</span>) \/ (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>) <span class="id">tr</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof418')">Proof.</div>
<div class="proofscript" id="proof418">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">tr</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="id">left</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span> =&gt; //. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="id">right</span>. <span class="tactic">by</span> <span class="id">exists</span> <span class="id">tr0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_unfold_0">IterT_unfold_0</a></span>: <span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span> =&gt;&gt; ([|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|] <span class="id">orT</span> (<span class="id">p</span> *** <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof419')">Proof.</div>
<div class="proofscript" id="proof419">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr0</span> /= =&gt; <span class="id">h0</span>.<br/>
<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_split_1">iterT_split_1</a></span> <span class="id">h0</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iterT_split_2">iterT_split_2</a></span>: <span class="kwd">forall</span> <span class="id">tr</span> <span class="id">p</span>,<br/>
&nbsp;(<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span> <span class="id">tr</span>) \/ (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>) <span class="id">tr</span>) -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof420')">Proof.</div>
<div class="proofscript" id="proof420">
<span class="tactic">move</span> =&gt; <span class="id">tr</span> <span class="id">p</span> <span class="id">h</span>. <span class="id">invs</span> <span class="id">h</span>.<br/>
- <span class="tactic">move</span>: <span class="id">H</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_stop">iterT_stop</a></span>.<br/>
- <span class="tactic">move</span>: <span class="id">H</span> =&gt; [<span class="id">tr0</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_loop">iterT_loop</a></span> <span class="id">h0</span> <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_fold_0">IterT_fold_0</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, ([|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|] <span class="id">orT</span> (<span class="id">p</span> *** <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>)) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof421')">Proof.</div>
<div class="proofscript" id="proof421">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr0</span> /=.<br/>
<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_split_2">iterT_split_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iterT_unfold_1">iterT_unfold_1</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">tr</span>, (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span> *+* <span class="id">p</span>) <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span> <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof422')">Proof.</div>
<div class="proofscript" id="proof422">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">tr</span> [<span class="id">tr0</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="tactic">move</span>: <span class="id">tr0</span> <span class="id">tr</span> <span class="id">h0</span> <span class="id">h1</span>.<br/>
<span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">apply</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_loop">iterT_loop</a></span> <span class="id">H1</span>). <span class="tactic">clear</span> <span class="id">H1</span>. <span class="tactic">move</span>: <span class="id">tr1</span>. <span class="id">cofix</span> <span class="id">CIH0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">case</span> =&gt; <span class="id">a</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_stop">iterT_stop</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">b</span> <span class="id">tr0</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH0</span> <span class="id">_</span>)).<br/>
- <span class="tactic">apply</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_loop">iterT_loop</a></span> <span class="id">H</span>). <span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">move</span>: <span class="id">tr</span> <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">H0</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">CIH0</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">tr2</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">rewrite</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_hd">followsT_hd</a></span> <span class="id">h1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">h1</span>).<br/>
&nbsp;&nbsp;* <span class="id">invs</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_unfold_1">IterT_unfold_1</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span> *** <span class="id">p</span>) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof423')">Proof.</div>
<div class="proofscript" id="proof423">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr</span> <span class="id">h0</span> /=. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>.<br/>
<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_unfold_1">iterT_unfold_1</a></span> <span class="id">h0</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_unfold_2">IterT_unfold_2</a></span>: <span class="kwd">forall</span> <span class="id">p</span>, ([|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|] <span class="id">orT</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span> *** <span class="id">p</span>)) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof424')">Proof.</div>
<div class="proofscript" id="proof424">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr0</span> /= <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">a</span> [<span class="id">_</span> <span class="id">h0</span>]]. <span class="id">invs</span> <span class="id">h0</span>. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_stop">iterT_stop</a></span>.<br/>
- <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_unfold_1">iterT_unfold_1</a></span> <span class="id">H</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stop_IterT">stop_IterT</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, [|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#ttA">ttA</a></span>|] =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof425')">Proof.</div>
<div class="proofscript" id="proof425">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] /= <span class="id">t0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
<span class="tactic">move</span>: <span class="id">H</span> =&gt; [<span class="id">_</span> <span class="id">h0</span>]. <span class="id">invs</span> <span class="id">h0</span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_stop">iterT_stop</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_fold_L">IterT_fold_L</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, (<span class="id">p</span> *** <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof426')">Proof.</div>
<div class="proofscript" id="proof426">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr0</span>. <span class="tactic">simpl</span>. <span class="tactic">move</span> =&gt; [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_loop">iterT_loop</a></span> <span class="id">h0</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iterT_iterT_2">iterT_iterT_2</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span> <span class="id">tr</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>) (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>) <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof427')">Proof.</div>
<div class="proofscript" id="proof427">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">exists</span> <span class="id">tr0</span>. <span class="tactic">split</span> =&gt; //. <span class="tactic">clear</span> <span class="id">h0</span>. <span class="tactic">move</span>: <span class="id">tr0</span>.<br/>
<span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">case</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_stop">iterT_stop</a></span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_IterT_2">IterT_IterT_2</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span> =&gt;&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span> *** <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof428')">Proof.</div>
<div class="proofscript" id="proof428">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr0</span> /=.<br/>
<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_iterT_2">iterT_iterT_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iterT_iterT">iterT_iterT</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">tr</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>) (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>) <span class="id">tr</span> -&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT">iterT</a></span> <span class="id">p</span>) <span class="id">tr</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof429')">Proof.</div>
<div class="proofscript" id="proof429">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">tr0</span> [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">move</span>: <span class="id">tr1</span> <span class="id">tr0</span> <span class="id">h0</span> <span class="id">h1</span>.<br/>
<span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">h0</span>. <span class="tactic">by</span> <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">h0</span>. <span class="tactic">apply</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_loop">iterT_loop</a></span> <span class="id">H</span>). <span class="tactic">clear</span> <span class="id">H</span>. <span class="tactic">move</span>: <span class="id">tr</span> <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">H0</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">CIH2</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">tr2</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">h0</span>. <span class="tactic">rewrite</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_hd">followsT_hd</a></span> <span class="id">h0</span>). <span class="tactic">apply</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">h0</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">move</span> =&gt; <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>. <span class="tactic">exact</span>: (<span class="id">CIH2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H4</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_IterT">IterT_IterT</a></span> : <span class="kwd">forall</span> <span class="id">p</span>, (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span> *** <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>) =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> <span class="id">p</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof430')">Proof.</div>
<div class="proofscript" id="proof430">
 <span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">tr</span> /=. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#iterT_iterT">iterT_iterT</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_DupT">IterT_DupT</a></span> : <span class="kwd">forall</span> <span class="id">v</span> <span class="id">b</span>,<br/>
&nbsp;([|<span class="id">v</span>|] *** (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span> *** &lt;&lt;<span class="id">v</span>;<span class="id">b</span>&gt;&gt;))) =&gt;&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span> *** [|<span class="id">v</span>|]).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof431')">Proof.</div>
<div class="proofscript" id="proof431">
<span class="tactic">move</span> =&gt; <span class="id">v</span> <span class="id">b</span> <span class="id">tr0</span> [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h2</span>]].<br/>
<span class="id">invs</span> <span class="id">h2</span>. <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">simpl</span>.<br/>
<span class="id">exists</span> <span class="id">tr0</span>. <span class="tactic">split</span> =&gt; //. <span class="tactic">move</span>: <span class="id">tr0</span> <span class="id">h0</span> <span class="id">H1</span>. <span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h1</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_nil">bisim_nil</a></span>.<br/>
- <span class="tactic">clear</span> <span class="id">h0</span>. <span class="tactic">move</span>: <span class="id">H</span> =&gt; [<span class="id">tr1</span> [<span class="id">_</span> <span class="id">h1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">move</span>: <span class="id">tr1</span> <span class="id">tr</span> <span class="id">tr0</span> <span class="id">h1</span> <span class="id">H0</span>. <span class="id">cofix</span> <span class="id">CIH0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">tr2</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span>: <span class="id">H0</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h2</span>]]. <span class="id">invs</span> <span class="id">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invs</span> <span class="id">H1</span>. <span class="id">invs</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">h0</span> <span class="id">H1</span>)).<br/>
&nbsp;&nbsp;* <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<h2> Last property </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="lastA">lastA</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span> :=<br/>
<span class="kwd">fun</span> <span class="id">a</span> =&gt; <span class="id">exists</span> <span class="id">tr</span>, <span class="id">p</span> <span class="id">tr</span> /\ <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA">finalTA</a></span> <span class="id">tr</span> <span class="id">a</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lastA_cont">lastA_cont</a></span>: <span class="kwd">forall</span> (<span class="id">p</span> <span class="id">q</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;(<span class="kwd">forall</span> <span class="id">tr</span>, <span class="id">p</span> <span class="id">tr</span> -&gt; <span class="id">q</span> <span class="id">tr</span>) -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastA">lastA</a></span> <span class="id">p</span> -&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastA">lastA</a></span> <span class="id">q</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof432')">Proof.</div>
<div class="proofscript" id="proof432">
<span class="tactic">move</span> =&gt; <span class="id">p0</span> <span class="id">p1</span> <span class="id">hp</span>. <span class="tactic">move</span> =&gt; <span class="id">a</span> [<span class="id">tr</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="id">exists</span> <span class="id">tr</span>. <span class="tactic">split</span>. <span class="tactic">apply</span>: <span class="id">hp</span> <span class="id">_</span> <span class="id">h0</span>. <span class="tactic">exact</span>: <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="LastA">LastA</a></span> (<span class="id">p</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT">propT</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA">propA</a></span> :=<br/>
<span class="kwd">let</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">f0</span> <span class="id">h0</span> := <span class="id">p</span> <span class="kwd">in</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastA">lastA</a></span> <span class="id">f0</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LastA_cont">LastA_cont</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span>, <span class="id">p</span> =&gt;&gt; <span class="id">q</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> <span class="id">p</span> -&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> <span class="id">q</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof433')">Proof.</div>
<div class="proofscript" id="proof433">
<span class="tactic">destruct</span> <span class="id">p</span> <span class="kwd">as</span> [<span class="id">f</span> <span class="id">hf</span>]. <span class="tactic">destruct</span> <span class="id">q</span> <span class="kwd">as</span> [<span class="id">g</span> <span class="id">hg</span>]. <span class="tactic">simpl</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">h0</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastA_cont">lastA_cont</a></span>. <span class="tactic">apply</span> <span class="id">h0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LastA_SingletonT_fold">LastA_SingletonT_fold</a></span> : <span class="kwd">forall</span> <span class="id">u</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> ([|<span class="id">u</span>|]) -&gt;&gt; <span class="id">u</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof434')">Proof.</div>
<div class="proofscript" id="proof434">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">a</span> <span class="id">h0</span>.<br/>
<span class="tactic">destruct</span> <span class="id">h0</span> <span class="kwd">as</span> [<span class="id">tr0</span> [<span class="id">h1</span> <span class="id">h2</span>]]. <span class="tactic">destruct</span> <span class="id">h1</span> <span class="kwd">as</span> [<span class="id">st1</span> [<span class="id">h1</span> <span class="id">h3</span>]].<br/>
<span class="id">invs</span> <span class="id">h3</span>. <span class="id">invs</span> <span class="id">h2</span>. <span class="tactic">exact</span>: <span class="id">h1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LastA_SingletonT_unfold">LastA_SingletonT_unfold</a></span> : <span class="kwd">forall</span> <span class="id">u</span>, <span class="id">u</span> -&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> ([|<span class="id">u</span>|]).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof435')">Proof.</div>
<div class="proofscript" id="proof435">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">a</span> <span class="id">h0</span>. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>). <span class="tactic">split</span>.<br/>
- <span class="tactic">by</span> <span class="id">exists</span> <span class="id">a</span>; <span class="tactic">split</span> =&gt; //; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_nil">bisim_nil</a></span>.<br/>
- <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_nil">finalTA_nil</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lastA_appendA">lastA_appendA</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span> <span class="id">a</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastA">lastA</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p</span> <span class="id">q</span>) <span class="id">a</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastA">lastA</a></span> <span class="id">q</span> <span class="id">a</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof436')">Proof.</div>
<div class="proofscript" id="proof436">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q</span> <span class="id">a</span> [<span class="id">tr0</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">tr</span> [<span class="id">h0</span> <span class="id">h2</span>]]. <span class="tactic">clear</span> <span class="id">h0</span>.<br/>
<span class="tactic">move</span>: <span class="id">tr0</span> <span class="id">a</span> <span class="id">h1</span> <span class="id">tr</span> <span class="id">h2</span>. <span class="tactic">induction</span> 1.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span> =&gt; //. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_nil">finalTA_nil</a></span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>). <span class="tactic">split</span> =&gt; //. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_delay">finalTA_delay</a></span> <span class="id">_</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">exact</span>: <span class="id">IHh1</span> <span class="id">_</span> <span class="id">H1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LastA_AppendA">LastA_AppendA</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">v</span>, <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> (<span class="id">p</span> *** [|<span class="id">v</span>|]) -&gt;&gt; <span class="id">v</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof437')">Proof.</div>
<div class="proofscript" id="proof437">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">v</span>. <span class="tactic">simpl</span>. <span class="tactic">move</span> =&gt; <span class="id">a</span> [<span class="id">tr</span> [[<span class="id">tr</span>' [<span class="id">_</span> <span class="id">h0</span>]] <span class="id">h1</span>]].<br/>
<span class="tactic">move</span>: <span class="id">tr</span> <span class="id">a</span> <span class="id">h1</span> <span class="id">tr</span>' <span class="id">h0</span>. <span class="tactic">induction</span> 1.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="tactic">move</span>: <span class="id">H0</span> =&gt; [<span class="id">a0</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">by</span> <span class="id">invs</span> <span class="id">h1</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span>: <span class="id">H0</span> =&gt; [<span class="id">a0</span> [<span class="id">_</span> <span class="id">h0</span>]]. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">exact</span>: <span class="id">IHh1</span> <span class="id">_</span> <span class="id">H1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LastA_andA">LastA_andA</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">u</span>, ((<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> <span class="id">p</span>) <span class="id">andA</span> <span class="id">u</span>) -&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> (<span class="id">p</span> *** [|<span class="id">u</span>|]).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof438')">Proof.</div>
<div class="proofscript" id="proof438">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">u</span> <span class="id">a</span> [<span class="id">h0</span> <span class="id">h1</span>]. <span class="tactic">destruct</span> <span class="id">p</span> <span class="kwd">as</span> [<span class="id">p</span> <span class="id">hp</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">destruct</span> <span class="id">h0</span> <span class="kwd">as</span> [<span class="id">tr0</span> [<span class="id">h2</span> <span class="id">h3</span>]].<br/>
<span class="id">exists</span> <span class="id">tr0</span>. <span class="tactic">split</span> =&gt; //. <span class="id">exists</span> <span class="id">tr0</span>. <span class="tactic">split</span> =&gt; //.<br/>
<span class="tactic">clear</span> <span class="id">h2</span>. <span class="tactic">move</span>: <span class="id">tr0</span> <span class="id">a</span> <span class="id">h3</span> <span class="id">h1</span>.<br/>
<span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">a</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">h0</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span> =&gt; //. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="tactic">move</span> =&gt; <span class="id">h0</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">h0</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LastA_IterA">LastA_IterA</a></span> : <span class="kwd">forall</span> <span class="id">v</span> <span class="id">b</span> <span class="id">p</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> ([|<span class="id">v</span>|] *** (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> (<span class="id">p</span> *** &lt;&lt;<span class="id">v</span>;<span class="id">b</span>&gt;&gt;))) -&gt;&gt; <span class="id">v</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof439')">Proof.</div>
<div class="proofscript" id="proof439">
<span class="tactic">move</span> =&gt; <span class="id">v</span> <span class="id">b</span> <span class="id">p</span> <span class="id">a</span> <span class="id">h0</span>.<br/>
<span class="id">have</span> <span class="id">h1</span>: <span class="id">p</span> =&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span> <span class="tactic">by</span> [].<br/>
<span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA_cont">LastA_cont</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#AppendT_cont_R">AppendT_cont_R</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT_cont">IterT_cont</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#AppendT_cont_L">AppendT_cont_L</a></span> <span class="id">h1</span>))) <span class="id">h0</span>. <span class="tactic">clear</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="tactic">move</span> =&gt; <span class="id">h0</span>.<br/>
<span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA_cont">LastA_cont</a></span> (@<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT_DupT">IterT_DupT</a></span> <span class="id">v</span> <span class="id">b</span>) <span class="id">h0</span> =&gt; {<span class="id">h0</span>}.<br/>
<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA_AppendA">LastA_AppendA</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="IterT_LastA_DupT">IterT_LastA_DupT</a></span> : <span class="kwd">forall</span> <span class="id">v</span> <span class="id">b</span>,<br/>
&nbsp;(&lt;&lt;<span class="id">v</span>;<span class="id">b</span>&gt;&gt; *** (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#IterT">IterT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span> *** &lt;&lt;<span class="id">v</span>;<span class="id">b</span>&gt;&gt;))) =&gt;&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TtT">TtT</a></span> *** [|<span class="id">v</span>|]).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof440')">Proof.</div>
<div class="proofscript" id="proof440">
<span class="tactic">move</span> =&gt; <span class="id">v</span> <span class="id">b</span> <span class="id">tr0</span> [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]].<br/>
<span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h2</span>]]. <span class="id">invs</span> <span class="id">h2</span>.<br/>
<span class="id">invs</span> <span class="id">H1</span>. <span class="id">invs</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">H3</span>. <span class="tactic">simpl</span>.<br/>
<span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr</span>') <span class="id">b</span> <span class="id">tr</span>'). <span class="tactic">split</span> =&gt; //.<br/>
<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> =&gt; //. <span class="tactic">move</span>: <span class="id">tr</span>' <span class="id">h0</span> <span class="id">H1</span>.<br/>
<span class="id">cofix</span> <span class="id">CIH</span>.<br/>
<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h1</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h0</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_nil">bisim_nil</a></span>.<br/>
- <span class="tactic">clear</span> <span class="id">h0</span>. <span class="tactic">move</span>: <span class="id">H</span> =&gt; [<span class="id">tr1</span> [<span class="id">_</span> <span class="id">h1</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">move</span>: <span class="id">tr1</span> <span class="id">tr</span> <span class="id">tr0</span> <span class="id">h1</span> <span class="id">H0</span>. <span class="id">cofix</span> <span class="id">CIH0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">tr1</span> <span class="id">tr2</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span>: <span class="id">H0</span> =&gt; [<span class="id">a</span> [<span class="id">h0</span> <span class="id">h2</span>]]. <span class="id">invs</span> <span class="id">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invs</span> <span class="id">H1</span>. <span class="id">invs</span> <span class="id">h1</span>. <span class="id">invs</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH</span> <span class="id">_</span> <span class="id">h0</span> <span class="id">H1</span>)).<br/>
&nbsp;&nbsp;* <span class="id">invs</span> <span class="id">h1</span>. <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">CIH0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H4</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LastA_LastA">LastA_LastA</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span>,<br/>
&nbsp;(<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> ([|<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> <span class="id">p</span>|] *** <span class="id">q</span>)) -&gt;&gt; (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> (<span class="id">p</span> *** <span class="id">q</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof441')">Proof.</div>
<div class="proofscript" id="proof441">
<span class="tactic">move</span> =&gt; <span class="id">p</span> <span class="id">q</span> <span class="id">a</span>. <span class="tactic">destruct</span> <span class="id">p</span> <span class="kwd">as</span> [<span class="id">p</span> <span class="id">hp</span>]. <span class="tactic">destruct</span> <span class="id">q</span> <span class="kwd">as</span> [<span class="id">q</span> <span class="id">hq</span>].<br/>
<span class="tactic">simpl</span>. <span class="tactic">move</span> =&gt; [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">tr0</span> [<span class="id">h0</span> <span class="id">h2</span>]].<br/>
<span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">tr2</span> [<span class="id">h0</span> <span class="id">h3</span>]].<br/>
<span class="id">invs</span> <span class="id">h3</span>. <span class="id">invs</span> <span class="id">h2</span>. <span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">tr2</span> [<span class="id">h0</span> <span class="id">h2</span>]].<br/>
<span class="id">exists</span> (<span class="id">tr2</span> +++ <span class="id">tr1</span>). <span class="tactic">split</span>.<br/>
- <span class="id">exists</span> <span class="id">tr2</span>. <span class="tactic">split</span> =&gt; //. <span class="tactic">clear</span> <span class="id">h1</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span>: <span class="id">tr2</span> <span class="id">h2</span>. <span class="id">cofix</span> <span class="id">CIH</span>. <span class="tactic">case</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">a0</span> <span class="id">h0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_nil">trace_append_nil</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="tactic">by</span> <span class="id">invs</span> <span class="id">h0</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">a0</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">h0</span>. <span class="id">invs</span> <span class="id">h0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_cons">trace_append_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>. <span class="tactic">exact</span>: (<span class="id">CIH</span> <span class="id">_</span> <span class="id">H4</span>).<br/>
- <span class="tactic">clear</span> <span class="id">H1</span> <span class="id">h0</span>. <span class="tactic">move</span> <span class="id">h0</span>: (<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr1</span>) =&gt; <span class="id">a0</span>. <span class="tactic">rewrite</span> <span class="id">h0</span> <span class="kwd">in</span> <span class="id">h2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span>: <span class="id">tr2</span> <span class="id">a0</span> <span class="id">h2</span> <span class="id">tr1</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="tactic">by</span> <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_nil">trace_append_nil</a></span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">h0</span> <span class="id">h1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#trace_append_cons">trace_append_cons</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_delay">finalTA_delay</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">IHh2</span> <span class="id">_</span> <span class="id">h0</span> <span class="id">h1</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SingletonT_andA_AppendT">SingletonT_andA_AppendT</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>,<br/>
&nbsp;(<span class="id">v</span> <span class="id">andA</span> <span class="id">u</span>) -&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> ([|<span class="id">v</span>|] *** [|<span class="id">u</span>|]).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof442')">Proof.</div>
<div class="proofscript" id="proof442">
<span class="tactic">move</span> =&gt; <span class="id">u</span> <span class="id">v</span> <span class="id">a</span> [<span class="id">h0</span> <span class="id">h1</span>]. <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>). <span class="tactic">split</span>.<br/>
- <span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>). <span class="tactic">split</span>. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span> =&gt; //. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a</span>. <span class="tactic">split</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_nil">finalTA_nil</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id"><a name="lastdup">lastdup</a></span> (<span class="id">tr</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span>) (<span class="id">b</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.B">B</a></span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> :=<br/>
<span class="kwd">match</span> <span class="id">tr</span> <span class="kwd">with</span><br/>
| <span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span> =&gt; <span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> <span class="id">a</span>)<br/>
| <span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span>' <span class="id">tr</span>' =&gt; <span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span>' (<span class="id">lastdup</span> <span class="id">tr</span>' <span class="id">b</span>)<br/>
<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lastdup_hd">lastdup_hd</a></span>: <span class="kwd">forall</span> <span class="id">tr</span> <span class="id">b</span>, <span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr</span> = <span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">tr</span> <span class="id">b</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof443')">Proof.</div>
<div class="proofscript" id="proof443">
<span class="tactic">by</span> <span class="tactic">case</span> =&gt; [<span class="id">a</span> <span class="id">b</span>|<span class="id">a</span> <span class="id">b</span> <span class="id">tr</span> <span class="id">b0</span>]; <span class="tactic">rewrite</span> [<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">_</span> <span class="id">_</span>]<span class="id"><a href="CasperCBC.Lib.Traces.html#trace_destr">trace_destr</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="followsT_dupT">followsT_dupT</a></span> : <span class="kwd">forall</span> <span class="id">u</span> <span class="id">tr</span> <span class="id">b</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT">singletonT</a></span> <span class="id">u</span>) <span class="id">tr</span> <span class="id">tr</span> -&gt;<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#dupT">dupT</a></span> <span class="id">u</span> <span class="id">b</span>) <span class="id">tr</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">tr</span> <span class="id">b</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof444')">Proof.</div>
<div class="proofscript" id="proof444">
<span class="tactic">move</span> =&gt; <span class="id">u</span>. <span class="id">cofix</span> <span class="id">COINDHYP</span>. <span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">b</span> <span class="id">h0</span>. <span class="tactic">inversion</span> <span class="id">h0</span>.<br/>
- <span class="tactic">clear</span> <span class="id">H</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">h0</span>. <span class="tactic">rewrite</span> [<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">_</span> <span class="id">_</span>]<span class="id"><a href="CasperCBC.Lib.Traces.html#trace_destr">trace_destr</a></span> /=.<br/>
&nbsp;&nbsp;<span class="tactic">move</span>: <span class="id">H0</span> =&gt; [<span class="id">a0</span> [<span class="id">h0</span> <span class="id">h1</span>]]. <span class="id">invs</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span> =&gt; //. <span class="id">exists</span> <span class="id">a0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span> =&gt; //. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span>.<br/>
- <span class="tactic">clear</span> <span class="id">h0</span> <span class="id">H0</span> <span class="id">H</span>. <span class="tactic">rewrite</span> [<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">_</span> <span class="id">_</span>]<span class="id"><a href="CasperCBC.Lib.Traces.html#trace_destr">trace_destr</a></span> /=.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">COINDHYP</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finalTA_lastdup">finalTA_lastdup</a></span> : <span class="kwd">forall</span> <span class="id">tr</span> <span class="id">a</span> <span class="id">b</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA">finalTA</a></span> <span class="id">tr</span> <span class="id">a</span> -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA">finalTA</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">tr</span> <span class="id">b</span>) <span class="id">a</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof445')">Proof.</div>
<div class="proofscript" id="proof445">
<span class="tactic">induction</span> 1.<br/>
- <span class="tactic">rewrite</span> [<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">_</span> <span class="id">_</span>]<span class="id"><a href="CasperCBC.Lib.Traces.html#trace_destr">trace_destr</a></span> /=.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_delay">finalTA_delay</a></span>. <span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_nil">finalTA_nil</a></span>.<br/>
- <span class="tactic">rewrite</span> [<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">_</span> <span class="id">_</span>]<span class="id"><a href="CasperCBC.Lib.Traces.html#trace_destr">trace_destr</a></span> /=.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_delay">finalTA_delay</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="LastA_DupT">LastA_DupT</a></span> : <span class="kwd">forall</span> <span class="id">p</span> <span class="id">u</span> <span class="id">b</span>,<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> (<span class="id">p</span> *** [|<span class="id">u</span>|]) -&gt;&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#LastA">LastA</a></span> (<span class="id">p</span> *** &lt;&lt;<span class="id">u</span>;<span class="id">b</span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof446')">Proof.</div>
<div class="proofscript" id="proof446">
<span class="tactic">move</span> =&gt; [<span class="id">p</span> <span class="id">hp</span>] <span class="id">u</span> <span class="id">b</span> <span class="id">a</span> [<span class="id">tr0</span> [<span class="id">h0</span> <span class="id">h1</span>]] . <span class="tactic">move</span>: <span class="id">h0</span> =&gt; [<span class="id">tr1</span> [<span class="id">h0</span> <span class="id">h2</span>]].<br/>
<span class="id">exists</span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#lastdup">lastdup</a></span> <span class="id">tr0</span> <span class="id">b</span>). <span class="tactic">split</span>.<br/>
- <span class="id">have</span> <span class="id">h3</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_singletonT">followsT_singletonT</a></span> <span class="id">h2</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">h4</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_setoidT">followsT_setoidT</a></span> (@<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#singletonT_setoidT">singletonT_setoidT</a></span> <span class="id">_</span>) <span class="id">h2</span> <span class="id">h3</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#bisim_refl">bisim_refl</a></span> <span class="id">_</span>) =&gt; {<span class="id">h2</span>}.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tr0</span>. <span class="tactic">split</span>. <span class="id">have</span> := <span class="id">hp</span> <span class="id">_</span> <span class="id">h0</span> <span class="id">_</span> <span class="id">h3</span>. <span class="id">done</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_dupT">followsT_dupT</a></span> <span class="id">b</span> <span class="id">h4</span>. <span class="id">done</span>.<br/>
- <span class="tactic">exact</span>: (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#finalTA_lastdup">finalTA_lastdup</a></span> <span class="id">b</span> <span class="id">h1</span>).<br/>
Qed.</div>
<br/>
<h2> Midpoint property </h2>
<br/>
<div class="doc">This property identifies a trace that is both a suffix of <span class="bracket"><span class="id">tr0</span></span> and a prefix of <span class="bracket"><span class="id">tr1</span></span>,
and is the stepping stone to showing the right associativity of the append property. </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="midpointT">midpointT</a></span> (<span class="id">p0</span> <span class="id">p1</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">tr0</span> <span class="id">tr1</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span>) (<span class="id">h</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p0</span> <span class="id">p1</span>) <span class="id">tr0</span> <span class="id">tr1</span>) : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="midpointT_nil">midpointT_nil</a></span> : <span class="kwd">forall</span> <span class="id">tr</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">tr0</span> = <span class="id"><a href="CasperCBC.Lib.Traces.html#Tnil">Tnil</a></span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#hd">hd</a></span> <span class="id">tr1</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">p0</span> <span class="id">tr</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p1</span> <span class="id">tr</span> <span class="id">tr1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">midpointT</span> <span class="id">h</span> <span class="id">tr</span><br/>
| <span class="id"><a name="midpointT_delay">midpointT_delay</a></span> : <span class="kwd">forall</span> <span class="id">tr2</span> <span class="id">tr3</span> (<span class="id">h1</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p0</span> <span class="id">p1</span>) <span class="id">tr2</span> <span class="id">tr3</span>) (<span class="id">a</span> : <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.A">A</a></span>) (<span class="id">b</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties.B">B</a></span>) <span class="id">tr</span>',<br/>
&nbsp;&nbsp;&nbsp;<span class="id">tr0</span> = <span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">tr1</span> = <span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr3</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;@<span class="id">midpointT</span> <span class="id">p0</span> <span class="id">p1</span> <span class="id">tr2</span> <span class="id">tr3</span> <span class="id">h1</span> <span class="id">tr</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">midpointT</span> <span class="id">h</span> (<span class="id"><a href="CasperCBC.Lib.Traces.html#Tcons">Tcons</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">tr</span>').<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="midpointT_before">midpointT_before</a></span>: <span class="kwd">forall</span> <span class="id">p0</span> <span class="id">p1</span> <span class="id">tr0</span> <span class="id">tr1</span> (<span class="id">h</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p0</span> <span class="id">p1</span>) <span class="id">tr0</span> <span class="id">tr1</span>) <span class="id">tr</span>',<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#midpointT">midpointT</a></span> <span class="id">h</span> <span class="id">tr</span>' -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p0</span> <span class="id">tr0</span> <span class="id">tr</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof447')">Proof.</div>
<div class="proofscript" id="proof447">
<span class="id">cofix</span> <span class="id">COINDHYP</span>. <span class="tactic">dependent</span> <span class="tactic">inversion</span> <span class="id">h</span>. <span class="tactic">move</span> =&gt; {<span class="id">tr</span> <span class="id">H0</span>}.<br/>
- <span class="tactic">move</span>: <span class="id">tr1</span> <span class="id">a</span> <span class="id">tr0</span> <span class="id">h</span> <span class="id">e</span> <span class="id">a0</span> <span class="id">H</span>. <span class="tactic">case</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">a0</span> <span class="id">tr0</span> <span class="id">h1</span> <span class="id">h2</span> <span class="id">h3</span> <span class="id">h4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">tr</span>' <span class="id">hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invs</span> <span class="id">hm</span>; <span class="id">last</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">h3</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span>; <span class="id">last</span> <span class="tactic">by</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">a0</span> <span class="id">tr1</span> <span class="id">h1</span> <span class="id">h2</span> <span class="id">h3</span> <span class="id">h4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">tr</span>' <span class="id">hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invs</span> <span class="id">hm</span>; <span class="id">last</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">h3</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">h1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span>; <span class="id">last</span> <span class="tactic">by</span> []. <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
- <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">hm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tr0</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">hm</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">hm</span>; <span class="tactic">subst</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">H3</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">COINDHYP</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">h1</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="midpointT_after">midpointT_after</a></span>: <span class="kwd">forall</span> <span class="id">p0</span> <span class="id">p1</span> <span class="id">tr0</span> <span class="id">tr1</span> (<span class="id">h</span>: <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> (<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> <span class="id">p0</span> <span class="id">p1</span>) <span class="id">tr0</span> <span class="id">tr1</span>) <span class="id">tr</span>',<br/>
&nbsp;<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#midpointT">midpointT</a></span> <span class="id">h</span> <span class="id">tr</span>' -&gt; <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT">followsT</a></span> <span class="id">p1</span> <span class="id">tr</span>' <span class="id">tr1</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof448')">Proof.</div>
<div class="proofscript" id="proof448">
<span class="id">cofix</span> <span class="id">COINDHYP</span>. <span class="tactic">dependent</span> <span class="tactic">inversion</span> <span class="id">h</span>. <span class="tactic">move</span> =&gt; {<span class="id">tr</span> <span class="id">H0</span>}.<br/>
- <span class="tactic">move</span>: <span class="id">tr1</span> <span class="id">a</span> <span class="id">tr0</span> <span class="id">h</span> <span class="id">e</span> <span class="id">a0</span> <span class="id">H</span>. <span class="tactic">case</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">a0</span> <span class="id">tr0</span> <span class="id">h1</span> <span class="id">h2</span> <span class="id">h3</span> <span class="id">h4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h2</span>. <span class="tactic">move</span> =&gt; <span class="id">tr</span>' <span class="id">hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invs</span> <span class="id">hm</span>; <span class="id">last</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">tr</span>'; <span class="id">last</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">h3</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="tactic">inversion</span> <span class="id">H3</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_nil">followsT_nil</a></span>; <span class="id">last</span> <span class="tactic">by</span> []. <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">move</span> =&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">tr0</span> <span class="id">a0</span> <span class="id">tr1</span> <span class="id">h1</span> <span class="id">h2</span> <span class="id">h3</span> <span class="id">h4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">h2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">tr</span>' <span class="id">hm</span>. <span class="tactic">by</span> <span class="id">invs</span> <span class="id">hm</span>; <span class="id">last</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
- <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">move</span> =&gt; <span class="id">tr0</span> <span class="id">hm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">tr0</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">hm</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">hm</span>; <span class="tactic">subst</span>; <span class="id">first</span> <span class="tactic">by</span> <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">invs</span> <span class="id">H3</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#followsT_delay">followsT_delay</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span>: (<span class="id">COINDHYP</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">h1</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#TraceProperties">TraceProperties</a></span>.<br/>
<br/>
<h2> Trace property operators and notations </h2>
<br/>
<span class="kwd">Infix</span> "<span class="id">andT</span>" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#AndT">AndT</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Infix</span> "<span class="id">orT</span>" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#OrT">OrT</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Infix</span> "=&gt;&gt;" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propT_imp">propT_imp</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Infix</span> "-&gt;&gt;" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#propA_imp">propA_imp</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Infix</span> "<span class="id">andA</span>" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#andA">andA</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Notation</span> "[| <span class="id">p</span> |]" := (@<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#SingletonT">SingletonT</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">p</span>) (<span class="tactic">at</span> <span class="id">level</span> 80).<br/>
<span class="kwd">Infix</span> "*+*" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#appendT">appendT</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Infix</span> "***" := <span class="id"><a href="CasperCBC.Lib.TraceProperties.html#AppendT">AppendT</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Notation</span> "&lt;&lt; <span class="id">p</span> ; <span class="id">b</span> &gt;&gt;" := (@<span class="id"><a href="CasperCBC.Lib.TraceProperties.html#DupT">DupT</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">p</span> <span class="id">b</span>) (<span class="tactic">at</span> <span class="id">level</span> 80).<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>

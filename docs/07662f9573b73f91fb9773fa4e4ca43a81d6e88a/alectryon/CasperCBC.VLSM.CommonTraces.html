<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>CommonTraces.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><link href="alectryon.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script><style type="text/css">pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.12.0+0.12.1. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">From</span> Coq <span class="kn">Require Import</span> List Streams Program.Equality.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Import</span> ListNotations.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">From</span> CasperCBC <span class="kn">Require Import</span> Lib.SsrExport Lib.Traces Lib.TraceProperties Lib.TraceClassicalProperties.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">From</span> CasperCBC <span class="kn">Require Import</span> Lib.StreamExtras Lib.Preamble VLSM.Common.</span></span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM Protocols Described by Possibly-Infinite Traces</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">VLSM</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span> `{M : VLSM_class} (vlsm := mk_vlsm M).</span></span></span></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Core protocol definitions</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Record</span> <span class="nf">tr_data</span> := mkTrData {
 tr_label : label;
 tr_input : option message;
 tr_output : option message
}.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Notation</span> <span class="nf">trace</span> := (@trace state tr_data).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">CoInductive</span> <span class="nf">protocol_trace</span> : trace -&gt; <span class="kt">Prop</span> :=
| protocol_trace_nil : <span class="kr">forall</span> (<span class="nv">s</span> : state),
   protocol_state_prop vlsm s -&gt;
   protocol_trace (Tnil s)
| protocol_trace_delay : <span class="kr">forall</span> (<span class="nv">s</span> : state) (<span class="nv">d</span> : tr_data) (<span class="nv">tr</span> : trace),
   protocol_trace tr -&gt;
   protocol_transition vlsm (tr_label d) (s, tr_input d) (hd tr, tr_output d) -&gt;
   protocol_trace (Tcons s d tr).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">protocol_ptrace</span> <span class="nv">tr</span> :=
  protocol_trace tr /\ initial_state_prop (hd tr).</span></span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Mappings between finite traces and lists of transition items</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">protocol_trace_finite_transition_items</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span>: finiteT tr) {<span class="nv">struct</span> <span class="nv">h</span>} : list transition_item :=
<span class="kr">match</span> tr <span class="kr">as</span> tr&#39; <span class="kr">return</span> (finiteT tr&#39; -&gt; _) <span class="kr">with</span>
| Tnil s =&gt; <span class="kr">fun</span> <span class="nv">_</span> =&gt; []
| Tcons s d tr =&gt; <span class="kr">fun</span> <span class="nv">h</span> =&gt;
   {| l := tr_label d; input := tr_input d; destination := hd tr; output := tr_output d |} ::
    protocol_trace_finite_transition_items tr (invert_finiteT_delay h)
<span class="kr">end</span> h.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">transition_items_list_protocol_trace</span> (<span class="nv">s</span> : state) (<span class="nv">ls</span> : list transition_item) : trace :=
<span class="kr">match</span> ls <span class="kr">with</span>
| [] =&gt; Tnil s
| ti :: ls&#39; =&gt;
  Tcons s {| tr_label := l ti; tr_input := input ti; tr_output := output ti |}
   (transition_items_list_protocol_trace (destination ti) ls&#39;)
<span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">protocol_trace_finite_finite_protocol_trace_from</span> : <span class="kr">forall</span> <span class="nv">tr</span> (<span class="nv">h</span>:finiteT tr),
 protocol_trace tr -&gt;
 finite_protocol_trace_from vlsm (hd tr) (protocol_trace_finite_transition_items tr h).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk2"><span class="highlight"><span class="nb">refine</span> (<span class="kr">fix</span> IH tr h {<span class="kr">struct</span> h} := _).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace tr -&gt;
finite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk3"><span class="highlight"><span class="nb">case</span>: tr h =&gt; [s|s d tr] h Htr /=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tnil s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tnil s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  (protocol_trace_finite_transition_items (Tnil s) h)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk4"><hr></label><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  (protocol_trace_finite_transition_items
     (Tcons s d tr) h)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk5"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tnil s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tnil s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  (protocol_trace_finite_transition_items (Tnil s) h)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk6"><hr></label><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  (protocol_trace_finite_transition_items
     (Tcons s d tr) h)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk7"><span class="highlight"><span class="nb">dependent inversion</span> h; <span class="nb">subst</span> =&gt; /=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tnil s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tnil s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s []</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk8" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk8"><hr></label><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  (protocol_trace_finite_transition_items
     (Tcons s d tr) h)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk9"><span class="highlight"><span class="nb">inversion</span> Htr; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tnil s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tnil s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop vlsm s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s []</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chka"><hr></label><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  (protocol_trace_finite_transition_items
     (Tcons s d tr) h)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chkb"><span class="highlight"><span class="bp">by</span> <span class="nb">apply</span> finite_ptrace_empty.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  (protocol_trace_finite_transition_items
     (Tcons s d tr) h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chkc"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  (protocol_trace_finite_transition_items
     (Tcons s d tr) h)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chkd"><span class="highlight"><span class="nb">dependent inversion</span> h; <span class="nb">subst</span> =&gt; /=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := tr_label d;
   input := tr_input d;
   destination := hd tr;
   output := tr_output d |}
   :: protocol_trace_finite_transition_items tr
        (eq_ind_r
           (<span class="kr">fun</span> <span class="nv">_</span> : state =&gt;
            d = d -&gt;
            tr = tr -&gt; finiteT tr -&gt; finiteT tr)
           (<span class="kr">fun</span> <span class="nv">H1</span> : d = d =&gt;
            eq_ind_r
              (<span class="kr">fun</span> <span class="nv">_</span> : tr_data =&gt;
               tr = tr -&gt; finiteT tr -&gt; finiteT tr)
              (<span class="kr">fun</span> <span class="nv">H2</span> : tr = tr =&gt;
               eq_ind_r
                 (<span class="kr">fun</span> <span class="nv">t</span> : trace =&gt;
                  finiteT t -&gt; finiteT tr)
                 (<span class="kr">fun</span> <span class="nv">H0</span> : finiteT tr =&gt; H0) H2) H1)
           eq_refl eq_refl eq_refl f))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chke"><span class="highlight"><span class="nb">inversion</span> Htr; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label d) (s, tr_input d)
  (hd tr, tr_output d)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := tr_label d;
   input := tr_input d;
   destination := hd tr;
   output := tr_output d |}
   :: protocol_trace_finite_transition_items tr
        (eq_ind_r
           (<span class="kr">fun</span> <span class="nv">_</span> : state =&gt;
            d = d -&gt;
            tr = tr -&gt; finiteT tr -&gt; finiteT tr)
           (<span class="kr">fun</span> <span class="nv">H1</span> : d = d =&gt;
            eq_ind_r
              (<span class="kr">fun</span> <span class="nv">_</span> : tr_data =&gt;
               tr = tr -&gt; finiteT tr -&gt; finiteT tr)
              (<span class="kr">fun</span> <span class="nv">H2</span> : tr = tr =&gt;
               eq_ind_r
                 (<span class="kr">fun</span> <span class="nv">t</span> : trace =&gt;
                  finiteT t -&gt; finiteT tr)
                 (<span class="kr">fun</span> <span class="nv">H0</span> : finiteT tr =&gt; H0) H2) H1)
           eq_refl eq_refl eq_refl f))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chkf"><span class="highlight"><span class="nb">apply</span> finite_ptrace_extend =&gt; //.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : finiteT tr),
protocol_trace tr -&gt;
finite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_finite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s d tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label d) (s, tr_input d)
  (hd tr, tr_output d)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_finite_transition_items tr
     (eq_ind_r
        (<span class="kr">fun</span> <span class="nv">_</span> : state =&gt;
         d = d -&gt; tr = tr -&gt; finiteT tr -&gt; finiteT tr)
        (<span class="kr">fun</span> <span class="nv">H1</span> : d = d =&gt;
         eq_ind_r
           (<span class="kr">fun</span> <span class="nv">_</span> : tr_data =&gt;
            tr = tr -&gt; finiteT tr -&gt; finiteT tr)
           (<span class="kr">fun</span> <span class="nv">H2</span> : tr = tr =&gt;
            eq_ind_r
              (<span class="kr">fun</span> <span class="nv">t</span> : trace =&gt;
               finiteT t -&gt; finiteT tr)
              (<span class="kr">fun</span> <span class="nv">H0</span> : finiteT tr =&gt; H0) H2) H1)
        eq_refl eq_refl eq_refl f))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">apply</span> IH.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk10"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">transition_items_list_protocol_trace_hd_nil</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">s0</span> <span class="nv">s1</span>,
 Tnil s0 = transition_items_list_protocol_trace s1 l -&gt;
 s0 = s1.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : list transition_item) (<span class="nv">s0</span> <span class="nv">s1</span> : state),
Tnil s0 = transition_items_list_protocol_trace s1 l -&gt;
s0 = s1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk11"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : list transition_item) (<span class="nv">s0</span> <span class="nv">s1</span> : state),
Tnil s0 = transition_items_list_protocol_trace s1 l -&gt;
s0 = s1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk12"><span class="highlight"><span class="nb">case</span> =&gt; //=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">s0</span> <span class="nv">s1</span> : state, Tnil s0 = Tnil s1 -&gt; s0 = s1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk13"><span class="highlight"><span class="nb">move</span> =&gt; s0 s1 Hs.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0, s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Tnil s0 = Tnil s1</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">s0 = s1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">inversion</span> Hs.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk14"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">transition_items_list_protocol_trace_hd_cons</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">s0</span> <span class="nv">s1</span> <span class="nv">d</span> <span class="nv">tr</span>,
 Tcons s0 d tr = transition_items_list_protocol_trace s1 l -&gt;
 s0 = s1.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : list transition_item) (<span class="nv">s0</span> <span class="nv">s1</span> : state)
  (<span class="nv">d</span> : tr_data) (<span class="nv">tr</span> : trace),
Tcons s0 d tr =
transition_items_list_protocol_trace s1 l -&gt; s0 = s1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk15"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : list transition_item) (<span class="nv">s0</span> <span class="nv">s1</span> : state)
  (<span class="nv">d</span> : tr_data) (<span class="nv">tr</span> : trace),
Tcons s0 d tr =
transition_items_list_protocol_trace s1 l -&gt; s0 = s1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk16"><span class="highlight"><span class="nb">case</span> =&gt; //=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : transition_item)
  (<span class="nv">l0</span> : list transition_item) (<span class="nv">s0</span> <span class="nv">s1</span> : state)
  (<span class="nv">d</span> : tr_data) (<span class="nv">tr</span> : trace),
Tcons s0 d tr =
Tcons s1
  {|
  tr_label := l a;
  tr_input := input a;
  tr_output := output a |}
  (transition_items_list_protocol_trace
     (destination a) l0) -&gt; s0 = s1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk17"><span class="highlight"><span class="nb">move</span> =&gt; a l s0 s1 d tr Hs.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0, s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Tcons s0 d tr =
Tcons s1
  {|
  tr_label := Common.l a;
  tr_input := input a;
  tr_output := output a |}
  (transition_items_list_protocol_trace
     (destination a) l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">s0 = s1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">inversion</span> Hs.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk18"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_protocol_trace_from_protocol_trace</span> : <span class="kr">forall</span> <span class="nv">ls</span> <span class="nv">s</span>,
 finite_protocol_trace_from vlsm s ls -&gt;
 protocol_trace (transition_items_list_protocol_trace s ls).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">ls</span> : list transition_item) (<span class="nv">s</span> : state),
finite_protocol_trace_from vlsm s ls -&gt;
protocol_trace
  (transition_items_list_protocol_trace s ls)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk19"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">ls</span> : list transition_item) (<span class="nv">s</span> : state),
finite_protocol_trace_from vlsm s ls -&gt;
protocol_trace
  (transition_items_list_protocol_trace s ls)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk1a"><span class="highlight"><span class="nb">elim</span> =&gt; //=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s [] -&gt;
protocol_trace (Tnil s)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk1b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk1b"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : transition_item)
  (<span class="nv">l0</span> : list transition_item),
(<span class="kr">forall</span> <span class="nv">s</span> : state,
 finite_protocol_trace_from vlsm s l0 -&gt;
 protocol_trace
   (transition_items_list_protocol_trace s l0)) -&gt;
<span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s (a :: l0) -&gt;
protocol_trace
  (Tcons s
     {|
     tr_label := l a;
     tr_input := input a;
     tr_output := output a |}
     (transition_items_list_protocol_trace
        (destination a) l0))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk1c"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s [] -&gt;
protocol_trace (Tnil s)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk1d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk1d"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : transition_item)
  (<span class="nv">l0</span> : list transition_item),
(<span class="kr">forall</span> <span class="nv">s</span> : state,
 finite_protocol_trace_from vlsm s l0 -&gt;
 protocol_trace
   (transition_items_list_protocol_trace s l0)) -&gt;
<span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s (a :: l0) -&gt;
protocol_trace
  (Tcons s
     {|
     tr_label := l a;
     tr_input := input a;
     tr_output := output a |}
     (transition_items_list_protocol_trace
        (destination a) l0))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk1e"><span class="highlight"><span class="nb">move</span> =&gt; s Hf.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace (Tnil s)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk1f"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : transition_item)
  (<span class="nv">l0</span> : list transition_item),
(<span class="kr">forall</span> <span class="nv">s</span> : state,
 finite_protocol_trace_from vlsm s l0 -&gt;
 protocol_trace
   (transition_items_list_protocol_trace s l0)) -&gt;
<span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s (a :: l0) -&gt;
protocol_trace
  (Tcons s
     {|
     tr_label := l a;
     tr_input := input a;
     tr_output := output a |}
     (transition_items_list_protocol_trace
        (destination a) l0))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk20"><span class="highlight"><span class="nb">inversion</span> Hf; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop vlsm s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace (Tnil s)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk21" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk21"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : transition_item)
  (<span class="nv">l0</span> : list transition_item),
(<span class="kr">forall</span> <span class="nv">s</span> : state,
 finite_protocol_trace_from vlsm s l0 -&gt;
 protocol_trace
   (transition_items_list_protocol_trace s l0)) -&gt;
<span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s (a :: l0) -&gt;
protocol_trace
  (Tcons s
     {|
     tr_label := l a;
     tr_input := input a;
     tr_output := output a |}
     (transition_items_list_protocol_trace
        (destination a) l0))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk22"><span class="highlight"><span class="bp">by</span> <span class="nb">apply</span> protocol_trace_nil.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : transition_item)
  (<span class="nv">l0</span> : list transition_item),
(<span class="kr">forall</span> <span class="nv">s</span> : state,
 finite_protocol_trace_from vlsm s l0 -&gt;
 protocol_trace
   (transition_items_list_protocol_trace s l0)) -&gt;
<span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s (a :: l0) -&gt;
protocol_trace
  (Tcons s
     {|
     tr_label := l a;
     tr_input := input a;
     tr_output := output a |}
     (transition_items_list_protocol_trace
        (destination a) l0))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk23"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : transition_item)
  (<span class="nv">l0</span> : list transition_item),
(<span class="kr">forall</span> <span class="nv">s</span> : state,
 finite_protocol_trace_from vlsm s l0 -&gt;
 protocol_trace
   (transition_items_list_protocol_trace s l0)) -&gt;
<span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s (a :: l0) -&gt;
protocol_trace
  (Tcons s
     {|
     tr_label := l a;
     tr_input := input a;
     tr_output := output a |}
     (transition_items_list_protocol_trace
        (destination a) l0))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk24"><span class="highlight"><span class="nb">move</span> =&gt; a l IH s Hf.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s (a :: l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace
  (Tcons s
     {|
     tr_label := Common.l a;
     tr_input := input a;
     tr_output := output a |}
     (transition_items_list_protocol_trace
        (destination a) l))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk25"><span class="highlight"><span class="nb">inversion</span> Hf; <span class="nb">subst</span> =&gt; /=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace
  (Tcons s
     {|
     tr_label := l0;
     tr_input := iom;
     tr_output := oom |}
     (transition_items_list_protocol_trace s0 l))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk26"><span class="highlight"><span class="nb">apply</span> protocol_trace_delay =&gt; /=; <span class="kp">first</span> <span class="bp">by</span> <span class="nb">apply</span> IH.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm l0 (s, iom)
  (hd (transition_items_list_protocol_trace s0 l),
  oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk27"><span class="highlight"><span class="nb">have</span> IH&#39; := IH _ H2.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace
  (transition_items_list_protocol_trace s0 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm l0 (s, iom)
  (hd (transition_items_list_protocol_trace s0 l),
  oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk28"><span class="highlight"><span class="nb">inversion</span> IH&#39;; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace
  (transition_items_list_protocol_trace s0 l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop vlsm s1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Tnil s1 =
transition_items_list_protocol_trace s0 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm l0 (s, iom)
  (hd (Tnil s1), oom)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk29" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace
  (transition_items_list_protocol_trace s0 l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label d) (s1, tr_input d)
  (hd tr, tr_output d)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Tcons s1 d tr =
transition_items_list_protocol_trace s0 l</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk29"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm l0 
  (s, iom) (hd (Tcons s1 d tr), oom)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk2a"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace
  (transition_items_list_protocol_trace s0 l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop vlsm s1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Tnil s1 =
transition_items_list_protocol_trace s0 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm l0 (s, iom)
  (hd (Tnil s1), oom)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk2b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace
  (transition_items_list_protocol_trace s0 l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label d) (s1, tr_input d)
  (hd tr, tr_output d)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Tcons s1 d tr =
transition_items_list_protocol_trace s0 l</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk2b"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm l0 
  (s, iom) (hd (Tcons s1 d tr), oom)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk2c"><span class="highlight"><span class="bp">by</span> <span class="nb">rewrite</span> /= (transition_items_list_protocol_trace_hd_nil _ _ _ H).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace
  (transition_items_list_protocol_trace s0 l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label d) (s1, tr_input d)
  (hd tr, tr_output d)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Tcons s1 d tr =
transition_items_list_protocol_trace s0 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm l0 (s, iom)
  (hd (Tcons s1 d tr), oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk2d"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">s</span> : state,
finite_protocol_trace_from vlsm s l -&gt;
protocol_trace
  (transition_items_list_protocol_trace s l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s
  ({|
   l := l0;
   input := iom;
   destination := s0;
   output := oom |} :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from vlsm s0 l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l0 (s, iom) (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IH'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace
  (transition_items_list_protocol_trace s0 l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label d) (s1, tr_input d)
  (hd tr, tr_output d)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Tcons s1 d tr =
transition_items_list_protocol_trace s0 l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm l0 (s, iom)
  (hd (Tcons s1 d tr), oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">rewrite</span> /= (transition_items_list_protocol_trace_hd_cons _ _ _ _ _ H).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">Mappings between infinite traces and streams of transition items</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">CoFixpoint</span> <span class="nf">protocol_trace_infinite_transition_items</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span>: infiniteT tr) : Stream transition_item :=
<span class="kr">match</span> tr <span class="kr">with</span>
| Tnil _ =&gt; False_rect _ _
| Tcons s d tr =&gt;
  Cons {| l := tr_label d; input := tr_input d; destination := hd tr; output := tr_output d |}
       (protocol_trace_infinite_transition_items tr _)
<span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk2e"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wildcard'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT (Tnil wildcard&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">inversion</span> h.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk2f"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT (Tcons s d tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infiniteT tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">inversion</span> h; <span class="nb">subst</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">CoFixpoint</span> <span class="nf">transition_items_stream_protocol_trace</span> (<span class="nv">s</span> : state) (<span class="nv">st</span> : Stream transition_item) : trace :=
<span class="kr">match</span> st <span class="kr">with</span>
| Cons ti st&#39; =&gt;
  Tcons s {| tr_label := l ti; tr_input := input ti; tr_output := output ti |}
   (transition_items_stream_protocol_trace (destination ti) st&#39;)
<span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk30"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">protocol_trace_infinite_infinite_protocol_trace_from</span> : <span class="kr">forall</span> <span class="nv">tr</span> (<span class="nv">h</span>:infiniteT tr),
 protocol_trace tr -&gt;
 infinite_protocol_trace_from vlsm (hd tr) (protocol_trace_infinite_transition_items tr h).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk31"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk32"><span class="highlight"><span class="kr">cofix</span> CIH.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk33"><span class="highlight"><span class="nb">destruct</span> tr; <span class="kp">first</span> <span class="bp">by</span> <span class="nb">move</span> =&gt; h; <span class="nb">inversion</span> h.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">h</span> : infiniteT (Tcons s t tr),
protocol_trace (Tcons s t tr) -&gt;
infinite_protocol_trace_from vlsm (hd (Tcons s t tr))
  (protocol_trace_infinite_transition_items
     (Tcons s t tr) h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk34"><span class="highlight"><span class="nb">move</span> =&gt; h Htr /=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s t tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s
  (protocol_trace_infinite_transition_items
     (Tcons s t tr) h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk35"><span class="highlight"><span class="nb">inversion</span> Htr; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label t) (s, tr_input t)
  (hd tr, tr_output t)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s
  (protocol_trace_infinite_transition_items
     (Tcons s t tr) h)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk36"><span class="highlight"><span class="nb">dependent inversion</span> h; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label t) (s, tr_input t)
  (hd tr, tr_output t)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s
  (protocol_trace_infinite_transition_items
     (Tcons s t tr) (infiniteT_delay s t i))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk37"><span class="highlight"><span class="nb">rewrite</span> -(recons (protocol_trace_infinite_transition_items _ _)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label t) (s, tr_input t)
  (hd tr, tr_output t)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     (Streams.hd
        (protocol_trace_infinite_transition_items
           (Tcons s t tr) (infiniteT_delay s t i)))
     (tl
        (protocol_trace_infinite_transition_items
           (Tcons s t tr) (infiniteT_delay s t i))))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk38"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label t) (s, tr_input t)
  (hd tr, tr_output t)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := tr_label t;
     input := tr_input t;
     destination := hd tr;
     output := tr_output t |}
     (protocol_trace_infinite_transition_items tr
        (eq_ind_r
           (<span class="kr">fun</span> <span class="nv">_</span> : state =&gt;
            t = t -&gt;
            tr = tr -&gt; infiniteT tr -&gt; infiniteT tr)
           (<span class="kr">fun</span> <span class="nv">H1</span> : t = t =&gt;
            eq_ind_r
              (<span class="kr">fun</span> <span class="nv">_</span> : tr_data =&gt;
               tr = tr -&gt; infiniteT tr -&gt; infiniteT tr)
              (<span class="kr">fun</span> <span class="nv">H2</span> : tr = tr =&gt;
               eq_ind_r
                 (<span class="kr">fun</span> <span class="nv">t</span> : trace =&gt;
                  infiniteT t -&gt; infiniteT tr)
                 (<span class="kr">fun</span> <span class="nv">H0</span> : infiniteT tr =&gt; H0) H2) H1)
           eq_refl eq_refl eq_refl i)))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk39"><span class="highlight"><span class="nb">apply</span> infinite_ptrace_extend =&gt; //.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">tr</span> : trace) (<span class="nv">h</span> : infiniteT tr),
protocol_trace tr -&gt;
infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr h)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr_data</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace (Tcons s t tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm 
  (tr_label t) (s, tr_input t)
  (hd tr, tr_output t)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_infinite_transition_items tr
     (eq_ind_r
        (<span class="kr">fun</span> <span class="nv">_</span> : state =&gt;
         t = t -&gt;
         tr = tr -&gt; infiniteT tr -&gt; infiniteT tr)
        (<span class="kr">fun</span> <span class="nv">H1</span> : t = t =&gt;
         eq_ind_r
           (<span class="kr">fun</span> <span class="nv">_</span> : tr_data =&gt;
            tr = tr -&gt; infiniteT tr -&gt; infiniteT tr)
           (<span class="kr">fun</span> <span class="nv">H2</span> : tr = tr =&gt;
            eq_ind_r
              (<span class="kr">fun</span> <span class="nv">t</span> : trace =&gt;
               infiniteT t -&gt; infiniteT tr)
              (<span class="kr">fun</span> <span class="nv">H0</span> : infiniteT tr =&gt; H0) H2) H1)
        eq_refl eq_refl eq_refl i))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">apply</span> CIH.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk3a"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">infinite_protocol_trace_from_protocol_trace</span> : <span class="kr">forall</span> <span class="nv">st</span> <span class="nv">s</span>,
 infinite_protocol_trace_from vlsm s st -&gt;
 protocol_trace (transition_items_stream_protocol_trace s st).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk3b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk3c"><span class="highlight"><span class="kr">cofix</span> CIH.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk3d"><span class="highlight"><span class="nb">case</span> =&gt; ti st&#39; s Hif.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons ti st&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace
  (transition_items_stream_protocol_trace s
     (Cons ti st&#39;))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk3e"><span class="highlight"><span class="nb">inversion</span> Hif; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := l;
     input := iom;
     destination := s0;
     output := oom |} st&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s0 st&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l (s, iom) (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace
  (transition_items_stream_protocol_trace s
     (Cons
        {|
        l := l;
        input := iom;
        destination := s0;
        output := oom |} st&#39;))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk3f"><span class="highlight"><span class="nb">rewrite</span> [transition_items_stream_protocol_trace _ _]trace_destr /=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := l;
     input := iom;
     destination := s0;
     output := oom |} st&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s0 st&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l (s, iom) (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace
  (Tcons s
     {|
     tr_label := l;
     tr_input := iom;
     tr_output := oom |}
     (transition_items_stream_protocol_trace s0 st&#39;))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk40"><span class="highlight"><span class="nb">apply</span> protocol_trace_delay.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := l;
     input := iom;
     destination := s0;
     output := oom |} st&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s0 st&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l (s, iom) (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace
  (transition_items_stream_protocol_trace s0 st&#39;)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk41" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := l;
     input := iom;
     destination := s0;
     output := oom |} st&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s0 st&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l (s, iom) (s0, oom)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk41"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm
  (tr_label
     {|
     tr_label := l;
     tr_input := iom;
     tr_output := oom |})
  (s,
  tr_input
    {|
    tr_label := l;
    tr_input := iom;
    tr_output := oom |})
  (hd (transition_items_stream_protocol_trace s0 st&#39;),
  tr_output
    {|
    tr_label := l;
    tr_input := iom;
    tr_output := oom |})</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk42"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := l;
     input := iom;
     destination := s0;
     output := oom |} st&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s0 st&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l (s, iom) (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace
  (transition_items_stream_protocol_trace s0 st&#39;)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk43" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := l;
     input := iom;
     destination := s0;
     output := oom |} st&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s0 st&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l (s, iom) (s0, oom)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk43"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm
  (tr_label
     {|
     tr_label := l;
     tr_input := iom;
     tr_output := oom |})
  (s,
  tr_input
    {|
    tr_label := l;
    tr_input := iom;
    tr_output := oom |})
  (hd (transition_items_stream_protocol_trace s0 st&#39;),
  tr_output
    {|
    tr_label := l;
    tr_input := iom;
    tr_output := oom |})</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk44"><span class="highlight"><span class="bp">by</span> <span class="nb">apply</span> CIH.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := l;
     input := iom;
     destination := s0;
     output := oom |} st&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s0 st&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l (s, iom) (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm
  (tr_label
     {|
     tr_label := l;
     tr_input := iom;
     tr_output := oom |})
  (s,
  tr_input
    {|
    tr_label := l;
    tr_input := iom;
    tr_output := oom |})
  (hd (transition_items_stream_protocol_trace s0 st&#39;),
  tr_output
    {|
    tr_label := l;
    tr_input := iom;
    tr_output := oom |})</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk45"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">CIH</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">st</span> : Stream transition_item) (<span class="nv">s</span> : state),
infinite_protocol_trace_from vlsm s st -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s st)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">st'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hif</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s
  (Cons
     {|
     l := l;
     input := iom;
     destination := s0;
     output := oom |} st&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infinite_protocol_trace_from vlsm s0 st&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition vlsm l (s, iom) (s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition vlsm
  (tr_label
     {|
     tr_label := l;
     tr_input := iom;
     tr_output := oom |})
  (s,
  tr_input
    {|
    tr_label := l;
    tr_input := iom;
    tr_output := oom |})
  (hd (transition_items_stream_protocol_trace s0 st&#39;),
  tr_output
    {|
    tr_label := l;
    tr_input := iom;
    tr_output := oom |})</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">by</span> <span class="nb">inversion</span> H2; <span class="nb">subst</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">Mappings between Trace containers and possibly-infinite traces</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">Trace_from_trace</span> (<span class="nv">tr</span> : trace) : Trace :=
<span class="kr">match</span> finiteT_infiniteT_dec tr <span class="kr">with</span>
| <span class="nb">left</span> Hfin =&gt; Finite (hd tr) (protocol_trace_finite_transition_items tr Hfin)
| <span class="nb">right</span> Hinf =&gt; Infinite (hd tr) (protocol_trace_infinite_transition_items tr Hinf)
<span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">trace_from_Trace</span> (<span class="nv">Tr</span> : Trace) : trace :=
<span class="kr">match</span> Tr <span class="kr">with</span>
| Finite s ls =&gt; transition_items_list_protocol_trace s ls
| Infinite s sm =&gt; transition_items_stream_protocol_trace s sm
<span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk46"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Trace_from_trace_ptrace_from_prop</span> : <span class="kr">forall</span> <span class="nv">tr</span>,
 protocol_trace tr -&gt;
 ptrace_from_prop vlsm (Trace_from_trace tr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">tr</span> : trace,
protocol_trace tr -&gt;
ptrace_from_prop vlsm (Trace_from_trace tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk47"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">tr</span> : trace,
protocol_trace tr -&gt;
ptrace_from_prop vlsm (Trace_from_trace tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk48"><span class="highlight"><span class="nb">move</span> =&gt; tr Hptr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">ptrace_from_prop vlsm (Trace_from_trace tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk49"><span class="highlight"><span class="nb">rewrite</span> /Trace_from_trace.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">ptrace_from_prop vlsm
  <span class="kr">match</span> finiteT_infiniteT_dec tr <span class="kr">with</span>
  | <span class="nb">left</span> Hfin =&gt;
      Finite (hd tr)
        (protocol_trace_finite_transition_items tr
           Hfin)
  | <span class="nb">right</span> Hinf =&gt;
      Infinite (hd tr)
        (protocol_trace_infinite_transition_items tr
           Hinf)
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk4a"><span class="highlight"><span class="nb">case</span> (finiteT_infiniteT_dec _) =&gt; [Hfin|Hinf] /=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_finite_transition_items tr Hfin)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk4b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT tr</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk4b"><hr></label><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr Hinf)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk4c"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finiteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_finite_transition_items tr Hfin)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk4d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT tr</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk4d"><hr></label><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm 
  (hd tr)
  (protocol_trace_infinite_transition_items tr Hinf)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk4e"><span class="highlight"><span class="bp">exact</span>: protocol_trace_finite_finite_protocol_trace_from.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_infinite_transition_items tr Hinf)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk4f"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">infiniteT tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm (hd tr)
  (protocol_trace_infinite_transition_items tr Hinf)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span>: protocol_trace_infinite_infinite_protocol_trace_from.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk50"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">trace_from_Trace_ptrace_from_prop</span> : <span class="kr">forall</span> <span class="nv">Tr</span>,
 ptrace_from_prop vlsm Tr -&gt;
 protocol_trace (trace_from_Trace Tr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">Tr</span> : Trace,
ptrace_from_prop vlsm Tr -&gt;
protocol_trace (trace_from_Trace Tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk51"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">Tr</span> : Trace,
ptrace_from_prop vlsm Tr -&gt;
protocol_trace (trace_from_Trace Tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk52"><span class="highlight"><span class="nb">case</span> =&gt; [s ls|s sm] /=.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ls</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s ls -&gt;
protocol_trace
  (transition_items_list_protocol_trace s ls)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk53" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk53"><hr></label><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s sm -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s sm)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk54"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ls</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from vlsm s ls -&gt;
protocol_trace
  (transition_items_list_protocol_trace s ls)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="CommonTraces-v-chk55" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="CommonTraces-v-chk55"><hr></label><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s sm -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s sm)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk56"><span class="highlight"><span class="bp">exact</span>: finite_protocol_trace_from_protocol_trace.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s sm -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s sm)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="CommonTraces-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="CommonTraces-v-chk57"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vtype</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_type message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lsm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_sign vtype</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_class lsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">mk_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Stream transition_item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">infinite_protocol_trace_from vlsm s sm -&gt;
protocol_trace
  (transition_items_stream_protocol_trace s sm)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span>: infinite_protocol_trace_from_protocol_trace.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">VLSM</span>.</span></span></span></pre></article></body></html>
<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>Common.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><link href="alectryon.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script><style type="text/css">pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.12.0+0.12.1. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Require Import</span>
  List Coq.Vectors.Fin
  Arith.Compare_dec Lia
  Program
  .</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Import</span> ListNotations.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">From</span> CasperCBC
  <span class="kn">Require Import</span>
    Preamble
    VLSM.Common
    .</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Local Arguments</span> le_lt_dec : <span class="nb">simpl</span> never.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Local Arguments</span> nat_eq_dec : <span class="nb">simpl</span> never.</span></span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM Equivocation</h1>
<div class="paragraph"> </div>

An <span class="inlinecode"><span class="id" title="var">equivocator_vlsm</span></span> for a given <span class="inlinecode"><span class="id" title="var">VLSM</span></span> <tt>X</tt> is a VLSM which
<ul class="doclist">
<li> starts as a regular machine X

</li>
<li> can equivocate any of its current copies by duplicating it.

</li>
<li> can start a new machine in a (potentially) different initial state.

</li>
<li> can perform <span class="inlinecode"><span class="id" title="var">valid</span></span> <span class="inlinecode"><span class="id" title="var">transition</span></span>s using any of the internal machines

</li>
</ul>
<div class="paragraph"> </div>

The state of such a machine will be abstracted using

<div class="paragraph"> </div>

1. A <span class="inlinecode"><span class="id" title="var">nat</span></span>ural <tt>n</tt>, stating the number of copies of the original machine
2. A state of <tt>X</tt> for each 1..n+1

<div class="paragraph"> </div>

To preserve determinism we need to update the labels to indicate what copy
of the machine will be used for a transition.
To achieve this, we'll extend the labels of <tt>X</tt>, say <tt>L_X</tt> as follows

<div class="paragraph"> </div>
<span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode">=</span> <span class="inlinecode">&lt;&lt;<span class="id" title="var">L_X</span>&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">MachineDescriptor</span></span>
<div class="paragraph"> </div>

The second component of the label tells which internal machine should be
used for performing the transition. It can be one of the following:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">NewMachine</span></span> <span class="inlinecode">&lt;&lt;<span class="id" title="var">s</span>&gt;&gt;</span> where <tt>s</tt> is an state of <tt>X</tt>, will
  extend the state with a new machine initialized with <tt>s</tt>
<div class="paragraph"> </div>

  and will perform the transition on that machine.

</li>
<li> <span class="inlinecode"><span class="id" title="var">Existing</span></span> <span class="inlinecode">&lt;&lt;<span class="id" title="var">i</span>&gt;&gt;</span> <span class="inlinecode">&lt;&lt;<span class="id" title="var">is_equiv</span>&gt;&gt;</span> perform transition on internal machine <tt>i</tt>
<div class="paragraph"> </div>

  but may equivocate, depending on the <tt>is_equiv</tt> as follows:

<div class="paragraph"> </div>
</li>
<li> if <tt>is_equiv</tt> is <span class="inlinecode"><span class="id" title="var">false</span></span>, update the state of machine <tt>i</tt>
<div class="paragraph"> </div>
</li>
<li> if <tt>is_equiv</tt> is <span class="inlinecode"><span class="id" title="var">true</span></span>, duplicate the state of machine <tt>i</tt> and
    perform transition on the copy

<div class="paragraph"> </div>

These changes are reflected in the validity and transition functions.
For validity we additionaly require that the machine descriptor refers
to a valid internal machine, or to an initial state of <tt>X</tt>.

<div class="paragraph"> </div>
</li>
</ul>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">equivocator_vlsm</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span>
    {<span class="nv">message</span> : <span class="kt">Type</span>}
    (<span class="nv">X</span> : VLSM message)
    .</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Inductive</span> <span class="nf">MachineDescriptor</span> : <span class="kt">Type</span>
  :=
  | NewMachine : vstate X -&gt; MachineDescriptor
  | Existing : nat -&gt; bool -&gt; MachineDescriptor.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">

</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_type</span> : VLSM_type message :=
  {| state := {n : nat &amp; Fin.t (S n) -&gt; vstate X};
     label := vlabel X * MachineDescriptor
  |}.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_state</span> : <span class="kt">Type</span> := @state message equivocator_type.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">mk_singleton_state</span>
  (<span class="nv">s</span> : vstate X)
  : equivocator_state
  :=
  existT _ <span class="mi">0</span> (<span class="kr">fun</span> <span class="nv">_</span> =&gt; s).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">is_singleton_state</span>
  (<span class="nv">s</span> : equivocator_state)
  : <span class="kt">Prop</span>
  := projT1 s = <span class="mi">0</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">is_singleton_state_dec</span>
  (<span class="nv">s</span> : equivocator_state)
  : Decision (is_singleton_state s).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (is_singleton_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (is_singleton_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> nat_eq_dec.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">is_equivocating_state</span>
  (<span class="nv">s</span> : equivocator_state)
  : <span class="kt">Prop</span>
  := not (is_singleton_state s).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk2"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">is_equivocating_state_dec</span>
  (<span class="nv">s</span> : equivocator_state)
  : Decision (is_equivocating_state s).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (is_equivocating_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk3"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (is_equivocating_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk4"><span class="highlight"><span class="nb">apply</span> Decision_not.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (is_singleton_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> is_singleton_state_dec.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_label</span> : <span class="kt">Type</span> := @label message equivocator_type.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">mk_label</span>
  (<span class="nv">lx</span> : vlabel X)
  (<span class="nv">d</span> : MachineDescriptor)
  : equivocator_label
  := (lx, d).</span></span></span></pre><div class="doc">
Attempts to obtain the state of the internal machine with index <tt>i</tt>
<div class="paragraph"> </div>

from an <span class="inlinecode"><span class="id" title="var">equivocator_state</span></span>. Fails with index <tt>i</tt> does not refer to a
machine.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_state_project</span>
  (<span class="nv">bs</span> : equivocator_state)
  (<span class="nv">i</span> : nat)
  : option (vstate X)
  :=
  <span class="kr">let</span> (<span class="nv">n</span>, s) := bs <span class="kr">in</span>
  <span class="kr">match</span> (le_lt_dec (S n) i) <span class="kr">with</span>
  | <span class="nb">right</span> lt_in =&gt; Some (s (of_nat_lt lt_in))
  | _ =&gt;  None
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
Projecting an <span class="inlinecode"><span class="id" title="var">equivocator_state</span></span> over a <span class="inlinecode"><span class="id" title="var">MachineDescriptor</span></span>.

<div class="paragraph"> </div>

This is extracted from the original <span class="inlinecode"><span class="id" title="var">equivocators_state_project</span></span> to allow
factoring out the proofs by proving properties at this level.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_state_descriptor_project</span>
  (<span class="nv">s</span> : equivocator_state)
  (<span class="nv">descriptor</span> : MachineDescriptor)
  : vstate X
  :=
  <span class="kr">match</span> descriptor <span class="kr">with</span>
  | NewMachine sn =&gt; sn
  | Existing j _ =&gt;
    <span class="kr">match</span> equivocator_state_project s j <span class="kr">with</span>
    | Some sj =&gt; sj
    | None =&gt; projT2 s F1
    <span class="kr">end</span>
  <span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_state_update</span>
  (<span class="nv">bs</span> : equivocator_state)
  (<span class="nv">n</span> := projT1 bs)
  (<span class="nv">i</span> : Fin.t (S n))
  (<span class="nv">si</span> : vstate X)
  : equivocator_state
  :=
  existT _ n
    (<span class="kr">fun</span> <span class="nv">j</span> =&gt; <span class="kr">if</span> Fin.eq_dec i j <span class="kr">then</span> si <span class="kr">else</span> projT2 bs j).</span></span></span></pre><div class="doc">
Some basic properties for 'equivocator_state_update' 
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk5"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocator_state_update_size</span>
  (<span class="nv">bs</span> : equivocator_state)
  (<span class="nv">i</span> : Fin.t (S (projT1 bs)))
  (<span class="nv">si</span> : vstate X)
  : projT1 (equivocator_state_update bs i si) = projT1 bs.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 bs))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1 (equivocator_state_update bs i si) = projT1 bs</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk6"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 bs))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1 (equivocator_state_update bs i si) = projT1 bs</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk7"><span class="highlight"><span class="nb">destruct</span> bs.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t
  (S
     (projT1
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x
           v)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1
  (equivocator_state_update
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v)
     i si) =
projT1
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk8"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocator_state_update_eq</span>
  (<span class="nv">bs</span> : equivocator_state)
  (<span class="nv">n</span> := projT1 bs)
  (<span class="nv">i</span> : Fin.t (S n))
  (<span class="nv">si</span> : vstate X)
  : projT2 (equivocator_state_update bs i si) i = si.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 bs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT2 (equivocator_state_update bs i si) i = si</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk9"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 bs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT2 (equivocator_state_update bs i si) i = si</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 bs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">if</span> eq_dec i i <span class="kr">then</span> si <span class="kr">else</span> projT2 bs i) = si</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">rewrite</span> eq_dec_if_true; <span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocator_state_update_neq</span>
  (<span class="nv">bs</span> : equivocator_state)
  (<span class="nv">n</span> := projT1 bs)
  (<span class="nv">i</span> <span class="nv">j</span> : Fin.t (S n))
  (<span class="nv">si</span> : vstate X)
  (<span class="nv">Hij</span> : i &lt;&gt; j)
  : projT2 (equivocator_state_update bs i si) j = projT2 bs j.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 bs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hij</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT2 (equivocator_state_update bs i si) j =
projT2 bs j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 bs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hij</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT2 (equivocator_state_update bs i si) j =
projT2 bs j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 bs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hij</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">if</span> eq_dec i j <span class="kr">then</span> si <span class="kr">else</span> projT2 bs j) = projT2 bs j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke"><span class="highlight"><span class="nb">rewrite</span> eq_dec_if_false <span class="bp">by</span> <span class="bp">assumption</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 bs</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hij</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;&gt; j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT2 bs j = projT2 bs j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Extends an <span class="inlinecode"><span class="id" title="var">equivocator_state</span></span> with a new state of the original machine.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_state_extend</span>
  (<span class="nv">bs</span> : equivocator_state)
  (<span class="nv">s</span> : vstate X)
  : equivocator_state
  :=
  <span class="kr">let</span> (<span class="nv">n</span>, <span class="kr">is</span>) := bs <span class="kr">in</span>
  existT _ (S n)
    (<span class="kr">fun</span> <span class="nv">j</span> =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">if</span> (nat_eq_dec nj (S n)) <span class="kr">then</span> s <span class="kr">else</span> <span class="kr">is</span> (@of_nat_lt nj (S n) _)
    ).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt; S (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt;&gt; S n</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">nj &lt; S n</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">lia</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span></span></pre><div class="doc">
The original state index is present in any equivocator state
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk10"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Hzero</span> (<span class="nv">s</span> : equivocator_state) : <span class="mi">0</span> &lt; S (projT1 s).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> &lt; S (projT1 s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk11"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> &lt; S (projT1 s)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">lia</span>.</span></span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
<span class="c">(* An [equivocator_state] has the [initial_state_prop]erty if it only</span>
<span class="c">contains one state of original machine, and that state is initial.</span>
<span class="c">*)</span>
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_initial_state_prop</span>
  (<span class="nv">bs</span> : equivocator_state)
  : <span class="kt">Prop</span>
  := projT1 bs = <span class="mi">0</span> /\ vinitial_state_prop X (projT2 bs (of_nat_lt (Hzero bs))).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_initial_state</span>
  := sig equivocator_initial_state_prop.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk12"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_s0</span> : equivocator_initial_state.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_initial_state</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk13"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_initial_state</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk14"><span class="highlight"><span class="kr">exists</span> (<span class="nv">mk_singleton_state</span> (proj1_sig (vs0 X))).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_initial_state_prop
  (mk_singleton_state (` (vs0 X)))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk15"><span class="highlight"><span class="nb">unfold</span> mk_singleton_state.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_initial_state_prop
  (existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X) <span class="mi">0</span>
     (<span class="kr">fun</span> <span class="nv">_</span> : t <span class="mi">1</span> =&gt; ` (vs0 X)))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk16"><span class="highlight"><span class="nb">unfold</span> equivocator_initial_state_prop.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1
  (existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X) <span class="mi">0</span>
     (<span class="kr">fun</span> <span class="nv">_</span> : t <span class="mi">1</span> =&gt; ` (vs0 X))) = <span class="mi">0</span> /\
vinitial_state_prop X
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X) <span class="mi">0</span>
        (<span class="kr">fun</span> <span class="nv">_</span> : t <span class="mi">1</span> =&gt; ` (vs0 X)))
     (of_nat_lt
        (Hzero
           (existT
              (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X) <span class="mi">0</span>
              (<span class="kr">fun</span> <span class="nv">_</span> : t <span class="mi">1</span> =&gt; ` (vs0 X))))))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk17"><span class="highlight"><span class="nb">split</span>; [<span class="bp">reflexivity</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vinitial_state_prop X
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X) <span class="mi">0</span>
        (<span class="kr">fun</span> <span class="nv">_</span> : t <span class="mi">1</span> =&gt; ` (vs0 X)))
     (of_nat_lt
        (Hzero
           (existT
              (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X) <span class="mi">0</span>
              (<span class="kr">fun</span> <span class="nv">_</span> : t <span class="mi">1</span> =&gt; ` (vs0 X))))))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk18"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vinitial_state_prop X (` (vs0 X))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk19"><span class="highlight"><span class="nb">destruct</span> (vs0 X).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop x</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vinitial_state_prop X
  (`
   (exist (<span class="kr">fun</span> <span class="nv">s</span> : state =&gt; initial_state_prop s) x i))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_l0</span> : equivocator_label :=
  (vl0 X, Existing <span class="mi">0</span> false).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_sig</span>
  : VLSM_sign equivocator_type
  :=
    {|   initial_state_prop := equivocator_initial_state_prop
       ; s0 := equivocator_s0
       ; initial_message_prop := vinitial_message_prop X
       ; m0 := vm0 X
       ; l0 := equivocator_l0
    |}.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_transition</span>
  (<span class="nv">bl</span> : equivocator_label)
  (<span class="nv">bsom</span> : equivocator_state * option message)
  : equivocator_state * option message
  :=
  <span class="kr">let</span> (<span class="nv">bs</span>, om) := bsom <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">n</span> := projT1 bs <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := projT2 bs <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">l</span> := fst bl <span class="kr">in</span>
  <span class="kr">match</span> snd bl <span class="kr">with</span>
  | NewMachine sn  =&gt; <span class="c">(* creating a new machine with initial state sn*)</span>
    (equivocator_state_extend bs sn, None)
  | Existing i is_equiv =&gt; <span class="c">(* transition using the state of machine i *)</span>
    <span class="kr">match</span> (le_lt_dec (S n) i) <span class="kr">with</span>
    | <span class="nb">right</span> lt_in =&gt;
      <span class="kr">let</span> <span class="nv">ni</span> := of_nat_lt lt_in <span class="kr">in</span>
      <span class="kr">let</span> <span class="nv">si</span> := s ni <span class="kr">in</span>
      <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition X l (si, om) <span class="kr">in</span>
      <span class="kr">match</span> is_equiv <span class="kr">with</span>
      | false =&gt; (equivocator_state_update bs ni si&#39;, om&#39;) <span class="c">(* not equivocating *)</span>
      | true =&gt; (equivocator_state_extend bs si&#39;, om&#39;) <span class="c">(* equivocating in a new copy *)</span>
      <span class="kr">end</span>
    | _ =&gt;  bsom
    <span class="kr">end</span>
  <span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_valid</span>
  (<span class="nv">bl</span> : equivocator_label)
  (<span class="nv">bsom</span> : equivocator_state * option message)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">let</span> (<span class="nv">bs</span>, om) := bsom <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">n</span> := projT1 bs <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := projT2 bs <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">l</span> := fst bl <span class="kr">in</span>
  <span class="kr">match</span> snd bl <span class="kr">with</span>
  | NewMachine sn  =&gt; <span class="c">(* state is initial *)</span>
    vinitial_state_prop X sn /\ om = None
  | Existing i is_equiv =&gt; <span class="c">(* the index is good, and transition valid for it *)</span>
    <span class="kr">exists</span> (<span class="nv">Hi</span> : i &lt; S n), vvalid X l (s (of_nat_lt Hi), om)
  <span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_vlsm_machine</span>
  : VLSM_class equivocator_sig
  :=
  {|  transition := equivocator_transition
   ;  valid := equivocator_valid
  |}.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">equivocator_vlsm</span>
  : VLSM message
  :=
  mk_vlsm equivocator_vlsm_machine.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">

</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk1a"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">mk_singleton_initial_state</span>
  (<span class="nv">s</span> : vstate X)
  : vinitial_state_prop X s -&gt;
    vinitial_state_prop equivocator_vlsm (mk_singleton_state s).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vinitial_state_prop X s -&gt;
vinitial_state_prop equivocator_vlsm
  (mk_singleton_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk1b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vinitial_state_prop X s -&gt;
vinitial_state_prop equivocator_vlsm
  (mk_singleton_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk1c"><span class="highlight"><span class="nb">intro</span> Hs.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vinitial_state_prop equivocator_vlsm
  (mk_singleton_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">split</span>;[<span class="bp">reflexivity</span>|<span class="bp">assumption</span>].</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">equivocator_vlsm</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">equivocator_vlsm_protocol_state_projections</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  (<span class="nv">X</span> : VLSM message)
  (<span class="nv">equivocator_vlsm</span> := equivocator_vlsm X)
  (<span class="nv">MachineDescriptor</span> := MachineDescriptor X)
  .</span></span></span></pre><div class="doc">
Whether a <span class="inlinecode"><span class="id" title="var">MachineDescriptor</span></span> can be used to project an
 <span class="inlinecode"><span class="id" title="var">equivocator_state</span></span> to a regular <span class="inlinecode"><span class="id" title="var">state</span></span>.
 The <span class="inlinecode"><span class="id" title="var">NewMachine</span></span> descriptor signals that an equivocation has occured
 starting a new machine, thus we require the argument to be initial.
 For an <span class="inlinecode"><span class="id" title="var">Existing</span></span> descriptor, the index of the descriptor must
 refer to an existing machine in the current state.
 
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">proper_descriptor</span>
  (<span class="nv">d</span> : MachineDescriptor)
  (<span class="nv">s</span> : vstate equivocator_vlsm)
  :=
  <span class="kr">match</span> d <span class="kr">with</span>
  | NewMachine _ sn =&gt; vinitial_state_prop X sn
  | Existing _ i _ =&gt; i &lt; S (projT1 s)
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
Same as above, but disallowing equivocation. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">not_equivocating_descriptor</span>
  (<span class="nv">d</span> : MachineDescriptor)
  (<span class="nv">s</span> : vstate equivocator_vlsm)
  :=
  <span class="kr">match</span> d <span class="kr">with</span>
  | Existing _ i false =&gt; i &lt; S (projT1 s)
  | _ =&gt; <span class="kt">False</span>
  <span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk1d"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">not_equivocating_descriptor_proper</span>
  (<span class="nv">d</span> : MachineDescriptor)
  (<span class="nv">s</span> : vstate equivocator_vlsm)
  (<span class="nv">Hned</span> : not_equivocating_descriptor d s)
  : proper_descriptor d s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">MachineDescriptor</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hned</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_descriptor d s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">proper_descriptor d s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk1e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">d</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">MachineDescriptor</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hned</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_descriptor d s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">proper_descriptor d s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk1f"><span class="highlight"><span class="nb">destruct</span> d; [<span class="bp">contradict</span> Hned|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">b</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hned</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_descriptor (Existing X n b) s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">proper_descriptor (Existing X n b) s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk20"><span class="highlight"><span class="nb">destruct</span> b; [<span class="bp">contradict</span> Hned|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hned</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">not_equivocating_descriptor
  (Existing X n false) s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">proper_descriptor (Existing X n false) s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
<span class="c">(* TODO: derive some some simpler lemmas about the equivocator operations,</span>
<span class="c">or a simpler way of defining the equivocator_transition</span>
<span class="c">- it&#39;s not nice to need to pick apart these cases from inside</span>
<span class="c">equivocator_transition inside of so many proofs.</span>
<span class="c">*)</span></span></span></pre><div class="doc">
If the state obtained after one transition has no equivocation, then
the descriptor of the label of the transition must be Existing 0 false

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk21"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocator_transition_no_equivocation_zero_descriptor</span>
  (<span class="nv">iom</span> <span class="nv">oom</span>: option message)
  (<span class="nv">l</span>: vlabel equivocator_vlsm)
  (<span class="nv">s</span> <span class="nv">s&#39;</span>: vstate equivocator_vlsm)
  (<span class="nv">Hv</span>: vvalid equivocator_vlsm l (s, iom))
  (<span class="nv">Ht</span>: vtransition equivocator_vlsm l (s, iom) = (s&#39;, oom))
  (<span class="nv">Hs&#39;</span> : is_singleton_state X s&#39;)
  : snd l = Existing _ <span class="mi">0</span> false.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid equivocator_vlsm l (s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, iom) =
(s&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">is_singleton_state X s&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd l = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk22"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid equivocator_vlsm l (s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, iom) =
(s&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">is_singleton_state X s&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd l = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk23"><span class="highlight"><span class="nb">unfold</span> is_singleton_state <span class="kr">in</span> Hs&#39;.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid equivocator_vlsm l (s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, iom) =
(s&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 s&#39; = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd l = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk24"><span class="highlight">unfold_vtransition Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid equivocator_vlsm l (s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> snd l <span class="kr">with</span>
| NewMachine _ sn =&gt;
    (equivocator_state_extend X s sn, None)
| Existing _ i is_equiv =&gt;
    <span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
    | in_left =&gt; (s, iom)
    | <span class="nb">right</span> lt_in =&gt;
        <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
          vtransition X 
            (fst l)
            (projT2 s (of_nat_lt lt_in), iom) <span class="kr">in</span>
        <span class="kr">if</span> is_equiv
        <span class="kr">then</span>
         (equivocator_state_extend X s si&#39;, om&#39;)
        <span class="kr">else</span>
         (equivocator_state_update X s
            (of_nat_lt lt_in) si&#39;, om&#39;)
    <span class="kr">end</span>
<span class="kr">end</span> = (s&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 s&#39; = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd l = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk25"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (l, [sn | ei ef]); <span class="nb">unfold</span> snd <span class="kr">in</span> Ht
  ; [<span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">destruct</span> s; <span class="nb">simpl</span>; <span class="nb">inversion</span> Hs&#39;|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ef</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid equivocator_vlsm 
  (l, Existing X ei ef) 
  (s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) ei <span class="kr">with</span>
| in_left =&gt; (s, iom)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X (fst (l, Existing X ei ef))
        (projT2 s (of_nat_lt lt_in), iom) <span class="kr">in</span>
    <span class="kr">if</span> ef
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (s&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 s&#39; = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei ef) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk26"><span class="highlight"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hei _].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ef</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) ei <span class="kr">with</span>
| in_left =&gt; (s, iom)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X (fst (l, Existing X ei ef))
        (projT2 s (of_nat_lt lt_in), iom) <span class="kr">in</span>
    <span class="kr">if</span> ef
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (s&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 s&#39; = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei ef) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk27"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S (projT1 s)) ei); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ef</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X (fst (l, Existing X ei ef))
     (projT2 s (of_nat_lt l0), iom) <span class="kr">in</span>
 <span class="kr">if</span> ef
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt l0) si&#39;, om&#39;)) = 
(s&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 s&#39; = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei ef) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk28"><span class="highlight"><span class="kr">match</span> <span class="kp">type of</span> Ht <span class="kr">with</span>
  | (<span class="kr">let</span> (<span class="nv">_</span>, _) := <span class="nl">?t</span> <span class="kr">in</span> _) = _ =&gt; <span class="nb">destruct</span> t <span class="kr">as</span> (_s&#39;, _om&#39;)
  <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ef</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">if</span> ef
 <span class="kr">then</span> (equivocator_state_extend X s _s&#39;, _om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt l0) _s&#39;, _om&#39;)) = 
(s&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 s&#39; = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei ef) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk29"><span class="highlight"><span class="nb">destruct</span> ef; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 (equivocator_state_extend X s _s&#39;) = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei true) = Existing X <span class="mi">0</span> false</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chk2a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1
  (equivocator_state_update X s 
     (of_nat_lt l0) _s&#39;) = <span class="mi">0</span></span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chk2a"><hr></label><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei false) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk2b"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 (equivocator_state_extend X s _s&#39;) = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei true) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk2c"><span class="highlight"><span class="nb">destruct</span> s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei, x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1
  (equivocator_state_extend X
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v)
     _s&#39;) = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei true) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">inversion</span> Hs&#39;.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk2d"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1
  (equivocator_state_update X s 
     (of_nat_lt l0) _s&#39;) = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei false) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk2e"><span class="highlight"><span class="nb">destruct</span> s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei, x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1
  (equivocator_state_update X
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v)
     (of_nat_lt l0) _s&#39;) = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">snd (l, Existing X ei false) = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk2f"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei, x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S x</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">x = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Existing X ei false = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk30"><span class="highlight"><span class="nb">assert</span> (ei = <span class="mi">0</span>) <span class="bp">by</span> <span class="bp">lia</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei, x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S x</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">x = <span class="mi">0</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei = <span class="mi">0</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Existing X ei false = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk31"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hei, l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="mi">0</span> &lt; <span class="mi">1</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span> -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Existing X <span class="mi">0</span> false = Existing X <span class="mi">0</span> false</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
If the state obtained after one transition has no equivocation, then
the state prior to the transition has no equivocation as well.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk32"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocator_transition_reflects_singleton_state</span>
  (<span class="nv">iom</span> <span class="nv">oom</span>: option message)
  (<span class="nv">l</span>: vlabel equivocator_vlsm)
  (<span class="nv">s</span> <span class="nv">s&#39;</span>: vstate equivocator_vlsm)
  (<span class="nv">Ht</span>: vtransition equivocator_vlsm l (s, iom) = (s&#39;, oom))
  : is_singleton_state X s&#39; -&gt; is_singleton_state X s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, iom) =
(s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">is_singleton_state X s&#39; -&gt; is_singleton_state X s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk33"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, iom) =
(s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">is_singleton_state X s&#39; -&gt; is_singleton_state X s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk34"><span class="highlight"><span class="nb">unfold</span> is_singleton_state.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, iom) =
(s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1 s&#39; = <span class="mi">0</span> -&gt; projT1 s = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk35"><span class="highlight">unfold_vtransition Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> snd l <span class="kr">with</span>
| NewMachine _ sn =&gt;
    (equivocator_state_extend X s sn, None)
| Existing _ i is_equiv =&gt;
    <span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
    | in_left =&gt; (s, iom)
    | <span class="nb">right</span> lt_in =&gt;
        <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
          vtransition X 
            (fst l)
            (projT2 s (of_nat_lt lt_in), iom) <span class="kr">in</span>
        <span class="kr">if</span> is_equiv
        <span class="kr">then</span>
         (equivocator_state_extend X s si&#39;, om&#39;)
        <span class="kr">else</span>
         (equivocator_state_update X s
            (of_nat_lt lt_in) si&#39;, om&#39;)
    <span class="kr">end</span>
<span class="kr">end</span> = (s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1 s&#39; = <span class="mi">0</span> -&gt; projT1 s = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk36"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (l, [sn | ei ef]); <span class="nb">unfold</span> snd <span class="kr">in</span> Ht
  ; [<span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">destruct</span> s; <span class="nb">simpl</span>; <span class="bp">congruence</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ef</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) ei <span class="kr">with</span>
| in_left =&gt; (s, iom)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X (fst (l, Existing X ei ef))
        (projT2 s (of_nat_lt lt_in), iom) <span class="kr">in</span>
    <span class="kr">if</span> ef
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1 s&#39; = <span class="mi">0</span> -&gt; projT1 s = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk37"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S (projT1 s)) ei)
  ; [<span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="bp">exact</span> id|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ef</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X (fst (l, Existing X ei ef))
     (projT2 s (of_nat_lt l0), iom) <span class="kr">in</span>
 <span class="kr">if</span> ef
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt l0) si&#39;, om&#39;)) = 
(s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1 s&#39; = <span class="mi">0</span> -&gt; projT1 s = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk38"><span class="highlight"><span class="kr">match</span> <span class="kp">type of</span> Ht <span class="kr">with</span>
  | (<span class="kr">let</span> (<span class="nv">_</span>, _) := <span class="nl">?t</span> <span class="kr">in</span> _) = _ =&gt; <span class="nb">destruct</span> t <span class="kr">as</span> (_s&#39;, _om&#39;)
  <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ef</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s, s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">if</span> ef
 <span class="kr">then</span> (equivocator_state_extend X s _s&#39;, _om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt l0) _s&#39;, _om&#39;)) = 
(s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1 s&#39; = <span class="mi">0</span> -&gt; projT1 s = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk39"><span class="highlight"><span class="nb">destruct</span> ef; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; [|<span class="bp">exact</span> id].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s _s&#39;, oom) =
(equivocator_state_extend X s _s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1 (equivocator_state_extend X s _s&#39;) = <span class="mi">0</span> -&gt;
projT1 s = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk3a"><span class="highlight"><span class="nb">destruct</span> s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei, x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        x v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x
      v) _s&#39;, oom) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x
      v) _s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">projT1
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v)
     _s&#39;) = <span class="mi">0</span> -&gt;
projT1
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v) =
<span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk3b"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ei, x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ei &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        x v))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x
      v) _s&#39;, oom) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x
      v) _s&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S x = <span class="mi">0</span> -&gt; x = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">congruence</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Protocol messages in the <span class="inlinecode"><span class="id" title="var">equivocator_vlsm</span></span> are also protocol in the
original machine.  All components of a protocol state in the
<span class="inlinecode"><span class="id" title="var">equivocator_vlsm</span></span> are also protocol in the original machine.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk3c"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocator_state_project_protocol</span>
  (<span class="nv">bs</span> : vstate equivocator_vlsm)
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hbs</span> : protocol_prop equivocator_vlsm (bs, om))
  :
  option_protocol_message_prop X om /\
  <span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
  <span class="kr">forall</span> (<span class="nv">i</span> : Fin.t (S n)), protocol_state_prop X (bs i).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop equivocator_vlsm (bs, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk3d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop equivocator_vlsm (bs, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk3e"><span class="highlight"><span class="nb">dependent induction</span> Hbs; <span class="nb">split</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chk3f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chk3f"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="Common-v-chk40" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(s, _om) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (bs, om)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chk40"><hr></label><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="Common-v-chk41" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(s, _om) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (bs, om)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chk41"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk42"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> option_initial_message_is_protocol;<span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk43"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk44"><span class="highlight"><span class="nb">destruct</span> bs <span class="kr">as</span> [n bs]; <span class="nb">intro</span> i.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
     bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk45"><span class="highlight"><span class="nb">destruct</span> Hs <span class="kr">as</span> [Hn0 Hinit].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hn0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
     bs) = <span class="mi">0</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X
  (projT2
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
        bs)
     (of_nat_lt
        (Hzero X
           (existT
              (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt;
               t (S n) -&gt; vstate X) n bs))))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk46"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hn0, Hinit.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hn0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">n = <span class="mi">0</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X (bs F1)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk47"><span class="highlight"><span class="nb">subst</span> n.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span> -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X (bs F1)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk48"><span class="highlight"><span class="nb">dependent induction</span> i;[|<span class="nb">inversion</span> i].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span> -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinit</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X (bs F1)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_initial_message_prop om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs F1)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> initial_is_protocol; <span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk49"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(s, _om) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (bs, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk4a"><span class="highlight"><span class="nb">specialize</span> (IHHbs1 X s _om eq_refl JMeq_refl).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (bs, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk4b"><span class="highlight"><span class="nb">specialize</span> (IHHbs2 X _s om0 eq_refl JMeq_refl).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (bs, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk4c"><span class="highlight"><span class="nb">specialize</span> (protocol_generated X) <span class="kr">as</span> Hgen.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk4d"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hv.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> snd l <span class="kr">with</span>
| NewMachine _ sn =&gt;
    vinitial_state_prop X sn /\ om0 = None
| Existing _ i _ =&gt;
    <span class="kr">exists</span> <span class="nv">Hi</span> : i &lt; S (projT1 s),
      vvalid X (fst l)
        (projT2 s (of_nat_lt Hi), om0)
<span class="kr">end</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk4e"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (l, descriptor).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">descriptor</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> snd (l, descriptor) <span class="kr">with</span>
| NewMachine _ sn =&gt;
    vinitial_state_prop X sn /\ om0 = None
| Existing _ i _ =&gt;
    <span class="kr">exists</span> <span class="nv">Hi</span> : i &lt; S (projT1 s),
      vvalid X (fst (l, descriptor))
        (projT2 s (of_nat_lt Hi), om0)
<span class="kr">end</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, descriptor) (s, om0) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk4f"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hv.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">descriptor</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> descriptor <span class="kr">with</span>
| NewMachine _ sn =&gt;
    vinitial_state_prop X sn /\ om0 = None
| Existing _ i _ =&gt;
    <span class="kr">exists</span> <span class="nv">Hi</span> : i &lt; S (projT1 s),
      vvalid X l (projT2 s (of_nat_lt Hi), om0)
<span class="kr">end</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, descriptor) (s, om0) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk50"><span class="highlight"><span class="nb">destruct</span> descriptor <span class="kr">as</span> [sn| i is_equiv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn /\ om0 = None</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, NewMachine X sn) (s, om0) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chk51" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">Hi</span> : i &lt; S (projT1 s),
  vvalid X l (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, Existing X i is_equiv) (s, om0) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chk51"><hr></label><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk52"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn /\ om0 = None</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, NewMachine X sn) (s, om0) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk53"><span class="highlight"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hsn Hv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">om0 = None</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, NewMachine X sn) (s, om0) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk54"><span class="highlight"><span class="nb">subst</span> om0.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, NewMachine X sn) (s, None) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk55"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> x.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk56"><span class="highlight"><span class="nb">inversion</span> x.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state_extend X s sn = bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">None = om</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X None</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk57"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(equivocator_state_extend X s sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X None</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> IHHbs2.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk58"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">Hi</span> : i &lt; S (projT1 s),
  vvalid X l (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, Existing X i is_equiv) (s, om0) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk59"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> x.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> <span class="nv">Hi</span> : i &lt; S (projT1 s),
  vvalid X l (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
| in_left =&gt; (s, om0)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X l
        (projT2 s (of_nat_lt lt_in), om0) <span class="kr">in</span>
    <span class="kr">if</span> is_equiv
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk5a"><span class="highlight"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hi Hv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
| in_left =&gt; (s, om0)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X l
        (projT2 s (of_nat_lt lt_in), om0) <span class="kr">in</span>
    <span class="kr">if</span> is_equiv
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk5b"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S (projT1 s)) i); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt l0), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s (of_nat_lt l0) si&#39;,
  om&#39;)) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk5c"><span class="highlight"><span class="nb">replace</span> (of_nat_lt l0) <span class="kr">with</span> (of_nat_lt Hi) <span class="kr">in</span> * <span class="bp">by</span> <span class="nb">apply</span> of_nat_ext.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s (of_nat_lt Hi) si&#39;,
  om&#39;)) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk5d"><span class="highlight"><span class="nb">clear</span> l0.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s (of_nat_lt Hi) si&#39;,
  om&#39;)) = (bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk5e"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (n, bs&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs&#39; i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk5f"><span class="highlight"><span class="nb">destruct</span> IHHbs1 <span class="kr">as</span> [_ IHHbs1].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs&#39; i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk60"><span class="highlight">spec IHHbs1 (of_nat_lt Hi).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X (bs&#39; (of_nat_lt Hi))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk61"><span class="highlight"><span class="nb">destruct</span> IHHbs1 <span class="kr">as</span> [_om&#39; Hbs&#39;t].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk62"><span class="highlight"><span class="nb">destruct</span> IHHbs2 <span class="kr">as</span> [Hom _].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk63"><span class="highlight"><span class="nb">clear</span> Hbs2 _s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk64"><span class="highlight"><span class="nb">destruct</span> Hom <span class="kr">as</span> [_s Hom].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk65"><span class="highlight"><span class="nb">specialize</span> (Hgen l (bs&#39; (of_nat_lt Hi)) _om&#39; Hbs&#39;t _s om0 Hom Hv).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X
  (transition l (bs&#39; (of_nat_lt Hi), om0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk66"><span class="highlight"><span class="kr">match</span> <span class="kp">type of</span> Hgen <span class="kr">with</span>
      | protocol_prop _ <span class="nl">?t</span> =&gt;
        <span class="nb">change</span> t  <span class="kr">with</span> (vtransition X l (bs&#39; (of_nat_lt Hi), om0))
          <span class="kr">in</span> Hgen
      <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l
     (projT2
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs&#39;) (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (equivocator_state_extend X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X
  (vtransition X l (bs&#39; (of_nat_lt Hi), om0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk67"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs&#39; (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (bs&#39; (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs&#39;
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X
  (vtransition X l (bs&#39; (of_nat_lt Hi), om0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk68"><span class="highlight"><span class="nb">destruct</span> (vtransition X l (bs&#39; (of_nat_lt Hi), om0)) <span class="kr">as</span> (si&#39;, om&#39;) <span class="nb">eqn</span>:Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs&#39; (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs&#39; (of_nat_lt Hi), om0) =
(si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs&#39;
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk69"><span class="highlight"><span class="kr">exists</span> <span class="nv">si&#39;</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n bs&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs&#39; (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs&#39; (of_nat_lt Hi), om0) =
(si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs&#39;
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n bs&#39;) (of_nat_lt Hi) si&#39;, om&#39;)) =
(bs, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs't</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs&#39; (of_nat_lt Hi), _om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop X (si&#39;, om)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">destruct</span> is_equiv <span class="kr">as</span> [|]; <span class="nb">inversion</span> x; <span class="nb">subst</span>; <span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk6a"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(s, _om) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (bs, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk6b"><span class="highlight"><span class="nb">destruct</span> bs <span class="kr">as</span> (n, bs).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(s, _om) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk6c"><span class="highlight"><span class="nb">intro</span> j.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(s, _om) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk6d"><span class="highlight"><span class="nb">specialize</span> (IHHbs1 X s _om eq_refl JMeq_refl).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X _om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk6e"><span class="highlight"><span class="nb">destruct</span> IHHbs1 <span class="kr">as</span> [_ IHHbs1].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X0</span> : VLSM message)
  (<span class="nv">bs</span> : vstate (SerTop.equivocator_vlsm X0))
  (<span class="nv">om</span> : option message),
SerTop.equivocator_vlsm X =
SerTop.equivocator_vlsm X0 -&gt;
(_s, om0) ~= (bs, om) -&gt;
option_protocol_message_prop X0 om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs0) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X0 (bs0 i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk6f"><span class="highlight"><span class="nb">specialize</span> (IHHbs2 X _s om0 eq_refl JMeq_refl).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk70"><span class="highlight"><span class="nb">specialize</span> (protocol_generated X) <span class="kr">as</span> Hgen.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk71"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (l, descriptor).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">descriptor</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, descriptor) (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, descriptor) (s, om0) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk72"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> x.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">descriptor</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, descriptor) (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> descriptor <span class="kr">with</span>
| NewMachine _ sn =&gt;
    (equivocator_state_extend X s sn, None)
| Existing _ i is_equiv =&gt;
    <span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
    | in_left =&gt; (s, om0)
    | <span class="nb">right</span> lt_in =&gt;
        <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
          vtransition X l
            (projT2 s (of_nat_lt lt_in), om0) <span class="kr">in</span>
        <span class="kr">if</span> is_equiv
        <span class="kr">then</span>
         (equivocator_state_extend X s si&#39;, om&#39;)
        <span class="kr">else</span>
         (equivocator_state_update X s
            (of_nat_lt lt_in) si&#39;, om&#39;)
    <span class="kr">end</span>
<span class="kr">end</span> =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk73"><span class="highlight"><span class="nb">destruct</span> descriptor <span class="kr">as</span> [sn | i is_equiv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, NewMachine X sn) (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chk74" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, Existing X i is_equiv) (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
| in_left =&gt; (s, om0)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X l
        (projT2 s (of_nat_lt lt_in), om0) <span class="kr">in</span>
    <span class="kr">if</span> is_equiv
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chk74"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk75"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, NewMachine X sn) (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk76"><span class="highlight"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hsn Hv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">om0 = None</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk77"><span class="highlight"><span class="nb">subst</span> om0.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk78"><span class="highlight"><span class="nb">inversion</span> x.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state_extend X s sn =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">None = om</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk79"><span class="highlight"><span class="nb">subst</span> om.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state_extend X s sn =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk7a"><span class="highlight"><span class="nb">unfold</span> equivocator_state_extend <span class="kr">in</span> H0.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">n</span>, <span class="kr">is</span>) := s <span class="kr">in</span>
 existT (<span class="kr">fun</span> <span class="nv">n0</span> : nat =&gt; t (S n0) -&gt; vstate X)
   (S n)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        <span class="kr">is</span>
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                n nj Hnj x))
    <span class="kr">end</span>)) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk7b"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (n0, bs0).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk7c"><span class="highlight"><span class="nb">inversion</span> H0.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">S n0 = n</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X) n bs</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk7d"><span class="highlight"><span class="nb">subst</span> n.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0)) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S n0) bs, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0, H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X)
  (S n0) bs</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk7e"><span class="highlight">simpl_existT.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0)) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S n0) bs, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0) bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
 <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
 <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
 | in_left =&gt; sn
 | <span class="nb">right</span> x =&gt;
     bs0
       (of_nat_lt
          (equivocator_state_extend_obligation_1
             n0 nj Hnj x))
 <span class="kr">end</span>) = bs</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk7f"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S n0)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs0
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                n0 nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  (<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1 n0
               nj Hnj x))
   <span class="kr">end</span>)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk80"><span class="highlight"><span class="nb">destruct</span> (to_nat j) <span class="kr">as</span> (nj, Hnj).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S n0)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs0
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                n0 nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt; S (S n0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
  | in_left =&gt; sn
  | <span class="nb">right</span> x =&gt;
      bs0
        (of_nat_lt
           (equivocator_state_extend_obligation_1 n0
              nj Hnj x))
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk81"><span class="highlight"><span class="kp">try</span> <span class="nb">destruct</span> (nat_eq_dec nj (S n0)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S n0)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs0
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                n0 nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt; S (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj = S n0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X sn</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chk82" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S n0)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs0
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                n0 nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt; S (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt;&gt; S n0</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chk82"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  (bs0
     (of_nat_lt
        (equivocator_state_extend_obligation_1 n0 nj
           Hnj n)))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk83"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S n0)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs0
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                n0 nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt; S (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj = S n0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X sn</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> initial_is_protocol;<span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk84"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X None /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n0
      bs0) sn, None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S n0)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs0
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                n0 nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S n0)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               n0 nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt; S (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt;&gt; S n0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  (bs0
     (of_nat_lt
        (equivocator_state_extend_obligation_1 n0 nj
           Hnj n)))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> IHHbs1.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk85"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, Existing X i is_equiv) (s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
| in_left =&gt; (s, om0)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X l
        (projT2 s (of_nat_lt lt_in), om0) <span class="kr">in</span>
    <span class="kr">if</span> is_equiv
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk86"><span class="highlight"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hi Hv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X i is_equiv))
  (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
| in_left =&gt; (s, om0)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X l
        (projT2 s (of_nat_lt lt_in), om0) <span class="kr">in</span>
    <span class="kr">if</span> is_equiv
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk87"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S (projT1 s)) i); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X i is_equiv))
  (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt l0), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s (of_nat_lt l0) si&#39;,
  om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk88"><span class="highlight"><span class="nb">replace</span> (of_nat_lt l0) <span class="kr">with</span> (of_nat_lt Hi) <span class="kr">in</span> * <span class="bp">by</span> <span class="nb">apply</span> of_nat_ext.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X i is_equiv))
  (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s (of_nat_lt Hi) si&#39;,
  om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk89"><span class="highlight"><span class="nb">clear</span> l0.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X i is_equiv))
  (projT2 s (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n),
protocol_state_prop X (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s (of_nat_lt Hi) si&#39;,
  om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk8a"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (n0, bs0); <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (bs0 (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n0)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs0
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n0 nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n0 bs0) (of_nat_lt Hi) si&#39;, om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk8b"><span class="highlight"><span class="nb">destruct</span> (IHHbs1 (of_nat_lt Hi)) <span class="kr">as</span> [_om0 Hbs0t].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om0 /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := _s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (bs0 (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n0)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs0
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n0 nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n0 bs0) (of_nat_lt Hi) si&#39;, om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk8c"><span class="highlight"><span class="nb">destruct</span> IHHbs2 <span class="kr">as</span> [(_som, Hom) _].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (bs0 (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n0)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs0
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n0 nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n0 bs0) (of_nat_lt Hi) si&#39;, om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : label) (<span class="nv">s</span> : state)
  (<span class="nv">_om</span> : option message),
protocol_prop X (s, _om) -&gt;
<span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop X (_s, om) -&gt;
valid l (s, om) -&gt;
protocol_prop X (transition l (s, om))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk8d"><span class="highlight"><span class="nb">specialize</span> (Hgen l (bs0 (of_nat_lt Hi))  _om0 Hbs0t _som om0 Hom Hv).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (bs0 (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n0)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs0
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n0 nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n0 bs0) (of_nat_lt Hi) si&#39;, om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X
  (transition l (bs0 (of_nat_lt Hi), om0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk8e"><span class="highlight"><span class="kr">match</span> <span class="kp">type of</span> Hgen <span class="kr">with</span>
      | protocol_prop _ <span class="nl">?t</span> =&gt;
        <span class="nb">change</span> t  <span class="kr">with</span> (vtransition X l (bs0 (of_nat_lt Hi), om0))
          <span class="kr">in</span> Hgen
      <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (bs0 (of_nat_lt Hi), om0) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n0)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs0
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n0 nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n0 bs0) (of_nat_lt Hi) si&#39;, om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X
  (vtransition X l (bs0 (of_nat_lt Hi), om0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk8f"><span class="highlight"><span class="nb">destruct</span> (vtransition X l (bs0 (of_nat_lt Hi), om0)) <span class="kr">as</span> (si&#39;, om&#39;) <span class="nb">eqn</span>:Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">if</span> is_equiv
 <span class="kr">then</span>
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S n0)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n0)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
      | in_left =&gt; si&#39;
      | <span class="nb">right</span> x =&gt;
          bs0
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n0 nj Hnj x))
      <span class="kr">end</span>), om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        n0 bs0) (of_nat_lt Hi) si&#39;, om&#39;)) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs,
om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X (bs j)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk90"><span class="highlight"><span class="nb">destruct</span> is_equiv <span class="kr">as</span> [|]; <span class="nb">inversion</span> x; <span class="nb">clear</span> x
      ; <span class="nb">subst</span> n om&#39;; <span class="nb">apply</span> inj_pairT2 <span class="kr">in</span> H1; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  (<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; si&#39;
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1 n0
               nj Hnj x))
   <span class="kr">end</span>)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chk91" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chk91"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  (<span class="kr">if</span> eq_dec (of_nat_lt Hi) j <span class="kr">then</span> si&#39; <span class="kr">else</span> bs0 j)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk92"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  (<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
   | in_left =&gt; si&#39;
   | <span class="nb">right</span> x =&gt;
       bs0
         (of_nat_lt
            (equivocator_state_extend_obligation_1 n0
               nj Hnj x))
   <span class="kr">end</span>)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk93"><span class="highlight"><span class="nb">destruct</span> (to_nat j) <span class="kr">as</span> (nj, Hnj).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt; S (S n0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  <span class="kr">match</span> nat_eq_dec nj (S n0) <span class="kr">with</span>
  | in_left =&gt; si&#39;
  | <span class="nb">right</span> x =&gt;
      bs0
        (of_nat_lt
           (equivocator_state_extend_obligation_1 n0
              nj Hnj x))
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk94"><span class="highlight"><span class="nb">destruct</span> (nat_eq_dec  nj (S n0)); [<span class="kr">exists</span> <span class="nv">om</span>; <span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S n0))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt; S (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nj &lt;&gt; S n0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  (bs0
     (of_nat_lt
        (equivocator_state_extend_obligation_1 n0 nj
           Hnj n)))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> IHHbs1.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk95"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X
  (<span class="kr">if</span> eq_dec (of_nat_lt Hi) j <span class="kr">then</span> si&#39; <span class="kr">else</span> bs0 j)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk96"><span class="highlight"><span class="nb">destruct</span> (Fin.eq_dec (of_nat_lt Hi) j); [|<span class="nb">apply</span> IHHbs1].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">of_nat_lt Hi = j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop X si&#39;</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk97"><span class="highlight"><span class="kr">exists</span> <span class="nv">om</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i, n0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     n0 bs0, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (SerTop.equivocator_vlsm X)
  (_s, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">i &lt; S n0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs0 (of_nat_lt Hi), om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S n0),
protocol_state_prop X (bs0 i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_som, om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X l (bs0 (of_nat_lt Hi), om0) =
(si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (si&#39;, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs0t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (bs0 (of_nat_lt Hi), _om0)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">of_nat_lt Hi = j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop X (si&#39;, om)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk98"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocator_state_project_protocol_state</span>
  (<span class="nv">bs</span> : vstate equivocator_vlsm)
  (<span class="nv">Hbs</span> : protocol_state_prop equivocator_vlsm bs)
  :
  <span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
  <span class="kr">forall</span> (<span class="nv">i</span> : Fin.t (S n)), protocol_state_prop X (bs i).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop equivocator_vlsm bs</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk99"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop equivocator_vlsm bs</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk9a"><span class="highlight"><span class="nb">destruct</span> Hbs <span class="kr">as</span> [om Hbs].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop equivocator_vlsm (bs, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk9b"><span class="highlight"><span class="nb">apply</span> equivocator_state_project_protocol <span class="kr">in</span> Hbs.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk9c"><span class="highlight"><span class="nb">apply</span> proj2 <span class="kr">in</span> Hbs.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> (<span class="nv">n</span>, bs) := bs <span class="kr">in</span>
<span class="kr">forall</span> <span class="nv">i</span> : t (S n), protocol_state_prop X (bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk9d"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">equivocator_state_project_protocol_message</span>
  (<span class="nv">om</span> : option message)
  (<span class="nv">Hom</span> : option_protocol_message_prop equivocator_vlsm om)
  :
  option_protocol_message_prop X om.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop equivocator_vlsm om</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk9e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop equivocator_vlsm om</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk9f"><span class="highlight"><span class="nb">destruct</span> Hom <span class="kr">as</span> [s Hom].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop equivocator_vlsm (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka0"><span class="highlight"><span class="nb">apply</span> equivocator_state_project_protocol <span class="kr">in</span> Hom.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om /\
(<span class="kr">let</span> (<span class="nv">n</span>, bs) := s <span class="kr">in</span>
 <span class="kr">forall</span> <span class="nv">i</span> : t (S n),
 protocol_state_prop X (bs i))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka1"><span class="highlight"><span class="nb">apply</span> proj1 <span class="kr">in</span> Hom.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop X om</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop X om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
All components of a protocol states of the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> corresponding
to an <span class="inlinecode"><span class="id" title="var">equivocator_vlsm</span></span> are also protocol for the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span>
corresponding to the original machine.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka2"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">preloaded_equivocator_state_project_protocol_state</span>
  (<span class="nv">bs</span> : vstate equivocator_vlsm)
  (<span class="nv">Hbs</span> : protocol_state_prop (pre_loaded_with_all_messages_vlsm equivocator_vlsm) bs)
  (<span class="nv">i</span> : Fin.t (S (projT1 bs)))
  :
  protocol_state_prop (pre_loaded_with_all_messages_vlsm X) (projT2 bs i).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 bs))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka3"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) bs</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 bs))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka4"><span class="highlight"><span class="nb">revert</span> bs Hbs i.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">bs</span> : vstate equivocator_vlsm,
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm equivocator_vlsm)
  bs -&gt;
<span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 bs)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 bs i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka5"><span class="highlight"><span class="nb">induction</span> <span class="mi">1</span> <span class="nb">using</span> protocol_state_prop_ind;<span class="nb">intros</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s i)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chka6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) l 
  (s, om) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chka6"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (projT2 s&#39; i)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka7"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka8"><span class="highlight"><span class="nb">destruct</span> Hs <span class="kr">as</span> [Hzero His].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hzero</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1 s = <span class="mi">0</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X
  (projT2 s (of_nat_lt (SerTop.Hzero X s)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chka9"><span class="highlight"><span class="nb">destruct</span> s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hzero</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">projT1
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     x v) = <span class="mi">0</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X
  (projT2
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v)
     (of_nat_lt
        (SerTop.Hzero X
           (existT
              (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt;
               t (S n) -&gt; vstate X) x v))))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t
  (S
     (projT1
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x
           v)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) x v)
     i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkaa"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hzero</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">x = <span class="mi">0</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X (v F1)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S x)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (v i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkab"><span class="highlight"><span class="nb">subst</span> x.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span> -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X (v F1)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (v i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkac"><span class="highlight"><span class="nb">apply</span> initial_is_protocol.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span> -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X (v F1)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">initial_state_prop (v i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkad"><span class="highlight"><span class="nb">dependent destruction</span> i; [|<span class="nb">inversion</span> i].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t <span class="mi">1</span> -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X (v F1)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">initial_state_prop (v F1)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkae"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) l 
  (s, om) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkaf"><span class="highlight"><span class="nb">destruct</span> Ht <span class="kr">as</span> [[Hps [_ Hv]] Ht].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb0"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, om) =
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb1"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (l, description).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">description</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, description) (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm 
  (l, description) (s, om) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb2"><span class="highlight">unfold_vtransition Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">description</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, description) (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> description <span class="kr">with</span>
| NewMachine _ sn =&gt;
    (equivocator_state_extend X s sn, None)
| Existing _ i is_equiv =&gt;
    <span class="kr">match</span> le_lt_dec (S (projT1 s)) i <span class="kr">with</span>
    | in_left =&gt; (s, om)
    | <span class="nb">right</span> lt_in =&gt;
        <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
          vtransition X l
            (projT2 s (of_nat_lt lt_in), om) <span class="kr">in</span>
        <span class="kr">if</span> is_equiv
        <span class="kr">then</span>
         (equivocator_state_extend X s si&#39;, om&#39;)
        <span class="kr">else</span>
         (equivocator_state_update X s
            (of_nat_lt lt_in) si&#39;, om&#39;)
    <span class="kr">end</span>
<span class="kr">end</span> = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb3"><span class="highlight"><span class="nb">destruct</span> description <span class="kr">as</span> [sn| j is_equiv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, NewMachine X sn) (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chkb4" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, Existing X j is_equiv) (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) j <span class="kr">with</span>
| in_left =&gt; (s, om)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X l
        (projT2 s (of_nat_lt lt_in), om) <span class="kr">in</span>
    <span class="kr">if</span> is_equiv
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chkb4"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (projT2 s&#39; i)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb5"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, NewMachine X sn) (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb6"><span class="highlight"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hsn Hv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">om = None</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb7"><span class="highlight"><span class="nb">subst</span> om.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb8"><span class="highlight"><span class="nb">inversion</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state_extend X s sn = s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">None = om&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkb9"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(equivocator_state_extend X s sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 (equivocator_state_extend X s sn)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 (equivocator_state_extend X s sn) i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkba"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (ns, bs).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      ns bs) sn, None) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      ns bs) sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">i</span> : t
        (S
           (projT1
              (existT
                 (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt;
                  t (S n) -&gt; vstate X) ns bs))),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        ns bs) i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t
  (S
     (projT1
        (equivocator_state_extend X
           (existT
              (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
              ns bs) sn)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2
     (equivocator_state_extend X
        (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
           ns bs) sn) i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkbb"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S ns)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S ns)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                ns nj Hnj x))
    <span class="kr">end</span>), None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S ns)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S ns)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                ns nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S ns),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S ns))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat i <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bs
         (of_nat_lt
            (equivocator_state_extend_obligation_1 ns
               nj Hnj x))
   <span class="kr">end</span>)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkbc"><span class="highlight"><span class="nb">destruct</span> (to_nat i) <span class="kr">as</span> (ni, Hni).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S ns)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S ns)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                ns nj Hnj x))
    <span class="kr">end</span>), None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S ns)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S ns)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                ns nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S ns),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S ns))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S ns)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  <span class="kr">match</span> nat_eq_dec ni (S ns) <span class="kr">with</span>
  | in_left =&gt; sn
  | <span class="nb">right</span> x =&gt;
      bs
        (of_nat_lt
           (equivocator_state_extend_obligation_1 ns
              ni Hni x))
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkbd"><span class="highlight"><span class="nb">destruct</span> (nat_eq_dec ni (S ns)); [|<span class="nb">apply</span> IHHbs].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S ns)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S ns)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                ns nj Hnj x))
    <span class="kr">end</span>), None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S ns)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S ns)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                ns nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S ns),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S ns))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S ns)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni = S ns</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkbe"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S ns)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S ns)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                ns nj Hnj x))
    <span class="kr">end</span>), None) =
(existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
   (S ns)
   (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S ns)) =&gt;
    <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
    <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
    | in_left =&gt; sn
    | <span class="nb">right</span> x =&gt;
        bs
          (of_nat_lt
             (equivocator_state_extend_obligation_1
                ns nj Hnj x))
    <span class="kr">end</span>), None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S ns),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S ns))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">S ns &lt; S (S ns)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> initial_is_protocol;<span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkbf"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid (l, Existing X j is_equiv) (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) j <span class="kr">with</span>
| in_left =&gt; (s, om)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X l
        (projT2 s (of_nat_lt lt_in), om) <span class="kr">in</span>
    <span class="kr">if</span> is_equiv
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc0"><span class="highlight"><span class="nb">destruct</span> Hv <span class="kr">as</span> [Hj Hv].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X j is_equiv))
  (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) j <span class="kr">with</span>
| in_left =&gt; (s, om)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X l
        (projT2 s (of_nat_lt lt_in), om) <span class="kr">in</span>
    <span class="kr">if</span> is_equiv
    <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
    <span class="kr">else</span>
     (equivocator_state_update X s
        (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc1"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S (projT1 s)) j); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X j is_equiv))
  (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt l0), om) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt l0) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc2"><span class="highlight"><span class="nb">replace</span> (of_nat_lt l0) <span class="kr">with</span> (of_nat_lt Hj) <span class="kr">in</span> * <span class="bp">by</span> <span class="nb">apply</span> of_nat_ext.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X j is_equiv))
  (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hj), om) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt Hj) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc3"><span class="highlight"><span class="nb">clear</span> l0.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X j is_equiv))
  (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hj), om) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt Hj) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc4"><span class="highlight"><span class="nb">destruct</span> (IHHbs (of_nat_lt Hj)) <span class="kr">as</span> [_omj Hsj].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X j is_equiv))
  (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hj), om) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt Hj) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc5"><span class="highlight"><span class="nb">specialize</span> (protocol_generated (pre_loaded_with_all_messages_vlsm X) l (projT2 s (of_nat_lt Hj)) _omj Hsj)
        <span class="kr">as</span> Hgen.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X j is_equiv))
  (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hj), om) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt Hj) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> (<span class="nv">_s</span> : state) (<span class="nv">om</span> : option message),
protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (_s, om) -&gt;
valid l (projT2 s (of_nat_lt Hj), om) -&gt;
protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (transition l (projT2 s (of_nat_lt Hj), om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc6"><span class="highlight">spec Hgen (proj1_sig (vs0 X)) om (pre_loaded_with_all_messages_message_protocol_prop X om) Hv.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X j is_equiv))
  (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hj), om) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt Hj) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (transition l (projT2 s (of_nat_lt Hj), om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc7"><span class="highlight"><span class="nb">change</span> (transition l (projT2 s (of_nat_lt Hj), om))
        <span class="kr">with</span> (vtransition X l (projT2 s (of_nat_lt Hj), om))
        <span class="kr">in</span> Hgen.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X (fst (l, Existing X j is_equiv))
  (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hj), om) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt Hj) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (vtransition X l
     (projT2 s (of_nat_lt Hj), om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc8"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X l (projT2 s (of_nat_lt Hj), om) <span class="kr">in</span>
 <span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s si&#39;, om&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt Hj) si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (vtransition X l
     (projT2 s (of_nat_lt Hj), om))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkc9"><span class="highlight"><span class="nb">destruct</span> (vtransition X l (projT2 s (of_nat_lt Hj), om)) <span class="kr">as</span> (sj&#39;, omj&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">omj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">if</span> is_equiv
 <span class="kr">then</span> (equivocator_state_extend X s sj&#39;, omj&#39;)
 <span class="kr">else</span>
  (equivocator_state_update X s 
     (of_nat_lt Hj) sj&#39;, omj&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, omj&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) (projT2 s&#39; i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkca"><span class="highlight"><span class="nb">destruct</span> is_equiv <span class="kr">as</span> [|]; <span class="nb">inversion</span> Ht; <span class="nb">subst</span>; <span class="nb">clear</span> Ht; <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 (equivocator_state_extend X s sj&#39;)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 (equivocator_state_extend X s sj&#39;) i)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Common-v-chkcb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="Common-v-chkcb"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="kr">if</span> eq_dec (of_nat_lt Hj) i <span class="kr">then</span> sj&#39; <span class="kr">else</span> projT2 s i)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkcc"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 (equivocator_state_extend X s sj&#39;)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 (equivocator_state_extend X s sj&#39;) i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkcd"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (ns, bs).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        ns bs))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        ns bs) (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">i</span> : t
        (S
           (projT1
              (existT
                 (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt;
                  t (S n) -&gt; vstate X) ns bs))),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        ns bs) i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t
  (S
     (projT1
        (equivocator_state_extend X
           (existT
              (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
              ns bs) sj&#39;)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) ns
        bs) (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2
     (equivocator_state_extend X
        (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
           ns bs) sj&#39;) i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkce"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S ns</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S ns),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S ns))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (bs (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat i <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S ns) <span class="kr">with</span>
   | in_left =&gt; sj&#39;
   | <span class="nb">right</span> x =&gt;
       bs
         (of_nat_lt
            (equivocator_state_extend_obligation_1 ns
               nj Hnj x))
   <span class="kr">end</span>)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkcf"><span class="highlight"><span class="nb">destruct</span> (to_nat i) <span class="kr">as</span> (ni, Hni).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S ns</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S ns),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S ns))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (bs (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S ns)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  <span class="kr">match</span> nat_eq_dec ni (S ns) <span class="kr">with</span>
  | in_left =&gt; sj&#39;
  | <span class="nb">right</span> x =&gt;
      bs
        (of_nat_lt
           (equivocator_state_extend_obligation_1 ns
              ni Hni x))
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd0"><span class="highlight"><span class="nb">destruct</span> (nat_eq_dec ni (S ns)); [|<span class="nb">apply</span> IHHbs].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S ns</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S ns),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S ns))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (bs (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S ns)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni = S ns</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) sj&#39;</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd1"><span class="highlight"><span class="kr">exists</span> <span class="nv">om&#39;</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ns</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S ns) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     ns bs)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S ns</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (bs (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S ns),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) 
  (bs i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S ns))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (bs (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S ns)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni = S ns</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd2"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (<span class="kr">if</span> eq_dec (of_nat_lt Hj) i <span class="kr">then</span> sj&#39; <span class="kr">else</span> projT2 s i)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd3"><span class="highlight"><span class="nb">destruct</span> (Fin.eq_dec (of_nat_lt Hj) i); [|<span class="nb">apply</span> IHHbs].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">of_nat_lt Hj = i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X) sj&#39;</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd4"><span class="highlight"><span class="kr">exists</span> <span class="nv">om&#39;</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{n : nat &amp; t (S n) -&gt; vstate X}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     equivocator_vlsm) s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid X l (projT2 s (of_nat_lt Hj), om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHbs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : t (S (projT1 s)),
protocol_state_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (projT1 s))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_omj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (projT2 s (of_nat_lt Hj), _omj)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgen</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">of_nat_lt Hj = i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop (pre_loaded_with_all_messages_vlsm X)
  (sj&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Next couple of lemmas characterize the projections of a <span class="inlinecode"><span class="id" title="var">equivocator_state</span></span>
after taking a transition in terms of the preceeeding state.

<div class="paragraph"> </div>

These are simpler version of the results concerning the projection of
states from the composition of equivocators over <span class="inlinecode"><span class="id" title="var">equivocation_descriptors</span></span>.

<div class="paragraph"> </div>

These results are used for characterizing the projection of the <span class="inlinecode"><span class="id" title="var">destination</span></span>
of a <span class="inlinecode"><span class="id" title="var">transition_item</span></span> in an equivocator trace in
<span class="inlinecode"><span class="id" title="var">equivocator_transition_item_project_proper_characterization</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd5"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">new_machine_label_equivocator_state_project_last</span>
  (<span class="nv">l</span> : vlabel equivocator_vlsm) <span class="nv">s</span> <span class="nv">oin</span> <span class="nv">s&#39;</span> <span class="nv">oout</span>
  (<span class="nv">Ht</span> : vtransition equivocator_vlsm l (s, oin) = (s&#39;, oout))
  <span class="nv">sn</span>
  (<span class="nv">Hnew</span>: snd l = NewMachine _ sn)
  <span class="nv">fi</span>
  : equivocator_state_descriptor_project X s&#39; (Existing _ (projT1 s&#39;) fi) =
    equivocator_state_descriptor_project X s (NewMachine _ sn).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnew</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd l = NewMachine X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X (projT1 s&#39;) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd6"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnew</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd l = NewMachine X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X (projT1 s&#39;) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd7"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (l, new).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">new</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm (l, new) (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnew</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd (l, new) = NewMachine X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X (projT1 s&#39;) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd8"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hnew.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">new</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm (l, new) (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnew</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">new = NewMachine X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X (projT1 s&#39;) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkd9"><span class="highlight"><span class="nb">subst</span> new.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm 
  (l, NewMachine X sn) 
  (s, oin) = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X (projT1 s&#39;) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkda"><span class="highlight"><span class="nb">unfold</span> vtransition <span class="kr">in</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l, NewMachine X sn) (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X (projT1 s&#39;) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkdb"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X (projT1 s&#39;) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkdc" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkdc"><span class="highlight"><span class="nb">inversion</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state_extend X s sn = s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">None = oout</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_extend X s sn)
  (Existing X
     (projT1 (equivocator_state_extend X s sn)) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkdd"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s sn, None) =
(equivocator_state_extend X s sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_extend X s sn)
  (Existing X
     (projT1 (equivocator_state_extend X s sn)) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkde"><span class="highlight"><span class="nb">clear</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_extend X s sn)
  (Existing X
     (projT1 (equivocator_state_extend X s sn)) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkdf"><span class="highlight"><span class="nb">remember</span> (equivocator_state_extend X s sn) <span class="kr">as</span> ext.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ext = equivocator_state_extend X s sn</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X ext
  (Existing X (projT1 ext) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke0"><span class="highlight"><span class="nb">destruct</span> ext <span class="kr">as</span> (n, bs).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
  bs = equivocator_state_extend X s sn</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs)
  (Existing X
     (projT1
        (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
           bs)) fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke1"><span class="highlight"><span class="nb">unfold</span> projT1.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
  bs = equivocator_state_extend X s sn</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs)
  (Existing X n fi) =
equivocator_state_descriptor_project X s
  (NewMachine X sn)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke2"><span class="highlight"><span class="nb">unfold</span> equivocator_state_descriptor_project.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
  bs = equivocator_state_extend X s sn</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  equivocator_state_project X
    (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n bs)
    n
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
         bs) F1
<span class="kr">end</span> = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke3"><span class="highlight"><span class="nb">unfold</span> equivocator_state_project.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
  bs = equivocator_state_extend X s sn</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S n) n <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bs (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
         bs) F1
<span class="kr">end</span> = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke4"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S n) n); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
  bs = equivocator_state_extend X s sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">n &lt; S n</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bs (of_nat_lt l0) = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke5"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (nsi, bsi).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
  bs =
equivocator_state_extend X
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) nsi
     bsi) sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">n &lt; S n</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bs (of_nat_lt l0) = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke6"><span class="highlight"><span class="nb">unfold</span> equivocator_state_extend <span class="kr">in</span> Heqext.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
  bs =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">n &lt; S n</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bs (of_nat_lt l0) = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke7"><span class="highlight"><span class="nb">inversion</span> Heqext.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S n) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) n
  bs =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">n &lt; S n</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">n = S nsi</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X) n bs =
existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bs (of_nat_lt l0) = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke8"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">S nsi &lt; S (S nsi)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S nsi)) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi) bs =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X)
  (S nsi) bs =
existT (<span class="kr">fun</span> <span class="nv">x</span> : nat =&gt; t (S x) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bs (of_nat_lt l0) = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chke9"><span class="highlight">simpl_existT.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">S nsi &lt; S (S nsi)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S (S nsi)) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi) bs =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bs =
(<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
 <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
 <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
 | in_left =&gt; sn
 | <span class="nb">right</span> x =&gt;
     bsi
       (of_nat_lt
          (equivocator_state_extend_obligation_1
             nsi nj Hnj x))
 <span class="kr">end</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bs (of_nat_lt l0) = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkea"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">S nsi &lt; S (S nsi)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat (of_nat_lt l0) <span class="kr">in</span>
 <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
 | in_left =&gt; sn
 | <span class="nb">right</span> x =&gt;
     bsi
       (of_nat_lt
          (equivocator_state_extend_obligation_1 nsi
             nj Hnj x))
 <span class="kr">end</span>) = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkeb"><span class="highlight"><span class="nb">rewrite</span> to_nat_of_nat.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">S nsi &lt; S (S nsi)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span> nat_eq_dec (S nsi) (S nsi) <span class="kr">with</span>
| in_left =&gt; sn
| <span class="nb">right</span> x =&gt;
    bsi
      (of_nat_lt
         (equivocator_state_extend_obligation_1 nsi
            (S nsi) l0 x))
<span class="kr">end</span> = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkec"><span class="highlight"><span class="nb">destruct</span> (nat_eq_dec (S nsi) (S nsi)); [|<span class="bp">congruence</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">S nsi &lt; S (S nsi)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqext</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>) =
existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
  (S nsi)
  (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi)) =&gt;
   <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
   <span class="kr">match</span> nat_eq_dec nj (S nsi) <span class="kr">with</span>
   | in_left =&gt; sn
   | <span class="nb">right</span> x =&gt;
       bsi
         (of_nat_lt
            (equivocator_state_extend_obligation_1
               nsi nj Hnj x))
   <span class="kr">end</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">S nsi = S nsi</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">sn = sn</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chked"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">new_machine_label_equivocator_state_project_not_last</span>
  (<span class="nv">l</span> : vlabel equivocator_vlsm) <span class="nv">s</span> <span class="nv">oin</span> <span class="nv">s&#39;</span> <span class="nv">oout</span>
  (<span class="nv">Ht</span> : vtransition equivocator_vlsm l (s, oin) = (s&#39;, oout))
  <span class="nv">sn</span>
  (<span class="nv">Hnew</span>: snd l = NewMachine _ sn)
  <span class="nv">ni</span> <span class="nv">fi</span>
  (<span class="nv">Hni</span> : ni &lt; projT1 s&#39;)
  <span class="nv">fi&#39;</span>
  : equivocator_state_descriptor_project X s&#39; (Existing _ ni fi) =
    equivocator_state_descriptor_project X s (Existing _ ni fi&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnew</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd l = NewMachine X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkee"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnew</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd l = NewMachine X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkef"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (li, new).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">new</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm (li, new) (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnew</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd (li, new) = NewMachine X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf0"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hnew.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">new</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm (li, new) (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnew</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">new = NewMachine X sn</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf1"><span class="highlight"><span class="nb">subst</span> new.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn) 
  (s, oin) = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf2"><span class="highlight"><span class="nb">inversion</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn) 
  (s, oin) = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state_extend X s sn = s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">None = oout</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_extend X s sn) (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf3"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn) 
  (s, oin) =
(equivocator_state_extend X s sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 (equivocator_state_extend X s sn)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_extend X s sn) (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf4"><span class="highlight"><span class="nb">unfold</span> equivocator_state_descriptor_project.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn) 
  (s, oin) =
(equivocator_state_extend X s sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 (equivocator_state_extend X s sn)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  equivocator_state_project X
    (equivocator_state_extend X s sn) ni
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; projT2 (equivocator_state_extend X s sn) F1
<span class="kr">end</span> =
<span class="kr">match</span> equivocator_state_project X s ni <span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; projT2 s F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf5"><span class="highlight"><span class="nb">unfold</span> equivocator_state_project.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn) 
  (s, oin) =
(equivocator_state_extend X s sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 (equivocator_state_extend X s sn)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  (<span class="kr">let</span> (<span class="nv">n</span>, s) := equivocator_state_extend X s sn <span class="kr">in</span>
   <span class="kr">match</span> le_lt_dec (S n) ni <span class="kr">with</span>
   | in_left =&gt; None
   | <span class="nb">right</span> lt_in =&gt; Some (s (of_nat_lt lt_in))
   <span class="kr">end</span>)
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; projT2 (equivocator_state_extend X s sn) F1
<span class="kr">end</span> =
<span class="kr">match</span>
  (<span class="kr">let</span> (<span class="nv">n</span>, s) := s <span class="kr">in</span>
   <span class="kr">match</span> le_lt_dec (S n) ni <span class="kr">with</span>
   | in_left =&gt; None
   | <span class="nb">right</span> lt_in =&gt; Some (s (of_nat_lt lt_in))
   <span class="kr">end</span>)
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; projT2 s F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf6"><span class="highlight"><span class="nb">unfold</span> equivocator_state_extend.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn) 
  (s, oin) =
(equivocator_state_extend X s sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 (equivocator_state_extend X s sn)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  (<span class="kr">let</span> (<span class="nv">n</span>, s) :=
     <span class="kr">let</span> (<span class="nv">n</span>, <span class="kr">is</span>) := s <span class="kr">in</span>
     existT (<span class="kr">fun</span> <span class="nv">n0</span> : nat =&gt; t (S n0) -&gt; vstate X)
       (S n)
       (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
        <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
        <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
        | in_left =&gt; sn
        | <span class="nb">right</span> x =&gt;
            <span class="kr">is</span>
              (of_nat_lt
                 (equivocator_state_extend_obligation_1
                    n nj Hnj x))
        <span class="kr">end</span>) <span class="kr">in</span>
   <span class="kr">match</span> le_lt_dec (S n) ni <span class="kr">with</span>
   | in_left =&gt; None
   | <span class="nb">right</span> lt_in =&gt; Some (s (of_nat_lt lt_in))
   <span class="kr">end</span>)
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (<span class="kr">let</span> (<span class="nv">n</span>, <span class="kr">is</span>) := s <span class="kr">in</span>
       existT (<span class="kr">fun</span> <span class="nv">n0</span> : nat =&gt; t (S n0) -&gt; vstate X)
         (S n)
         (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
          <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
          <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
          | in_left =&gt; sn
          | <span class="nb">right</span> x =&gt;
              <span class="kr">is</span>
                (of_nat_lt
                   (equivocator_state_extend_obligation_1
                      n nj Hnj x))
          <span class="kr">end</span>)) F1
<span class="kr">end</span> =
<span class="kr">match</span>
  (<span class="kr">let</span> (<span class="nv">n</span>, s) := s <span class="kr">in</span>
   <span class="kr">match</span> le_lt_dec (S n) ni <span class="kr">with</span>
   | in_left =&gt; None
   | <span class="nb">right</span> lt_in =&gt; Some (s (of_nat_lt lt_in))
   <span class="kr">end</span>)
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; projT2 s F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf7"><span class="highlight"><span class="nb">unfold</span> equivocator_state_extend <span class="kr">in</span> Hni.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn) 
  (s, oin) =
(equivocator_state_extend X s sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;
projT1
  (<span class="kr">let</span> (<span class="nv">n</span>, <span class="kr">is</span>) := s <span class="kr">in</span>
   existT (<span class="kr">fun</span> <span class="nv">n0</span> : nat =&gt; t (S n0) -&gt; vstate X)
     (S n)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
      | in_left =&gt; sn
      | <span class="nb">right</span> x =&gt;
          <span class="kr">is</span>
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  n nj Hnj x))
      <span class="kr">end</span>))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  (<span class="kr">let</span> (<span class="nv">n</span>, s) :=
     <span class="kr">let</span> (<span class="nv">n</span>, <span class="kr">is</span>) := s <span class="kr">in</span>
     existT (<span class="kr">fun</span> <span class="nv">n0</span> : nat =&gt; t (S n0) -&gt; vstate X)
       (S n)
       (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
        <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
        <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
        | in_left =&gt; sn
        | <span class="nb">right</span> x =&gt;
            <span class="kr">is</span>
              (of_nat_lt
                 (equivocator_state_extend_obligation_1
                    n nj Hnj x))
        <span class="kr">end</span>) <span class="kr">in</span>
   <span class="kr">match</span> le_lt_dec (S n) ni <span class="kr">with</span>
   | in_left =&gt; None
   | <span class="nb">right</span> lt_in =&gt; Some (s (of_nat_lt lt_in))
   <span class="kr">end</span>)
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (<span class="kr">let</span> (<span class="nv">n</span>, <span class="kr">is</span>) := s <span class="kr">in</span>
       existT (<span class="kr">fun</span> <span class="nv">n0</span> : nat =&gt; t (S n0) -&gt; vstate X)
         (S n)
         (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S n)) =&gt;
          <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
          <span class="kr">match</span> nat_eq_dec nj (S n) <span class="kr">with</span>
          | in_left =&gt; sn
          | <span class="nb">right</span> x =&gt;
              <span class="kr">is</span>
                (of_nat_lt
                   (equivocator_state_extend_obligation_1
                      n nj Hnj x))
          <span class="kr">end</span>)) F1
<span class="kr">end</span> =
<span class="kr">match</span>
  (<span class="kr">let</span> (<span class="nv">n</span>, s) := s <span class="kr">in</span>
   <span class="kr">match</span> le_lt_dec (S n) ni <span class="kr">with</span>
   | in_left =&gt; None
   | <span class="nb">right</span> lt_in =&gt; Some (s (of_nat_lt lt_in))
   <span class="kr">end</span>)
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; projT2 s F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf8"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (nsi&#39;, bsi&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     nsi&#39; bsi&#39;, oin) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      nsi&#39; bsi&#39;) sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;
projT1
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     (S nsi&#39;)
     (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi&#39;)) =&gt;
      <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
      <span class="kr">match</span> nat_eq_dec nj (S nsi&#39;) <span class="kr">with</span>
      | in_left =&gt; sn
      | <span class="nb">right</span> x =&gt;
          bsi&#39;
            (of_nat_lt
               (equivocator_state_extend_obligation_1
                  nsi&#39; nj Hnj x))
      <span class="kr">end</span>))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S (S nsi&#39;)) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt;
      Some
        (<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat (of_nat_lt lt_in) <span class="kr">in</span>
         <span class="kr">match</span> nat_eq_dec nj (S nsi&#39;) <span class="kr">with</span>
         | in_left =&gt; sn
         | <span class="nb">right</span> x =&gt;
             bsi&#39;
               (of_nat_lt
                  (equivocator_state_extend_obligation_1
                     nsi&#39; nj Hnj x))
         <span class="kr">end</span>)
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         (S nsi&#39;)
         (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi&#39;)) =&gt;
          <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
          <span class="kr">match</span> nat_eq_dec nj (S nsi&#39;) <span class="kr">with</span>
          | in_left =&gt; sn
          | <span class="nb">right</span> x =&gt;
              bsi&#39;
                (of_nat_lt
                   (equivocator_state_extend_obligation_1
                      nsi&#39; nj Hnj x))
          <span class="kr">end</span>)) F1
<span class="kr">end</span> =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         nsi&#39; bsi&#39;) F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkf9" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkf9"><span class="highlight"><span class="nb">unfold</span> projT1 <span class="kr">in</span> Hni.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     nsi&#39; bsi&#39;, oin) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      nsi&#39; bsi&#39;) sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S (S nsi&#39;)) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt;
      Some
        (<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat (of_nat_lt lt_in) <span class="kr">in</span>
         <span class="kr">match</span> nat_eq_dec nj (S nsi&#39;) <span class="kr">with</span>
         | in_left =&gt; sn
         | <span class="nb">right</span> x =&gt;
             bsi&#39;
               (of_nat_lt
                  (equivocator_state_extend_obligation_1
                     nsi&#39; nj Hnj x))
         <span class="kr">end</span>)
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         (S nsi&#39;)
         (<span class="kr">fun</span> <span class="nv">j</span> : t (S (S nsi&#39;)) =&gt;
          <span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat j <span class="kr">in</span>
          <span class="kr">match</span> nat_eq_dec nj (S nsi&#39;) <span class="kr">with</span>
          | in_left =&gt; sn
          | <span class="nb">right</span> x =&gt;
              bsi&#39;
                (of_nat_lt
                   (equivocator_state_extend_obligation_1
                      nsi&#39; nj Hnj x))
          <span class="kr">end</span>)) F1
<span class="kr">end</span> =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         nsi&#39; bsi&#39;) F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkfa"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S (S nsi&#39;)) ni); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     nsi&#39; bsi&#39;, oin) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      nsi&#39; bsi&#39;) sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat (of_nat_lt l) <span class="kr">in</span>
 <span class="kr">match</span> nat_eq_dec nj (S nsi&#39;) <span class="kr">with</span>
 | in_left =&gt; sn
 | <span class="nb">right</span> x =&gt;
     bsi&#39;
       (of_nat_lt
          (equivocator_state_extend_obligation_1 nsi&#39;
             nj Hnj x))
 <span class="kr">end</span>) =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         nsi&#39; bsi&#39;) F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkfb"><span class="highlight"><span class="nb">rewrite</span> to_nat_of_nat.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     nsi&#39; bsi&#39;, oin) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      nsi&#39; bsi&#39;) sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span> nat_eq_dec ni (S nsi&#39;) <span class="kr">with</span>
| in_left =&gt; sn
| <span class="nb">right</span> x =&gt;
    bsi&#39;
      (of_nat_lt
         (equivocator_state_extend_obligation_1 nsi&#39;
            ni l x))
<span class="kr">end</span> =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         nsi&#39; bsi&#39;) F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkfc"><span class="highlight"><span class="nb">destruct</span> (nat_eq_dec ni (S nsi&#39;)); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     nsi&#39; bsi&#39;, oin) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      nsi&#39; bsi&#39;) sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;&gt; S nsi&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bsi&#39;
  (of_nat_lt
     (equivocator_state_extend_obligation_1 nsi&#39; ni l
        n)) =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         nsi&#39; bsi&#39;) F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkfd"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S nsi&#39;) ni); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     nsi&#39; bsi&#39;, oin) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      nsi&#39; bsi&#39;) sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;&gt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bsi&#39;
  (of_nat_lt
     (equivocator_state_extend_obligation_1 nsi&#39; ni l
        n)) = bsi&#39; (of_nat_lt l0)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkfe"><span class="highlight"><span class="nb">f_equal</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sn</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, NewMachine X sn)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
     nsi&#39; bsi&#39;, oin) =
(equivocator_state_extend X
   (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
      nsi&#39; bsi&#39;) sn, None)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;&gt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">of_nat_lt
  (equivocator_state_extend_obligation_1 nsi&#39; ni l n) =
of_nat_lt l0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> of_nat_ext.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chkff"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">existing_true_label_equivocator_state_project_not_last</span>
  (<span class="nv">l</span> : vlabel equivocator_vlsm) <span class="nv">s</span> <span class="nv">oin</span> <span class="nv">s&#39;</span> <span class="nv">oout</span>
  (<span class="nv">Ht</span> : vtransition equivocator_vlsm l (s, oin) = (s&#39;, oout))
  <span class="nv">ieqvi</span>
  (<span class="nv">Hex_true</span>: snd l = Existing _ ieqvi true)
  (<span class="nv">Hieqvi</span> : ieqvi &lt; S (projT1 s))
  <span class="nv">ni</span> <span class="nv">fi</span>
  (<span class="nv">Hni</span> : ni &lt; projT1 s&#39;)
  <span class="nv">fi&#39;</span>
  : equivocator_state_descriptor_project X s&#39; (Existing _ ni fi)
  = equivocator_state_descriptor_project X s (Existing _ ni fi&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hex_true</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd l = Existing X ieqvi true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk100"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hex_true</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd l = Existing X ieqvi true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk101"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (li, ex_true).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ex_true</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm 
  (li, ex_true) (s, oin) = 
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hex_true</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd (li, ex_true) = Existing X ieqvi true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk102"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hex_true.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ex_true</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm 
  (li, ex_true) (s, oin) = 
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hex_true</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ex_true = Existing X ieqvi true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk103"><span class="highlight"><span class="nb">subst</span> ex_true.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, Existing X ieqvi true) 
  (s, oin) = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk104"><span class="highlight">unfold_vtransition Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) ieqvi <span class="kr">with</span>
| in_left =&gt; (s, oin)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X li
        (projT2 s (of_nat_lt lt_in), oin) <span class="kr">in</span>
    (equivocator_state_extend X s si&#39;, om&#39;)
<span class="kr">end</span> = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk105"><span class="highlight"><span class="nb">destruct</span> ( le_lt_dec (S (projT1 s)) ieqvi ); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X li (projT2 s (of_nat_lt l), oin) <span class="kr">in</span>
 (equivocator_state_extend X s si&#39;, om&#39;)) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk106"><span class="highlight"><span class="nb">destruct</span>
    (vtransition X li
    (projT2 s (of_nat_lt l), oin))
    <span class="kr">as</span> (si&#39;&#39;, om&#39;&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s si&#39;&#39;, om&#39;&#39;) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk107"><span class="highlight"><span class="nb">inversion</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s si&#39;&#39;, om&#39;&#39;) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state_extend X s si&#39;&#39; = s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">om&#39;&#39; = oout</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_extend X s si&#39;&#39;)
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk108"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_extend X s si&#39;&#39;, oout) =
(equivocator_state_extend X s si&#39;&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 (equivocator_state_extend X s si&#39;&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_extend X s si&#39;&#39;)
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk109"><span class="highlight"><span class="nb">clear</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 (equivocator_state_extend X s si&#39;&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_extend X s si&#39;&#39;)
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk10a"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; projT1 (equivocator_state_extend X s si&#39;&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  equivocator_state_project X
    (equivocator_state_extend X s si&#39;&#39;) ni
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2 (equivocator_state_extend X s si&#39;&#39;) F1
<span class="kr">end</span> =
<span class="kr">match</span> equivocator_state_project X s ni <span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; projT2 s F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk10b"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (nsi&#39;, bsi&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;
projT1
  (equivocator_state_extend X
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;) si&#39;&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  equivocator_state_project X
    (equivocator_state_extend X
       (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
          nsi&#39; bsi&#39;) si&#39;&#39;) ni
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (equivocator_state_extend X
         (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
            nsi&#39; bsi&#39;) si&#39;&#39;) F1
<span class="kr">end</span> =
<span class="kr">match</span>
  equivocator_state_project X
    (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) nsi&#39;
       bsi&#39;) ni
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         nsi&#39; bsi&#39;) F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk10c"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hni.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  equivocator_state_project X
    (equivocator_state_extend X
       (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
          nsi&#39; bsi&#39;) si&#39;&#39;) ni
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (equivocator_state_extend X
         (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
            nsi&#39; bsi&#39;) si&#39;&#39;) F1
<span class="kr">end</span> =
<span class="kr">match</span>
  equivocator_state_project X
    (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) nsi&#39;
       bsi&#39;) ni
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    projT2
      (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
         nsi&#39; bsi&#39;) F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk10d"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S (S nsi&#39;)) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt;
      Some
        (<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat (of_nat_lt lt_in) <span class="kr">in</span>
         <span class="kr">match</span> nat_eq_dec nj (S nsi&#39;) <span class="kr">with</span>
         | in_left =&gt; si&#39;&#39;
         | <span class="nb">right</span> x =&gt;
             bsi&#39;
               (of_nat_lt
                  (equivocator_state_extend_obligation_1
                     nsi&#39; nj Hnj x))
         <span class="kr">end</span>)
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; bsi&#39; F1
<span class="kr">end</span> =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; bsi&#39; F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk10e"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S (S nsi&#39;)) ni); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">nj</span>, Hnj) := to_nat (of_nat_lt l0) <span class="kr">in</span>
 <span class="kr">match</span> nat_eq_dec nj (S nsi&#39;) <span class="kr">with</span>
 | in_left =&gt; si&#39;&#39;
 | <span class="nb">right</span> x =&gt;
     bsi&#39;
       (of_nat_lt
          (equivocator_state_extend_obligation_1 nsi&#39;
             nj Hnj x))
 <span class="kr">end</span>) =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; bsi&#39; F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk10f"><span class="highlight"><span class="nb">rewrite</span> to_nat_of_nat.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span> nat_eq_dec ni (S nsi&#39;) <span class="kr">with</span>
| in_left =&gt; si&#39;&#39;
| <span class="nb">right</span> x =&gt;
    bsi&#39;
      (of_nat_lt
         (equivocator_state_extend_obligation_1 nsi&#39;
            ni l0 x))
<span class="kr">end</span> =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; bsi&#39; F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk110" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk110"><span class="highlight"><span class="nb">destruct</span> (nat_eq_dec ni (S nsi&#39;)); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;&gt; S nsi&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bsi&#39;
  (of_nat_lt
     (equivocator_state_extend_obligation_1 nsi&#39; ni l0
        n)) =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; bsi&#39; F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk111"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S nsi&#39;) ni); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;&gt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bsi&#39;
  (of_nat_lt
     (equivocator_state_extend_obligation_1 nsi&#39; ni l0
        n)) = bsi&#39; (of_nat_lt l1)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk112"><span class="highlight"><span class="nb">f_equal</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (S nsi&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;&gt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">of_nat_lt
  (equivocator_state_extend_obligation_1 nsi&#39; ni l0 n) =
of_nat_lt l1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> of_nat_ext.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk113"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">existing_false_label_equivocator_state_project_not_same</span>
  (<span class="nv">l</span> : vlabel equivocator_vlsm) <span class="nv">s</span> <span class="nv">oin</span> <span class="nv">s&#39;</span> <span class="nv">oout</span>
  (<span class="nv">Ht</span> : vtransition equivocator_vlsm l (s, oin) = (s&#39;, oout))
  <span class="nv">ieqvi</span>
  (<span class="nv">Hex_false</span>: snd l = Existing _ ieqvi false)
  (<span class="nv">Hieqvi</span> : ieqvi &lt; S (projT1 s))
  <span class="nv">ni</span> <span class="nv">fi</span>
  (<span class="nv">Hni</span> : ni &lt; S (projT1 s&#39;))
  (<span class="nv">Hnieqvi</span> : ieqvi &lt;&gt; ni)
  <span class="nv">fi&#39;</span>
  : equivocator_state_descriptor_project X s&#39; (Existing _ ni fi)
  = equivocator_state_descriptor_project X s (Existing _ ni fi&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hex_false</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd l = Existing X ieqvi false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk114"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel equivocator_vlsm</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm l (s, oin) =
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hex_false</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd l = Existing X ieqvi false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk115"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (li, ex_false).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ex_false</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm 
  (li, ex_false) (s, oin) = 
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hex_false</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">snd (li, ex_false) =
Existing X ieqvi false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk116"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hex_false.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ex_false</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">SerTop.MachineDescriptor X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm 
  (li, ex_false) (s, oin) = 
(s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hex_false</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ex_false = Existing X ieqvi false</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk117"><span class="highlight"><span class="nb">subst</span> ex_false.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition equivocator_vlsm
  (li, Existing X ieqvi false) 
  (s, oin) = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk118"><span class="highlight">unfold_vtransition Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> le_lt_dec (S (projT1 s)) ieqvi <span class="kr">with</span>
| in_left =&gt; (s, oin)
| <span class="nb">right</span> lt_in =&gt;
    <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
      vtransition X li
        (projT2 s (of_nat_lt lt_in), oin) <span class="kr">in</span>
    (equivocator_state_update X s
       (of_nat_lt lt_in) si&#39;, om&#39;)
<span class="kr">end</span> = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk119"><span class="highlight"><span class="nb">destruct</span> ( le_lt_dec (S (projT1 s)) ieqvi ); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition X li (projT2 s (of_nat_lt l), oin) <span class="kr">in</span>
 (equivocator_state_update X s (of_nat_lt l) si&#39;,
 om&#39;)) = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk11a"><span class="highlight"><span class="nb">destruct</span>
    (vtransition X li
    (projT2 s (of_nat_lt l), oin))
    <span class="kr">as</span> (si&#39;&#39;, om&#39;&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_update X s (of_nat_lt l) si&#39;&#39;,
om&#39;&#39;) = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X s&#39;
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk11b"><span class="highlight"><span class="nb">inversion</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_update X s (of_nat_lt l) si&#39;&#39;,
om&#39;&#39;) = (s&#39;, oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S (projT1 s&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">equivocator_state_update X s (of_nat_lt l) si&#39;&#39; =
s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">om&#39;&#39; = oout</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_update X s (of_nat_lt l) si&#39;&#39;)
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk11c"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(equivocator_state_update X s (of_nat_lt l) si&#39;&#39;,
oout) =
(equivocator_state_update X s (of_nat_lt l) si&#39;&#39;,
oout)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;
S
  (projT1
     (equivocator_state_update X s 
        (of_nat_lt l) si&#39;&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_update X s (of_nat_lt l) si&#39;&#39;)
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk11d"><span class="highlight"><span class="nb">clear</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S (projT1 s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;
S
  (projT1
     (equivocator_state_update X s 
        (of_nat_lt l) si&#39;&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_update X s (of_nat_lt l) si&#39;&#39;)
  (Existing X ni fi) =
equivocator_state_descriptor_project X s
  (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk11e"><span class="highlight"><span class="nb">destruct</span> s <span class="kr">as</span> (nsi&#39;, bsi&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;
S
  (projT1
     (equivocator_state_update X
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
           nsi&#39; bsi&#39;) (of_nat_lt l) si&#39;&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">equivocator_state_descriptor_project X
  (equivocator_state_update X
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) nsi&#39;
        bsi&#39;) (of_nat_lt l) si&#39;&#39;) (Existing X ni fi) =
equivocator_state_descriptor_project X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X) nsi&#39;
     bsi&#39;) (Existing X ni fi&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk11f"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;
S
  (projT1
     (existT
        (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
        nsi&#39; bsi&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt;
S
  (projT1
     (equivocator_state_update X
        (existT
           (<span class="kr">fun</span> <span class="nv">n</span> : nat =&gt; t (S n) -&gt; vstate X)
           nsi&#39; bsi&#39;) (of_nat_lt l) si&#39;&#39;))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt;
      Some
        (<span class="kr">if</span> eq_dec (of_nat_lt l) (of_nat_lt lt_in)
         <span class="kr">then</span> si&#39;&#39;
         <span class="kr">else</span> bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    <span class="kr">if</span> eq_dec (of_nat_lt l) F1 <span class="kr">then</span> si&#39;&#39; <span class="kr">else</span> bsi&#39; F1
<span class="kr">end</span> =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; bsi&#39; F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk120"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hieqvi, l, Hni.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt;
      Some
        (<span class="kr">if</span> eq_dec (of_nat_lt l) (of_nat_lt lt_in)
         <span class="kr">then</span> si&#39;&#39;
         <span class="kr">else</span> bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt;
    <span class="kr">if</span> eq_dec (of_nat_lt l) F1 <span class="kr">then</span> si&#39;&#39; <span class="kr">else</span> bsi&#39; F1
<span class="kr">end</span> =
<span class="kr">match</span>
  <span class="kr">match</span> le_lt_dec (S nsi&#39;) ni <span class="kr">with</span>
  | in_left =&gt; None
  | <span class="nb">right</span> lt_in =&gt; Some (bsi&#39; (of_nat_lt lt_in))
  <span class="kr">end</span>
<span class="kr">with</span>
| Some sj =&gt; sj
| None =&gt; bsi&#39; F1
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk121" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk121"><span class="highlight"><span class="nb">destruct</span> (le_lt_dec (S nsi&#39;) ni); [<span class="bp">lia</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">if</span> eq_dec (of_nat_lt l) (of_nat_lt l0)
 <span class="kr">then</span> si&#39;&#39;
 <span class="kr">else</span> bsi&#39; (of_nat_lt l0)) = bsi&#39; (of_nat_lt l0)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk122"><span class="highlight"><span class="nb">rewrite</span> eq_dec_if_false; [<span class="bp">reflexivity</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">of_nat_lt l &lt;&gt; of_nat_lt l0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk123"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">of_nat_lt l = of_nat_lt l0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk124"><span class="highlight"><span class="nb">elim</span> Hnieqvi.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">of_nat_lt l = of_nat_lt l0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">ieqvi = ni</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk125"><span class="highlight"><span class="nb">apply</span> (<span class="nb">f_equal</span> to_nat) <span class="kr">in</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">to_nat (of_nat_lt l) = to_nat (of_nat_lt l0)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">ieqvi = ni</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk126"><span class="highlight"><span class="kp">repeat</span> <span class="nb">rewrite</span> to_nat_of_nat <span class="kr">in</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">exist (<span class="kr">fun</span> <span class="nv">i</span> : nat =&gt; i &lt; S nsi&#39;) ieqvi l =
exist (<span class="kr">fun</span> <span class="nv">i</span> : nat =&gt; i &lt; S nsi&#39;) ni l0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">ieqvi = ni</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Common-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="Common-v-chk127"><span class="highlight"><span class="nb">inversion</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">equivocator_vlsm</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.equivocator_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">MachineDescriptor</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">SerTop.MachineDescriptor X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">nsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">bsi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">t (S nsi&#39;) -&gt; vstate X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oin, oout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si''</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">ni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">nat</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hni</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnieqvi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi &lt;&gt; ni</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">fi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ni &lt; S nsi&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">exist (<span class="kr">fun</span> <span class="nv">i</span> : nat =&gt; i &lt; S nsi&#39;) ieqvi l =
exist (<span class="kr">fun</span> <span class="nv">i</span> : nat =&gt; i &lt; S nsi&#39;) ni l0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">ieqvi = ni</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">ni = ni</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">equivocator_vlsm_protocol_state_projections</span>.</span></span></span></pre></article></body></html>
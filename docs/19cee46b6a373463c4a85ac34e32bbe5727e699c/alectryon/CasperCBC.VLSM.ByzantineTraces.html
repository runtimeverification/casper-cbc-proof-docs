<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>ByzantineTraces.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><link href="alectryon.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script><style type="text/css">pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.12.0+0.12.1. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">From</span> Coq <span class="kn">Require Import</span> FinFun List.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">From</span> CasperCBC <span class="kn">Require Import</span> Lib.Preamble VLSM.Common VLSM.Composition VLSM.Validating.</span></span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM Byzantine Traces</h1>
<div class="paragraph"> </div>

In this section, we introduce two definitions of Byzantine traces,
then show them equivalent (Lemma <span class="inlinecode"><span class="id" title="var">byzantine_alt_byzantine_iff</span></span>),
and equivalent with traces on the corresponding pre-loaded VLSM
(Lemmas <span class="inlinecode"><span class="id" title="var">byzantine_pre_loaded_with_all_messages</span></span> and <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_alt_eq</span></span>).

<div class="paragraph"> </div>

Note that, contrary to what one might think, the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty
does not only capture traces exhibiting byzantine behavior, but also all
<span class="inlinecode"><span class="id" title="var">protocol_trace</span></span>s (consequence of Lemma <span class="inlinecode"><span class="id" title="var">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></span>).
Therefore to avoid confusion we will call <i>proper byzantine traces</i>,
or <i>traces exhibiting byzantine behavior</i> the collection of traces with
the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty but without the <span class="inlinecode"><span class="id" title="var">protocol_trace_prop</span></span>erty.

<div class="paragraph"> </div>

In the remainder of this section, we fix a (regular) VLSM <tt>M</tt> with
signature <tt>S</tt> and of type <tt>T</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Definition and basic properties</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">ByzantineTraces</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span>
    {<span class="nv">message</span> : <span class="kt">Type</span>}
    (<span class="nv">M</span> : VLSM message)
    .</span></span></span></pre><div class="doc">
<div class="paragraph"> </div>

The first definition says that a trace has the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty
if it is the projection of
a trace which can be obtained by freely composing <tt>M</tt> with an arbitrary
VLSM <tt>M'</tt> (of a signatulre <tt>S'</tt> and type <tt>T'</tt> over the same set of <tt>message</tt>s).

<div class="paragraph"> </div>

Below, <span class="inlinecode"><span class="id" title="var">binary_free_composition_fst</span></span> represents the projection of
the free composition between <tt>M</tt> and <tt>M'</tt> to the component corresponding
to <tt>M</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">byzantine_trace_prop</span>
    (<span class="nv">tr</span> : vTrace M) :=
    <span class="kr">exists</span> (<span class="nv">M&#39;</span> : VLSM message)
        (<span class="nv">Proj</span> := binary_free_composition_fst M M&#39;),
        protocol_trace_prop Proj tr.</span></span></span></pre><div class="doc">
<div class="paragraph"> </div>

The first result says that all traces with the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty
for a VLSM <tt>M</tt> are traces of the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> associated to <tt>M</tt>:

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">byzantine_pre_loaded_with_all_messages</span>
    (<span class="nv">PreLoaded</span> := pre_loaded_with_all_messages_vlsm M)
    (<span class="nv">tr</span> : vTrace M)
    (<span class="nv">Hbyz</span> : byzantine_trace_prop tr)
    : protocol_trace_prop PreLoaded tr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbyz</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop PreLoaded tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbyz</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop PreLoaded tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2"><span class="highlight"><span class="nb">destruct</span> Hbyz <span class="kr">as</span> [M&#39; Htr].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">Proj</span> := binary_free_composition_fst M M&#39; <span class="kr">in</span>
protocol_trace_prop Proj tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop PreLoaded tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace_prop
  (binary_free_composition_fst M M&#39;) tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop PreLoaded tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span>
        (proj_pre_loaded_with_all_messages_incl
            (binary_IM M M&#39;)
            (free_constraint _)
            <span class="kp">first</span>
            tr
            Htr
        ).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">An alternative definition</h2>
<div class="paragraph"> </div>

The <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty relies on the composition
of the VLSM with a special VLSM which can produce all messages.

<div class="paragraph"> </div>

We will define its type (<span class="inlinecode"><span class="id" title="var">all_messages_type</span></span>),
signature (<span class="inlinecode"><span class="id" title="var">all_messages_sig</span></span>) and the VLSM itself (<span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span>) below.

<div class="paragraph"> </div>

The type of the <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> sets the <span class="inlinecode"><span class="id" title="var">label</span></span> set to consist of all
<pre>message</pre>
s and the <span class="inlinecode"><span class="id" title="var">state</span></span> to consist of a single state (here <span class="inlinecode"><span class="id" title="var">tt</span></span>).

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">all_messages_type</span> : VLSM_type message :=
    {| label := message
     ; state := unit
    |}.</span></span></span></pre><div class="doc">
<div class="paragraph"> </div>

The <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> signature further says that the (single) state is
initial and no messages are initial.
It takes as parameter a <tt>message</tt> to ensure that the sets of labels and
messages are both non-empty.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">all_messages_sig</span>
    (<span class="nv">inhm</span> : message)
    : VLSM_sign all_messages_type
    :=
    {| initial_state_prop := <span class="kr">fun</span> <span class="nv">s</span> =&gt; <span class="kt">True</span>
     ; initial_message_prop := <span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">False</span>
     ; s0 := exist (<span class="kr">fun</span> <span class="nv">s</span>: @state _ all_messages_type =&gt; <span class="kt">True</span>) tt I
     ; m0 := inhm
     ; l0 := inhm
    |}.</span></span></span></pre><div class="doc">
<div class="paragraph"> </div>

The <span class="inlinecode"><span class="id" title="var">transition</span></span> function of the <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> generates the
message given as a label:

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">all_messages_transition</span>
    (<span class="nv">l</span> : @label _ all_messages_type)
    (<span class="nv">som</span> : @state _ all_messages_type * option message)
    : @state _ all_messages_type * option message
    := (tt, Some l).</span></span></span></pre><div class="doc">
<div class="paragraph"> </div>

The <span class="inlinecode"><span class="id" title="var">valid</span></span>ity predicate specifies that all transitions are valid

<div class="paragraph"> </div>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">all_messages_valid</span>
    (<span class="nv">l</span> : @label _ all_messages_type)
    (<span class="nv">som</span> : @state _ all_messages_type * option message)
    : <span class="kt">Prop</span>
    := <span class="kt">True</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">emit_any_message_vlsm_machine</span>
    (<span class="nv">inhm</span> : message)
    : VLSM_class (all_messages_sig inhm)
    :=
    {| transition := all_messages_transition
     ; valid := all_messages_valid
    |}.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">emit_any_message_vlsm</span>
    (<span class="nv">inhm</span> : message)
    := mk_vlsm (emit_any_message_vlsm_machine inhm).</span></span></span></pre><div class="doc">
<div class="paragraph"> </div>

Using the VLSM defined above, we can define the <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty
of a trace <tt>tr</tt> for the VLSM <tt>M</tt> as being a trace in the projection
of the free composition between <tt>M</tt> and the <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span>,
to the component corresponding to <tt>M</tt>:

<div class="paragraph"> </div>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">alternate_byzantine_trace_prop</span>
    (<span class="nv">tr</span> : vTrace M)
    (<span class="nv">Proj</span> := binary_free_composition_fst M (emit_any_message_vlsm (vm0 M)))
    :=
    protocol_trace_prop Proj tr.</span></span></span></pre><div class="doc">
<div class="paragraph"> </div>

Since the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty was referring to the free composition
to any other VLSM, we can instantiate that definition to the
<span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> to derive that a trace with the
<span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty also has the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty.

<div class="paragraph"> </div>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">byzantine_alt_byzantine</span>
    (<span class="nv">tr</span> : vTrace M)
    (<span class="nv">Halt</span> : alternate_byzantine_trace_prop tr)
    : byzantine_trace_prop tr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Halt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">alternate_byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">byzantine_trace_prop tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Halt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">alternate_byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">byzantine_trace_prop tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6"><span class="highlight"><span class="kr">exists</span> (<span class="nv">emit_any_message_vlsm</span> (vm0 M)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Halt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">alternate_byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">let</span> <span class="nv">Proj</span> :=
  binary_free_composition_fst M
    (emit_any_message_vlsm (vm0 M)) <span class="kr">in</span>
protocol_trace_prop Proj tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">Equivalence between the two Byzantine trace definitions</h2>
<div class="paragraph"> </div>

In this section we prove that the <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty is
equivalent to the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty.

<div class="paragraph"> </div>

Since we have already proven that the <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty
implies the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty (Lemma <span class="inlinecode"><span class="id" title="var">byzantine_alt_byzantine</span></span>),
and since we know that the traces with the <span class="inlinecode"><span class="id" title="var">byzantine_trace_prop</span></span>erty
are <span class="inlinecode"><span class="id" title="var">protocol_trace</span></span>s for the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span>, to prove the
equivalence it is enough to close the circle by proving the
<span class="inlinecode"><span class="id" title="var">VLSM_incl</span></span>usion between the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> and the projection VLSM used
in the definition of the <span class="inlinecode"><span class="id" title="var">alternate_byzantine_trace_prop</span></span>erty.

<div class="paragraph"> </div>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">pre_loaded_with_all_messages_byzantine_alt</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span>
    (<span class="nv">PreLoaded</span> := pre_loaded_with_all_messages_vlsm M)
    (<span class="nv">Alt1</span> := binary_free_composition_fst M (emit_any_message_vlsm (vm0 M)))
    (<span class="nv">Alt</span> := binary_free_composition M (emit_any_message_vlsm (vm0 M)))
    .</span></span></span></pre><div class="doc">
Let <tt>PreLoaded</tt> denote the <span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> of <tt>M</tt>, <tt>Alt</tt> denote
the free composition of <tt>M</tt> with the <span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span>,
and <tt>Alt1</tt> denote the projection of <tt>Alt</tt> to the component of <tt>M</tt>.

<div class="paragraph"> </div>

First, note that using the results above it is easy to prove the inclusion
of <tt>Alt1</tt> into <tt>Preloaded</tt>
<div class="paragraph"> </div>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk7"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">alt_pre_loaded_with_all_messages_incl</span>
        : VLSM_incl Alt1 PreLoaded.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl Alt1 PreLoaded</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk8"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl Alt1 PreLoaded</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk9"><span class="highlight"><span class="nb">intros</span> t Hpt.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace_prop (mk_vlsm (machine Alt1)) t</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop (mk_vlsm (machine PreLoaded)) t</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chka"><span class="highlight"><span class="nb">apply</span> byzantine_pre_loaded_with_all_messages.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace_prop (mk_vlsm (machine Alt1)) t</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">byzantine_trace_prop t</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chkb"><span class="highlight"><span class="nb">apply</span> byzantine_alt_byzantine.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Trace</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpt</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_trace_prop (mk_vlsm (machine Alt1)) t</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">alternate_byzantine_trace_prop t</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
To prove the reverse inclusion (between <tt>PreLoaded</tt> and <tt>Alt1</tt>) we will use the
<span class="inlinecode"><span class="id" title="var">basic_VLSM_incl</span></span> meta-result about proving inclusions bewteen
VLSMs which states that
<ul class="doclist">
<li> if all <span class="inlinecode"><span class="id" title="var">valid</span></span> messages in the first are <span class="inlinecode"><span class="id" title="var">protocol_message</span></span>s in the second, and

</li>
<li> if all <span class="inlinecode"><span class="id" title="var">protocol_state</span></span>s in the first are also <span class="inlinecode"><span class="id" title="var">protocol_state</span></span>s in the second,

</li>
<li> and if all <span class="inlinecode"><span class="id" title="var">protocol_transition</span></span>s in the first are also <span class="inlinecode"><span class="id" title="var">protocol_transition</span></span>s

</li>
</ul>
in the second,
<ul class="doclist">
<li> then the first VLSM is included in the second.

</li>
</ul>
<div class="paragraph"> </div>

We will tackle each of these properties in the sequel.

<div class="paragraph"> </div>

First note that <i>all</i> messages are <span class="inlinecode"><span class="id" title="var">protocol_message</span></span>s for <tt>Alt</tt>, as
<span class="inlinecode"><span class="id" title="var">emit_any_message_vlsm</span></span> can generate any message without changing state.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chkc"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">alt_option_protocol_message</span>
        (<span class="nv">om</span> : option message)
        : option_protocol_message_prop Alt om.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Alt om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chkd"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Alt om</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chke"><span class="highlight"><span class="nb">destruct</span> om <span class="kr">as</span> [m|];[|<span class="nb">apply</span> option_protocol_message_None].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Alt (Some m)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chkf"><span class="highlight"><span class="nb">pose</span> (s :=proj1_sig (vs0 Alt): vstate Alt).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt) : vstate Alt</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate Alt</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Alt (Some m)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk10"><span class="highlight"><span class="nb">unfold</span> vstate <span class="kr">in</span> s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Alt (Some m)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk11"><span class="highlight"><span class="kr">exists</span> <span class="nv">s</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop Alt (s, Some m)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk12"><span class="highlight"><span class="nb">replace</span> (s, Some m) <span class="kr">with</span>
          (vtransition Alt (existT _ second m) (s, None)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop Alt
  (vtransition Alt
     (existT
        (<span class="kr">fun</span> <span class="nv">x</span> : binary_index =&gt;
         vlabel
           (binary_IM M
              (emit_any_message_vlsm (vm0 M)) x))
        second m) (s, None))</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk13" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk13"><hr></label><div class="goal-conclusion"><span class="highlight">vtransition Alt
  (existT
     (<span class="kr">fun</span> <span class="nv">x</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) x))
     second m) (s, None) = 
(s, Some m)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk14"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop Alt
  (vtransition Alt
     (existT
        (<span class="kr">fun</span> <span class="nv">x</span> : binary_index =&gt;
         vlabel
           (binary_IM M
              (emit_any_message_vlsm (vm0 M)) x))
        second m) (s, None))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk15"><span class="highlight"><span class="nb">assert</span> (protocol_prop Alt (s, None)) <span class="kr">as</span> Hs
            <span class="bp">by</span> (<span class="nb">apply</span> protocol_initial_state;<span class="nb">apply</span> proj2_sig).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Alt (s, None)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop Alt
  (vtransition Alt
     (existT
        (<span class="kr">fun</span> <span class="nv">x</span> : binary_index =&gt;
         vlabel
           (binary_IM M
              (emit_any_message_vlsm (vm0 M)) x))
        second m) (s, None))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk16"><span class="highlight"><span class="nb">apply</span> protocol_generated <span class="kr">with</span> None s;[<span class="bp">assumption</span>..|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Alt (s, None)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">valid
  (existT
     (<span class="kr">fun</span> <span class="nv">x</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) x))
     second m) (s, None)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">split</span>;<span class="bp">exact</span> I.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk17"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vtransition Alt
  (existT
     (<span class="kr">fun</span> <span class="nv">x</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) x))
     second m) (s, None) = (s, Some m)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk18"><span class="highlight"><span class="nb">unfold</span> vtransition; <span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">proj1_sig (vs0 Alt)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(state_update
   (binary_IM M (emit_any_message_vlsm (vm0 M))) s
   second tt, Some m) = (s, Some m)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">rewrite</span> state_update_id;<span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Using the above, it is straight-forward to show that:

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk19"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">alt_proj_option_protocol_message</span>
        (<span class="nv">m</span> : option message)
        : option_protocol_message_prop Alt1 m.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Alt1 m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1a"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Alt1 m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1b"><span class="highlight"><span class="nb">apply</span> protocol_message_projection.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop
  (composite_vlsm
     (binary_IM M (emit_any_message_vlsm (vm0 M)))
     (free_constraint
        (binary_IM M (emit_any_message_vlsm (vm0 M)))))
  m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> alt_option_protocol_message.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Next we define the "lifing" of a <span class="inlinecode"><span class="id" title="var">state</span></span> <tt>s</tt> from <tt>M</tt> to <tt>Alt</tt>,
by simply setting to <tt>s</tt> the  corresponding component of the initial
(composed) state <span class="inlinecode"><span class="id" title="var">s0</span></span> of <tt>Alt</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">lifted_alt_state</span>
        (<span class="nv">s</span> : vstate M)
        : vstate Alt
        := lift_to_composite_state
             (binary_IM M (emit_any_message_vlsm (vm0 M))) <span class="kp">first</span> s.</span></span></span></pre><div class="doc">
Lifting a <span class="inlinecode"><span class="id" title="var">protocol_state</span></span> of <tt>PreLoaded</tt> we obtain a <span class="inlinecode"><span class="id" title="var">protocol_state</span></span> of <tt>Alt</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1c"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">preloaded_alt_protocol_state</span>
        (<span class="nv">sj</span> : state)
        (<span class="nv">om</span> : option message)
        (<span class="nv">Hp</span> : protocol_prop PreLoaded (sj, om))
        : protocol_state_prop Alt (lifted_alt_state sj).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop PreLoaded (sj, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Alt (lifted_alt_state sj)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop PreLoaded (sj, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Alt (lifted_alt_state sj)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1e"><span class="highlight"><span class="nb">assert</span> (protocol_state_prop PreLoaded sj) <span class="kr">as</span> Hsj
        <span class="bp">by</span> (<span class="kr">exists</span> <span class="nv">om</span>;<span class="bp">assumption</span>);<span class="nb">clear</span> Hp.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop PreLoaded sj</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Alt (lifted_alt_state sj)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk1f"><span class="highlight"><span class="nb">induction</span> Hsj <span class="nb">using</span> protocol_state_prop_ind.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk20" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk20"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s&#39;)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk21"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk22"><span class="highlight"><span class="nb">apply</span> initial_is_protocol.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">initial_state_prop (lifted_alt_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">intros</span> [];[<span class="bp">exact</span> Hs|<span class="bp">exact</span> I].</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk23"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk24"><span class="highlight"><span class="kr">exists</span> <span class="nv">om&#39;</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop Alt (lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk25"><span class="highlight"><span class="nb">assert</span> (option_protocol_message_prop Alt om0) <span class="kr">as</span> Hom0
          <span class="bp">by</span> <span class="nb">apply</span> alt_option_protocol_message.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop Alt (lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk26"><span class="highlight"><span class="nb">cut</span> (protocol_transition Alt (existT _ <span class="kp">first</span> l) (lifted_alt_state s,om0) (lifted_alt_state s&#39;, om&#39;))
          ;[<span class="nb">apply</span> protocol_prop_transition_out|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Alt
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om0)
  (lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk27"><span class="highlight"><span class="nb">split</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_valid Alt
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om0)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk28" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk28"><hr></label><div class="goal-conclusion"><span class="highlight">transition
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om0) =
(lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk29"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_valid Alt
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om0)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2a"><span class="highlight"><span class="nb">split</span>;[<span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Alt om0 /\
valid
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om0)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2b"><span class="highlight"><span class="nb">split</span>;[<span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">valid
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om0)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2c"><span class="highlight"><span class="nb">split</span>;[|<span class="bp">exact</span> I].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_valid
  (binary_IM M (emit_any_message_vlsm (vm0 M)))
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om0)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2d"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vvalid M l (lifted_alt_state s <span class="kp">first</span>, om0)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> Ht.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2e"><span class="highlight">*</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">transition
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om0) =
(lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk2f"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition M l (lifted_alt_state s <span class="kp">first</span>, om0) <span class="kr">in</span>
 (state_update
    (binary_IM M (emit_any_message_vlsm (vm0 M)))
    (lifted_alt_state s) <span class="kp">first</span> si&#39;, om&#39;)) =
(lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk30"><span class="highlight"><span class="nb">replace</span> (lifted_alt_state s <span class="kp">first</span>) <span class="kr">with</span> s
            <span class="bp">by</span> (<span class="nb">unfold</span> lifted_alt_state,lift_to_composite_state
               ;<span class="nb">rewrite</span> state_update_eq;<span class="bp">reflexivity</span>).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition PreLoaded l 
  (s, om0) (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition M l (s, om0) <span class="kr">in</span>
 (state_update
    (binary_IM M (emit_any_message_vlsm (vm0 M)))
    (lifted_alt_state s) <span class="kp">first</span> si&#39;, om&#39;)) =
(lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk31"><span class="highlight"><span class="nb">apply</span> proj2 <span class="kr">in</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s, om0) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition M l (s, om0) <span class="kr">in</span>
 (state_update
    (binary_IM M (emit_any_message_vlsm (vm0 M)))
    (lifted_alt_state s) <span class="kp">first</span> si&#39;, om&#39;)) =
(lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk32"><span class="highlight"><span class="nb">change</span> (vtransition M l (s: vstate M,om0) = (s&#39;,om&#39;)) <span class="kr">in</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition M l (s : vstate M, om0) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := vtransition M l (s, om0) <span class="kr">in</span>
 (state_update
    (binary_IM M (emit_any_message_vlsm (vm0 M)))
    (lifted_alt_state s) <span class="kp">first</span> si&#39;, om&#39;)) =
(lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk33"><span class="highlight"><span class="nb">rewrite</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition M l (s : vstate M, om0) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(state_update
   (binary_IM M (emit_any_message_vlsm (vm0 M)))
   (lifted_alt_state s) <span class="kp">first</span> s&#39;, om&#39;) =
(lifted_alt_state s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk34"><span class="highlight"><span class="nb">f_equal</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om0, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition M l (s : vstate M, om0) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHsj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Alt (lifted_alt_state s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hom0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop Alt om0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update
  (binary_IM M (emit_any_message_vlsm (vm0 M)))
  (lifted_alt_state s) <span class="kp">first</span> s&#39; = lifted_alt_state s&#39;</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> state_update_twice.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Finally, we can use <span class="inlinecode"><span class="id" title="var">basic_VLSM_incl</span></span> together with the
results above to show that <tt>Preloaded</tt> is included in <tt>Alt1</tt>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk35"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_alt_incl</span>
        : VLSM_incl PreLoaded Alt1.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl PreLoaded Alt1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk36"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl PreLoaded Alt1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk37"><span class="highlight"><span class="nb">apply</span> (basic_VLSM_incl (machine PreLoaded) (machine Alt1))
        ; <span class="nb">intros</span>; <span class="kp">try</span> (<span class="bp">assumption</span> || <span class="bp">reflexivity</span>).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (mk_vlsm (machine PreLoaded)) l (s, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_message_prop
  (mk_vlsm (machine PreLoaded)) m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_message_prop (mk_vlsm (machine Alt1)) m</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk38" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid (mk_vlsm (machine PreLoaded)) l
  (s, om)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk38"><hr></label><div class="goal-conclusion"><span class="highlight">vvalid (mk_vlsm (machine Alt1)) l (s, om)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk39"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (mk_vlsm (machine PreLoaded)) l (s, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_message_prop
  (mk_vlsm (machine PreLoaded)) m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_message_prop (mk_vlsm (machine Alt1)) m</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> alt_proj_option_protocol_message.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3a"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid (mk_vlsm (machine PreLoaded)) l
  (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vvalid (mk_vlsm (machine Alt1)) l (s, om)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3b"><span class="highlight"><span class="kr">exists</span> (<span class="nv">lifted_alt_state</span> <span class="nv">s</span>).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid (mk_vlsm (machine PreLoaded)) l
  (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lifted_alt_state s <span class="kp">first</span> = s /\
protocol_valid
  (composite_vlsm
     (binary_IM M (emit_any_message_vlsm (vm0 M)))
     (free_constraint
        (binary_IM M (emit_any_message_vlsm (vm0 M)))))
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3c"><span class="highlight"><span class="nb">split</span>; <span class="kp">try</span> <span class="bp">reflexivity</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid (mk_vlsm (machine PreLoaded)) l
  (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_valid
  (composite_vlsm
     (binary_IM M (emit_any_message_vlsm (vm0 M)))
     (free_constraint
        (binary_IM M (emit_any_message_vlsm (vm0 M)))))
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3d"><span class="highlight"><span class="nb">destruct</span> H <span class="kr">as</span> [[_om Hps] [Hpm Hv]].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, _om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (mk_vlsm (machine PreLoaded))
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_valid
  (composite_vlsm
     (binary_IM M (emit_any_message_vlsm (vm0 M)))
     (free_constraint
        (binary_IM M (emit_any_message_vlsm (vm0 M)))))
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : binary_index =&gt;
      vlabel
        (binary_IM M (emit_any_message_vlsm (vm0 M)) n))
     <span class="kp">first</span> l) (lifted_alt_state s, om)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk3e"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="kp">try</span> <span class="bp">assumption</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, _om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (mk_vlsm (machine PreLoaded))
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (composite_vlsm
     (binary_IM M (emit_any_message_vlsm (vm0 M)))
     (free_constraint
        (binary_IM M (emit_any_message_vlsm (vm0 M)))))
  (lifted_alt_state s)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk3f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, _om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (mk_vlsm (machine PreLoaded))
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk3f"><hr></label><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop
  (composite_vlsm
     (binary_IM M (emit_any_message_vlsm (vm0 M)))
     (free_constraint
        (binary_IM M (emit_any_message_vlsm (vm0 M)))))
  om</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk40"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, _om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (mk_vlsm (machine PreLoaded))
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (composite_vlsm
     (binary_IM M (emit_any_message_vlsm (vm0 M)))
     (free_constraint
        (binary_IM M (emit_any_message_vlsm (vm0 M)))))
  (lifted_alt_state s)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk41"><span class="highlight"><span class="nb">apply</span> preloaded_alt_protocol_state <span class="kr">with</span> _om.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, _om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (mk_vlsm (machine PreLoaded))
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop PreLoaded (s, _om)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk42"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, _om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (mk_vlsm (machine PreLoaded))
  (s, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpm</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop
  (mk_vlsm (machine PreLoaded)) om</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s, om)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop
  (composite_vlsm
     (binary_IM M (emit_any_message_vlsm (vm0 M)))
     (free_constraint
        (binary_IM M (emit_any_message_vlsm (vm0 M)))))
  om</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> alt_option_protocol_message.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Hence, <tt>Preloaded</tt> and <tt>Alt1</tt> are actually trace-equal:

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk43"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_alt_eq</span>
        : VLSM_eq PreLoaded Alt1
        .</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_eq PreLoaded Alt1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk44"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_eq PreLoaded Alt1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk45"><span class="highlight"><span class="nb">split</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Trace</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop (mk_vlsm (machine PreLoaded)) t -&gt;
protocol_trace_prop (mk_vlsm (machine Alt1)) t</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk46" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Trace</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk46"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_trace_prop (mk_vlsm (machine Alt1)) t -&gt;
protocol_trace_prop (mk_vlsm (machine PreLoaded)) t</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk47"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Trace</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop (mk_vlsm (machine PreLoaded)) t -&gt;
protocol_trace_prop (mk_vlsm (machine Alt1)) t</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> pre_loaded_with_all_messages_alt_incl.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk48"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoaded</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm M</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt1</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition_fst M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Alt</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">binary_free_composition M
  (emit_any_message_vlsm (vm0 M))</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Trace</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop (mk_vlsm (machine Alt1)) t -&gt;
protocol_trace_prop (mk_vlsm (machine PreLoaded)) t</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> alt_pre_loaded_with_all_messages_incl.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">pre_loaded_with_all_messages_byzantine_alt</span>.</span></span></span></pre><div class="doc">
Finally, we can conclude that the two definitions for byzantine traces are
equivalent:

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk49"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">byzantine_alt_byzantine_iff</span>
    (<span class="nv">tr</span> : vTrace M)
    : alternate_byzantine_trace_prop tr &lt;-&gt; byzantine_trace_prop tr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">alternate_byzantine_trace_prop tr &lt;-&gt;
byzantine_trace_prop tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4a"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">alternate_byzantine_trace_prop tr &lt;-&gt;
byzantine_trace_prop tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4b"><span class="highlight"><span class="nb">split</span>; <span class="nb">intros</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">alternate_byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">byzantine_trace_prop tr</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk4c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop tr</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk4c"><hr></label><div class="goal-conclusion"><span class="highlight">alternate_byzantine_trace_prop tr</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4d"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">alternate_byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">byzantine_trace_prop tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> byzantine_alt_byzantine; <span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4e"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">alternate_byzantine_trace_prop tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk4f"><span class="highlight"><span class="nb">apply</span> pre_loaded_with_all_messages_alt_incl.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop
  (mk_vlsm
     (machine (pre_loaded_with_all_messages_vlsm M)))
  tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk50"><span class="highlight"><span class="nb">apply</span> byzantine_pre_loaded_with_all_messages.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">M</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace M</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">byzantine_trace_prop tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">ByzantineTraces</span>.</span></span></span></pre><div class="doc">
<a id="lab5"></a><h2 class="section">Composite-validating Byzantine traces are free</h2>
<div class="paragraph"> </div>

In this section we show that if all components of a composite VLSM <tt>X</tt> have
the <span class="inlinecode"><span class="id" title="var">validating_projection_prop</span></span>erty, then its byzantine traces
are included into the free composition of the components of <tt>X</tt>.

<div class="paragraph"> </div>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">composite_validating_byzantine_traces</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span> {<span class="nv">message</span> : <span class="kt">Type</span>}
            {<span class="nv">index</span> : <span class="kt">Type</span>}
            {<span class="nv">IndEqDec</span> : EqDecision index}
            (<span class="nv">IM</span> : index -&gt; VLSM message)
            {<span class="nv">i0</span> : Inhabited index}
            (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM  * option message -&gt; <span class="kt">Prop</span>)
            (<span class="nv">X</span> := composite_vlsm IM constraint)
            (<span class="nv">PreLoadedX</span> := pre_loaded_with_all_messages_vlsm X)
            (<span class="nv">FreeX</span> := free_composite_vlsm IM)
            (<span class="nv">Hvalidating</span>: <span class="kr">forall</span> <span class="nv">i</span> : index, validating_projection_prop IM constraint i)
            .</span></span></span></pre><div class="doc">
Let us fix an indexed set of VLSMs <tt>IM</tt> and their composition <tt>X</tt> using <tt>constraint</tt>.
Let <tt>FreeX</tt> be the free composition of <tt>IM</tt>, and let <tt>PreloadedX</tt> be the
<span class="inlinecode"><span class="id" title="var">pre_loaded_with_all_messages_vlsm</span></span> associated to <tt>X</tt>.

<div class="paragraph"> </div>

Since we know that <tt>PreloadedX</tt> contains precisely
the byzantine traces of <tt>X</tt>, to prove our main result we just need to show
that <tt>PreLoadedX</tt> is included in <tt>FreeX</tt>.

<div class="paragraph"> </div>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk51"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">pre_loaded_with_all_messages_composite_free_incl</span>
        : VLSM_incl PreLoadedX FreeX.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl PreLoadedX FreeX</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk52"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl PreLoadedX FreeX</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk53"><span class="highlight"><span class="nb">apply</span> VLSM_incl_finite_traces_characterization.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span>
  (<span class="nv">s</span> : vstate
         (mk_vlsm
            (pre_loaded_with_all_messages_vlsm_machine
               X)))
  (<span class="nv">tr</span> : list
          (vtransition_item
             (mk_vlsm
                (pre_loaded_with_all_messages_vlsm_machine
                   X)))),
finite_protocol_trace
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X)) s
  tr -&gt;
finite_protocol_trace
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk54"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))
  s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk55"><span class="highlight"><span class="nb">split</span>; [|<span class="nb">apply</span> H].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))
  s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk56"><span class="highlight"><span class="nb">destruct</span> H <span class="kr">as</span> [Htr Hs].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk57"><span class="highlight"><span class="nb">induction</span> tr <span class="nb">using</span> rev_ind.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s nil</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s nil</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk58" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s (tr ++ x :: nil)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr -&gt;
finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk58"><hr></label><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s (tr ++ x :: nil)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk59"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s nil</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s nil</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5a"><span class="highlight"><span class="nb">constructor</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s nil</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5b"><span class="highlight"><span class="nb">apply</span> initial_is_protocol.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s nil</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">initial_state_prop s</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5c"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s (tr ++ x :: nil)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr -&gt;
finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s (tr ++ x :: nil)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5d"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr /\
finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (finite_trace_last s tr) 
  (x :: nil)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr -&gt;
finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s (tr ++ x :: nil)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5e"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr Hx].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))
  (finite_trace_last s tr) 
  (x :: nil)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr -&gt;
finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s (tr ++ x :: nil)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk5f"><span class="highlight"><span class="nb">specialize</span> (IHtr Htr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))
  (finite_trace_last s tr) 
  (x :: nil)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM (free_constraint IM)))
  s (tr ++ x :: nil)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk60"><span class="highlight"><span class="nb">apply</span> (finite_protocol_trace_from_app_iff FreeX).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))
  (finite_trace_last s tr) 
  (x :: nil)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from FreeX s tr /\
finite_protocol_trace_from FreeX
  (finite_trace_last s tr) (x :: nil)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk61"><span class="highlight"><span class="nb">split</span>; [<span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))
  (finite_trace_last s tr) 
  (x :: nil)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from FreeX
  (finite_trace_last s tr) (x :: nil)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk62"><span class="highlight"><span class="nb">apply</span> (first_transition_valid FreeX).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))
  (finite_trace_last s tr) 
  (x :: nil)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition FreeX (l x)
  (finite_trace_last s tr, input x)
  (destination x, output x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk63"><span class="highlight"><span class="nb">apply</span> first_transition_valid <span class="kr">in</span> Hx.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))
  (l x) (finite_trace_last s tr, input x)
  (destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition FreeX (l x)
  (finite_trace_last s tr, input x)
  (destination x, output x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk64"><span class="highlight"><span class="nb">destruct</span> Hx <span class="kr">as</span> [Hvx Htx].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (l x)
  (finite_trace_last s tr, input x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l x)
  (finite_trace_last s tr, input x) =
(destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition FreeX (l x)
  (finite_trace_last s tr, input x)
  (destination x, output x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk65"><span class="highlight"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (l x)
  (finite_trace_last s tr, input x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l x)
  (finite_trace_last s tr, input x) =
(destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_valid FreeX (l x)
  (finite_trace_last s tr, input x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk66"><span class="highlight"><span class="nb">apply</span> finite_ptrace_last_pstate <span class="kr">in</span> IHtr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (l x)
  (finite_trace_last s tr, input x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition (l x)
  (finite_trace_last s tr, input x) =
(destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM)))
  (finite_trace_last s tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_valid FreeX (l x)
  (finite_trace_last s tr, input x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk67"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (finite_trace_last s tr) /\
option_protocol_message_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (input x) /\
vvalid X (l x) (finite_trace_last s tr, input x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X (l x)
  (finite_trace_last s tr, input x) =
(destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM)))
  (finite_trace_last s tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop FreeX (finite_trace_last s tr) /\
option_protocol_message_prop FreeX (input x) /\
constrained_composite_valid IM (free_constraint IM)
  (l x) (finite_trace_last s tr, input x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk68"><span class="highlight"><span class="kr">match</span> <span class="kp">type of</span> IHtr <span class="kr">with</span>
          | protocol_state_prop _ <span class="nl">?s</span> =&gt; <span class="nb">remember</span> s <span class="kr">as</span> lst
          <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst /\
option_protocol_message_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (input x) /\
vvalid X (l x) (lst, input x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X (l x) (lst, input x) =
(destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop FreeX lst /\
option_protocol_message_prop FreeX (input x) /\
constrained_composite_valid IM (free_constraint IM)
  (l x) (lst, input x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk69"><span class="highlight"><span class="nb">split</span>; [<span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst /\
option_protocol_message_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (input x) /\
vvalid X (l x) (lst, input x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X (l x) (lst, input x) =
(destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX (input x) /\
constrained_composite_valid IM (free_constraint IM)
  (l x) (lst, input x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6a"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; [|<span class="nb">apply</span> Hvx].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst /\
option_protocol_message_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) (input x) /\
vvalid X (l x) (lst, input x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X (l x) (lst, input x) =
(destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX (input x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6b"><span class="highlight"><span class="nb">destruct</span> Hvx <span class="kr">as</span> [Hlst [_ [Hv _]]].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM (l x) (lst, input x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X (l x) (lst, input x) =
(destination x, output x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX (input x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6c"><span class="highlight"><span class="nb">destruct</span> x.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM
  (Common.l
     {|
     l := l;
     input := input;
     destination := destination;
     output := output |})
  (lst,
  Common.input
    {|
    l := l;
    input := input;
    destination := destination;
    output := output |})</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (Common.l
     {|
     l := l;
     input := input;
     destination := destination;
     output := output |})
  (lst,
  Common.input
    {|
    l := l;
    input := input;
    destination := destination;
    output := output |}) =
(Common.destination
   {|
   l := l;
   input := input;
   destination := destination;
   output := output |},
Common.output
  {|
  l := l;
  input := input;
  destination := destination;
  output := output |})</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX
  (Common.input
     {|
     l := l;
     input := input;
     destination := destination;
     output := output |})</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6d"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM
  (l
     {|
     l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
            i li;
     input := input;
     destination := destination;
     output := output |})
  (lst,
  Common.input
    {|
    l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
           i li;
    input := input;
    destination := destination;
    output := output |})</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (l
     {|
     l := existT
            (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
            li;
     input := input;
     destination := destination;
     output := output |})
  (lst,
  Common.input
    {|
    l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
           i li;
    input := input;
    destination := destination;
    output := output |}) =
(Common.destination
   {|
   l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
          i li;
   input := input;
   destination := destination;
   output := output |},
Common.output
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
         li;
  input := input;
  destination := destination;
  output := output |})</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX
  (Common.input
     {|
     l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li;
     input := input;
     destination := destination;
     output := output |})</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6e"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX input</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk6f"><span class="highlight"><span class="nb">specialize</span> (protocol_state_project_preloaded_to_preloaded _ IM constraint lst i Hlst)
            <span class="kr">as</span> Hlsti.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX input</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk70"><span class="highlight"><span class="nb">assert</span> (Hpv : protocol_valid (pre_loaded_with_all_messages_vlsm (IM i)) li (lst i, input)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_valid
  (pre_loaded_with_all_messages_vlsm (IM i)) li
  (lst i, input)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="ByzantineTraces-v-chk71" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid
  (pre_loaded_with_all_messages_vlsm (IM i)) li
  (lst i, input)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="ByzantineTraces-v-chk71"><hr></label><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX input</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk72"><span class="highlight">{</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_valid
  (pre_loaded_with_all_messages_vlsm (IM i)) li
  (lst i, input)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk73"><span class="highlight"><span class="nb">split</span>; [<span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop
  (pre_loaded_with_all_messages_vlsm (IM i)) input /\
valid li (lst i, input)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk74"><span class="highlight"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop
  (pre_loaded_with_all_messages_vlsm (IM i)) input</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk75"><span class="highlight"><span class="nb">eexists</span> _.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (<span class="nl">?Goal0</span>, input)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> (pre_loaded_with_all_messages_message_protocol_prop (IM i)).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk76"><span class="highlight">}</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid
  (pre_loaded_with_all_messages_vlsm (IM i)) li
  (lst i, input)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX input</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk77"><span class="highlight"><span class="nb">apply</span> Hvalidating <span class="kr">in</span> Hpv.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine X))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list
  (vtransition_item
     (mk_vlsm
        (pre_loaded_with_all_messages_vlsm_machine
           X)))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        X)) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (lst i, input)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li)
  (lst, input) = (destination, output)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vinitial_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (mk_vlsm
     (composite_vlsm_machine IM
        (free_constraint IM))) lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlsti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm (IM i))
  (lst i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (composite_vlsm_constrained_projection IM
     constraint i) li (lst i, input)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX input</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk78"><span class="highlight"><span class="nb">clear</span> -Hpv.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (composite_vlsm_constrained_projection IM
     constraint i) li (lst i, input)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX input</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk79"><span class="highlight"><span class="nb">destruct</span> Hpv <span class="kr">as</span> [_ [_ [_ [Hinput _]]]].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option_protocol_message_prop
  (composite_vlsm IM constraint) input</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX input</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk7a"><span class="highlight"><span class="nb">destruct</span> Hinput <span class="kr">as</span> [s Hinput].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (composite_vlsm IM constraint)
  (s, input)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop FreeX input</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk7b"><span class="highlight"><span class="kr">exists</span> <span class="nv">s</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hinput</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop (composite_vlsm IM constraint)
  (s, input)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop FreeX (s, input)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk7c"><span class="highlight"><span class="nb">revert</span> Hinput.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_prop (composite_vlsm IM constraint)
  (s, input) -&gt; protocol_prop FreeX (s, input)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk7d"><span class="highlight"><span class="nb">apply</span> (constraint_subsumption_protocol_prop IM constraint).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">constraint_subsumption IM constraint
  (free_constraint IM)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk7e"><span class="highlight"><span class="nb">intro</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">som</span> : composite_state IM * option message,
constraint l som -&gt; free_constraint IM l som</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk7f"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">som</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(composite_state IM * option message)%type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l som</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">free_constraint IM l som</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> I.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Finally,  we can conclude that <span class="inlinecode"><span class="id" title="var">composite_validating_byzantine_traces_are_free</span></span>:

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-wsp"><span class="highlight">    </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk80"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">composite_validating_byzantine_traces_are_free</span>
        (<span class="nv">tr</span> : vTrace X)
        (<span class="nv">Hbyz</span> : byzantine_trace_prop X tr)
        : protocol_trace_prop FreeX tr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbyz</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop X tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop FreeX tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk81"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbyz</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop X tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop FreeX tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk82"><span class="highlight"><span class="nb">apply</span> pre_loaded_with_all_messages_composite_free_incl.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbyz</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop X tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop (mk_vlsm (machine PreLoadedX)) tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk83"><span class="highlight"><span class="nb">apply</span> alt_pre_loaded_with_all_messages_incl.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbyz</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop X tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_trace_prop
  (mk_vlsm
     (machine
        (binary_free_composition_fst X
           (emit_any_message_vlsm (vm0 X))))) tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="ByzantineTraces-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="ByzantineTraces-v-chk84"><span class="highlight"><span class="nb">apply</span> byzantine_alt_byzantine_iff.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Inhabited index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">PreLoadedX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm X</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">FreeX</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalidating</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
validating_projection_prop IM constraint
  i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vTrace X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hbyz</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">byzantine_trace_prop X tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">byzantine_trace_prop X tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">composite_validating_byzantine_traces</span>.</span></span></span></pre></article></body></html>
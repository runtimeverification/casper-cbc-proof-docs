
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module CasperCBC.CBC.FullNodeSimpleVLSM</title>
<meta name="description" content="Documentation of Coq module CasperCBC.CBC.FullNodeSimpleVLSM" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module CasperCBC.CBC.FullNodeSimpleVLSM</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html">Bool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.Streams.html">Streams</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Epsilon.html">Logic.Epsilon</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Reals.html">Reals</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html">ProofIrrelevance</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.Fin.html">Fin</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FinFun.html">FinFun</a></span>.<br/>
<span class="kwd">Import</span> <span class="id">ListNotations</span>.<br/>
<br/>
<span class="id">From</span> <span class="id">CasperCBC</span><br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Lib.Preamble</span> <span class="id">Lib.ListExtras</span> <span class="id">Lib.ListSetExtras</span> <span class="id">Lib.RealsExtras</span> <span class="id">Lib.Measurable</span> <span class="id">VLSM.Equivocation</span> <span class="id">VLSM.Decisions</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html">CBC.Definitions</a></span> <span class="id"><a href="CasperCBC.CBC.Common.html">CBC.Common</a></span> <span class="id">VLSM.Common</span> <span class="id">VLSM.Composition</span> <span class="id">VLSM.Decisions</span> <span class="id"><a href="CasperCBC.CBC.FullNode.html">CBC.FullNode</a></span>.<br/>
<br/>
<h1> CBC Full Node Model as a Single VLSM Instance </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Full">Full</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span> (<span class="id"><a name="Full.C">C</a></span> <span class="id"><a name="Full.V">V</a></span> : <span class="kwd">Type</span>) (<span class="id"><a name="Full.about_C">about_C</a></span> : <span class="id">StrictlyComparable</span> <span class="id">C</span>) (<span class="id"><a name="Full.about_V">about_V</a></span> : <span class="id">StrictlyComparable</span> <span class="id">V</span>) (<span class="id"><a name="Full.Hm">Hm</a></span> : <span class="id">Measurable</span> <span class="id">V</span>) (<span class="id"><a name="Full.Hrt">Hrt</a></span> : <span class="id">ReachableThreshold</span> <span class="id">V</span>) (<span class="id"><a name="Full.He">He</a></span> : <span class="id">Estimator</span> (@<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state">sorted_state</a></span> <span class="id">C</span> <span class="id">V</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>) <span class="id">C</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="reach">reach</a></span> (<span class="id">s1</span> <span class="id">s2</span> : @<span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#get_messages">get_messages</a></span> <span class="id">s1</span>) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#get_messages">get_messages</a></span> <span class="id">s2</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="message">message</a></span> : <span class="kwd">Type</span> := @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_message">sorted_message</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="initial_state_prop">initial_state_prop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s</span> : @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state">sorted_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span> = @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state0">sorted_state0</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="state0">state0</a></span> : {<span class="id">s</span> | <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_state_prop">initial_state_prop</a></span> <span class="id">s</span>} :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> (@<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state0">sorted_state0</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="message0">message0</a></span> : <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">c</span> := @<span class="id">Lib.Preamble.inhabited</span> <span class="id">_</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.about_C">about_C</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">v</span> := @<span class="id">Lib.Preamble.inhabited</span> <span class="id">_</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.about_V">about_V</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">c</span>,<span class="id">v</span>,@<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state0">sorted_state0</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="initial_message_prop">initial_message_prop</a></span> (<span class="id">m</span> : <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span>) : <span class="kwd">Prop</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="message_inhabited">message_inhabited</a></span> : {<span class="id">m</span> : @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_message">sorted_message</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof191')">Proof.</div>
<div class="proofscript" id="proof191">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (@<span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.about_C">about_C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.about_V">about_V</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">inhabited_copy</span> := <span class="id">inhabited</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">inhabited_copy</span> <span class="kwd">as</span> [(<span class="id">c</span>, <span class="id">v</span>) <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">c</span>, <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#Empty">Empty</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#LSorted_Empty">LSorted_Empty</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vtransition">vtransition</a></span> (<span class="id">l</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> * <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>)) (<span class="id">sm</span> : @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state">sorted_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span>) :  @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state">sorted_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>  * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">s</span>, <span class="id">om</span>) := <span class="id">sm</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="kwd">match</span> <span class="id">om</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; (<span class="id">s</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">msg</span> =&gt; (<span class="id"><a href="CasperCBC.CBC.FullNode.html#add_message_sorted">add_message_sorted</a></span> <span class="id">msg</span> <span class="id">s</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">m</span>' := (<span class="id">c</span>,<span class="id">v</span>,<span class="id">s</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">s</span>' := <span class="id"><a href="CasperCBC.CBC.FullNode.html#add_message_sorted">add_message_sorted</a></span> (<span class="id">c</span>,<span class="id">v</span>,<span class="id">s</span>) <span class="id">s</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">om</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; (<span class="id">s</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">msg</span> =&gt; (<span class="id"><a href="CasperCBC.CBC.FullNode.html#add_message_sorted">add_message_sorted</a></span> <span class="id">msg</span> <span class="id">s</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">valid_client</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s</span> : @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state">sorted_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">om</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">om</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">_</span>, <span class="id">j</span>) := <span class="id">m</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#reach">reach</a></span> <span class="id">j</span> <span class="id">s</span> /\ <span class="id"><a href="CasperCBC.CBC.Definitions.html#not_heavy">not_heavy</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNode.html#add_message_sorted">add_message_sorted</a></span> <span class="id">m</span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="valid_client">valid_client</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">l</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> * <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>)) (<span class="id">sm</span> : @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state">sorted_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">s</span>, <span class="id">om</span>) := <span class="id">sm</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id">valid_client</span>' <span class="id">s</span> <span class="id">om</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">v</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">s</span>' := <span class="id"><a href="CasperCBC.CBC.FullNode.html#add_message_sorted">add_message_sorted</a></span> (<span class="id">c</span>, <span class="id">v</span>, <span class="id">s</span>) <span class="id">s</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id">estimator</span> (@<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state">sorted_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span>) <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.He">He</a></span>) <span class="id">s</span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">valid_client</span>' <span class="id">s</span>' <span class="id">om</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="reachb">reachb</a></span> : @<span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> -&gt; <span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb">forallb</a></span> (<span class="kwd">fun</span> <span class="id">s</span> =&gt; <span class="id">is_member</span> <span class="id">s</span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#get_messages">get_messages</a></span> <span class="id">s2</span>)) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#get_messages">get_messages</a></span> <span class="id">s1</span>).<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="VLSM_type_full_client1">VLSM_type_full_client1</a></span> : <span class="id">VLSM_type</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">state</span> := @<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state">sorted_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">label</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> * <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="LSM_full_client1">LSM_full_client1</a></span> : <span class="id">VLSM_sign</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_type_full_client1">VLSM_type_full_client1</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">initial_state_prop</span> := <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_state_prop">initial_state_prop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">initial_message_prop</span> := <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_message_prop">initial_message_prop</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">s0</span> := <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#state0">state0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">m0</span> := <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message0">message0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">l0</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="VLSM_machine_full_client1">VLSM_machine_full_client1</a></span> : <span class="id">VLSM_class</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#LSM_full_client1">LSM_full_client1</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id">transition</span> := <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#vtransition">vtransition</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">valid</span> := <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#valid_client">valid_client</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="VLSM_full_client1">VLSM_full_client1</a></span> : <span class="id">VLSM</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span> := <span class="id">mk_vlsm</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_machine_full_client1">VLSM_machine_full_client1</a></span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="sorted_state_union">sorted_state_union</a></span> : <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span> -&gt; <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span> -&gt; <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state_union">sorted_state_union</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="estimator_proj1">estimator_proj1</a></span> (<span class="id">s</span> : @<span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>) : <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> -&gt; <span class="kwd">Prop</span> := (@<span class="id">estimator</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.He">He</a></span>) (<span class="id"><a href="CasperCBC.CBC.FullNode.html#make_sorted_state">make_sorted_state</a></span> <span class="id">s</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="estimator_proj1_total">estimator_proj1_total</a></span> : <span class="kwd">forall</span> <span class="id">s</span> : @<span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>, <span class="id">exists</span> <span class="id">c</span> : <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span>, <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#estimator_proj1">estimator_proj1</a></span> <span class="id">s</span> <span class="id">c</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof192')">Proof.</div>
<div class="proofscript" id="proof192">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (@<span class="id">estimator_total</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.He">He</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNode.html#make_sorted_state">make_sorted_state</a></span> <span class="id">s</span>)).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="He_proj1">He_proj1</a></span> : <span class="id">Estimator</span> (@<span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>) <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|  <span class="id">estimator</span> := <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#estimator_proj1">estimator_proj1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;;   <span class="id">estimator_total</span> := <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#estimator_proj1_total">estimator_proj1_total</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="PS_proj1">PS_proj1</a></span> : @<span class="id"><a href="CasperCBC.CBC.Definitions.html#ProtocolState">ProtocolState</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.Hm">Hm</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.Hrt">Hrt</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#He_proj1">He_proj1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof193')">Proof.</div>
<div class="proofscript" id="proof193">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="protocol_state_equiv_left">protocol_state_equiv_left</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span> : <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state">CBC.Definitions.protocol_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.Hm">Hm</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.Hrt">Hrt</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#He_proj1">He_proj1</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#PS_proj1">PS_proj1</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">protocol_state_prop</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) <span class="id">s</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof194')">Proof.</div>
<div class="proofscript" id="proof194">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">s</span> <span class="id">Hs</span>]; <span class="tactic">simpl</span>; <span class="tactic">intro</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Heq</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> (<span class="kwd">fun</span> <span class="id">s</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> =&gt; <span class="id"><a href="CasperCBC.CBC.Definitions.html#locally_sorted">locally_sorted</a></span> <span class="id">s</span>) <span class="id"><a href="CasperCBC.CBC.Definitions.html#Empty">Empty</a></span> <span class="id">Hs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id">exist_eq</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Heq</span>; <span class="tactic">clear</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">protocol_initial_state</span>;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state_sorted">protocol_state_sorted</a></span> <span class="id">j</span> <span class="id">H0</span>); <span class="tactic">intros</span> <span class="id">Hsj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state_sorted">protocol_state_sorted</a></span> <span class="id">s</span> <span class="id">H</span>); <span class="tactic">intros</span> <span class="id">Hss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">v</span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">j</span> <span class="id">Hsj</span>))) <span class="kwd">as</span> <span class="id">om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">s</span> <span class="id">Hss</span>) <span class="kwd">as</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hv</span> : <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#valid_client">valid_client</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id">ss</span>,<span class="id">om</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">subst</span>; <span class="tactic">simpl</span>; <span class="tactic">split</span>; <span class="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Ht</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#pair">pair</a></span> (@<span class="id">state</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span> (@<span class="id">type</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> (@<span class="id"><a href="CasperCBC.CBC.Definitions.html#state">Definitions.state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">s0</span> : @<span class="id"><a href="CasperCBC.CBC.Definitions.html#state">Definitions.state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="CasperCBC.CBC.Definitions.html#locally_sorted">locally_sorted</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> (@<span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.about_C">about_C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.about_V">about_V</a></span>) <span class="id">s0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="CasperCBC.CBC.Definitions.html#add_in_sorted_fn">add_in_sorted_fn</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> (@<span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.about_C">about_C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.about_V">about_V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#pair">pair</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#prod">prod</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>) (@<span class="id"><a href="CasperCBC.CBC.Definitions.html#state">Definitions.state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>) (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#pair">pair</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id">c</span> <span class="id">v</span>) <span class="id">j</span>) <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hs</span>) (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#vtransition">vtransition</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id">ss</span>, <span class="id">om</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">subst</span>; <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#injective_projections">injective_projections</a></span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>; <span class="tactic">apply</span> <span class="id">exist_eq</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHprotocol_state1</span> <span class="id">Hss</span>). <span class="tactic">destruct</span> <span class="id">IHprotocol_state1</span> <span class="kwd">as</span> [<span class="id">_om</span> <span class="id">Pss</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHprotocol_state2</span> <span class="id">Hsj</span>). <span class="tactic">destruct</span> <span class="id">IHprotocol_state2</span> <span class="kwd">as</span> [<span class="id">_omj</span> <span class="id">Psj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> (<span class="kwd">fun</span> <span class="id">s</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> =&gt; <span class="id"><a href="CasperCBC.CBC.Definitions.html#locally_sorted">locally_sorted</a></span> <span class="id">s</span>) <span class="id">s</span> <span class="id">Hss</span>) <span class="kwd">as</span> <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> (<span class="kwd">fun</span> <span class="id">s</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> =&gt; <span class="id"><a href="CasperCBC.CBC.Definitions.html#locally_sorted">locally_sorted</a></span> <span class="id">s</span>) <span class="id">j</span> <span class="id">Hsj</span>) <span class="kwd">as</span> <span class="id">sj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="CasperCBC.CBC.FullNode.html#add_message_sorted">add_message_sorted</a></span> (<span class="id">c</span>,<span class="id">v</span>,<span class="id">sj</span>) <span class="id">sj</span>) <span class="kwd">as</span> <span class="id">sj</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">protocol_generated</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">ss</span> <span class="id">_om</span> <span class="id">Pss</span> <span class="id">sj</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>,<span class="id">v</span>,<span class="id">sj</span>))); <span class="tactic">intros</span> <span class="id">Pss</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Pcvj</span> : <span class="id">protocol_prop</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id">sj</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">v</span>, <span class="id">sj</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">specialize</span> (<span class="id">protocol_generated</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>,<span class="id">v</span>)) <span class="id">sj</span> <span class="id">_omj</span> <span class="id">Psj</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s0</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> (<span class="id">protocol_initial_state</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">_</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Pcvj</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hvj</span>' : <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#valid_client">valid_client</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">v</span>)) (<span class="id">sj</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="CasperCBC.CBC.Common.html#valid_estimate">valid_estimate</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">unfold</span> <span class="id">estimator</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">unfold</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#estimator_proj1">estimator_proj1</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="CasperCBC.CBC.FullNode.html#make_already_sorted_state">make_already_sorted_state</a></span> <span class="id">j</span> <span class="id">Hsj</span>) <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Pcvj</span>' <span class="id">Hvj</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Pss</span>' <span class="id">Pcvj</span> <span class="id">Hv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="protocol_state_messages">protocol_state_messages</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s</span> : <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">om</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> : (<span class="id">protocol_prop</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id">s</span>, <span class="id">om</span>))<br/>
&nbsp;&nbsp;: <span class="kwd">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">c</span> : <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">v</span> : <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">j</span> : <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Hin</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state">in_state</a></span> (<span class="id">c</span>, <span class="id">v</span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">j</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;, (<span class="id">protocol_prop</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id"><a href="CasperCBC.CBC.FullNode.html#add_message_sorted">add_message_sorted</a></span> (<span class="id">c</span>, <span class="id">v</span>, <span class="id">j</span>) <span class="id">j</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c</span>, <span class="id">v</span>, <span class="id">j</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="CasperCBC.CBC.Definitions.html#syntactic_state_inclusion">syntactic_state_inclusion</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">j</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof195')">Proof.</div>
<div class="proofscript" id="proof195">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id">s</span>, <span class="id">om</span>) <span class="kwd">as</span> <span class="id">som</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">om</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">P</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hs</span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_state0">sorted_state0</a></span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">inversion</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id">transition</span> <span class="kwd">in</span> <span class="id">Heqsom</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span> <span class="kwd">as</span> [[<span class="id">c0</span> <span class="id">v0</span>] |]; <span class="tactic">destruct</span> <span class="id">om</span> <span class="kwd">as</span> [<span class="id">msg</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHP1</span> <span class="id">s</span> <span class="id">_om</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">j0</span> <span class="id">Hj0</span>].  <span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">_s</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">msg</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CasperCBC.CBC.FullNode.html#add_message_sorted">add_message_sorted</a></span> <span class="kwd">in</span> <span class="id">Heqsom</span>. <span class="tactic">destruct</span> <span class="id">msg</span> <span class="kwd">as</span> [(<span class="id">c1</span>, <span class="id">v1</span>) [<span class="id">j1</span> <span class="id">Hj1</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>. <span class="tactic">destruct</span> <span class="id">Hv</span> <span class="kwd">as</span> [<span class="id">Hejc0</span> [<span class="id">Hrj10</span> <span class="id">Hnh10</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHcvj</span> := <span class="id">IHP1</span> <span class="id">c</span> <span class="id">v</span> <span class="id">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">j</span> <span class="kwd">as</span> [<span class="id">j</span> <span class="id">Hj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> [<span class="id">Heq</span> | [<span class="id">Heq</span> | <span class="id">Hin</span>]]; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">Heq</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">inversion</span> <span class="id">P2</span>;[<span class="id">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">l</span> <span class="kwd">as</span> [[<span class="id">c1</span>' <span class="id">v1</span>']|]; <span class="tactic">destruct</span> <span class="id">om</span> <span class="kwd">as</span> [<span class="id">msg</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">j1</span>' <span class="id">Hj1</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">c1</span> <span class="id">v1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">j1</span> <span class="id">Hj</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">msg</span> <span class="kwd">as</span> [(<span class="id">c2</span>, <span class="id">v2</span>) [<span class="id">j2</span> <span class="id">Hj2</span>]]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hin</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state">in_state</a></span> (<span class="id">c1</span>, <span class="id">v1</span>, <span class="id">j1</span>) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#add_in_sorted_fn">add_in_sorted_fn</a></span> (<span class="id">c2</span>, <span class="id">v2</span>, <span class="id">j2</span>) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#add_in_sorted_fn">add_in_sorted_fn</a></span> (<span class="id">c1</span>, <span class="id">v1</span>, <span class="id">j1</span>) <span class="id">j1</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_message_membership">add_preserves_message_membership</a></span>; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span>; <span class="id">left</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">Hin</span>). <span class="tactic">destruct</span> <span class="id">IHP2</span> <span class="kwd">as</span> [<span class="id">P</span> <span class="id">_</span>]. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_inclusion">add_preserves_inclusion</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">j1</span>' <span class="id">Hj1</span>']. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>. <span class="tactic">destruct</span> <span class="id">Hv</span> <span class="kwd">as</span> [<span class="id">Hej1c1</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">c1</span> <span class="id">v1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">j1</span> <span class="id">Hj</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hin</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state">in_state</a></span> (<span class="id">c1</span>, <span class="id">v1</span>, <span class="id">j1</span>) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#add_in_sorted_fn">add_in_sorted_fn</a></span> (<span class="id">c1</span>, <span class="id">v1</span>, <span class="id">j1</span>) <span class="id">j1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span>; <span class="id">left</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">Hin</span>). <span class="tactic">destruct</span> <span class="id">IHP2</span> <span class="kwd">as</span> [<span class="id">P</span> <span class="id">_</span>]. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_inclusion">add_preserves_inclusion</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* { <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">specialize</span> (<span class="id">protocol_generated</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>); <span class="tactic">intro</span> <span class="id">PG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PG</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c0</span>, <span class="id">v0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> (<span class="kwd">fun</span> <span class="id">s</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> =&gt; <span class="id"><a href="CasperCBC.CBC.Definitions.html#locally_sorted">locally_sorted</a></span> <span class="id">s</span>) <span class="id">j0</span> <span class="id">Hj0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_om</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">protocol_initial_state</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">s0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">PG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">Hj</span> <span class="kwd">with</span> <span class="id">Hj0</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html#proof_irrelevance">proof_irrelevance</a></span>. <span class="tactic">apply</span> <span class="id">PG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_inclusion">add_preserves_inclusion</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl_refl">incl_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHcvj</span> <span class="id">Hin</span>). <span class="tactic">destruct</span> <span class="id">IHcvj</span> <span class="kwd">as</span> [<span class="id">Pcvj</span> <span class="id">Hjj0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_inclusion">add_preserves_inclusion</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">IHP1</span> <span class="id">s</span> <span class="id">_om</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>). <span class="tactic">assert</span> (<span class="id">IHcvj</span> := <span class="id">IHP1</span> <span class="id">c</span> <span class="id">v</span> <span class="id">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">j0</span> <span class="id">Hj0</span>]. <span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">j</span> <span class="kwd">as</span> [<span class="id">j</span> <span class="id">Hj</span>].  <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>. <span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHcvj</span>. <span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> [<span class="id">Heq</span> | <span class="id">Hin</span>]; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">Heq</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">clear</span> <span class="id">IHcvj</span>. <span class="tactic">simpl</span>. <span class="tactic">split</span>; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_inclusion">add_preserves_inclusion</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl_refl">incl_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> (<span class="id">protocol_generated</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) <span class="kwd">as</span> <span class="id">PG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PG</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">c0</span>, <span class="id">v0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> (<span class="kwd">fun</span> <span class="id">s</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#state">CBC.Definitions.state</a></span> =&gt; <span class="id"><a href="CasperCBC.CBC.Definitions.html#locally_sorted">locally_sorted</a></span> <span class="id">s</span>) <span class="id">j0</span> <span class="id">Hj0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_om</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">protocol_initial_state</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">s0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">PG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">Hj</span> <span class="kwd">with</span> <span class="id">Hj0</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html#proof_irrelevance">proof_irrelevance</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHcvj</span> <span class="id">Hin</span>). <span class="tactic">destruct</span> <span class="id">IHcvj</span> <span class="kwd">as</span> [<span class="id">Pcvj</span> <span class="id">Hincl</span>]. <span class="tactic">simpl</span>. <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_inclusion">add_preserves_inclusion</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP1</span> <span class="id">s</span> <span class="id">_om</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>). <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">s</span> <span class="id">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHcvj</span> := <span class="id">IHP1</span> <span class="id">c</span> <span class="id">v</span> <span class="id">j</span>). <span class="tactic">destruct</span> <span class="id">j</span> <span class="kwd">as</span> [<span class="id">j</span> <span class="id">Hj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">_s</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">msg</span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">msg</span> <span class="kwd">as</span> [(<span class="id">cm</span>, <span class="id">vm</span>) [<span class="id">jm</span> <span class="id">Hjm</span>]]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span> <span class="kwd">in</span> <span class="id">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hin</span> <span class="kwd">as</span> [<span class="id">Heq</span> | <span class="id">Hin</span>]; <span class="tactic">try</span> (<span class="tactic">inversion</span> <span class="id">Heq</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>. <span class="tactic">destruct</span> <span class="id">Hv</span> <span class="kwd">as</span> [<span class="id">Hincl</span> <span class="id">Hnh</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">P2</span>;[<span class="id">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span> <span class="kwd">as</span> [[<span class="id">c1</span>' <span class="id">v1</span>']|]; <span class="tactic">destruct</span> <span class="id">om</span> <span class="kwd">as</span> [<span class="id">msg</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">s0</span> <span class="kwd">as</span> [<span class="id">j1</span>' <span class="id">Hj1</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">cm</span> <span class="id">vm</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> <span class="id">_</span> <span class="id">jm</span> <span class="id">Hjm</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">msg</span> <span class="kwd">as</span> [(<span class="id">c2</span>, <span class="id">v2</span>) [<span class="id">j2</span> <span class="id">Hj2</span>]]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hin</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state">in_state</a></span> (<span class="id">cm</span>, <span class="id">vm</span>, <span class="id">jm</span>) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#add_in_sorted_fn">add_in_sorted_fn</a></span> (<span class="id">c2</span>, <span class="id">v2</span>, <span class="id">j2</span>) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#add_in_sorted_fn">add_in_sorted_fn</a></span> (<span class="id">cm</span>, <span class="id">vm</span>, <span class="id">jm</span>) <span class="id">jm</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_message_membership">add_preserves_message_membership</a></span>; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span>; <span class="id">left</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">Hin</span>). <span class="tactic">destruct</span> <span class="id">IHP2</span> <span class="kwd">as</span> [<span class="id">P</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">Hj</span> <span class="kwd">with</span> <span class="id">Hjm</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html#proof_irrelevance">proof_irrelevance</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">s0</span> <span class="kwd">as</span> [<span class="id">j1</span>' <span class="id">Hj1</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">Hj1</span>' <span class="kwd">with</span> <span class="id">Hj</span> <span class="kwd">in</span> <span class="id">P2</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html#proof_irrelevance">proof_irrelevance</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">Hjm</span> <span class="kwd">with</span> <span class="id">Hj</span> <span class="kwd">in</span> <span class="id">P2</span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.ProofIrrelevance.html#proof_irrelevance">proof_irrelevance</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_inclusion">add_preserves_inclusion</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">specialize</span> (<span class="id">IHcvj</span> <span class="id">Hin</span>). <span class="tactic">destruct</span> <span class="id">IHcvj</span> <span class="kwd">as</span> [<span class="id">Pcvj</span> <span class="id">Hincl</span>]; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#add_preserves_inclusion">add_preserves_inclusion</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP1</span> <span class="id">s0</span> <span class="id">_om</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>). <span class="tactic">assert</span> (<span class="id">IHcvj</span> := <span class="id">IHP1</span> <span class="id">c</span> <span class="id">v</span> <span class="id">j</span> <span class="id">Hin</span>). <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="protocol_state_generated_message">protocol_state_generated_message</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s</span> : <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">m</span> : <span class="id"><a href="CasperCBC.CBC.FullNode.html#sorted_message">sorted_message</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> : (<span class="id">protocol_prop</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id">s</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state">in_state</a></span> <span class="id">m</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof196')">Proof.</div>
<div class="proofscript" id="proof196">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">P</span>;[<span class="id">contradiction</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span> <span class="kwd">as</span> [[<span class="id">c0</span> <span class="id">v0</span>] |]; <span class="tactic">destruct</span> <span class="id">om</span> <span class="kwd">as</span> [<span class="id">msg</span>|]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">destruct</span> <span class="id">s0</span> <span class="kwd">as</span> [<span class="id">j0</span> <span class="id">Hj0</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">try</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <span class="tactic">destruct</span> <span class="id">msg</span> <span class="kwd">as</span> [(<span class="id">cm</span>, <span class="id">vm</span>) [<span class="id">jm</span> <span class="id">Hjm</span>]]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span>; <span class="id">right</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span>; <span class="id">left</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="tactic">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="protocol_state_equiv_right">protocol_state_equiv_right</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span> : <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">protocol_state_prop</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) <span class="id">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state">CBC.Definitions.protocol_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.Hm">Hm</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.Hrt">Hrt</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#He_proj1">He_proj1</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#PS_proj1">PS_proj1</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof197')">Proof.</div>
<div class="proofscript" id="proof197">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">om</span> <span class="id">P</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#pair">pair</a></span> (@<span class="id">state</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span> (@<span class="id">type</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message">message</a></span>) <span class="id">s</span> <span class="id">om</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> <span class="id">som</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">om</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">P</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hs</span>. <span class="tactic">rewrite</span> <span class="id">Hs</span> <span class="kwd">in</span> <span class="id">Heqsom</span>. <span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id">P0</span> : <span class="id">protocol_prop</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id">s0</span>, <span class="id">om0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">vstate</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">protocol_generated</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)) <span class="kwd">with</span> <span class="id">_om</span> <span class="id">_s</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#protocol_state_messages">protocol_state_messages</a></span> <span class="id">s0</span> <span class="id">om0</span> <span class="id">P0</span>); <span class="tactic">intro</span> <span class="id">Hmsgs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP1</span> <span class="id">s</span> <span class="id">_om</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHP2</span> <span class="id">_s</span> <span class="id">om</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">transition</span> <span class="kwd">in</span> <span class="id">Heqsom</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">l</span> <span class="kwd">as</span> [[<span class="id">c0</span> <span class="id">v0</span>] |]; <span class="tactic">destruct</span> <span class="id">om</span> <span class="kwd">as</span> [<span class="id">msg</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">j0</span> <span class="id">Hj0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#protocol_state_generated_message">protocol_state_generated_message</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">P2</span>); <span class="tactic">simpl</span>; <span class="tactic">intro</span> <span class="id">Hin_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">msg</span> <span class="kwd">as</span> [(<span class="id">cm</span>, <span class="id">vm</span>) <span class="id">jm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hmsg</span> := <span class="id">Hmsgs</span> <span class="id">cm</span> <span class="id">vm</span> <span class="id">jm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">jm</span> <span class="kwd">as</span> [<span class="id">jm</span> <span class="id">Hjm</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hmsg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hin</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state">in_state</a></span> (<span class="id">cm</span>, <span class="id">vm</span>, <span class="id">jm</span>) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#add_in_sorted_fn">add_in_sorted_fn</a></span> (<span class="id">cm</span>, <span class="id">vm</span>, <span class="id">jm</span>) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#add_in_sorted_fn">add_in_sorted_fn</a></span> (<span class="id">c0</span>, <span class="id">v0</span>, <span class="id">j0</span>) <span class="id">j0</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#in_state_add_in_sorted_iff">in_state_add_in_sorted_iff</a></span>; <span class="id">left</span>; <span class="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Hmsg</span> <span class="id">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hmsg</span> <span class="kwd">as</span> [<span class="id">Pmsg</span> <span class="id">Hincl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>. <span class="tactic">destruct</span> <span class="id">Hv</span> <span class="kwd">as</span> [<span class="id">Hest</span> [<span class="id">Hincl_m0</span> <span class="id">Hnh</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">estimator</span> <span class="kwd">in</span> <span class="id">Hest</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">constructor</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#copy_protocol_state">copy_protocol_state</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">estimator</span>. <span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#estimator_proj1">estimator_proj1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="CasperCBC.CBC.FullNode.html#make_already_sorted_state">make_already_sorted_state</a></span> <span class="id">j0</span> <span class="id">Hj0</span>). <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state_justification">protocol_state_justification</a></span> <span class="id">_</span> <span class="id">IHP2</span> <span class="id">_</span> <span class="id">Hin_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state_valid_estimate">protocol_state_valid_estimate</a></span> <span class="id">_</span> <span class="id">IHP2</span> <span class="id">_</span> <span class="id">Hin_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">j0</span> <span class="id">Hj0</span>]. <span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>. <span class="tactic">destruct</span> <span class="id">Hv</span> <span class="kwd">as</span> [<span class="id">Hv</span> <span class="id">_</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHP1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#copy_protocol_state">copy_protocol_state</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="CasperCBC.CBC.Common.html#valid_estimate">valid_estimate</a></span>. <span class="tactic">unfold</span> <span class="id">estimator</span>. <span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#estimator_proj1">estimator_proj1</a></span>. <span class="tactic">rewrite</span> (<span class="id"><a href="CasperCBC.CBC.FullNode.html#make_already_sorted_state">make_already_sorted_state</a></span> <span class="id">j0</span> <span class="id">Hj0</span>). <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">msg</span> <span class="kwd">as</span> [(<span class="id">cm</span>, <span class="id">vm</span>) <span class="id">jm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Hmsgs</span> <span class="id">cm</span> <span class="id">vm</span> <span class="id">jm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">jm</span> <span class="kwd">as</span> [<span class="id">jm</span> <span class="id">Hjm</span>]. <span class="tactic">destruct</span> <span class="id">s</span> <span class="kwd">as</span> [<span class="id">s</span> <span class="id">Hs</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hmsgs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hv</span>. <span class="tactic">destruct</span> <span class="id">Hv</span> <span class="kwd">as</span> [<span class="id">Hincl_jms</span> <span class="id">Hnh</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#protocol_state_generated_message">protocol_state_generated_message</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">P2</span>); <span class="tactic">simpl</span>; <span class="tactic">intro</span> <span class="id">Hin_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state_justification">protocol_state_justification</a></span> <span class="id">_</span> <span class="id">IHP2</span> <span class="id">_</span> <span class="id">Hin_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state_valid_estimate">protocol_state_valid_estimate</a></span> <span class="id">_</span> <span class="id">IHP2</span> <span class="id">_</span> <span class="id">Hin_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">Heqsom</span>; <span class="tactic">subst</span>; <span class="tactic">clear</span> <span class="id">Heqsom</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="protocol_state_equiv">protocol_state_equiv</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span> : <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="CasperCBC.CBC.Definitions.html#protocol_state">CBC.Definitions.protocol_state</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.C">C</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.V">V</a></span> <span class="id"><a href="CasperCBC.CBC.Definitions.html#message_type">message_type</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.Hm">Hm</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full.Hrt">Hrt</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#He_proj1">He_proj1</a></span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#PS_proj1">PS_proj1</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">protocol_state_prop</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) <span class="id">s</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof198')">Proof.</div>
<div class="proofscript" id="proof198">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#protocol_state_equiv_left">protocol_state_equiv_left</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#protocol_state_equiv_right">protocol_state_equiv_right</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vlsm_reach">vlsm_reach</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s1</span> : <span class="id">protocol_state</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s2</span> : <span class="id">protocol_state</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">ls</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id">vtransition_item</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_protocol_trace</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s1</span>) <span class="id">ls</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s2</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> <span class="id">destination</span> <span class="id">ls</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="reach_equiv">reach_equiv</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s1</span> <span class="id">s2</span> : <span class="id">protocol_state</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#vlsm_reach">vlsm_reach</a></span> <span class="id">s1</span> <span class="id">s2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> (<span class="id"><a href="CasperCBC.CBC.Definitions.html#get_messages">get_messages</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s1</span>))) (<span class="id"><a href="CasperCBC.CBC.Definitions.html#get_messages">get_messages</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s2</span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof199')">Proof.</div>
<div class="proofscript" id="proof199">
 Admitted.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="join_protocol_state">join_protocol_state</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s1</span> <span class="id">s2</span> : <span class="id">vstate</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">protocol_state_prop</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) <span class="id">s1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">protocol_state_prop</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.CBC.Definitions.html#not_heavy">not_heavy</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#sorted_state_union">sorted_state_union</a></span> <span class="id">s1</span> <span class="id">s2</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">protocol_state_prop</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#sorted_state_union">sorted_state_union</a></span> <span class="id">s1</span> <span class="id">s2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof200')">Proof.</div>
<div class="proofscript" id="proof200">
&nbsp;&nbsp;Admitted.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="protocol_state_union">protocol_state_union</a></span> (<span class="id">s1</span> <span class="id">s2</span> : <span class="id">protocol_state</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)) (<span class="id">H_weight</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#not_heavy">not_heavy</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#sorted_state_union">sorted_state_union</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s2</span>))) : <span class="id">protocol_state</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)<br/>
&nbsp;&nbsp;:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#exist">exist</a></span> (<span class="id">protocol_state_prop</span>  (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)) (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#sorted_state_union">sorted_state_union</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s2</span>)) <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof201')">Next Obligation.</div>
<div class="proofscript" id="proof201">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s1</span> <span class="kwd">as</span> [<span class="id">s1</span> <span class="id">about_s1</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">s2</span> <span class="kwd">as</span> [<span class="id">s2</span> <span class="id">about_s2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#join_protocol_state">join_protocol_state</a></span>.<br/>
&nbsp;&nbsp;Defined.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vlsm_reach_morphism">vlsm_reach_morphism</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s1</span> <span class="id">s2</span> : <span class="id">protocol_state</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)) (<span class="id">H_weight</span> : <span class="id"><a href="CasperCBC.CBC.Definitions.html#not_heavy">not_heavy</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#sorted_state_union">sorted_state_union</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s2</span>)))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#vlsm_reach">vlsm_reach</a></span> <span class="id">s1</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#protocol_state_union">protocol_state_union</a></span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">H_weight</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof202')">Proof.</div>
<div class="proofscript" id="proof202">
 Admitted.</div>
<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="pair_common_futures">pair_common_futures</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s1</span> <span class="id">s2</span> : <span class="id">protocol_state</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.CBC.Definitions.html#not_heavy">not_heavy</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#sorted_state_union">sorted_state_union</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s2</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">s3</span> : <span class="id">protocol_state</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#vlsm_reach">vlsm_reach</a></span> <span class="id">s1</span> <span class="id">s3</span> /\ <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#vlsm_reach">vlsm_reach</a></span> <span class="id">s2</span> <span class="id">s3</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof203')">Proof.</div>
<div class="proofscript" id="proof203">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#sorted_state_union">sorted_state_union</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">s2</span>)) <span class="kwd">as</span> <span class="id">s3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">about_s3</span> : <span class="id">protocol_state_prop</span> (<span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#VLSM_full_client1">VLSM_full_client1</a></span>) <span class="id">s3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>.<br/>
&nbsp;&nbsp;Admitted.</div>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="CasperCBC.CBC.FullNodeSimpleVLSM.html#Full">Full</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"><script>document.write("<a href='" + document.title + ".svg'>" + document.title + "</a>")</script></span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Nat.html#"><span class="id" title="library">Nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#"><span class="id" title="library">RelationClasses</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CasperCBC</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CasperCBC.Lib.Preamble.html#"><span class="id" title="library">Lib.Preamble</span></a> <a class="idref" href="CasperCBC.Lib.ListExtras.html#"><span class="id" title="library">Lib.ListExtras</span></a> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#"><span class="id" title="library">Lib.StreamExtras</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab40"></a><h1 class="section">VLSM Basics</h1>


<div class="paragraph"> </div>

This module provides basic VLSM infrastructure.

<div class="paragraph"> </div>

<a id="lab41"></a><h2 class="section">VLSM definition</h2>


<div class="paragraph"> </div>

<a id="lab42"></a><h3 class="section">The type of a VLSM</h3>


<div class="paragraph"> </div>

The type of a VLSM is a triple consisting of the underlying types of
messages, states, and labels.

<div class="paragraph"> </div>

In Coq it is defined as a Class taking <tt>message</tt> as parameter and having
<span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span> and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> as fields.  <tt>message</tt> is a parameter to allow it to be
easily shared by multiple VLSMs during composition.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Class</span> <a id="VLSM_type" class="idref" href="#VLSM_type"><span class="id" title="record">VLSM_type</span></a> (<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;{ <a id="state" class="idref" href="#state"><span class="id" title="projection">state</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;; <a id="label" class="idref" href="#label"><span class="id" title="projection">label</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab43"></a><h3 class="section">The signature of a VLSM</h3>


<div class="paragraph"> </div>

Although the VLSM definition does not single out the notion of a VLSM
signature, we find it convenient to extract it as the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span> class.

<div class="paragraph"> </div>

The <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span> class is parameterized by a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="record">VLSM_type</span></a></span> and defines properties
for initial states (<span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_state_prop"><span class="id" title="definition">initial_state_prop</span></a></span>) and initial messages
(<span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_message_prop"><span class="id" title="definition">initial_message_prop</span></a></span>), from which we can immediately define the dependent
types <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span> (as <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span>s having the <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_state_prop"><span class="id" title="definition">initial_state_prop</span></a></span>erty) and
<span class="inlinecode"><span class="id" title="var">intial_message</span></span> (as <tt>message</tt>s having the <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_message_prop"><span class="id" title="definition">initial_message_prop</span></a></span>erty).

<div class="paragraph"> </div>

Additionally, <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span> requires the identification of an <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="projection">s0</span></a></span>,
a <tt>message</tt> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="projection">m0</span></a></span>, and a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="projection">l0</span></a></span> to ensure the non-emptiness of the
corresponding sets.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="VLSM_sign" class="idref" href="#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a> {<a id="message:5" class="idref" href="#message:5"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} (<a id="vtype:6" class="idref" href="#vtype:6"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:5"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="initial_state_prop" class="idref" href="#initial_state_prop"><span class="id" title="projection">initial_state_prop</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">initial_state</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="s:9" class="idref" href="#s:9"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop:8"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:9"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="initial_message_prop" class="idref" href="#initial_message_prop"><span class="id" title="projection">initial_message_prop</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">initial_message</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="m:12" class="idref" href="#m:12"><span class="id" title="binder">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:5"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop:11"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:12"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="s0" class="idref" href="#s0"><span class="id" title="projection">s0</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state:10"><span class="id" title="method">initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="m0" class="idref" href="#m0"><span class="id" title="projection">m0</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:5"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="l0" class="idref" href="#l0"><span class="id" title="projection">l0</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="option_initial_message_prop" class="idref" href="#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:17" class="idref" href="#message:17"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:18" class="idref" href="#vtype:18"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:17"><span class="id" title="variable">message</span></a>} {<a id="sign:19" class="idref" href="#sign:19"><span class="id" title="binder">sign</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:18"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:20" class="idref" href="#om:20"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:17"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#om:20"><span class="id" title="variable">om</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="var">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM_sign_pre_loaded_with_messages" class="idref" href="#VLSM_sign_pre_loaded_with_messages"><span class="id" title="definition">VLSM_sign_pre_loaded_with_messages</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:22" class="idref" href="#message:22"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:23" class="idref" href="#vtype:23"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:22"><span class="id" title="variable">message</span></a>} (<a id="sign:24" class="idref" href="#sign:24"><span class="id" title="binder">sign</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:23"><span class="id" title="variable">vtype</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="initial:25" class="idref" href="#initial:25"><span class="id" title="binder">initial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:22"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:23"><span class="id" title="variable">vtype</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> <a id="m:26" class="idref" href="#m:26"><span class="id" title="binder">m</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a>  <a class="idref" href="CasperCBC.VLSM.Common.html#m:26"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial:25"><span class="id" title="variable">initial</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:26"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign:24"><span class="id" title="variable">sign</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="decidable_initial_messages_prop" class="idref" href="#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:27" class="idref" href="#message:27"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:28" class="idref" href="#vtype:28"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:27"><span class="id" title="variable">message</span></a>} (<a id="sign:29" class="idref" href="#sign:29"><span class="id" title="binder">sign</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:28"><span class="id" title="variable">vtype</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span> <a id="m:30" class="idref" href="#m:30"><span class="id" title="binder">m</span></a>, <a class="idref" href="CasperCBC.Lib.Classes.html#Decision"><span class="id" title="class">Decision</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:30"><span class="id" title="variable">m</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab44"></a><h3 class="section">VLSM class definition</h3>


<div class="paragraph"> </div>

Given a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span>nature, a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span> is defined by providing a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span>
function and a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span>ity condition.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="VLSM_class" class="idref" href="#VLSM_class"><span class="id" title="record">VLSM_class</span></a> {<a id="message:31" class="idref" href="#message:31"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:32" class="idref" href="#vtype:32"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:31"><span class="id" title="variable">message</span></a>} (<a id="lsm:33" class="idref" href="#lsm:33"><span class="id" title="binder">lsm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:32"><span class="id" title="variable">vtype</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="transition" class="idref" href="#transition"><span class="id" title="projection">transition</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:31"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:31"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <a id="valid" class="idref" href="#valid"><span class="id" title="projection">valid</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:31"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM_class_pre_loaded_with_messages" class="idref" href="#VLSM_class_pre_loaded_with_messages"><span class="id" title="definition">VLSM_class_pre_loaded_with_messages</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:37" class="idref" href="#message:37"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>} {<a id="vtype:38" class="idref" href="#vtype:38"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:37"><span class="id" title="variable">message</span></a>} {<a id="lsm:39" class="idref" href="#lsm:39"><span class="id" title="binder">lsm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:38"><span class="id" title="variable">vtype</span></a>} (<a id="vlsm:40" class="idref" href="#vlsm:40"><span class="id" title="binder">vlsm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#lsm:39"><span class="id" title="variable">lsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="initial:41" class="idref" href="#initial:41"><span class="id" title="binder">initial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:37"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign_pre_loaded_with_messages"><span class="id" title="definition">VLSM_sign_pre_loaded_with_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#lsm:39"><span class="id" title="variable">lsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial:41"><span class="id" title="variable">initial</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm:40"><span class="id" title="variable">vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm:40"><span class="id" title="variable">vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM" class="idref" href="#VLSM"><span class="id" title="definition">VLSM</span></a> (<a id="message:42" class="idref" href="#message:42"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#sigT"><span class="id" title="inductive">sigT</span></a> (<span class="id" title="keyword">fun</span> <a id="T:43" class="idref" href="#T:43"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:42"><span class="id" title="variable">message</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#sigT"><span class="id" title="inductive">sigT</span></a> (<span class="id" title="keyword">fun</span> <a id="S:44" class="idref" href="#S:44"><span class="id" title="binder">S</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#T:43"><span class="id" title="variable">T</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#S:44"><span class="id" title="variable">S</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="mk_vlsm" class="idref" href="#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:45" class="idref" href="#message:45"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="T:46" class="idref" href="#T:46"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:45"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="S:47" class="idref" href="#S:47"><span class="id" title="binder">S</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#T:46"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="M:48" class="idref" href="#M:48"><span class="id" title="binder">M</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#S:47"><span class="id" title="variable">S</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:45"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#T:46"><span class="id" title="variable">T</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#S:47"><span class="id" title="variable">S</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#M:48"><span class="id" title="variable">M</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_loaded_vlsm" class="idref" href="#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:49" class="idref" href="#message:49"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:50" class="idref" href="#X:50"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:49"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="initial:51" class="idref" href="#initial:51"><span class="id" title="binder">initial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:49"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:49"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="M:52" class="idref" href="#M:52"><span class="id" title="binder">M</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:50"><span class="id" title="variable">X</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="M':53" class="idref" href="#M':53"><span class="id" title="binder">M'</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class_pre_loaded_with_messages"><span class="id" title="definition">VLSM_class_pre_loaded_with_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#M:52"><span class="id" title="variable">M</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial:51"><span class="id" title="variable">initial</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#M':53"><span class="id" title="variable">M'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Traces" class="idref" href="#Traces"><span class="id" title="section">Traces</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:54" class="idref" href="#message:54"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="T:55" class="idref" href="#T:55"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:54"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab45"></a><h2 class="section">Traces</h2>


<div class="paragraph"> </div>

We introduce the concept of a trace to formalize an execution of the protocol.
It is abstracted as a pair <tt>(start, steps)</tt> where <tt>start</tt> is a state
and <tt>steps</tt> is a tuple of objects which fully describe the transitions
underwent during execution. Notably, <tt>steps</tt> might be infinite.

<div class="paragraph"> </div>

In Coq, we can define these objects (which we name <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a></span>s) as consisting of:
<ul class="doclist">
<li> the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a></span>

</li>
<li> the (optional) <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a></span> <tt>message</tt>
<div class="paragraph"> </div>


</li>
<li> the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span> of the transition

</li>
<li> the (optional) <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a></span> <tt>message</tt> generated by the transition

</li>
</ul>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="transition_item" class="idref" href="#transition_item"><span class="id" title="record">transition_item</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{   <a id="l" class="idref" href="#l"><span class="id" title="projection">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="input" class="idref" href="#input"><span class="id" title="projection">input</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="destination" class="idref" href="#destination"><span class="id" title="projection">destination</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a id="output" class="idref" href="#output"><span class="id" title="projection">output</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="field_selector" class="idref" href="#field_selector"><span class="id" title="definition">field_selector</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="field:61" class="idref" href="#field:61"><span class="id" title="binder">field</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="m:62" class="idref" href="#m:62"><span class="id" title="binder">m</span></a> <a id="item:63" class="idref" href="#item:63"><span class="id" title="binder">item</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#field:61"><span class="id" title="variable">field</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:63"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:62"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="item_sends_or_receives" class="idref" href="#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="m:64" class="idref" href="#m:64"><span class="id" title="binder">m</span></a> <a id="item:65" class="idref" href="#item:65"><span class="id" title="binder">item</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:65"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:64"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:65"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:64"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_has_message" class="idref" href="#trace_has_message"><span class="id" title="definition">trace_has_message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="message_selector:66" class="idref" href="#message_selector:66"><span class="id" title="binder">message_selector</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="msg:67" class="idref" href="#msg:67"><span class="id" title="binder">msg</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:68" class="idref" href="#tr:68"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#message_selector:66"><span class="id" title="variable">message_selector</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:67"><span class="id" title="variable">msg</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:68"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
</div>

<div class="doc">
Defines a message received but not sent by within the trace. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_received_not_sent_before_or_after" class="idref" href="#trace_received_not_sent_before_or_after"><span class="id" title="definition">trace_received_not_sent_before_or_after</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:69" class="idref" href="#tr:69"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:70" class="idref" href="#m:70"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#m:70"><span class="id" title="variable">m</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:69"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#trace_has_message"><span class="id" title="definition">trace_has_message</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#m:70"><span class="id" title="variable">m</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:69"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
</div>

<div class="doc">
States that a property holds for all messages received but not sent by a trace. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_received_not_sent_before_or_after_invariant" class="idref" href="#trace_received_not_sent_before_or_after_invariant"><span class="id" title="definition">trace_received_not_sent_before_or_after_invariant</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:71" class="idref" href="#tr:71"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:72" class="idref" href="#P:72"><span class="id" title="binder">P</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span> <a id="m:73" class="idref" href="#m:73"><span class="id" title="binder">m</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#trace_received_not_sent_before_or_after"><span class="id" title="definition">trace_received_not_sent_before_or_after</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:71"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:73"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#P:72"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:73"><span class="id" title="variable">m</span></a>.<br/>

<br/>
</div>

<div class="doc">
'proto_run's are used for an alternative definition of 'protocol_prop' which
  takes into account transitions. See 'vlsm_run_prop'.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="proto_run" class="idref" href="#proto_run"><span class="id" title="record">proto_run</span></a> : <span class="id" title="keyword">Type</span> := <a id="mk_proto_run" class="idref" href="#mk_proto_run"><span class="id" title="constructor">mk_proto_run</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="start" class="idref" href="#start"><span class="id" title="projection">start</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a id="transitions" class="idref" href="#transitions"><span class="id" title="projection">transitions</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a id="final" class="idref" href="#final"><span class="id" title="projection">final</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="Trace" class="idref" href="#Trace"><span class="id" title="inductive">Trace</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="Finite" class="idref" href="#Finite"><span class="id" title="constructor">Finite</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Trace:78"><span class="id" title="inductive">Trace</span></a><br/>
&nbsp;&nbsp;| <a id="Infinite" class="idref" href="#Infinite"><span class="id" title="constructor">Infinite</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Trace:78"><span class="id" title="inductive">Trace</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_first" class="idref" href="#trace_first"><span class="id" title="definition">trace_first</span></a> (<a id="tr:80" class="idref" href="#tr:80"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:80"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="finite_trace_last" class="idref" href="#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:82" class="idref" href="#si:82"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:83" class="idref" href="#tr:83"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:83"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#si:82"><span class="id" title="variable">si</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="finite_trace_nth" class="idref" href="#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:84" class="idref" href="#si:84"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:85" class="idref" href="#tr:85"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#si:84"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:85"><span class="id" title="variable">tr</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_last" class="idref" href="#trace_last"><span class="id" title="definition">trace_last</span></a> (<a id="tr:86" class="idref" href="#tr:86"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:86"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Next function extract the nth state of a trace, where the sequence of
states of a trace is obtained by appending the all destination
states in the transition list/stream to the initial state of the trace.

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="trace_nth" class="idref" href="#trace_nth"><span class="id" title="definition">trace_nth</span></a> (<a id="tr:88" class="idref" href="#tr:88"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="n:89" class="idref" href="#n:89"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:88"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> <a class="idref" href="CasperCBC.VLSM.Common.html#n:89"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">st</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:89"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">st</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#Traces"><span class="id" title="section">Traces</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> {<span class="id" title="var">message</span>} {<span class="id" title="var">T</span>} , {<span class="id" title="var">message</span>} <span class="id" title="var">T</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#field_selector"><span class="id" title="definition">field_selector</span></a> {<span class="id" title="var">_</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">_</span> <span class="id" title="var">msg</span> <span class="id" title="var">item</span> / .<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#item_sends_or_receives"><span class="id" title="definition">item_sends_or_receives</span></a> {<span class="id" title="var">_</span>} {<span class="id" title="var">_</span>} <span class="id" title="var">msg</span> <span class="id" title="var">item</span> /.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="TraceLemmas" class="idref" href="#TraceLemmas"><span class="id" title="section">TraceLemmas</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<a id="message:91" class="idref" href="#message:91"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<a id="T:92" class="idref" href="#T:92"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:91"><span class="id" title="variable">message</span></a>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="last_error_destination_last" class="idref" href="#last_error_destination_last"><span class="id" title="lemma">last_error_destination_last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:93" class="idref" href="#tr:93"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:94" class="idref" href="#s:94"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hlast:95" class="idref" href="#Hlast:95"><span class="id" title="binder">Hlast</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:93"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:94"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="default:96" class="idref" href="#default:96"><span class="id" title="binder">default</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#default:96"><span class="id" title="variable">default</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:93"><span class="id" title="variable">tr</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:94"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <span class="id" title="var">tr</span>) <span class="id" title="var">eqn</span> : <span class="id" title="var">eq</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_map"><span class="id" title="lemma">last_map</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_cons" class="idref" href="#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="s:97" class="idref" href="#s:97"><span class="id" title="binder">s</span></a> <a id="x:98" class="idref" href="#x:98"><span class="id" title="binder">x</span></a> <a id="tl:99" class="idref" href="#tl:99"><span class="id" title="binder">tl</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:97"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#x:98"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#tl:99"><span class="id" title="variable">tl</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#x:98"><span class="id" title="variable">x</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tl:99"><span class="id" title="variable">tl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>, <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_nil" class="idref" href="#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="s:100" class="idref" href="#s:100"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:100"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:100"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_app" class="idref" href="#finite_trace_last_app"><span class="id" title="lemma">finite_trace_last_app</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="s:101" class="idref" href="#s:101"><span class="id" title="binder">s</span></a> <a id="t1:102" class="idref" href="#t1:102"><span class="id" title="binder">t1</span></a> <a id="t2:103" class="idref" href="#t2:103"><span class="id" title="binder">t2</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:101"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#t1:102"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t2:103"><span class="id" title="variable">t2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:101"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t1:102"><span class="id" title="variable">t1</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#t2:103"><span class="id" title="variable">t2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_app"><span class="id" title="lemma">last_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_is_last" class="idref" href="#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="s:104" class="idref" href="#s:104"><span class="id" title="binder">s</span></a> <a id="x:105" class="idref" href="#x:105"><span class="id" title="binder">x</span></a> <a id="tl:106" class="idref" href="#tl:106"><span class="id" title="binder">tl</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:104"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#tl:106"><span class="id" title="variable">tl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#x:105"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#x:105"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_is_last"><span class="id" title="lemma">last_is_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_first" class="idref" href="#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:107" class="idref" href="#si:107"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:108" class="idref" href="#tr:108"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:107"><span class="id" title="variable">si</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:108"><span class="id" title="variable">tr</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:107"><span class="id" title="variable">si</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_last" class="idref" href="#finite_trace_nth_last"><span class="id" title="lemma">finite_trace_nth_last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:109" class="idref" href="#si:109"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:110" class="idref" href="#tr:110"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:109"><span class="id" title="variable">si</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:110"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:110"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:109"><span class="id" title="variable">si</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:110"><span class="id" title="variable">tr</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>;[<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<span class="id" title="var">nth_error</span> <span class="id" title="var">length</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_last"><span class="id" title="lemma">nth_error_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_app1" class="idref" href="#finite_trace_nth_app1"><span class="id" title="lemma">finite_trace_nth_app1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:111" class="idref" href="#si:111"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="t1:112" class="idref" href="#t1:112"><span class="id" title="binder">t1</span></a> <a id="t2:113" class="idref" href="#t2:113"><span class="id" title="binder">t2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:114" class="idref" href="#n:114"><span class="id" title="binder">n</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#n:114"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t1:112"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:111"><span class="id" title="variable">si</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#t1:112"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#t2:113"><span class="id" title="variable">t2</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#n:114"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:111"><span class="id" title="variable">si</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t1:112"><span class="id" title="variable">t1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:114"><span class="id" title="variable">n</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_app2" class="idref" href="#finite_trace_nth_app2"><span class="id" title="lemma">finite_trace_nth_app2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:115" class="idref" href="#si:115"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="t1:116" class="idref" href="#t1:116"><span class="id" title="binder">t1</span></a> <a id="t2:117" class="idref" href="#t2:117"><span class="id" title="binder">t2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:118" class="idref" href="#n:118"><span class="id" title="binder">n</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t1:116"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:118"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:115"><span class="id" title="variable">si</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#t1:116"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#t2:117"><span class="id" title="variable">t2</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#n:118"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:115"><span class="id" title="variable">si</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t1:116"><span class="id" title="variable">t1</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#t2:117"><span class="id" title="variable">t2</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#n:118"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t1:116"><span class="id" title="variable">t1</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.Compare_dec.html#le_lt_eq_dec"><span class="id" title="definition">Compare_dec.le_lt_eq_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> |&lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>;<span class="id" title="tactic">simpl</span> <span class="id" title="var">length</span>;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>;[|<span class="id" title="tactic">solve</span>[<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>;[<span class="id" title="var">exfalso</span>;<span class="id" title="var">lia</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">t1</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">t1</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth_app1"><span class="id" title="lemma">finite_trace_nth_app1</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth_last"><span class="id" title="lemma">finite_trace_nth_last</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">PeanoNat.Nat.sub_diag</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_nth_length" class="idref" href="#finite_trace_nth_length"><span class="id" title="lemma">finite_trace_nth_length</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:119" class="idref" href="#si:119"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:120" class="idref" href="#tr:120"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:121" class="idref" href="#n:121"><span class="id" title="binder">n</span></a> <a id="s:122" class="idref" href="#s:122"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#si:119"><span class="id" title="variable">si</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:120"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:121"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:122"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#n:121"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:120"><span class="id" title="variable">tr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_length"><span class="id" title="lemma">nth_error_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#le_S_n"><span class="id" title="lemma">le_S_n</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_prefix" class="idref" href="#finite_trace_last_prefix"><span class="id" title="lemma">finite_trace_last_prefix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:123" class="idref" href="#s:123"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:124" class="idref" href="#tr:124"><span class="id" title="binder">tr</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:125" class="idref" href="#n:125"><span class="id" title="binder">n</span></a> <a id="nth:126" class="idref" href="#nth:126"><span class="id" title="binder">nth</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:123"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:124"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:125"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#nth:126"><span class="id" title="variable">nth</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:123"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:124"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:125"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#nth:126"><span class="id" title="variable">nth</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">tr</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> [=&lt;-]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_nth_last"><span class="id" title="lemma">list_prefix_nth_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_trace_last_suffix" class="idref" href="#finite_trace_last_suffix"><span class="id" title="lemma">finite_trace_last_suffix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:127" class="idref" href="#s:127"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:128" class="idref" href="#tr:128"><span class="id" title="binder">tr</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) <a id="n:129" class="idref" href="#n:129"><span class="id" title="binder">n</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#n:129"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:128"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:127"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_suffix"><span class="id" title="definition">list_suffix</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:128"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:129"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:127"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:128"><span class="id" title="variable">tr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_suffix_map"><span class="id" title="lemma">list_suffix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_suffix_last"><span class="id" title="lemma">list_suffix_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="unlock_finite_trace_last" class="idref" href="#unlock_finite_trace_last"><span class="id" title="lemma">unlock_finite_trace_last</span></a> <a id="s:130" class="idref" href="#s:130"><span class="id" title="binder">s</span></a> <a id="tr:131" class="idref" href="#tr:131"><span class="id" title="binder">tr</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:130"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:131"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:131"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#s:130"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#TraceLemmas"><span class="id" title="section">TraceLemmas</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="vlsm_projections" class="idref" href="#vlsm_projections"><span class="id" title="section">vlsm_projections</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:132" class="idref" href="#message:132"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="vlsm:133" class="idref" href="#vlsm:133"><span class="id" title="binder">vlsm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:132"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
Given a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span>, it is convenient to be able to retrieve its V<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span>nature
or <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="record">VLSM_type</span></a></span>. Functions <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a></span> and <span class="inlinecode"><span class="id" title="keyword">type</span></span> below achieve this precise purpose.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="type" class="idref" href="#type"><span class="id" title="definition">type</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_projections.vlsm"><span class="id" title="variable">vlsm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="sign" class="idref" href="#sign"><span class="id" title="definition">sign</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_projections.vlsm"><span class="id" title="variable">vlsm</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="machine" class="idref" href="#machine"><span class="id" title="definition">machine</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_projections.vlsm"><span class="id" title="variable">vlsm</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vstate" class="idref" href="#vstate"><span class="id" title="definition">vstate</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vlabel" class="idref" href="#vlabel"><span class="id" title="definition">vlabel</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vinitial_state_prop" class="idref" href="#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vinitial_state" class="idref" href="#vinitial_state"><span class="id" title="definition">vinitial_state</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vinitial_message_prop" class="idref" href="#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="voption_initial_message_prop" class="idref" href="#voption_initial_message_prop"><span class="id" title="definition">voption_initial_message_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vinitial_message" class="idref" href="#vinitial_message"><span class="id" title="definition">vinitial_message</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#initial_message"><span class="id" title="method">initial_message</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vs0" class="idref" href="#vs0"><span class="id" title="definition">vs0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vm0" class="idref" href="#vm0"><span class="id" title="definition">vm0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vl0" class="idref" href="#vl0"><span class="id" title="definition">vl0</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vdecidable_initial_messages_prop" class="idref" href="#vdecidable_initial_messages_prop"><span class="id" title="definition">vdecidable_initial_messages_prop</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#decidable_initial_messages_prop"><span class="id" title="definition">decidable_initial_messages_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vtransition" class="idref" href="#vtransition"><span class="id" title="definition">vtransition</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vvalid" class="idref" href="#vvalid"><span class="id" title="definition">vvalid</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vtransition_item" class="idref" href="#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vTrace" class="idref" href="#vTrace"><span class="id" title="definition">vTrace</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="vproto_run" class="idref" href="#vproto_run"><span class="id" title="definition">vproto_run</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#proto_run"><span class="id" title="record">proto_run</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_projections"><span class="id" title="section">vlsm_projections</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mk_vlsm_machine" class="idref" href="#mk_vlsm_machine"><span class="id" title="lemma">mk_vlsm_machine</span></a><br/>
&nbsp;&nbsp;{<a id="message:134" class="idref" href="#message:134"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:135" class="idref" href="#X:135"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:134"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:135"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:135"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">T</span>, (<span class="id" title="var">S</span>, <span class="id" title="var">M</span>)). <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM" class="idref" href="#VLSM"><span class="id" title="section">VLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this section we assume a fixed <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:136" class="idref" href="#message:136"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:137" class="idref" href="#X:137"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:136"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="TypeX:138" class="idref" href="#TypeX:138"><span class="id" title="binder">TypeX</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:137"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="SignX:139" class="idref" href="#SignX:139"><span class="id" title="binder">SignX</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#sign"><span class="id" title="definition">sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:137"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MachineX:140" class="idref" href="#MachineX:140"><span class="id" title="binder">MachineX</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:137"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">TypeX</span>.<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">SignX</span>.<br/>
<span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <span class="id" title="var">MachineX</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab46"></a><h3 class="section">Protocol states and messages</h3>


<div class="paragraph"> </div>

We further characterize certain objects as being <i>protocol</i>, which means they can
be witnessed or experienced during executions of the protocol. For example,
a message is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span> if there exists an execution of the protocol
in which it is produced.

<div class="paragraph"> </div>

We choose here to define protocol states and messages together as the
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> property, inductively defined over the
<span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span> <span class="inlinecode">*</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNodeSimpleVLSM.html#message"><span class="id" title="definition">message</span></a></span> product type,
as this definition avoids the need of using a mutually recursive definition.

<div class="paragraph"> </div>

The inductive definition has three cases:
<ul class="doclist">
<li> if <tt>s</tt> is a <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span> with the <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_state_prop"><span class="id" title="definition">initial_state_prop</span></a></span>erty, then <tt>(s, None)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty;

</li>
<li> if <tt>m</tt> is a <tt>message</tt> with the <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNodeSimpleVLSM.html#initial_message_prop"><span class="id" title="definition">initial_message_prop</span></a></span>erty, then <tt>(</tt><span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="projection">s0</span></a>,</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a></span><tt>m)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty;

</li>
<li> for all <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span>s <tt>s</tt>, <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a></span>al <tt>message</tt> <tt>om</tt>,
  and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> <tt>l</tt>:

<div class="paragraph"> </div>

  if there is an (optional) <tt>message</tt> <tt>_om</tt> such that <tt>(s, _om)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty;

<div class="paragraph"> </div>

  and if there is a <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span> <tt>_s</tt> such that <tt>(_s, om)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty;

<div class="paragraph"> </div>

  and if <tt>l</tt> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span> <tt>(s, om)</tt>,

<div class="paragraph"> </div>

  then <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span> <tt>l (s, om)</tt> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty.

</li>
</ul>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="protocol_prop" class="idref" href="#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="protocol_initial" class="idref" href="#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:143" class="idref" href="#s:143"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:144" class="idref" href="#Hs:144"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:143"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:145" class="idref" href="#om:145"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hom:146" class="idref" href="#Hom:146"><span class="id" title="binder">Hom</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:145"><span class="id" title="variable">om</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop:141"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:143"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:145"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="protocol_generated" class="idref" href="#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:147" class="idref" href="#l:147"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:148" class="idref" href="#s:148"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="_om:149" class="idref" href="#_om:149"><span class="id" title="binder">_om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:150" class="idref" href="#Hps:150"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop:141"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:148"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#_om:149"><span class="id" title="variable">_om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="_s:151" class="idref" href="#_s:151"><span class="id" title="binder">_s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:152" class="idref" href="#om:152"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpm:153" class="idref" href="#Hpm:153"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop:141"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#_s:151"><span class="id" title="variable">_s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:152"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:154" class="idref" href="#Hv:154"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:147"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:148"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:152"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop:141"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:147"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:148"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:152"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_initial_state" class="idref" href="#protocol_initial_state"><span class="id" title="definition">protocol_initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<a id="s:155" class="idref" href="#s:155"><span class="id" title="binder">s</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>] (<a id="Hs:156" class="idref" href="#Hs:156"><span class="id" title="binder">Hs</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:155"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:155"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:155"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Hs:156"><span class="id" title="variable">Hs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

The <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a></span>erty and the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a></span>erty are now
definable as simple projections of the above definition.

<div class="paragraph"> </div>

Moreover, we use these derived properties to define the corresponding
dependent types <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#protocol_state"><span class="id" title="inductive">protocol_state</span></a></span> and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_state_prop" class="idref" href="#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a id="s:157" class="idref" href="#s:157"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="om:158" class="idref" href="#om:158"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:157"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:158"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_message_prop" class="idref" href="#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> (<a id="m:159" class="idref" href="#m:159"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:160" class="idref" href="#s:160"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:160"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:159"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_state" class="idref" href="#protocol_state"><span class="id" title="definition">protocol_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="s:161" class="idref" href="#s:161"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:161"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_message" class="idref" href="#protocol_message"><span class="id" title="definition">protocol_message</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="m:162" class="idref" href="#m:162"><span class="id" title="binder">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:162"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="initial_is_protocol" class="idref" href="#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:163" class="idref" href="#s:163"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinitial:164" class="idref" href="#Hinitial:164"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:163"><span class="id" title="variable">s</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:163"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="initial_message_is_protocol" class="idref" href="#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:165" class="idref" href="#m:165"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinitial:166" class="idref" href="#Hinitial:166"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:165"><span class="id" title="variable">m</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:165"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As often times we work with optional protocol messages, it is convenient
to define a protocol message property for optional messages:

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="option_protocol_message_prop" class="idref" href="#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> (<a id="om:167" class="idref" href="#om:167"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:168" class="idref" href="#s:168"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:168"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:167"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="option_protocol_message_None" class="idref" href="#option_protocol_message_None"><span class="id" title="lemma">option_protocol_message_None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="option_protocol_message_Some" class="idref" href="#option_protocol_message_Some"><span class="id" title="lemma">option_protocol_message_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:169" class="idref" href="#m:169"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpm:170" class="idref" href="#Hpm:170"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:169"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:169"><span class="id" title="variable">m</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hpm</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="option_initial_message_is_protocol" class="idref" href="#option_initial_message_is_protocol"><span class="id" title="lemma">option_initial_message_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:171" class="idref" href="#om:171"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinitial:172" class="idref" href="#Hinitial:172"><span class="id" title="binder">Hinitial</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#option_initial_message_prop"><span class="id" title="definition">option_initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:171"><span class="id" title="variable">om</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:171"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_Some"><span class="id" title="lemma">option_protocol_message_Some</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_None"><span class="id" title="lemma">option_protocol_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab47"></a><h3 class="section">Protocol validity and protocol transitions</h3>


<div class="paragraph"> </div>

To achieve this, it is useful to further define <i>protocol</i> validity and
<i>protocol</i> transitions:

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_valid" class="idref" href="#protocol_valid"><span class="id" title="definition">protocol_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:173" class="idref" href="#l:173"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:174" class="idref" href="#som:174"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:175" class="idref" href="#s:175"><span class="id" title="binder">s</span></a>, <a id="om:176" class="idref" href="#om:176"><span class="id" title="binder">om</span></a>) := <a class="idref" href="CasperCBC.VLSM.Common.html#som:174"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:175"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:176"><span class="id" title="variable">om</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:173"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:175"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om:176"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_transition" class="idref" href="#protocol_transition"><span class="id" title="definition">protocol_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:177" class="idref" href="#l:177"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:178" class="idref" href="#som:178"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som':179" class="idref" href="#som':179"><span class="id" title="binder">som'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:177"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:178"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a>  <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:177"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:178"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som':179"><span class="id" title="variable">som'</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_transition_preserving" class="idref" href="#protocol_transition_preserving"><span class="id" title="definition">protocol_transition_preserving</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="R:180" class="idref" href="#R:180"><span class="id" title="binder">R</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:181" class="idref" href="#s1:181"><span class="id" title="binder">s1</span></a> <a id="s2:182" class="idref" href="#s2:182"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:183" class="idref" href="#l:183"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om1:184" class="idref" href="#om1:184"><span class="id" title="binder">om1</span></a> <a id="om2:185" class="idref" href="#om2:185"><span class="id" title="binder">om2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hprotocol:186" class="idref" href="#Hprotocol:186"><span class="id" title="binder">Hprotocol</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:183"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s1:181"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om1:184"><span class="id" title="variable">om1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s2:182"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om2:185"><span class="id" title="variable">om2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#R:180"><span class="id" title="variable">R</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:181"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:182"><span class="id" title="variable">s2</span></a>.<br/>

<br/>
</div>

<div class="doc">
  Next three lemmas show the two definitions above are strongly related.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_valid" class="idref" href="#protocol_transition_valid"><span class="id" title="lemma">protocol_transition_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:187" class="idref" href="#l:187"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:188" class="idref" href="#som:188"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som':189" class="idref" href="#som':189"><span class="id" title="binder">som'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:190" class="idref" href="#Ht:190"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:187"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:188"><span class="id" title="variable">som</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som':189"><span class="id" title="variable">som'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:187"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:188"><span class="id" title="variable">som</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpv</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_valid_transition" class="idref" href="#protocol_valid_transition"><span class="id" title="lemma">protocol_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:191" class="idref" href="#l:191"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:192" class="idref" href="#som:192"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:193" class="idref" href="#Hv:193"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:191"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:192"><span class="id" title="variable">som</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som':194" class="idref" href="#som':194"><span class="id" title="binder">som'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:191"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:192"><span class="id" title="variable">som</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som':194"><span class="id" title="variable">som'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l</span> <span class="id" title="var">som</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_valid_transition_iff" class="idref" href="#protocol_valid_transition_iff"><span class="id" title="lemma">protocol_valid_transition_iff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:195" class="idref" href="#l:195"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:196" class="idref" href="#som:196"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:195"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:196"><span class="id" title="variable">som</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som':197" class="idref" href="#som':197"><span class="id" title="binder">som'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:195"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:196"><span class="id" title="variable">som</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som':197"><span class="id" title="variable">som'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid_transition"><span class="id" title="lemma">protocol_valid_transition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">som'</span> <span class="id" title="var">Hpt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_valid"><span class="id" title="lemma">protocol_transition_valid</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">som'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

The next couple of lemmas relate the two definitions above with
pre-existing concepts.

<div class="paragraph"> </div>

 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_generated_valid" class="idref" href="#protocol_generated_valid"><span class="id" title="lemma">protocol_generated_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:198" class="idref" href="#l:198"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:199" class="idref" href="#s:199"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="_om:200" class="idref" href="#_om:200"><span class="id" title="binder">_om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="_s:201" class="idref" href="#_s:201"><span class="id" title="binder">_s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:202" class="idref" href="#om:202"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:203" class="idref" href="#Hps:203"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:199"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#_om:200"><span class="id" title="variable">_om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpm:204" class="idref" href="#Hpm:204"><span class="id" title="binder">Hpm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#_s:201"><span class="id" title="variable">_s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:202"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:205" class="idref" href="#Hv:205"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:198"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:199"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:202"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:198"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:199"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:202"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_origin" class="idref" href="#protocol_transition_origin"><span class="id" title="lemma">protocol_transition_origin</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:206" class="idref" href="#l:206"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:207" class="idref" href="#s:207"><span class="id" title="binder">s</span></a> <a id="s':208" class="idref" href="#s':208"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:209" class="idref" href="#om:209"><span class="id" title="binder">om</span></a> <a id="om':210" class="idref" href="#om':210"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:211" class="idref" href="#Ht:211"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:206"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:207"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:209"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':208"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om':210"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:207"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hp</span>] <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_destination" class="idref" href="#protocol_transition_destination"><span class="id" title="lemma">protocol_transition_destination</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:212" class="idref" href="#l:212"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:213" class="idref" href="#s:213"><span class="id" title="binder">s</span></a> <a id="s':214" class="idref" href="#s':214"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:215" class="idref" href="#om:215"><span class="id" title="binder">om</span></a> <a id="om':216" class="idref" href="#om':216"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:217" class="idref" href="#Ht:217"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:212"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:213"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:215"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':214"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':216"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':214"><span class="id" title="variable">s'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_in" class="idref" href="#protocol_transition_in"><span class="id" title="lemma">protocol_transition_in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:218" class="idref" href="#l:218"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:219" class="idref" href="#s:219"><span class="id" title="binder">s</span></a> <a id="s':220" class="idref" href="#s':220"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:221" class="idref" href="#om:221"><span class="id" title="binder">om</span></a> <a id="om':222" class="idref" href="#om':222"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:223" class="idref" href="#Ht:223"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:218"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:219"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:221"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':220"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':222"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:221"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">_</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_prop_transition_out" class="idref" href="#protocol_prop_transition_out"><span class="id" title="lemma">protocol_prop_transition_out</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:224" class="idref" href="#l:224"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:225" class="idref" href="#s:225"><span class="id" title="binder">s</span></a> <a id="s':226" class="idref" href="#s':226"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:227" class="idref" href="#om:227"><span class="id" title="binder">om</span></a> <a id="om':228" class="idref" href="#om':228"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:229" class="idref" href="#Ht:229"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:224"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:225"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:227"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':226"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':228"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':226"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':228"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_out" class="idref" href="#protocol_transition_out"><span class="id" title="lemma">protocol_transition_out</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:230" class="idref" href="#l:230"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:231" class="idref" href="#s:231"><span class="id" title="binder">s</span></a> <a id="s':232" class="idref" href="#s':232"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:233" class="idref" href="#om:233"><span class="id" title="binder">om</span></a> <a id="om':234" class="idref" href="#om':234"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:235" class="idref" href="#Ht:235"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:230"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:231"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:233"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':232"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':234"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':234"><span class="id" title="variable">om'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop_transition_out"><span class="id" title="lemma">protocol_prop_transition_out</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_is_valid" class="idref" href="#protocol_transition_is_valid"><span class="id" title="lemma">protocol_transition_is_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:236" class="idref" href="#l:236"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:237" class="idref" href="#s:237"><span class="id" title="binder">s</span></a> <a id="s':238" class="idref" href="#s':238"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:239" class="idref" href="#om:239"><span class="id" title="binder">om</span></a> <a id="om':240" class="idref" href="#om':240"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:241" class="idref" href="#Ht:241"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:236"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:237"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:239"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':238"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':240"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:236"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:237"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:239"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hv</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_transition" class="idref" href="#protocol_transition_transition"><span class="id" title="lemma">protocol_transition_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="l:242" class="idref" href="#l:242"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="s:243" class="idref" href="#s:243"><span class="id" title="binder">s</span></a> <a id="s':244" class="idref" href="#s':244"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="om:245" class="idref" href="#om:245"><span class="id" title="binder">om</span></a> <a id="om':246" class="idref" href="#om':246"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:247" class="idref" href="#Ht:247"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:242"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:243"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:245"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':244"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':246"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:  <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:242"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:243"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:245"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':244"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':246"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_prop_valid_out" class="idref" href="#protocol_prop_valid_out"><span class="id" title="lemma">protocol_prop_valid_out</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:248" class="idref" href="#l:248"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:249" class="idref" href="#s:249"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:250" class="idref" href="#om:250"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:251" class="idref" href="#Hv:251"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:248"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:249"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:250"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:248"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:249"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:250"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid_transition"><span class="id" title="lemma">protocol_valid_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">s'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_transition"><span class="id" title="lemma">protocol_transition_transition</span></a>  <span class="id" title="var">Ht</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop_transition_out"><span class="id" title="lemma">protocol_prop_transition_out</span></a> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For VLSMs initialized with many initial messages such as
    the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a></span> or the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span>,
    the question of whether a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> a message <tt>m</tt> becomes more
    useful than that whether <tt>m</tt> is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>.
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="protocol_generated_prop" class="idref" href="#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:252" class="idref" href="#s:252"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:253" class="idref" href="#m:253"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som:254" class="idref" href="#som:254"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:255" class="idref" href="#l:255"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:255"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:254"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:252"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:253"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Of course, if a VLSM <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> <tt>(s,m)</tt>, then <tt>(s,m)</tt> is protocol.
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_generated_prop_protocol" class="idref" href="#protocol_generated_prop_protocol"><span class="id" title="lemma">protocol_generated_prop_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:256" class="idref" href="#s:256"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:257" class="idref" href="#m:257"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hm:258" class="idref" href="#Hm:258"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:256"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:257"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:256"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:257"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">s0</span>, <span class="id" title="var">om0</span>) [<span class="id" title="var">l</span> [[[<span class="id" title="var">_om0</span> <span class="id" title="var">Hs0</span>] [[<span class="id" title="var">_s0</span> <span class="id" title="var">Hom0</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om0</span> <span class="id" title="var">_s0</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="can_emit" class="idref" href="#can_emit"><span class="id" title="definition">can_emit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:259" class="idref" href="#m:259"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="som:260" class="idref" href="#som:260"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:261" class="idref" href="#l:261"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:262" class="idref" href="#s:262"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:261"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:260"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:262"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:259"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="can_emit_iff" class="idref" href="#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:263" class="idref" href="#m:263"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:263"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="s:264" class="idref" href="#s:264"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:264"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:263"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">som</span> [<span class="id" title="var">l</span> [<span class="id" title="var">s</span> <span class="id" title="var">Ht</span>]]]. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <span class="id" title="var">som</span>, <span class="id" title="var">l</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> [<span class="id" title="var">som</span> [<span class="id" title="var">l</span> <span class="id" title="var">Ht</span>]]]. <span class="id" title="tactic">exists</span> <span class="id" title="var">som</span>, <span class="id" title="var">l</span>, <span class="id" title="var">s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a VLSM <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span> a message <tt>m</tt>, then <tt>m</tt> is protocol.
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="can_emit_protocol" class="idref" href="#can_emit_protocol"><span class="id" title="lemma">can_emit_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:265" class="idref" href="#m:265"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hm:266" class="idref" href="#Hm:266"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:265"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:265"><span class="id" title="variable">m</span></a> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop_protocol"><span class="id" title="lemma">protocol_generated_prop_protocol</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A characterization of protocol messages in terms of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span>
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="can_emit_protocol_iff" class="idref" href="#can_emit_protocol_iff"><span class="id" title="lemma">can_emit_protocol_iff</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:267" class="idref" href="#m:267"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:267"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:267"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:267"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hm</span>]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hm</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Him</span> | <span class="id" title="var">Hem</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit_protocol"><span class="id" title="lemma">can_emit_protocol</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab48"></a><h3 class="section">Protocol state and protocol message characterization</h3>


<div class="paragraph"> </div>

The definition and results below show that the mutually-recursive definitions
for <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#protocol_state"><span class="id" title="inductive">protocol_state</span></a></span>s and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>s can be derived from the
prior definitions.

<div class="paragraph"> </div>

The results below offers equivalent characterizations for <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#protocol_state"><span class="id" title="inductive">protocol_state</span></a></span>s
and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>s, similar to their recursive definition.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_state_prop_iff" class="idref" href="#protocol_state_prop_iff"><span class="id" title="lemma">protocol_state_prop_iff</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="s':268" class="idref" href="#s':268"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':268"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="is:269" class="idref" href="#is:269"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':268"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:269"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="l:270" class="idref" href="#l:270"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="som:271" class="idref" href="#som:271"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="om':272" class="idref" href="#om':272"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:270"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:271"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':268"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':272"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hps'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om'</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs0</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[[<span class="id" title="var">s</span> <span class="id" title="var">His</span>] <span class="id" title="var">Heq</span>] | [<span class="id" title="var">l</span> [[<span class="id" title="var">s</span> <span class="id" title="var">om</span>] [<span class="id" title="var">om'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>; [<span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A specialized induction principle for <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a></span>.

<div class="paragraph"> </div>

        Compared to opening the existential and using <span class="inlinecode"><span class="id" title="var">protocol_prop_ind</span></span>,
        this avoids the redundancy of the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="definition">protocol_initial_state</span></a></span> case
        needing a proof for any <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span> and then <span class="inlinecode"><span class="id" title="var">protocol_initial_message</span></span>
        asking for a proof specifically for <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="projection">s0</span></a></span>, and also avoids the
        little trouble of needing <tt>set</tt> or <tt>dependent induction</tt> to
        handle the pair in the index in <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> <span class="inlinecode">(<span class="id" title="var">s</span>,<span class="id" title="var">om</span>)</span>.
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_state_prop_ind" class="idref" href="#protocol_state_prop_ind"><span class="id" title="lemma">protocol_state_prop_ind</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:273" class="idref" href="#P:273"><span class="id" title="binder">P</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHinit:276" class="idref" href="#IHinit:276"><span class="id" title="binder">IHinit</span></a> : <span class="id" title="keyword">forall</span> (<a id="s:274" class="idref" href="#s:274"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="Hs:275" class="idref" href="#Hs:275"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:274"><span class="id" title="variable">s</span></a>), <a class="idref" href="CasperCBC.VLSM.Common.html#P:273"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:274"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IHgen:284" class="idref" href="#IHgen:284"><span class="id" title="binder">IHgen</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="s':277" class="idref" href="#s':277"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="l:278" class="idref" href="#l:278"><span class="id" title="binder">l</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="om:279" class="idref" href="#om:279"><span class="id" title="binder">om</span></a> <a id="om':280" class="idref" href="#om':280"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s:281" class="idref" href="#s:281"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:282" class="idref" href="#Ht:282"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:278"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:281"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:279"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':277"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om':280"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a id="Hs:283" class="idref" href="#Hs:283"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#P:273"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:281"><span class="id" title="variable">s</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#P:273"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':277"><span class="id" title="variable">s'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">forall</span> (<a id="s:285" class="idref" href="#s:285"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="Hs:286" class="idref" href="#Hs:286"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:285"><span class="id" title="variable">s</span></a>), <a class="idref" href="CasperCBC.VLSM.Common.html#P:273"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:285"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">som</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">om</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqsom</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHinit</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHgen</span> <span class="id" title="var">s1</span> <span class="id" title="var">l1</span> <span class="id" title="var">om</span> <span class="id" title="var">om0</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHs1</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHgen</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">_s</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Protocol&nbsp;message&nbsp;characterization&nbsp;-&nbsp;similar&nbsp;to&nbsp;the&nbsp;definition&nbsp;in&nbsp;the&nbsp;report.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_message_prop_iff" class="idref" href="#protocol_message_prop_iff"><span class="id" title="lemma">protocol_message_prop_iff</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="m':287" class="idref" href="#m':287"><span class="id" title="binder">m'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m':287"><span class="id" title="variable">m'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="im:288" class="idref" href="#im:288"><span class="id" title="binder">im</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message"><span class="id" title="method">initial_message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m':287"><span class="id" title="variable">m'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#im:288"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="l:289" class="idref" href="#l:289"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="som:290" class="idref" href="#som:290"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="s':291" class="idref" href="#s':291"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:289"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:290"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':291"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m':287"><span class="id" title="variable">m'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">s'</span> <span class="id" title="var">Hpm'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpm'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m'</span> <span class="id" title="var">Hom</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">l1</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[[<span class="id" title="var">s</span> <span class="id" title="var">His</span>] <span class="id" title="var">Heq</span>] | [<span class="id" title="var">l</span> [[<span class="id" title="var">s</span> <span class="id" title="var">om</span>] [<span class="id" title="var">s'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab49"></a><h2 class="section">Trace Properties</h2>


<div class="paragraph"> </div>

Note that it is unnecessary to specify the source state of the transition,
as it is implied by the preceding <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a></span> (or by the <tt>start</tt> state,
if such an item doesn't exist).

<div class="paragraph"> </div>


<div class="paragraph"> </div>

We will now split our groundwork for defining traces into the finite case and
the infinite case.

<div class="paragraph"> </div>

<a id="lab50"></a><h3 class="section">Finite <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s</h3>


<div class="paragraph"> </div>

A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a></span> a <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span> <tt>start</tt> is a pair <tt>(start, steps)</tt> where <tt>steps</tt>
<div class="paragraph"> </div>

is a list of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a></span>s, and is inductively defined by:
<ul class="doclist">
<li> <tt>(s, [])</tt> is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a></span> <tt>s</tt>
<div class="paragraph"> </div>


</li>
<li> if there is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a></span> <tt>l (s', iom) (s, oom)</tt>
<div class="paragraph"> </div>

  and if <tt>(s,steps)</tt> is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_from"><span class="id" title="lemma">protocol_trace_from</span></a></span> <tt>s</tt>
<div class="paragraph"> </div>

  then <tt>(s', ({| l := l; input := iom; destination := s; output := oom |} :: steps)</tt>
<div class="paragraph"> </div>

  is a <span class="inlinecode"><span class="id" title="var">protocol_transition_from</span></span> <tt>s'</tt>.

<div class="paragraph"> </div>

Note that the definition is given such that it extends an existing trace by
adding a transition to its front.
The reason for this choice is to have this definition be similar to the one
for infinite traces, which can only be extended at the front.

</li>
</ul>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="finite_protocol_trace_from" class="idref" href="#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="finite_ptrace_empty" class="idref" href="#finite_ptrace_empty"><span class="id" title="constructor">finite_ptrace_empty</span></a> : <span class="id" title="keyword">forall</span> (<a id="s:294" class="idref" href="#s:294"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>), <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:294"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from:292"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:294"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="finite_ptrace_extend" class="idref" href="#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> : <span class="id" title="keyword">forall</span>  (<a id="s:295" class="idref" href="#s:295"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tl:296" class="idref" href="#tl:296"><span class="id" title="binder">tl</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from:292"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:295"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tl:296"><span class="id" title="variable">tl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="s':297" class="idref" href="#s':297"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="iom:298" class="idref" href="#iom:298"><span class="id" title="binder">iom</span></a> <a id="oom:299" class="idref" href="#oom:299"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>) (<a id="l:300" class="idref" href="#l:300"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:300"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':297"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom:298"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:295"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom:299"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from:292"><span class="id" title="inductive">finite_protocol_trace_from</span></a>  <a class="idref" href="CasperCBC.VLSM.Common.html#s':297"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#l:300"><span class="id" title="variable">l</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#iom:298"><span class="id" title="variable">iom</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#s:295"><span class="id" title="variable">s</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#oom:299"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tl:296"><span class="id" title="variable">tl</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="finite_ptrace_singleton" class="idref" href="#finite_ptrace_singleton"><span class="id" title="definition">finite_ptrace_singleton</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> {<a id="l:301" class="idref" href="#l:301"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>} {<a id="s:302" class="idref" href="#s:302"><span class="id" title="binder">s</span></a> <a id="s':303" class="idref" href="#s':303"><span class="id" title="binder">s'</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>} {<a id="iom:304" class="idref" href="#iom:304"><span class="id" title="binder">iom</span></a> <a id="oom:305" class="idref" href="#oom:305"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:301"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:302"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom:304"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':303"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom:305"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a>  <a class="idref" href="CasperCBC.VLSM.Common.html#s:302"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#l:301"><span class="id" title="variable">l</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#iom:304"><span class="id" title="variable">iom</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#s':303"><span class="id" title="variable">s'</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#oom:305"><span class="id" title="variable">oom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="l:306" class="idref" href="#l:306"><span class="id" title="binder">l</span></a> <a id="s:307" class="idref" href="#s:307"><span class="id" title="binder">s</span></a> <a id="s':308" class="idref" href="#s':308"><span class="id" title="binder">s'</span></a> <a id="iom:309" class="idref" href="#iom:309"><span class="id" title="binder">iom</span></a> <a id="oom:310" class="idref" href="#oom:310"><span class="id" title="binder">oom</span></a> <a id="Hptrans:311" class="idref" href="#Hptrans:311"><span class="id" title="binder">Hptrans</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':308"><span class="id" title="variable">s'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_empty"><span class="id" title="constructor">finite_ptrace_empty</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':308"><span class="id" title="variable">s'</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_destination"><span class="id" title="lemma">protocol_transition_destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Hptrans:311"><span class="id" title="variable">Hptrans</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#Hptrans:311"><span class="id" title="variable">Hptrans</span></a>.<br/>

<br/>
</div>

<div class="doc">
To complete our definition of a finite protocol trace, we must also guarantee that <tt>start</tt> is an
initial state according to the protocol.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="finite_protocol_trace" class="idref" href="#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> (<a id="s:312" class="idref" href="#s:312"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="ls:313" class="idref" href="#ls:313"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:312"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:313"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:312"><span class="id" title="variable">s</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a>.<br/>

<br/>
</div>

<div class="doc">
In the remainder of the section we provide various results allowing us to
decompose the above properties in proofs.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_first_valid_transition" class="idref" href="#finite_ptrace_first_valid_transition"><span class="id" title="lemma">finite_ptrace_first_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:314" class="idref" href="#s:314"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:315" class="idref" href="#tr:315"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:316" class="idref" href="#te:316"><span class="id" title="binder">te</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:317" class="idref" href="#Htr:317"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:314"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#te:316"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:315"><span class="id" title="variable">tr</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:316"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:314"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:316"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:316"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:316"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_first_pstate" class="idref" href="#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:318" class="idref" href="#s:318"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:319" class="idref" href="#tr:319"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:320" class="idref" href="#Htr:320"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:318"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:319"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:318"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hs</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_tail" class="idref" href="#finite_ptrace_tail"><span class="id" title="lemma">finite_ptrace_tail</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:321" class="idref" href="#s:321"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:322" class="idref" href="#tr:322"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:323" class="idref" href="#te:323"><span class="id" title="binder">te</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:324" class="idref" href="#Htr:324"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:321"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#te:323"><span class="id" title="variable">te</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:322"><span class="id" title="variable">tr</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:323"><span class="id" title="variable">te</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:322"><span class="id" title="variable">tr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_last_pstate" class="idref" href="#finite_ptrace_last_pstate"><span class="id" title="lemma">finite_ptrace_last_pstate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:325" class="idref" href="#s:325"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:326" class="idref" href="#tr:326"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:327" class="idref" href="#Htr:327"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:325"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:326"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:325"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:326"><span class="id" title="variable">tr</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_tail"><span class="id" title="lemma">finite_ptrace_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHtr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tr</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">tr</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;[<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_to" class="idref" href="#protocol_transition_to"><span class="id" title="lemma">protocol_transition_to</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:328" class="idref" href="#s:328"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:329" class="idref" href="#tr:329"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr1:330" class="idref" href="#tr1:330"><span class="id" title="binder">tr1</span></a> <a id="tr2:331" class="idref" href="#tr2:331"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:332" class="idref" href="#te:332"><span class="id" title="binder">te</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:333" class="idref" href="#Htr:333"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:328"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:329"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:334" class="idref" href="#Heq:334"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#tr:329"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr1:330"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#te:332"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr2:331"><span class="id" title="variable">tr2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lst1:335" class="idref" href="#lst1:335"><span class="id" title="binder">lst1</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:328"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr1:330"><span class="id" title="variable">tr1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:332"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#lst1:335"><span class="id" title="variable">lst1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:332"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:332"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:332"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> <span class="id" title="var">s</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr1</span> (<span class="id" title="var">tr1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHtr1</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr1</span> <span class="id" title="var">s</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_consecutive_valid_transition" class="idref" href="#finite_ptrace_consecutive_valid_transition"><span class="id" title="lemma">finite_ptrace_consecutive_valid_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:336" class="idref" href="#s:336"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:337" class="idref" href="#tr:337"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr1:338" class="idref" href="#tr1:338"><span class="id" title="binder">tr1</span></a> <a id="tr2:339" class="idref" href="#tr2:339"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te1:340" class="idref" href="#te1:340"><span class="id" title="binder">te1</span></a> <a id="te2:341" class="idref" href="#te2:341"><span class="id" title="binder">te2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:342" class="idref" href="#Htr:342"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:336"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:337"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:343" class="idref" href="#Heq:343"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#tr:337"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr1:338"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#te1:340"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:341"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr2:339"><span class="id" title="variable">tr2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:341"><span class="id" title="variable">te2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te1:340"><span class="id" title="variable">te1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:341"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:341"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te2:341"><span class="id" title="variable">te2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <span class="id" title="var">te2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">tr2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_to"><span class="id" title="lemma">protocol_transition_to</span></a> <span class="id" title="var">s</span> <span class="id" title="var">tr</span> (<span class="id" title="var">tr1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">te1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">tr2</span> <span class="id" title="var">te2</span> <span class="id" title="var">Htr</span> <span class="id" title="var">Heq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last_is_last"><span class="id" title="lemma">finite_trace_last_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_trace_output_is_protocol" class="idref" href="#protocol_trace_output_is_protocol"><span class="id" title="lemma">protocol_trace_output_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="is:344" class="idref" href="#is:344"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:345" class="idref" href="#tr:345"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:346" class="idref" href="#Htr:346"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:344"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:345"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:347" class="idref" href="#m:347"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Houtput:348" class="idref" href="#Houtput:348"><span class="id" title="binder">Houtput</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:347"><span class="id" title="variable">m</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:345"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:347"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Houtput</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_out"><span class="id" title="lemma">protocol_transition_out</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHHoutput</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_trace_input_is_protocol" class="idref" href="#protocol_trace_input_is_protocol"><span class="id" title="lemma">protocol_trace_input_is_protocol</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="is:349" class="idref" href="#is:349"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:350" class="idref" href="#tr:350"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:351" class="idref" href="#Htr:351"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:349"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:350"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:352" class="idref" href="#m:352"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinput:353" class="idref" href="#Hinput:353"><span class="id" title="binder">Hinput</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">List.Exists</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#field_selector"><span class="id" title="definition">field_selector</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:352"><span class="id" title="variable">m</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:350"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:352"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="keyword">is</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hinput</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_in"><span class="id" title="lemma">protocol_transition_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHHinput</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="first_transition_valid" class="idref" href="#first_transition_valid"><span class="id" title="lemma">first_transition_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:354" class="idref" href="#s:354"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="te:355" class="idref" href="#te:355"><span class="id" title="binder">te</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:354"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#te:355"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:355"><span class="id" title="variable">te</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:354"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:355"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:355"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#te:355"><span class="id" title="variable">te</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">te</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_destination"><span class="id" title="lemma">protocol_transition_destination</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hdestination0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; [|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extend_right_finite_trace_from" class="idref" href="#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:356" class="idref" href="#s1:356"><span class="id" title="binder">s1</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ts:357" class="idref" href="#ts:357"><span class="id" title="binder">ts</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht12:358" class="idref" href="#Ht12:358"><span class="id" title="binder">Ht12</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:356"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ts:357"><span class="id" title="variable">ts</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l3:359" class="idref" href="#l3:359"><span class="id" title="binder">l3</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s2:360" class="idref" href="#s2:360"><span class="id" title="binder">s2</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:356"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ts:357"><span class="id" title="variable">ts</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="iom3:361" class="idref" href="#iom3:361"><span class="id" title="binder">iom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s3:362" class="idref" href="#s3:362"><span class="id" title="binder">s3</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="oom3:363" class="idref" href="#oom3:363"><span class="id" title="binder">oom3</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv23:364" class="idref" href="#Hv23:364"><span class="id" title="binder">Hv23</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l3:359"><span class="id" title="variable">l3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s2:360"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom3:361"><span class="id" title="variable">iom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s3:362"><span class="id" title="variable">s3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom3:363"><span class="id" title="variable">oom3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:356"><span class="id" title="variable">s1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#ts:357"><span class="id" title="variable">ts</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#l3:359"><span class="id" title="variable">l3</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#s3:362"><span class="id" title="variable">s3</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#iom3:361"><span class="id" title="variable">iom3</span></a>; <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#oom3:363"><span class="id" title="variable">oom3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">|}]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ht12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_singleton"><span class="id" title="definition">finite_ptrace_singleton</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHt12</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHt12</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s2</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv23</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We can now prove several general properties of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a></span>s. For example,
the following lemma states that given two such traces, such that the latter's starting state
is equal to the former's last state, it is possible to <i>concatenate</i> them into a single
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a></span>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_app_iff" class="idref" href="#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> (<a id="s:365" class="idref" href="#s:365"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="ls:366" class="idref" href="#ls:366"><span class="id" title="binder">ls</span></a> <a id="ls':367" class="idref" href="#ls':367"><span class="id" title="binder">ls'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="s':368" class="idref" href="#s':368"><span class="id" title="binder">s'</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:365"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:366"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:365"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:366"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s':368"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls':367"><span class="id" title="variable">ls'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:365"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#ls:366"><span class="id" title="variable">ls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls':367"><span class="id" title="variable">ls'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ls</span>;<span class="id" title="tactic">intro</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last_nil"><span class="id" title="lemma">finite_trace_last_nil</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> (<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_empty"><span class="id" title="constructor">finite_ptrace_empty</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last_cons"><span class="id" title="lemma">finite_trace_last_cons</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHls</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hal</span> <span class="id" title="var">Hl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hal</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span>;<span class="id" title="tactic">split</span>|];<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHls</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[<span class="id" title="tactic">constructor</span>|];<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Several other lemmas in this vein are necessary for proving results regarding
traces.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_prefix" class="idref" href="#finite_protocol_trace_from_prefix"><span class="id" title="lemma">finite_protocol_trace_from_prefix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:369" class="idref" href="#s:369"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:370" class="idref" href="#ls:370"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:371" class="idref" href="#Htr:371"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:369"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:370"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n:372" class="idref" href="#n:372"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:369"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:370"><span class="id" title="variable">ls</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:372"><span class="id" title="variable">n</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_suffix"><span class="id" title="lemma">list_prefix_suffix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdecompose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hdecompose</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpr</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_suffix" class="idref" href="#finite_protocol_trace_from_suffix"><span class="id" title="lemma">finite_protocol_trace_from_suffix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:373" class="idref" href="#s:373"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:374" class="idref" href="#ls:374"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:375" class="idref" href="#Htr:375"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:373"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:374"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n:376" class="idref" href="#n:376"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="nth:377" class="idref" href="#nth:377"><span class="id" title="binder">nth</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hnth:378" class="idref" href="#Hnth:378"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:373"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:374"><span class="id" title="variable">ls</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:376"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#nth:377"><span class="id" title="variable">nth</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#nth:377"><span class="id" title="variable">nth</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_suffix"><span class="id" title="definition">list_suffix</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:374"><span class="id" title="variable">ls</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n:376"><span class="id" title="variable">n</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_suffix"><span class="id" title="lemma">list_prefix_suffix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <span class="id" title="var">s</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <span class="id" title="var">ls</span> <span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> <span class="id" title="var">nth</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>;[<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth_first"><span class="id" title="lemma">finite_trace_nth_first</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">Hnth</span> <span class="id" title="keyword">as</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ls</span>;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_nth_last"><span class="id" title="lemma">list_prefix_nth_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_segment" class="idref" href="#finite_protocol_trace_from_segment"><span class="id" title="lemma">finite_protocol_trace_from_segment</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:379" class="idref" href="#s:379"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:380" class="idref" href="#ls:380"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:381" class="idref" href="#Htr:381"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:379"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:380"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n1:382" class="idref" href="#n1:382"><span class="id" title="binder">n1</span></a> <a id="n2:383" class="idref" href="#n2:383"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hle:384" class="idref" href="#Hle:384"><span class="id" title="binder">Hle</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#n1:382"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n2:383"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="n1th:385" class="idref" href="#n1th:385"><span class="id" title="binder">n1th</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hnth:386" class="idref" href="#Hnth:386"><span class="id" title="binder">Hnth</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:379"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:380"><span class="id" title="variable">ls</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n1:382"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n1th:385"><span class="id" title="variable">n1th</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n1th:385"><span class="id" title="variable">n1th</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_segment"><span class="id" title="definition">list_segment</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:380"><span class="id" title="variable">ls</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n1:382"><span class="id" title="variable">n1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#n2:383"><span class="id" title="variable">n2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_suffix"><span class="id" title="lemma">finite_protocol_trace_from_suffix</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_prefix"><span class="id" title="lemma">finite_protocol_trace_from_prefix</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span>;[<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_nth"><span class="id" title="definition">finite_trace_nth</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_nth"><span class="id" title="lemma">list_prefix_nth</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Having defined <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s, we now connect them to protocol states
and messages, in the following sense: for each state-message pair (<tt>s</tt>, <tt>m</tt>)
that has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty, there exists a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span> which ends
in <tt>s</tt> by outputting <tt>m</tt> 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_is_trace" class="idref" href="#protocol_is_trace"><span class="id" title="lemma">protocol_is_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:550" class="idref" href="#s:550"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:551" class="idref" href="#om:551"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hp:552" class="idref" href="#Hp:552"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:550"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:551"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:550"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:553" class="idref" href="#is:553"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:554" class="idref" href="#tr:554"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_to"><span class="id" title="definition">finite_protocol_trace_init_to</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:553"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:550"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:554"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:554"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:551"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_run"><span class="id" title="lemma">protocol_is_run</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">Hp</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">vr</span> <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#run_is_trace"><span class="id" title="lemma">run_is_trace</span></a> <span class="id" title="var">vr</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">vr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">Hvr</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transitions"><span class="id" title="projection">transitions</span></a> <span class="id" title="var">r</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Htrace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hvr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrace</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">s0</span> <span class="id" title="var">His</span>]. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">ts</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htrace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#start"><span class="id" title="projection">start</span></a> <span class="id" title="var">r</span>). <span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transitions"><span class="id" title="projection">transitions</span></a> <span class="id" title="var">r</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htrace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_run_last_final"><span class="id" title="lemma">vlsm_run_last_final</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">r</span> <span class="id" title="var">Hvr</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htrace</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">Hom</span>];[<span class="id" title="tactic">discriminate</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_add_last"><span class="id" title="lemma">finite_protocol_trace_init_add_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#last_error_destination_last"><span class="id" title="lemma">last_error_destination_last</span></a>];<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Giving a trace for <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a></span> can be stated more
        simply than <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_trace"><span class="id" title="lemma">protocol_is_trace</span></a></span>, because we don't need a
        disjunction because we are not making claims about <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a></span>
        messages.
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_state_has_trace" class="idref" href="#protocol_state_has_trace"><span class="id" title="lemma">protocol_state_has_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:555" class="idref" href="#s:555"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hp:556" class="idref" href="#Hp:556"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:555"><span class="id" title="variable">s</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:557" class="idref" href="#is:557"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:558" class="idref" href="#tr:558"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_to"><span class="id" title="definition">finite_protocol_trace_init_to</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:557"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:555"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:558"><span class="id" title="variable">tr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_trace"><span class="id" title="lemma">protocol_is_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinit</span>|<span class="id" title="var">Htrace</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htrace</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Any trace with the 'finite_protocol_trace_from' property can be completed
    (to the left) to start in an initial state
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_complete_left" class="idref" href="#finite_protocol_trace_from_complete_left"><span class="id" title="lemma">finite_protocol_trace_from_complete_left</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:559" class="idref" href="#s:559"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:560" class="idref" href="#tr:560"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:561" class="idref" href="#Htr:561"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:559"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:560"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:562" class="idref" href="#is:562"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="trs:563" class="idref" href="#trs:563"><span class="id" title="binder">trs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:562"><span class="id" title="variable">is</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#trs:563"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:560"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:562"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#trs:563"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:559"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_has_trace"><span class="id" title="lemma">protocol_state_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">trs</span> [<span class="id" title="var">Htrs</span> <span class="id" title="var">His</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">trs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_last"><span class="id" title="lemma">finite_protocol_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrs</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlast</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_forget_last"><span class="id" title="lemma">finite_protocol_trace_from_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">split</span> || <span class="id" title="tactic">assumption</span> ||<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Any trace with the 'finite_protocol_trace_from_to' property can be completed
    (to the left) to start in an initial state
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="finite_protocol_trace_from_to_complete_left" class="idref" href="#finite_protocol_trace_from_to_complete_left"><span class="id" title="lemma">finite_protocol_trace_from_to_complete_left</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:564" class="idref" href="#s:564"><span class="id" title="binder">s</span></a> <a id="f:565" class="idref" href="#f:565"><span class="id" title="binder">f</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:566" class="idref" href="#tr:566"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htr:567" class="idref" href="#Htr:567"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to"><span class="id" title="inductive">finite_protocol_trace_from_to</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:564"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:565"><span class="id" title="variable">f</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:566"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:568" class="idref" href="#is:568"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="trs:569" class="idref" href="#trs:569"><span class="id" title="binder">trs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_to"><span class="id" title="definition">finite_protocol_trace_init_to</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:568"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:565"><span class="id" title="variable">f</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#trs:569"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:566"><span class="id" title="variable">tr</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:568"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#trs:569"><span class="id" title="variable">trs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:564"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <span class="id" title="var">s</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_forget_last"><span class="id" title="lemma">finite_protocol_trace_from_to_forget_last</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_has_trace"><span class="id" title="lemma">protocol_state_has_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">trs</span> [<span class="id" title="var">Htrs</span> <span class="id" title="var">His</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">trs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_app"><span class="id" title="lemma">finite_protocol_trace_from_to_app</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">s</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_last"><span class="id" title="lemma">finite_protocol_trace_from_to_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrs</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Another benefit of defining traces is that we can succintly
describe indirect transitions between arbitrary pairs of states.

<div class="paragraph"> </div>

We say that state <tt>second</tt> is in state <tt>first</tt>'s futures if
there exists a finite (possibly empty) protocol trace that begins
with <tt>first</tt> and ends in <tt>second</tt>.

<div class="paragraph"> </div>

This relation is often used in stating safety and liveness properties.
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="in_futures" class="idref" href="#in_futures"><span class="id" title="definition">in_futures</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="first:570" class="idref" href="#first:570"><span class="id" title="binder">first</span></a> <a id="second:571" class="idref" href="#second:571"><span class="id" title="binder">second</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:572" class="idref" href="#tr:572"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to"><span class="id" title="inductive">finite_protocol_trace_from_to</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#first:570"><span class="id" title="variable">first</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#second:571"><span class="id" title="variable">second</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:572"><span class="id" title="variable">tr</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="in_futures_preserving" class="idref" href="#in_futures_preserving"><span class="id" title="lemma">in_futures_preserving</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="R:573" class="idref" href="#R:573"><span class="id" title="binder">R</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpre:574" class="idref" href="#Hpre:574"><span class="id" title="binder">Hpre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#PreOrder"><span class="id" title="class">PreOrder</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#R:573"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:575" class="idref" href="#Ht:575"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_preserving"><span class="id" title="definition">protocol_transition_preserving</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#R:573"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:576" class="idref" href="#s1:576"><span class="id" title="binder">s1</span></a> <a id="s2:577" class="idref" href="#s2:577"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hin:578" class="idref" href="#Hin:578"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:576"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:577"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#R:573"><span class="id" title="variable">R</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:576"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:577"><span class="id" title="variable">s2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Ht</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">s</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="eq_equiv" class="idref" href="#eq_equiv"><span class="id" title="instance">eq_equiv</span></a> : @<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#Equivalence"><span class="id" title="class">Equivalence</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> := <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="in_futures_strict_preserving" class="idref" href="#in_futures_strict_preserving"><span class="id" title="lemma">in_futures_strict_preserving</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="R:579" class="idref" href="#R:579"><span class="id" title="binder">R</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpre:580" class="idref" href="#Hpre:580"><span class="id" title="binder">Hpre</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#StrictOrder"><span class="id" title="class">StrictOrder</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#R:579"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:581" class="idref" href="#Ht:581"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition_preserving"><span class="id" title="definition">protocol_transition_preserving</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#R:579"><span class="id" title="variable">R</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:582" class="idref" href="#s1:582"><span class="id" title="binder">s1</span></a> <a id="s2:583" class="idref" href="#s2:583"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hin:584" class="idref" href="#Hin:584"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:582"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:583"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hneq:585" class="idref" href="#Hneq:585"><span class="id" title="binder">Hneq</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#s1:582"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:583"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#R:579"><span class="id" title="variable">R</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:582"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:583"><span class="id" title="variable">s2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.Morphisms.html#StrictOrder_PreOrder"><span class="id" title="lemma">StrictOrder_PreOrder</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#eq_equiv"><span class="id" title="instance">eq_equiv</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_preserving"><span class="id" title="lemma">in_futures_preserving</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Classes.RelationClasses.html#relation_disjunction"><span class="id" title="definition">relation_disjunction</span></a> <span class="id" title="var">R</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <span class="id" title="var">Hpre</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hpreserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hpreserve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Ht</span> <span class="id" title="var">s3</span> <span class="id" title="var">s4</span> <span class="id" title="var">l1</span> <span class="id" title="var">om1</span> <span class="id" title="var">om2</span> <span class="id" title="var">Hprotocol</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">Hpreserve</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpreserve</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">y1</span> <span class="id" title="var">y2</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="in_futures_protocol_fst" class="idref" href="#in_futures_protocol_fst"><span class="id" title="lemma">in_futures_protocol_fst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="first:586" class="idref" href="#first:586"><span class="id" title="binder">first</span></a> <a id="second:587" class="idref" href="#second:587"><span class="id" title="binder">second</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfuture:588" class="idref" href="#Hfuture:588"><span class="id" title="binder">Hfuture</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#first:586"><span class="id" title="variable">first</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#second:587"><span class="id" title="variable">second</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#first:586"><span class="id" title="variable">first</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfuture</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_forget_last"><span class="id" title="lemma">finite_protocol_trace_from_to_forget_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Stating livness properties will require quantifying over complete
executions of the protocol. To make this possible, we will now define
<i>complete</i> <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s.

<div class="paragraph"> </div>

A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span> is <i>terminating</i> if there's no other <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>
that contains it as a prefix.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="terminating_trace_prop" class="idref" href="#terminating_trace_prop"><span class="id" title="definition">terminating_trace_prop</span></a> (<a id="tr:663" class="idref" href="#tr:663"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:663"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:665" class="idref" href="#tr:665"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="last:666" class="idref" href="#last:666"><span class="id" title="binder">last</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_prefix"><span class="id" title="definition">trace_prefix</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:665"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#last:666"><span class="id" title="variable">last</span></a> <span class="id" title="var">ls</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span> is <i>complete</i>, if it is either <i>terminating</i> or infinite.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="complete_trace_prop" class="idref" href="#complete_trace_prop"><span class="id" title="definition">complete_trace_prop</span></a> (<a id="tr:667" class="idref" href="#tr:667"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:667"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:667"><span class="id" title="variable">tr</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#terminating_trace_prop"><span class="id" title="definition">terminating_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:667"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="section">VLSM</span></a>.<br/>

<br/>
</div>

<div class="doc">
Make all arguments of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_ind"><span class="id" title="lemma">protocol_state_prop_ind</span></a></span> explicit
    so it will work with the <tt>induction using</tt> tactic.
    (closing the section added <tt>{message}</tt> as an implicit argument)
 
</div>
<div class="code">
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_ind"><span class="id" title="lemma">protocol_state_prop_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_ind"><span class="id" title="definition">finite_protocol_trace_from_to_ind</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#extend_right_finite_trace_from"><span class="id" title="lemma">extend_right_finite_trace_from</span></a> [<span class="id" title="var">message</span>] (<span class="id" title="var">X</span>) [<span class="id" title="var">s1</span>] [<span class="id" title="var">ts</span>] (<span class="id" title="var">Ht12</span>) [<span class="id" title="var">l3</span>] [<span class="id" title="var">iom3</span>] [<span class="id" title="var">s3</span>] [<span class="id" title="var">oom3</span>] (<span class="id" title="var">Hv23</span>).<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="CasperCBC.VLSM.Common.html#extend_right_finite_trace_from_to"><span class="id" title="lemma">extend_right_finite_trace_from_to</span></a> [<span class="id" title="var">message</span>] (<span class="id" title="var">X</span>) [<span class="id" title="var">s1</span>] [<span class="id" title="var">s2</span>] [<span class="id" title="var">ts</span>] (<span class="id" title="var">Ht12</span>) [<span class="id" title="var">l3</span>] [<span class="id" title="var">iom3</span>] [<span class="id" title="var">s3</span>] [<span class="id" title="var">oom3</span>] (<span class="id" title="var">Hv23</span>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="TraceWithLast" class="idref" href="#TraceWithLast"><span class="id" title="record">TraceWithLast</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="base_prop:675" class="idref" href="#base_prop:675"><span class="id" title="binder">base_prop</span></a> : <span class="id" title="keyword">forall</span> {<a id="message:673" class="idref" href="#message:673"><span class="id" title="binder">message</span></a>} (<a id="X:674" class="idref" href="#X:674"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:673"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <span class="id" title="var">_</span> (@<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Common.html#X:674"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trace_prop:678" class="idref" href="#trace_prop:678"><span class="id" title="binder">trace_prop</span></a> : <span class="id" title="keyword">forall</span> {<a id="message:676" class="idref" href="#message:676"><span class="id" title="binder">message</span></a>} (<a id="X:677" class="idref" href="#X:677"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:676"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;&nbsp;{<a id="ptrace_add_last" class="idref" href="#ptrace_add_last"><span class="id" title="projection">ptrace_add_last</span></a>: <span class="id" title="keyword">forall</span> [<a id="msg:680" class="idref" href="#msg:680"><span class="id" title="binder">msg</span></a>] [<a id="X:681" class="idref" href="#X:681"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:680"><span class="id" title="variable">msg</span></a>] [<a id="s:682" class="idref" href="#s:682"><span class="id" title="binder">s</span></a> <a id="f:683" class="idref" href="#f:683"><span class="id" title="binder">f</span></a> <a id="tr:684" class="idref" href="#tr:684"><span class="id" title="binder">tr</span></a>],<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#base_prop:675"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:681"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:682"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:684"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:682"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:684"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:683"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#trace_prop:678"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:681"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:682"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:683"><span class="id" title="variable">f</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:684"><span class="id" title="variable">tr</span></a>;<br/>
&nbsp;&nbsp;&nbsp;<a id="ptrace_get_last" class="idref" href="#ptrace_get_last"><span class="id" title="projection">ptrace_get_last</span></a>: <span class="id" title="keyword">forall</span> [<a id="msg:686" class="idref" href="#msg:686"><span class="id" title="binder">msg</span></a>] [<a id="X:687" class="idref" href="#X:687"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:686"><span class="id" title="variable">msg</span></a>] [<a id="s:688" class="idref" href="#s:688"><span class="id" title="binder">s</span></a> <a id="f:689" class="idref" href="#f:689"><span class="id" title="binder">f</span></a> <a id="tr:690" class="idref" href="#tr:690"><span class="id" title="binder">tr</span></a>],<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_prop:678"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:687"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:688"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:689"><span class="id" title="variable">f</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:690"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:688"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:690"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:689"><span class="id" title="variable">f</span></a>;<br/>
&nbsp;&nbsp;&nbsp;<a id="ptrace_last_pstate" class="idref" href="#ptrace_last_pstate"><span class="id" title="projection">ptrace_last_pstate</span></a>: <span class="id" title="keyword">forall</span> [<a id="msg:692" class="idref" href="#msg:692"><span class="id" title="binder">msg</span></a>] [<a id="X:693" class="idref" href="#X:693"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:692"><span class="id" title="variable">msg</span></a>] [<a id="s:694" class="idref" href="#s:694"><span class="id" title="binder">s</span></a> <a id="f:695" class="idref" href="#f:695"><span class="id" title="binder">f</span></a> <a id="tr:696" class="idref" href="#tr:696"><span class="id" title="binder">tr</span></a>],<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_prop:678"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:693"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:694"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:695"><span class="id" title="variable">f</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:696"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:693"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:695"><span class="id" title="variable">f</span></a>;<br/>
&nbsp;&nbsp;&nbsp;<a id="ptrace_forget_last" class="idref" href="#ptrace_forget_last"><span class="id" title="projection">ptrace_forget_last</span></a>: <span class="id" title="keyword">forall</span> [<a id="msg:698" class="idref" href="#msg:698"><span class="id" title="binder">msg</span></a>] [<a id="X:699" class="idref" href="#X:699"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:698"><span class="id" title="variable">msg</span></a>] [<a id="s:700" class="idref" href="#s:700"><span class="id" title="binder">s</span></a> <a id="f:701" class="idref" href="#f:701"><span class="id" title="binder">f</span></a> <a id="tr:702" class="idref" href="#tr:702"><span class="id" title="binder">tr</span></a>],<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_prop:678"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:699"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:700"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:701"><span class="id" title="variable">f</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:702"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#base_prop:675"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:699"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:700"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:702"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> - ! : <span class="id" title="var">typeclass_instances</span>.<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> ! - : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ptrace_add_default_last" class="idref" href="#ptrace_add_default_last"><span class="id" title="definition">ptrace_add_default_last</span></a><br/>
&nbsp;&nbsp;`{<a id="H:706" class="idref" href="#H:706"><span class="id" title="binder">TraceWithLast</span></a> <a id="H:706" class="idref" href="#H:706"><span class="id" title="binder">base_prop</span></a> <a id="H:706" class="idref" href="#H:706"><span class="id" title="binder">trace_prop</span></a>}<br/>
&nbsp;&nbsp;[<a id="msg:707" class="idref" href="#msg:707"><span class="id" title="binder">msg</span></a>] [<a id="X:708" class="idref" href="#X:708"><span class="id" title="binder">X</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:707"><span class="id" title="variable">msg</span></a>] [<a id="s:709" class="idref" href="#s:709"><span class="id" title="binder">s</span></a> <a id="tr:710" class="idref" href="#tr:710"><span class="id" title="binder">tr</span></a>] (<a id="Htr:711" class="idref" href="#Htr:711"><span class="id" title="binder">Htr</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#base_prop:704"><span class="id" title="variable">base_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:707"><span class="id" title="variable">msg</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:708"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:709"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:710"><span class="id" title="variable">tr</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#trace_prop:705"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#msg:707"><span class="id" title="variable">msg</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:708"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:709"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_trace_last"><span class="id" title="definition">finite_trace_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:709"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:710"><span class="id" title="variable">tr</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#tr:710"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_add_last"><span class="id" title="method">ptrace_add_last</span></a>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="trace_with_last_ptrace_from" class="idref" href="#trace_with_last_ptrace_from"><span class="id" title="instance">trace_with_last_ptrace_from</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a>) (@<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to"><span class="id" title="inductive">finite_protocol_trace_from_to</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_add_last"><span class="id" title="method">ptrace_add_last</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_add_last"><span class="id" title="lemma">finite_protocol_trace_from_add_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_get_last"><span class="id" title="method">ptrace_get_last</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_last"><span class="id" title="lemma">finite_protocol_trace_from_to_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_last_pstate"><span class="id" title="method">ptrace_last_pstate</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_last_pstate"><span class="id" title="lemma">finite_protocol_trace_from_to_last_pstate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_forget_last"><span class="id" title="method">ptrace_forget_last</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to_forget_last"><span class="id" title="lemma">finite_protocol_trace_from_to_forget_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="trace_with_last_ptrace_init" class="idref" href="#trace_with_last_ptrace_init"><span class="id" title="instance">trace_with_last_ptrace_init</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithLast"><span class="id" title="class">TraceWithLast</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a>) (@<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_to"><span class="id" title="definition">finite_protocol_trace_init_to</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_add_last"><span class="id" title="method">ptrace_add_last</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_add_last"><span class="id" title="lemma">finite_protocol_trace_init_add_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_get_last"><span class="id" title="method">ptrace_get_last</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_to_last"><span class="id" title="lemma">finite_protocol_trace_init_to_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_last_pstate"><span class="id" title="method">ptrace_last_pstate</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a id="H:712" class="idref" href="#H:712"><span class="id" title="binder">H</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_last_pstate"><span class="id" title="method">ptrace_last_pstate</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#H:712"><span class="id" title="variable">H</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_forget_last"><span class="id" title="method">ptrace_forget_last</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_to_forget_last"><span class="id" title="lemma">finite_protocol_trace_init_to_forget_last</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="TraceWithStart" class="idref" href="#TraceWithStart"><span class="id" title="record">TraceWithStart</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:713" class="idref" href="#message:713"><span class="id" title="binder">message</span></a>} {<a id="X:714" class="idref" href="#X:714"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:713"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="start:715" class="idref" href="#start:715"><span class="id" title="binder">start</span></a> : @<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:713"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:714"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trace_prop:716" class="idref" href="#trace_prop:716"><span class="id" title="binder">trace_prop</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:714"><span class="id" title="variable">X</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) :=<br/>
&nbsp;{<a id="ptrace_first_pstate" class="idref" href="#ptrace_first_pstate"><span class="id" title="projection">ptrace_first_pstate</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> [<a id="tr:718" class="idref" href="#tr:718"><span class="id" title="binder">tr</span></a>], <a class="idref" href="CasperCBC.VLSM.Common.html#trace_prop:716"><span class="id" title="variable">trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:718"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:714"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#start:715"><span class="id" title="variable">start</span></a><br/>
&nbsp;}.<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="var">Mode</span> <a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> - - - ! : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="trace_with_start_ptrace_from" class="idref" href="#trace_with_start_ptrace_from"><span class="id" title="instance">trace_with_start_ptrace_from</span></a> <a id="message:720" class="idref" href="#message:720"><span class="id" title="binder">message</span></a> (<a id="X:721" class="idref" href="#X:721"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:720"><span class="id" title="variable">message</span></a>) <a id="s:722" class="idref" href="#s:722"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:722"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:721"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:722"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_first_pstate"><span class="id" title="method">ptrace_first_pstate</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_first_pstate"><span class="id" title="lemma">finite_ptrace_first_pstate</span></a> <span class="id" title="var">X</span> <span class="id" title="var">s</span>}.<br/>
<span class="id" title="keyword">Instance</span> <a id="trace_with_start_ptrace" class="idref" href="#trace_with_start_ptrace"><span class="id" title="instance">trace_with_start_ptrace</span></a> <a id="message:723" class="idref" href="#message:723"><span class="id" title="binder">message</span></a> (<a id="X:724" class="idref" href="#X:724"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:723"><span class="id" title="variable">message</span></a>) <a id="s:725" class="idref" href="#s:725"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:725"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:724"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:725"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_first_pstate"><span class="id" title="method">ptrace_first_pstate</span></a> <a id="tr:726" class="idref" href="#tr:726"><span class="id" title="binder">tr</span></a> <a id="H:727" class="idref" href="#H:727"><span class="id" title="binder">H</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_first_pstate"><span class="id" title="method">ptrace_first_pstate</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#H:727"><span class="id" title="variable">H</span></a>)}.<br/>
<span class="id" title="keyword">Instance</span> <a id="trace_with_start_ptrace_from_to" class="idref" href="#trace_with_start_ptrace_from_to"><span class="id" title="instance">trace_with_start_ptrace_from_to</span></a> <a id="message:728" class="idref" href="#message:728"><span class="id" title="binder">message</span></a> (<a id="X:729" class="idref" href="#X:729"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:728"><span class="id" title="variable">message</span></a>) <a id="s:730" class="idref" href="#s:730"><span class="id" title="binder">s</span></a> <a id="f:731" class="idref" href="#f:731"><span class="id" title="binder">f</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:730"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_to"><span class="id" title="inductive">finite_protocol_trace_from_to</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:729"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:730"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:731"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_first_pstate"><span class="id" title="method">ptrace_first_pstate</span></a> <a id="tr:732" class="idref" href="#tr:732"><span class="id" title="binder">tr</span></a> <a id="H:733" class="idref" href="#H:733"><span class="id" title="binder">H</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_first_pstate"><span class="id" title="method">ptrace_first_pstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_forget_last"><span class="id" title="method">ptrace_forget_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#H:733"><span class="id" title="variable">H</span></a>)}.<br/>
<span class="id" title="keyword">Instance</span> <a id="trace_with_start_ptrace_init_to" class="idref" href="#trace_with_start_ptrace_init_to"><span class="id" title="instance">trace_with_start_ptrace_init_to</span></a> <a id="message:734" class="idref" href="#message:734"><span class="id" title="binder">message</span></a> (<a id="X:735" class="idref" href="#X:735"><span class="id" title="binder">X</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:734"><span class="id" title="variable">message</span></a>) <a id="s:736" class="idref" href="#s:736"><span class="id" title="binder">s</span></a> <a id="f:737" class="idref" href="#f:737"><span class="id" title="binder">f</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#TraceWithStart"><span class="id" title="class">TraceWithStart</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:736"><span class="id" title="variable">s</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_init_to"><span class="id" title="definition">finite_protocol_trace_init_to</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:735"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:736"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#f:737"><span class="id" title="variable">f</span></a>)<br/>
&nbsp;&nbsp;:= {<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_first_pstate"><span class="id" title="method">ptrace_first_pstate</span></a> <a id="tr:738" class="idref" href="#tr:738"><span class="id" title="binder">tr</span></a> <a id="H:739" class="idref" href="#H:739"><span class="id" title="binder">H</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_first_pstate"><span class="id" title="method">ptrace_first_pstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_forget_last"><span class="id" title="method">ptrace_forget_last</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#H:739"><span class="id" title="variable">H</span></a>)}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab51"></a><h3 class="section">VLSM Inclusion and Equality</h3>


<div class="paragraph"> </div>

We can also define VLSM <i>inclusion</i>  and <i>equality</i> in terms of traces.
When both VLSMs have the same state and label types they also share the
same <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a></span> type, and sets of traces can be compared without conversion.
<ul class="doclist">
<li> VLSM X is <i>included</i> in VLSM Y if every <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span> available to X

</li>
</ul>
is also available to Y.
<ul class="doclist">
<li> VLSM X and VLSM Y are <i>equal</i> if their <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s are exactly the same.

</li>
</ul>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_equality" class="idref" href="#VLSM_equality"><span class="id" title="section">VLSM_equality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:740" class="idref" href="#message:740"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="vtype:741" class="idref" href="#vtype:741"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:740"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM_eq_part" class="idref" href="#VLSM_eq_part"><span class="id" title="definition">VLSM_eq_part</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="SigX:742" class="idref" href="#SigX:742"><span class="id" title="binder">SigX</span></a> <a id="SigY:743" class="idref" href="#SigY:743"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality.vtype"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:744" class="idref" href="#MX:744"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:742"><span class="id" title="variable">SigX</span></a>) (<a id="MY:745" class="idref" href="#MY:745"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:743"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:746" class="idref" href="#X:746"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:744"><span class="id" title="variable">MX</span></a>) (<a id="Y:747" class="idref" href="#Y:747"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:745"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="t:748" class="idref" href="#t:748"><span class="id" title="binder">t</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:746"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t:748"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:747"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t:748"><span class="id" title="variable">t</span></a> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> <a id="VLSM_eq" class="idref" href="#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_part"><span class="id" title="definition">VLSM_eq_part</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">Y</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="VLSM_incl_part" class="idref" href="#VLSM_incl_part"><span class="id" title="definition">VLSM_incl_part</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="SigX:749" class="idref" href="#SigX:749"><span class="id" title="binder">SigX</span></a> <a id="SigY:750" class="idref" href="#SigY:750"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality.vtype"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:751" class="idref" href="#MX:751"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:749"><span class="id" title="variable">SigX</span></a>) (<a id="MY:752" class="idref" href="#MY:752"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:750"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:753" class="idref" href="#X:753"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:751"><span class="id" title="variable">MX</span></a>) (<a id="Y:754" class="idref" href="#Y:754"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:752"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="t:755" class="idref" href="#t:755"><span class="id" title="binder">t</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:753"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t:755"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:754"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#t:755"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> <a id="VLSM_incl" class="idref" href="#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_part"><span class="id" title="definition">VLSM_incl_part</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">Y</span>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_trans" class="idref" href="#VLSM_incl_trans"><span class="id" title="lemma">VLSM_incl_trans</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="SigX:756" class="idref" href="#SigX:756"><span class="id" title="binder">SigX</span></a> <a id="SigY:757" class="idref" href="#SigY:757"><span class="id" title="binder">SigY</span></a> <a id="SigZ:758" class="idref" href="#SigZ:758"><span class="id" title="binder">SigZ</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality.vtype"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:759" class="idref" href="#MX:759"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:756"><span class="id" title="variable">SigX</span></a>) (<a id="MY:760" class="idref" href="#MY:760"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:757"><span class="id" title="variable">SigY</span></a>) (<a id="MZ:761" class="idref" href="#MZ:761"><span class="id" title="binder">MZ</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigZ:758"><span class="id" title="variable">SigZ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:762" class="idref" href="#X:762"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:759"><span class="id" title="variable">MX</span></a>) (<a id="Y:763" class="idref" href="#Y:763"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:760"><span class="id" title="variable">MY</span></a>) (<a id="Z:764" class="idref" href="#Z:764"><span class="id" title="binder">Z</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MZ:761"><span class="id" title="variable">MZ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:762"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:763"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:763"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Z:764"><span class="id" title="variable">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:762"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Z:764"><span class="id" title="variable">Z</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_in_futures" class="idref" href="#VLSM_incl_in_futures"><span class="id" title="lemma">VLSM_incl_in_futures</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="SigX:765" class="idref" href="#SigX:765"><span class="id" title="binder">SigX</span></a> <a id="SigY:766" class="idref" href="#SigY:766"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality.vtype"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:767" class="idref" href="#MX:767"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:765"><span class="id" title="variable">SigX</span></a>) (<a id="MY:768" class="idref" href="#MY:768"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:766"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:769" class="idref" href="#X:769"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:767"><span class="id" title="variable">MX</span></a>) (<a id="Y:770" class="idref" href="#Y:770"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:768"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hincl:771" class="idref" href="#Hincl:771"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:769"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:770"><span class="id" title="variable">Y</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:772" class="idref" href="#s1:772"><span class="id" title="binder">s1</span></a> <a id="s2:773" class="idref" href="#s2:773"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:769"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:769"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:772"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:773"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:770"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s1:772"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s2:773"><span class="id" title="variable">s2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hfuture</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness"><span class="id" title="lemma">in_futures_witness</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfuture</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfuture</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>] [<span class="id" title="var">n1</span> [<span class="id" title="var">n2</span> [<span class="id" title="var">Hle</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness_reverse"><span class="id" title="lemma">in_futures_witness_reverse</span></a> <span class="id" title="var">Y</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>) <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">Hle</span> <span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_equality"><span class="id" title="section">VLSM_equality</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="VLSM_eq" class="idref" href="#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_part"><span class="id" title="definition">VLSM_eq_part</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">Y</span>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="VLSM_incl" class="idref" href="#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <span class="id" title="var">X</span> <span class="id" title="var">Y</span> := (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_part"><span class="id" title="definition">VLSM_incl_part</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">Y</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_eq_sym" class="idref" href="#VLSM_eq_sym"><span class="id" title="lemma">VLSM_eq_sym</span></a><br/>
&nbsp;&nbsp;{<a id="message:863" class="idref" href="#message:863"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="vtype:864" class="idref" href="#vtype:864"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:863"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SigX:865" class="idref" href="#SigX:865"><span class="id" title="binder">SigX</span></a> <a id="SigY:866" class="idref" href="#SigY:866"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:864"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:867" class="idref" href="#MX:867"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:865"><span class="id" title="variable">SigX</span></a>) (<a id="MY:868" class="idref" href="#MY:868"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:866"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:869" class="idref" href="#X:869"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:867"><span class="id" title="variable">MX</span></a>) (<a id="Y:870" class="idref" href="#Y:870"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:868"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:869"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:870"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:870"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:869"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_eq_trans" class="idref" href="#VLSM_eq_trans"><span class="id" title="lemma">VLSM_eq_trans</span></a><br/>
&nbsp;&nbsp;{<a id="message:871" class="idref" href="#message:871"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="vtype:872" class="idref" href="#vtype:872"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:871"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SigX:873" class="idref" href="#SigX:873"><span class="id" title="binder">SigX</span></a> <a id="SigY:874" class="idref" href="#SigY:874"><span class="id" title="binder">SigY</span></a> <a id="SigZ:875" class="idref" href="#SigZ:875"><span class="id" title="binder">SigZ</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:872"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:876" class="idref" href="#MX:876"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:873"><span class="id" title="variable">SigX</span></a>) (<a id="MY:877" class="idref" href="#MY:877"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:874"><span class="id" title="variable">SigY</span></a>) (<a id="MZ:878" class="idref" href="#MZ:878"><span class="id" title="binder">MZ</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigZ:875"><span class="id" title="variable">SigZ</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:879" class="idref" href="#X:879"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:876"><span class="id" title="variable">MX</span></a>) (<a id="Y:880" class="idref" href="#Y:880"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:877"><span class="id" title="variable">MY</span></a>) (<a id="Z:881" class="idref" href="#Z:881"><span class="id" title="binder">Z</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MZ:878"><span class="id" title="variable">MZ</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:879"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:880"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:880"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Z:881"><span class="id" title="variable">Z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:879"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Z:881"><span class="id" title="variable">Z</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a></span> almost implies inclusion of the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> sets.
  Some additional hypotheses are required because <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a></span> only
  refers to traces, and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a></span> means that
  <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> includes some pairs that do not appear in any
  transition.
 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="protocol_prop_incl" class="idref" href="#protocol_prop_incl"><span class="id" title="lemma">protocol_prop_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<a id="message:882" class="idref" href="#message:882"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>] [<a id="vtype:883" class="idref" href="#vtype:883"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:882"><span class="id" title="variable">message</span></a>] [<a id="SigX:884" class="idref" href="#SigX:884"><span class="id" title="binder">SigX</span></a> <a id="SigY:885" class="idref" href="#SigY:885"><span class="id" title="binder">SigY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:883"><span class="id" title="variable">vtype</span></a>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="MX:886" class="idref" href="#MX:886"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:884"><span class="id" title="variable">SigX</span></a>) (<a id="MY:887" class="idref" href="#MY:887"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:885"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:888" class="idref" href="#X:888"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:886"><span class="id" title="variable">MX</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Y:889" class="idref" href="#Y:889"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:887"><span class="id" title="variable">MY</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:888"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:889"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="m:891" class="idref" href="#m:891"><span class="id" title="binder">m</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:888"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:891"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:889"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:891"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="som:890" class="idref" href="#som:890"><span class="id" title="binder">som</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:888"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:890"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:889"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:890"><span class="id" title="variable">som</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span> <span class="id" title="var">Hinits</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;protocol_initial&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <span class="id" title="var">Y</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hs'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>;[<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinits</span>|];<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <span class="id" title="var">X</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;protocol_generated&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">som'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <span class="id" title="var">X</span> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">som'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eexists</span>;<span class="id" title="var">eassumption</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eexists</span>;<span class="id" title="var">eassumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">som'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span> <span class="id" title="var">om'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_protocol_transition"><span class="id" title="lemma">VLSM_incl_protocol_transition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hincl</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a>;[<span class="id" title="var">eassumption</span>..|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvalid</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
It is natural to look for sufficient conditions for VLSM inclusion (or equality),
which are easy to verify in a practical setting. One such result is the following.

<div class="paragraph"> </div>

For VLSM <tt>X</tt> to be included in VLSM <tt>Y</tt>, the following set of conditions is sufficient:
<ul class="doclist">
<li> <tt>X</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span>s are included in <tt>Y</tt>'s <span class="inlinecode"><span class="id" title="var">initial</span></span> <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#state"><span class="id" title="definition">state</span></a></span>s

</li>
<li> Every message <tt>m</tt> (including the empty one) which can be input to a
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span> transition in <tt>X</tt>, is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span> in <tt>Y</tt>
<div class="paragraph"> </div>


</li>
<li> <tt>X</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span> is included in <tt>Y</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span>.

</li>
<li> For all <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span> inputs (in <tt>X</tt>), <tt>Y</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span> acts
like <tt>X</tt>'s <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span>.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="basic_VLSM_incl" class="idref" href="#basic_VLSM_incl"><span class="id" title="section">basic_VLSM_incl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:892" class="idref" href="#message:892"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="T:893" class="idref" href="#T:893"><span class="id" title="binder">T</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:892"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SX:894" class="idref" href="#SX:894"><span class="id" title="binder">SX</span></a> <a id="SY:895" class="idref" href="#SY:895"><span class="id" title="binder">SY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#T:893"><span class="id" title="variable">T</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:896" class="idref" href="#MX:896"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SX:894"><span class="id" title="variable">SX</span></a>)<br/>
&nbsp;&nbsp;(<a id="MY:897" class="idref" href="#MY:897"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SY:895"><span class="id" title="variable">SY</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:898" class="idref" href="#X:898"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:896"><span class="id" title="variable">MX</span></a>)<br/>
&nbsp;&nbsp;(<a id="Y:899" class="idref" href="#Y:899"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:897"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_finite_traces_characterization" class="idref" href="#VLSM_incl_finite_traces_characterization"><span class="id" title="lemma">VLSM_incl_finite_traces_characterization</span></a><br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="s:900" class="idref" href="#s:900"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="tr:901" class="idref" href="#tr:901"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:900"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:901"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:900"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:901"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hincl</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">tr</span>)). <span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> <span class="id" title="var">tr</span> | <span class="id" title="keyword">is</span> <span class="id" title="var">tr</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">revert</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HtrX</span> <span class="id" title="var">HisX</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">His_tr</span>: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hincl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">His_tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">His_tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">HisY</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from_prefix_rev"><span class="id" title="lemma">infinite_protocol_trace_from_prefix_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from_prefix"><span class="id" title="lemma">infinite_protocol_trace_from_prefix</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">n0</span> := <span class="id" title="var">n</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HtrX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hincl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">HtrX</span> <span class="id" title="var">HisX</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="Hinitial_state:903" class="idref" href="#Hinitial_state:903"><span class="id" title="binder">Hinitial_state</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="s:902" class="idref" href="#s:902"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:902"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:902"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="Hinitial_protocol_message:907" class="idref" href="#Hinitial_protocol_message:907"><span class="id" title="binder">Hinitial_protocol_message</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:904" class="idref" href="#l:904"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="s:905" class="idref" href="#s:905"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="m:906" class="idref" href="#m:906"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:904"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:905"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:906"><span class="id" title="variable">m</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:906"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:906"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="Hvalid:911" class="idref" href="#Hvalid:911"><span class="id" title="binder">Hvalid</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:908" class="idref" href="#l:908"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="s:909" class="idref" href="#s:909"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="om:910" class="idref" href="#om:910"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:908"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:909"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:910"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:908"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:909"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:910"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a id="Htransition:915" class="idref" href="#Htransition:915"><span class="id" title="binder">Htransition</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:912" class="idref" href="#l:912"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="s:913" class="idref" href="#s:913"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="om:914" class="idref" href="#om:914"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:912"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:913"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:914"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:912"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:913"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:914"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:912"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:913"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:914"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_props" class="idref" href="#protocol_props"><span class="id" title="lemma">protocol_props</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="som:916" class="idref" href="#som:916"><span class="id" title="binder">som</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:916"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:916"><span class="id" title="variable">som</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="l:917" class="idref" href="#l:917"><span class="id" title="binder">l</span></a> <a id="s:918" class="idref" href="#s:918"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:917"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:918"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:916"><span class="id" title="variable">som</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:916"><span class="id" title="variable">som</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">som</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_is_protocol"><span class="id" title="lemma">initial_is_protocol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hinitial_state"><span class="id" title="variable">Hinitial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">l</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>;[|<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_None"><span class="id" title="lemma">option_protocol_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hinitial_protocol_message"><span class="id" title="variable">Hinitial_protocol_message</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rename</span> <span class="id" title="var">IHprotocol_prop1</span> <span class="id" title="var">into</span> <span class="id" title="var">IHs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">IHprotocol_prop2</span> <span class="id" title="var">into</span> <span class="id" title="var">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHm</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">IHm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHs</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHs</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hpvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">eexists</span>;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">eexists</span>;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHm</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">l1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ex_intro"><span class="id" title="constructor">ex_intro</span></a> <span class="id" title="var">_</span> <span class="id" title="var">s</span> <span class="id" title="var">Hv</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hv</span> <span class="id" title="var">_om</span> <span class="id" title="var">H</span> <span class="id" title="var">_s</span> <span class="id" title="var">H0</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Htransition"><span class="id" title="variable">Htransition</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hpvalid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l1</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">l1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Htransition"><span class="id" title="variable">Htransition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hm</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="var">_om</span>:=<span class="id" title="var">_om</span>) (<span class="id" title="var">_s</span>:=<span class="id" title="var">_s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hvalid"><span class="id" title="variable">Hvalid</span></a>;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hpvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">eexists</span>;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#surjective_pairing"><span class="id" title="lemma">surjective_pairing</span></a>;<span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Hprotocol_message" class="idref" href="#Hprotocol_message"><span class="id" title="lemma">Hprotocol_message</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:919" class="idref" href="#l:919"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>) (<a id="s:920" class="idref" href="#s:920"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="om:921" class="idref" href="#om:921"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:919"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:920"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:921"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:921"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> [<span class="id" title="var">m</span>|] <span class="id" title="var">H</span>;[|<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_None"><span class="id" title="lemma">option_protocol_message_None</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [[<span class="id" title="var">_s</span> <span class="id" title="var">H</span>] <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_props"><span class="id" title="lemma">protocol_props</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l</span>, <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl_protocol_state" class="idref" href="#basic_VLSM_incl_protocol_state"><span class="id" title="lemma">basic_VLSM_incl_protocol_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:922" class="idref" href="#s:922"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:923" class="idref" href="#om:923"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:924" class="idref" href="#Hps:924"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:922"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om:923"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:922"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_props"><span class="id" title="lemma">protocol_props</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl_protocol_transition" class="idref" href="#basic_VLSM_incl_protocol_transition"><span class="id" title="lemma">basic_VLSM_incl_protocol_transition</span></a><br/>
&nbsp;&nbsp;(<a id="l:925" class="idref" href="#l:925"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;(<a id="is:926" class="idref" href="#is:926"><span class="id" title="binder">is</span></a> <a id="os:927" class="idref" href="#os:927"><span class="id" title="binder">os</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="iom:928" class="idref" href="#iom:928"><span class="id" title="binder">iom</span></a> <a id="oom:929" class="idref" href="#oom:929"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Ht:930" class="idref" href="#Ht:930"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:925"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#is:926"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom:928"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#os:927"><span class="id" title="variable">os</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom:929"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:925"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#is:926"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#iom:928"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#os:927"><span class="id" title="variable">os</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#oom:929"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_valid"><span class="id" title="lemma">protocol_generated_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">Hps</span> <span class="id" title="var">Hpm</span> <span class="id" title="var">Hv</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">Hpv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_protocol_state"><span class="id" title="lemma">basic_VLSM_incl_protocol_state</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#Hprotocol_message"><span class="id" title="lemma">Hprotocol_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpv</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hvalid"><span class="id" title="variable">Hvalid</span></a> <span class="id" title="var">l</span> <span class="id" title="keyword">is</span> <span class="id" title="var">iom</span> <span class="id" title="var">Hpv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htransition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Htransition"><span class="id" title="variable">Htransition</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl_finite_protocol_trace" class="idref" href="#basic_VLSM_incl_finite_protocol_trace"><span class="id" title="lemma">basic_VLSM_incl_finite_protocol_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:931" class="idref" href="#s:931"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:932" class="idref" href="#ls:932"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpxt:933" class="idref" href="#Hpxt:933"><span class="id" title="binder">Hpxt</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:931"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:932"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:931"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#ls:932"><span class="id" title="variable">ls</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hpxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_empty"><span class="id" title="constructor">finite_ptrace_empty</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_protocol_state"><span class="id" title="lemma">basic_VLSM_incl_protocol_state</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_protocol_transition"><span class="id" title="lemma">basic_VLSM_incl_protocol_transition</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;end&nbsp;hide&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="basic_VLSM_incl" class="idref" href="#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Y"><span class="id" title="variable">Y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_finite_traces_characterization"><span class="id" title="lemma">VLSM_incl_finite_traces_characterization</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">s</span> <span class="id" title="var">ls</span> [<span class="id" title="var">Hxt</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl_finite_protocol_trace"><span class="id" title="lemma">basic_VLSM_incl_finite_protocol_trace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl.Hinitial_state"><span class="id" title="variable">Hinitial_state</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="section">basic_VLSM_incl</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab52"></a><h3 class="section">Pre-loaded VLSMs</h3>


<div class="paragraph"> </div>

Given a VLSM <tt>X</tt>, we introduce the <i>pre-loaded</i> version of it,
which is identical to <tt>X</tt>, except that it is endowed with the
whole message universe as its initial messages. The high degree
of freedom allowed to the <i>pre-loaded</i> version lets it experience
everything experienced by <tt>X</tt> but also other types of behaviour,
including <i>Byzantine</i> behaviour, which makes it a useful concept in
Byzantine fault tolerance analysis.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="pre_loaded_with_all_messages_vlsm" class="idref" href="#pre_loaded_with_all_messages_vlsm"><span class="id" title="section">pre_loaded_with_all_messages_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:934" class="idref" href="#message:934"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:935" class="idref" href="#X:935"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:934"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_loaded_with_all_messages_vlsm_sig" class="idref" href="#pre_loaded_with_all_messages_vlsm_sig"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_sig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> <a id="message:936" class="idref" href="#message:936"><span class="id" title="binder">message</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vm0"><span class="id" title="definition">vm0</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vl0"><span class="id" title="definition">vl0</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_loaded_with_all_messages_vlsm_machine" class="idref" href="#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_sig"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_sig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="pre_loaded_with_all_messages_vlsm" class="idref" href="#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>.<br/>

<br/>
</div>

<div class="doc">
    A message which can be emitted during a protocol run of
    the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> is called a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#byzantine_message"><span class="id" title="definition">byzantine_message</span></a></span>, because
    as shown by Lemmas <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ByzantineTraces.html#byzantine_pre_loaded_with_all_messages"><span class="id" title="lemma">byzantine_pre_loaded_with_all_messages</span></a></span> and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ByzantineTraces.html#pre_loaded_with_all_messages_alt_eq"><span class="id" title="lemma">pre_loaded_with_all_messages_alt_eq</span></a></span>,
    byzantine traces for a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span> are precisely the protocol traces
    of the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span>, hence a byzantine message is any message
    which a byzantine trace <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a></span>.
  
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="byzantine_message_prop" class="idref" href="#byzantine_message_prop"><span class="id" title="definition">byzantine_message_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:937" class="idref" href="#m:937"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:937"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="byzantine_message" class="idref" href="#byzantine_message"><span class="id" title="definition">byzantine_message</span></a> : <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#byzantine_message_prop"><span class="id" title="definition">byzantine_message_prop</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="any_message_is_protocol_in_preloaded" class="idref" href="#any_message_is_protocol_in_preloaded"><span class="id" title="lemma">any_message_is_protocol_in_preloaded</span></a> (<a id="om:944" class="idref" href="#om:944"><span class="id" title="binder">om</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:944"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_message_protocol_prop"><span class="id" title="lemma">pre_loaded_with_all_messages_message_protocol_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="preloaded_protocol_state_prop" class="idref" href="#preloaded_protocol_state_prop"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="preloaded_protocol_initial_state" class="idref" href="#preloaded_protocol_initial_state"><span class="id" title="constructor">preloaded_protocol_initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:947" class="idref" href="#s:947"><span class="id" title="binder">s</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:948" class="idref" href="#Hs:948"><span class="id" title="binder">Hs</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> (<span class="id" title="var">VLSM_sign</span>:=<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_sig"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_sig</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#s:947"><span class="id" title="variable">s</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop:945"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:947"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;| <a id="preloaded_protocol_generated" class="idref" href="#preloaded_protocol_generated"><span class="id" title="constructor">preloaded_protocol_generated</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:949" class="idref" href="#l:949"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:950" class="idref" href="#s:950"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:951" class="idref" href="#Hps:951"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop:945"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:950"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:952" class="idref" href="#om:952"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:953" class="idref" href="#Hv:953"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> (<span class="id" title="var">VLSM_class</span>:=<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#l:949"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:950"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:952"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop:945"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> (<span class="id" title="var">VLSM_class</span>:=<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#l:949"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:950"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#om:952"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_protocol_state_prop_iff" class="idref" href="#preloaded_protocol_state_prop_iff"><span class="id" title="lemma">preloaded_protocol_state_prop_iff</span></a> <a id="s:954" class="idref" href="#s:954"><span class="id" title="binder">s</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:954"><span class="id" title="variable">s</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop"><span class="id" title="inductive">preloaded_protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:954"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hproto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">som</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hproto</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">som</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_initial_state"><span class="id" title="constructor">preloaded_protocol_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_generated"><span class="id" title="constructor">preloaded_protocol_generated</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a>;[<span class="id" title="tactic">assumption</span>|<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> (<span class="id" title="var">som'</span> := <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">l1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span>:<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="var">l1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">with</span> <span class="id" title="var">som'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">som'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#surjective_pairing"><span class="id" title="lemma">surjective_pairing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHpreloaded_protocol_state_prop</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">IHs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#any_message_is_protocol_in_preloaded"><span class="id" title="lemma">any_message_is_protocol_in_preloaded</span></a> <span class="id" title="var">om</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a>;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_weaken_protocol_prop" class="idref" href="#preloaded_weaken_protocol_prop"><span class="id" title="lemma">preloaded_weaken_protocol_prop</span></a> <a id="som:955" class="idref" href="#som:955"><span class="id" title="binder">som</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:955"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:955"><span class="id" title="variable">som</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial"><span class="id" title="constructor">protocol_initial</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">om</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span>;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">l1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">IHprotocol_prop1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">IHprotocol_prop2</span> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_weaken_protocol_transition" class="idref" href="#preloaded_weaken_protocol_transition"><span class="id" title="lemma">preloaded_weaken_protocol_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:956" class="idref" href="#l:956"><span class="id" title="binder">l</span></a> <a id="s:957" class="idref" href="#s:957"><span class="id" title="binder">s</span></a> <a id="om:958" class="idref" href="#om:958"><span class="id" title="binder">om</span></a> <a id="s':959" class="idref" href="#s':959"><span class="id" title="binder">s'</span></a> <a id="om':960" class="idref" href="#om':960"><span class="id" title="binder">om'</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:956"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:957"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om:958"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':959"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om':960"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l:956"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s:957"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om:958"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#s':959"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Common.html#om':960"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hproto_s</span>] [<span class="id" title="var">_</span> <span class="id" title="var">Hpvalid</span>]] <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[<span class="id" title="tactic">clear</span> <span class="id" title="var">Htrans</span>|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_weaken_protocol_prop"><span class="id" title="lemma">preloaded_weaken_protocol_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">_om</span> <span class="id" title="var">Hproto_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#any_message_is_protocol_in_preloaded"><span class="id" title="lemma">any_message_is_protocol_in_preloaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="vlsm_incl_pre_loaded_with_all_messages_vlsm" class="idref" href="#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_vlsm_incl" class="idref" href="#pre_loaded_vlsm_incl"><span class="id" title="lemma">pre_loaded_vlsm_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:961" class="idref" href="#P:961"><span class="id" title="binder">P</span></a> <a id="Q:962" class="idref" href="#Q:962"><span class="id" title="binder">Q</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PimpliesQ:964" class="idref" href="#PimpliesQ:964"><span class="id" title="binder">PimpliesQ</span></a> : <span class="id" title="keyword">forall</span> <a id="m:963" class="idref" href="#m:963"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#P:961"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:963"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Q:962"><span class="id" title="variable">Q</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:963"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#P:961"><span class="id" title="variable">P</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Q:962"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">T</span>, (<span class="id" title="var">S</span>, <span class="id" title="var">M</span>)). <span class="id" title="tactic">intro</span> <span class="id" title="var">Hpincl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| ..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinit</span>|<span class="id" title="var">HP</span>];[<span class="id" title="tactic">left</span>|<span class="id" title="tactic">right</span>];<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True" class="idref" href="#pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True"><span class="id" title="lemma">pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<span class="id" title="keyword">fun</span> <a id="m:965" class="idref" href="#m:965"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_incl_iff"><span class="id" title="lemma">VLSM_eq_incl_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class_pre_loaded_with_messages"><span class="id" title="definition">VLSM_class_pre_loaded_with_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>))); <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> |<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">right</span>;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class_pre_loaded_with_messages"><span class="id" title="definition">VLSM_class_pre_loaded_with_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>)) <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_machine"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm_machine</span></a> ); <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> |<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_vlsm_incl_pre_loaded_with_all_messages" class="idref" href="#pre_loaded_vlsm_incl_pre_loaded_with_all_messages"><span class="id" title="lemma">pre_loaded_vlsm_incl_pre_loaded_with_all_messages</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:966" class="idref" href="#P:966"><span class="id" title="binder">P</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#P:966"><span class="id" title="variable">P</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_trans"><span class="id" title="lemma">VLSM_incl_trans</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm_incl"><span class="id" title="lemma">pre_loaded_vlsm_incl</span></a> <span class="id" title="var">P</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>)). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_incl_iff"><span class="id" title="lemma">VLSM_eq_incl_iff</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True"><span class="id" title="lemma">pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="vlsm_is_pre_loaded_with_False" class="idref" href="#vlsm_is_pre_loaded_with_False"><span class="id" title="lemma">vlsm_is_pre_loaded_with_False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq"><span class="id" title="abbreviation">VLSM_eq</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<span class="id" title="keyword">fun</span> <a id="m:967" class="idref" href="#m:967"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">T</span>, (<span class="id" title="var">S</span>, <span class="id" title="var">M</span>)). <span class="id" title="tactic">intro</span> <span class="id" title="var">Hpp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_eq_incl_iff"><span class="id" title="lemma">VLSM_eq_incl_iff</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> |<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">left</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a>; <span class="id" title="tactic">intros</span>; [<span class="id" title="tactic">assumption</span>| | <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> |<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [|[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="vlsm_is_pre_loaded_with_False_protocol_prop" class="idref" href="#vlsm_is_pre_loaded_with_False_protocol_prop"><span class="id" title="lemma">vlsm_is_pre_loaded_with_False_protocol_prop</span></a><br/>
&nbsp;&nbsp;(<a id="som:968" class="idref" href="#som:968"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#som:968"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a>  (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_vlsm"><span class="id" title="definition">pre_loaded_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> (<span class="id" title="keyword">fun</span> <a id="m:969" class="idref" href="#m:969"><span class="id" title="binder">m</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>)) <a class="idref" href="CasperCBC.VLSM.Common.html#som:968"><span class="id" title="variable">som</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_is_pre_loaded_with_False"><span class="id" title="lemma">vlsm_is_pre_loaded_with_False</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm.X"><span class="id" title="variable">X</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">T</span>, (<span class="id" title="var">S</span>, <span class="id" title="var">M</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop_incl"><span class="id" title="lemma">protocol_prop_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;[|<span class="id" title="var">cbn</span>;<span class="id" title="tactic">tauto</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">Ht</span>;<span class="id" title="tactic">apply</span> <span class="id" title="var">Heq</span>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="section">pre_loaded_with_all_messages_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="non_empty_protocol_trace_from_protocol_generated_prop" class="idref" href="#non_empty_protocol_trace_from_protocol_generated_prop"><span class="id" title="lemma">non_empty_protocol_trace_from_protocol_generated_prop</span></a><br/>
&nbsp;&nbsp;`(<a id="X:971" class="idref" href="#X:971"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a id="message:970" class="idref" href="#message:970"><span class="id" title="binder">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:972" class="idref" href="#s:972"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:973" class="idref" href="#m:973"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:970"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:971"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:972"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:973"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="is:974" class="idref" href="#is:974"><span class="id" title="binder">is</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>) (<a id="tr:975" class="idref" href="#tr:975"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) (<a id="item:976" class="idref" href="#item:976"><span class="id" title="binder">item</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:971"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#is:974"><span class="id" title="variable">is</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:975"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error"><span class="id" title="definition">last_error</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#tr:975"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:976"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:976"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:972"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#item:976"><span class="id" title="variable">item</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:973"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [(<span class="id" title="var">s'</span>, <span class="id" title="var">om'</span>) [<span class="id" title="var">l</span> <span class="id" title="var">Hsm</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">Hsm</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hp</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_singleton"><span class="id" title="definition">finite_ptrace_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hsm</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_complete_left"><span class="id" title="lemma">finite_protocol_trace_from_complete_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span>  <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">trs</span> [<span class="id" title="var">Htrs</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Htrs</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">context</span> [<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>?<span class="id" title="var">item</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>] =&gt; <span class="id" title="var">remember</span> <span class="id" title="var">item</span> <span class="id" title="keyword">as</span> <span class="id" title="var">lstitem</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">trs</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">lstitem</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">exists</span> <span class="id" title="var">lstitem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error_is_last"><span class="id" title="lemma">last_error_is_last</span></a>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">lstitem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Htr</span> [<span class="id" title="var">Hitem</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">Hm</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_list_last</span> <span class="id" title="var">tr</span> <span class="id" title="var">tr'</span> <span class="id" title="var">item'</span> <span class="id" title="var">Heq</span>; [<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#last_error_is_last"><span class="id" title="lemma">last_error_is_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hitem</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">item'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from_app_iff"><span class="id" title="lemma">finite_protocol_trace_from_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">l1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H3</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_protocol_generated" class="idref" href="#VLSM_incl_protocol_generated"><span class="id" title="lemma">VLSM_incl_protocol_generated</span></a><br/>
&nbsp;&nbsp;{<a id="message:977" class="idref" href="#message:977"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="vtype:978" class="idref" href="#vtype:978"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:977"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SigX:979" class="idref" href="#SigX:979"><span class="id" title="binder">SigX</span></a> <a id="SigY:980" class="idref" href="#SigY:980"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:978"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:981" class="idref" href="#MX:981"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:979"><span class="id" title="variable">SigX</span></a>) (<a id="MY:982" class="idref" href="#MY:982"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:980"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:983" class="idref" href="#X:983"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:981"><span class="id" title="variable">MX</span></a>) (<a id="Y:984" class="idref" href="#Y:984"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:982"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hincl:985" class="idref" href="#Hincl:985"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:983"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:984"><span class="id" title="variable">Y</span></a>)<br/>
&nbsp;&nbsp;(<a id="s:986" class="idref" href="#s:986"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:987" class="idref" href="#m:987"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:977"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:983"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:986"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:987"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_prop"><span class="id" title="definition">protocol_generated_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:984"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#s:986"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:987"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hsm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#non_empty_protocol_trace_from_protocol_generated_prop"><span class="id" title="lemma">non_empty_protocol_trace_from_protocol_generated_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#non_empty_protocol_trace_from_protocol_generated_prop"><span class="id" title="lemma">non_empty_protocol_trace_from_protocol_generated_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsm</span> <span class="id" title="keyword">as</span> [<span class="id" title="keyword">is</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">item</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hsm</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="keyword">is</span>, <span class="id" title="var">tr</span>, <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>]. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hsm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_finite_protocol_trace"><span class="id" title="lemma">VLSM_incl_finite_protocol_trace</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="VLSM_incl_can_emit" class="idref" href="#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a><br/>
&nbsp;&nbsp;{<a id="message:988" class="idref" href="#message:988"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="vtype:989" class="idref" href="#vtype:989"><span class="id" title="binder">vtype</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:988"><span class="id" title="variable">message</span></a>}<br/>
&nbsp;&nbsp;{<a id="SigX:990" class="idref" href="#SigX:990"><span class="id" title="binder">SigX</span></a> <a id="SigY:991" class="idref" href="#SigY:991"><span class="id" title="binder">SigY</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtype:989"><span class="id" title="variable">vtype</span></a>}<br/>
&nbsp;&nbsp;(<a id="MX:992" class="idref" href="#MX:992"><span class="id" title="binder">MX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigX:990"><span class="id" title="variable">SigX</span></a>) (<a id="MY:993" class="idref" href="#MY:993"><span class="id" title="binder">MY</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#SigY:991"><span class="id" title="variable">SigY</span></a>)<br/>
&nbsp;&nbsp;(<a id="X:994" class="idref" href="#X:994"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MX:992"><span class="id" title="variable">MX</span></a>) (<a id="Y:995" class="idref" href="#Y:995"><span class="id" title="binder">Y</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#MY:993"><span class="id" title="variable">MY</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hincl:996" class="idref" href="#Hincl:996"><span class="id" title="binder">Hincl</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:994"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:995"><span class="id" title="variable">Y</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:997" class="idref" href="#m:997"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:988"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:994"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:997"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#Y:995"><span class="id" title="variable">Y</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:997"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit_iff"><span class="id" title="lemma">can_emit_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hsm</span>]. <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Hsm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_protocol_generated"><span class="id" title="lemma">VLSM_incl_protocol_generated</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_with_all_messages_can_emit" class="idref" href="#pre_loaded_with_all_messages_can_emit"><span class="id" title="lemma">pre_loaded_with_all_messages_can_emit</span></a><br/>
&nbsp;&nbsp;{<a id="message:998" class="idref" href="#message:998"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<a id="X:999" class="idref" href="#X:999"><span class="id" title="binder">X</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#message:998"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="m:1000" class="idref" href="#m:1000"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#message:998"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hm:1001" class="idref" href="#Hm:1001"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:999"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#m:1000"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#X:999"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Common.html#m:1000"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_can_emit"><span class="id" title="lemma">VLSM_incl_can_emit</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">X</span>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm_machine"><span class="id" title="lemma">mk_vlsm_machine</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>

<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>SubProjectionTraces.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><link href="alectryon.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script><style type="text/css">pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.12.0+0.12.1. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">From</span> Coq <span class="kn">Require Import</span> List Nat Bool Lia FunctionalExtensionality Lia Program FinFun Eqdep.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Import</span> ListNotations.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">From</span> CasperCBC
<span class="kn">Require Import</span> Lib.ListExtras Lib.Preamble VLSM.Common VLSM.Composition VLSM.Equivocation.</span></span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">VLSM Subcomposition</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">sub_composition</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span>
  {<span class="nv">message</span> : <span class="kt">Type</span>}
  {<span class="nv">index</span> : <span class="kt">Type</span>}
  {<span class="nv">IndEqDec</span> : EqDecision index}
  (<span class="nv">IM</span> : index -&gt; VLSM message)
  (<span class="nv">sub_index_list</span> : list index)
  (<span class="nv">Hi0_sub</span> : sub_index_list &lt;&gt; [])
  .</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">sub_index_prop</span> (<span class="nv">i</span> : index) : <span class="kt">Prop</span> := In i sub_index_list.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk0"><span class="highlight"><span class="kn">Instance</span> <span class="nf">sub_index_prop_dec</span>
  (<span class="nv">i</span> : index)
  : Decision (sub_index_prop i).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (sub_index_prop i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Decision (sub_index_prop i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2"><span class="highlight"><span class="nb">apply</span> in_dec.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : index, {x = y} + {x &lt;&gt; y}</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">sub_index</span> : <span class="kt">Type</span>
  := dec_sig sub_index_prop.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3"><span class="highlight"><span class="kn">Instance</span> <span class="nf">sub_index_i0</span> : Inhabited sub_index.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Inhabited sub_index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Inhabited sub_index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5"><span class="highlight"><span class="nb">split</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">sub_index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6"><span class="highlight"><span class="nb">destruct</span> (destruct_list sub_index_list) <span class="kr">as</span> [[x [tl Heq]]| n]
  ; [|<span class="nb">elim</span> Hi0_sub; <span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list = x :: tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">sub_index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list = x :: tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bool_decide (sub_index_prop x) = true</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8"><span class="highlight"><span class="nb">apply</span> bool_decide_eq_true.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list = x :: tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">sub_index_prop x</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9"><span class="highlight"><span class="nb">unfold</span> sub_index_prop.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list = x :: tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In x sub_index_list</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka"><span class="highlight"><span class="nb">subst</span> sub_index_list.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">x :: tl &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In x (x :: tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb"><span class="highlight"><span class="nb">left</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">x :: tl &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">x = x</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc"><span class="highlight"><span class="kn">Instance</span> <span class="nf">sub_index_eq_dec</span> : EqDecision sub_index.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">EqDecision sub_index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">EqDecision sub_index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke"><span class="highlight"><span class="nb">apply</span> dec_sig_eq_dec.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">EqDecision index</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">sub_IM</span>
  (<span class="nv">ei</span> : sub_index)
  : VLSM message
  := IM (proj1_sig ei).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-wsp"> </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">sub_IM_state_update_eq</span>
  (<span class="nv">i</span> : index)
  (<span class="nv">s</span> : composite_state sub_IM)
  (<span class="nv">si</span> : vstate (IM i))
  (<span class="nv">e1</span> <span class="nv">e2</span> : sub_index_prop i)
  : state_update sub_IM s (dec_exist _ i e1) si (dec_exist _ i e2) = si.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM s (dec_exist sub_index_prop i e1)
  si (dec_exist sub_index_prop i e2) = si</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM s (dec_exist sub_index_prop i e1)
  si (dec_exist sub_index_prop i e2) = si</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11"><span class="highlight"><span class="nb">unfold</span> dec_exist.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i
     (decide_True true false e1)) si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i
     (decide_True true false e2)) = si</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12"><span class="highlight"><span class="nb">assert</span>
    (<span class="kr">forall</span> <span class="nv">be1</span> <span class="nv">be2</span>, be1 = be2 -&gt; state_update sub_IM s
      (exist _ i be1) si (exist _ i be2)
      = si).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">be1</span> <span class="nv">be2</span> : bool_decide (sub_index_prop i) = true,
be1 = be2 -&gt;
state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be1) si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be2) =
si</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk13" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">be1</span>
   <span class="nv">be2</span> : (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
          bool_decide (sub_index_prop a) = true) i,
be1 = be2 -&gt;
state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be1)
  si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be2) =
si</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk13"><hr></label><div class="goal-conclusion"><span class="highlight">state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i
     (decide_True true false e1)) si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i
     (decide_True true false e2)) = si</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14"><span class="highlight">{</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">be1</span> <span class="nv">be2</span> : bool_decide (sub_index_prop i) = true,
be1 = be2 -&gt;
state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be1) si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be2) =
si</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">be1, be2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop i) = true</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">be1 = be2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be1) si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be2) =
si</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">be2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop i) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be2) si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be2) =
si</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> state_update_eq.</span></span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17"><span class="highlight">}</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">be1</span>
   <span class="nv">be2</span> : (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
          bool_decide (sub_index_prop a) = true) i,
be1 = be2 -&gt;
state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be1)
  si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be2) =
si</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i
     (decide_True true false e1)) si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i
     (decide_True true false e2)) = si</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18"><span class="highlight"><span class="nb">apply</span> H.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vstate (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">be1</span>
   <span class="nv">be2</span> : (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
          bool_decide (sub_index_prop a) = true) i,
be1 = be2 -&gt;
state_update sub_IM s
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be1)
  si
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) i be2) =
si</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">decide_True true false e1 = decide_True true false e2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> bool_decide_eq_true_proof_irrelevance.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">

</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">free_sub_vlsm_composition</span> : VLSM message
  := free_composite_vlsm sub_IM.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">seeded_free_sub_composition</span>
  (<span class="nv">messageSet</span> : message -&gt; <span class="kt">Prop</span>)
  := pre_loaded_vlsm free_sub_vlsm_composition
      (<span class="kr">fun</span> <span class="nv">m</span> =&gt; messageSet m \/ composite_initial_message_prop IM m).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">i0</span> : Inhabited index.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Inhabited index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Inhabited index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1b"><span class="highlight"><span class="nb">apply</span> exists_last <span class="kr">in</span> Hi0_sub.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{l&#39; : list index &amp;
{a : index | sub_index_list = l&#39; ++ [a]}}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Inhabited index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1c"><span class="highlight"><span class="nb">destruct</span> Hi0_sub <span class="kr">as</span> (_, (a, _)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{l&#39; : list index &amp;
{a : index | sub_index_list = l&#39; ++ [a]}}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Inhabited index</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1d"><span class="highlight"><span class="nb">constructor</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{l&#39; : list index &amp;
{a : index | sub_index_list = l&#39; ++ [a]}}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">index</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">exact</span> a.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Existing Instance</span> <span class="nf">i0</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">composite_state_sub_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  : composite_state sub_IM
  := <span class="kr">fun</span> (<span class="nv">subi</span> : sub_index) =&gt; s (proj1_sig subi) : vstate (sub_IM subi).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1e"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">composite_initial_state_sub_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">Hs</span> : composite_initial_state_prop IM s)
  : composite_initial_state_prop sub_IM (composite_state_sub_projection s).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop IM s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1f"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop IM s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk20"><span class="highlight"><span class="nb">intros</span> (i, Hi).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop IM s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop i) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vinitial_state_prop
  (sub_IM
     (exist
        (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
         bool_decide (sub_index_prop a) = true) i Hi))
  (composite_state_sub_projection s
     (exist
        (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
         bool_decide (sub_index_prop a) = true) i Hi))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> Hs.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">composite_transition_item_sub_projection</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  (<span class="nv">e</span> : sub_index_prop i)
  (<span class="nv">j</span> : sub_index := dec_exist _ i e)
  : composite_transition_item sub_IM
  :=
  @Build_transition_item _ (composite_type sub_IM) (existT _ j (projT2 (l item))) (input item) (composite_state_sub_projection (destination item)) (output item).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk21"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">composite_state_transition_item_sub_projection</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  (<span class="nv">e</span> : sub_index_prop i)
  (<span class="nv">j</span> : sub_index := dec_exist _ i e)
  : composite_state_sub_projection (destination item)
  = destination (composite_transition_item_sub_projection item e).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">dec_exist sub_index_prop i e</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection (destination item) =
destination
  (composite_transition_item_sub_projection item e)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk22"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">dec_exist sub_index_prop i e</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection (destination item) =
destination
  (composite_transition_item_sub_projection item e)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk23"><span class="highlight"><span class="nb">destruct</span> item.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1
  (Common.l
     {|
     l := l;
     input := input;
     destination := destination;
     output := output |})</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">dec_exist sub_index_prop i e</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection
  (Common.destination
     {|
     l := l;
     input := input;
     destination := destination;
     output := output |}) =
Common.destination
  (composite_transition_item_sub_projection
     {|
     l := l;
     input := input;
     destination := destination;
     output := output |} e)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk24"><span class="highlight"><span class="nb">destruct</span> l.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1
  (l
     {|
     l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
            v;
     input := input;
     destination := destination;
     output := output |})</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">dec_exist sub_index_prop i e</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection
  (Common.destination
     {|
     l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
     input := input;
     destination := destination;
     output := output |}) =
Common.destination
  (composite_transition_item_sub_projection
     {|
     l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
     input := input;
     destination := destination;
     output := output |} e)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk25"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">x</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">dec_exist sub_index_prop i e</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection destination =
composite_state_sub_projection destination</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk26"><span class="highlight"><span class="kn">Definition</span> <span class="nf">composite_transition_item_sub_projection_proof_irrelevance</span>
  (<span class="nv">item</span> : composite_transition_item IM)
  (<span class="nv">i</span> := projT1 (l item))
  (<span class="nv">e1</span> <span class="nv">e2</span> : sub_index_prop i)
  : composite_transition_item_sub_projection item e1 = composite_transition_item_sub_projection item e2.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection item e1 =
composite_transition_item_sub_projection item e2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk27"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l item)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection item e1 =
composite_transition_item_sub_projection item e2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk28"><span class="highlight"><span class="nb">destruct</span> item.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1
  (Common.l
     {|
     l := l;
     input := input;
     destination := destination;
     output := output |})</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection
  {|
  l := l;
  input := input;
  destination := destination;
  output := output |} e1 =
composite_transition_item_sub_projection
  {|
  l := l;
  input := input;
  destination := destination;
  output := output |} e2</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk29"><span class="highlight"><span class="nb">destruct</span> l.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1
  (l
     {|
     l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
            v;
     input := input;
     destination := destination;
     output := output |})</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
  input := input;
  destination := destination;
  output := output |} e1 =
composite_transition_item_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
  input := input;
  destination := destination;
  output := output |} e2</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2a"><span class="highlight"><span class="nb">unfold</span> i <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1
  (l
     {|
     l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
            v;
     input := input;
     destination := destination;
     output := output |})</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (l
        {|
        l := existT
               (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
               v;
        input := input;
        destination := destination;
        output := output |}))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
  input := input;
  destination := destination;
  output := output |} e1 =
composite_transition_item_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
  input := input;
  destination := destination;
  output := output |} e2</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2b"><span class="highlight"><span class="nb">clear</span> i.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (l
        {|
        l := existT
               (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
               v;
        input := input;
        destination := destination;
        output := output |}))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
  input := input;
  destination := destination;
  output := output |} e1 =
composite_transition_item_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
  input := input;
  destination := destination;
  output := output |} e2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2c"><span class="highlight"><span class="nb">unfold</span> composite_transition_item_sub_projection.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (l
        {|
        l := existT
               (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
               v;
        input := input;
        destination := destination;
        output := output |}))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
       (dec_exist sub_index_prop
          (projT1
             (l
                {|
                l := existT
                       (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
                       x v;
                input := input;
                destination := destination;
                output := output |})) e1)
       (projT2
          (l
             {|
             l := existT
                    (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
                    v;
             input := input;
             destination := destination;
             output := output |}));
input := Common.input
           {|
           l := existT
                  (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
           input := input;
           destination := destination;
           output := output |};
destination := composite_state_sub_projection
                 (Common.destination
                    {|
                    l := existT
                           (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt;
                            vlabel (IM n)) x v;
                    input := input;
                    destination := destination;
                    output := output |});
output := Common.output
            {|
            l := existT
                   (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
                   v;
            input := input;
            destination := destination;
            output := output |} |} =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
       (dec_exist sub_index_prop
          (projT1
             (l
                {|
                l := existT
                       (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
                       x v;
                input := input;
                destination := destination;
                output := output |})) e2)
       (projT2
          (l
             {|
             l := existT
                    (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
                    v;
             input := input;
             destination := destination;
             output := output |}));
input := Common.input
           {|
           l := existT
                  (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x v;
           input := input;
           destination := destination;
           output := output |};
destination := composite_state_sub_projection
                 (Common.destination
                    {|
                    l := existT
                           (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt;
                            vlabel (IM n)) x v;
                    input := input;
                    destination := destination;
                    output := output |});
output := Common.output
            {|
            l := existT
                   (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) x
                   v;
            input := input;
            destination := destination;
            output := output |} |}</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2d"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop x</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
       (dec_exist sub_index_prop x e1) v;
input := input;
destination := composite_state_sub_projection
                 destination;
output := output |} =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
       (dec_exist sub_index_prop x e2) v;
input := input;
destination := composite_state_sub_projection
                 destination;
output := output |}</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2e"><span class="highlight"><span class="nb">f_equal</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop x</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
  (dec_exist sub_index_prop x e1) v =
existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
  (dec_exist sub_index_prop x e2) v</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk2f"><span class="highlight"><span class="nb">apply</span> (@dec_sig_sigT_eq _ sub_index_prop sub_index_prop_dec (<span class="kr">fun</span> <span class="nv">i</span> =&gt; vlabel (IM i))).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">v</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM x)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">input</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">destination</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">output</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1, e2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop x</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">v = v</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">from_sub_projection</span>
  (<span class="nv">a</span> : composite_transition_item IM)
  : <span class="kt">Prop</span>
  := sub_index_prop (projT1 (l a)).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">finite_trace_sub_projection</span>
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  : list (composite_transition_item sub_IM)
  :=
  <span class="kr">match</span> trx <span class="kr">with</span>
  | [] =&gt; []
  | item :: trx =&gt;
    <span class="kr">let</span> <span class="nv">tail</span> := finite_trace_sub_projection trx <span class="kr">in</span>
    <span class="kr">match</span> decide (from_sub_projection item) <span class="kr">with</span>
    | <span class="nb">left</span> e =&gt; composite_transition_item_sub_projection item e :: tail
    | _ =&gt; tail
    <span class="kr">end</span>
  <span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">finite_trace_sub_projection_alt</span>
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  (<span class="nv">ftrx</span> := (filter (<span class="kr">fun</span> <span class="nv">a</span> =&gt; bool_decide (from_sub_projection a)) trx))
  (<span class="nv">Hall</span>: Forall from_sub_projection ftrx := filter_Forall trx)
  :=
  List.map
    (<span class="kr">fun</span> <span class="nv">item</span> : {a : composite_transition_item IM | from_sub_projection a} =&gt;
      <span class="kr">let</span> (<span class="nv">item</span>, e) := item <span class="kr">in</span>
      composite_transition_item_sub_projection item e
    )
  (list_annotate from_sub_projection ftrx Hall).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk30"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_trace_sub_projection_alt_iff</span>
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  : finite_trace_sub_projection_alt trx = finite_trace_sub_projection trx.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_sub_projection_alt trx =
finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk31"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_sub_projection_alt trx =
finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk32"><span class="highlight"><span class="nb">unfold</span> finite_trace_sub_projection_alt.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) trx)
     (filter_Forall trx)) =
finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk33"><span class="highlight"><span class="kr">match goal with</span>
  |- <span class="kp">context</span> [list_annotate _ _ <span class="nl">?H</span>] =&gt; <span class="nb">generalize</span> H <span class="kr">as</span> Hall
  <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
               bool_decide (from_sub_projection a))
              trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) trx)
     Hall) = finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk34"><span class="highlight"><span class="nb">induction</span> trx; <span class="nb">intros</span>; [<span class="bp">reflexivity</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (filter
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      bool_decide (from_sub_projection a))
     (a :: trx))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a))
        (a :: trx)) Hall) =
finite_trace_sub_projection (a :: trx)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk35" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk35"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (filter
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      bool_decide (from_sub_projection a))
     (a :: trx))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (<span class="kr">if</span> bool_decide (from_sub_projection a)
      <span class="kr">then</span>
       a
       :: filter
            (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
             bool_decide (from_sub_projection a)) trx
      <span class="kr">else</span>
       filter
         (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
          bool_decide (from_sub_projection a)) trx)
     Hall) =
<span class="kr">match</span> decide (from_sub_projection a) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    composite_transition_item_sub_projection a e
    :: finite_trace_sub_projection trx
| in_right =&gt; finite_trace_sub_projection trx
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk36"><span class="highlight"><span class="nb">unfold</span> bool_decide <span class="nb">at</span> <span class="mi">1</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (filter
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      bool_decide (from_sub_projection a))
     (a :: trx))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (<span class="kr">if</span>
       <span class="kr">if</span> sub_index_prop_dec (projT1 (l a))
       <span class="kr">then</span> true
       <span class="kr">else</span> false
      <span class="kr">then</span>
       a
       :: filter
            (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
             bool_decide (from_sub_projection a)) trx
      <span class="kr">else</span>
       filter
         (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
          bool_decide (from_sub_projection a)) trx)
     Hall) =
<span class="kr">match</span> decide (from_sub_projection a) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    composite_transition_item_sub_projection a e
    :: finite_trace_sub_projection trx
| in_right =&gt; finite_trace_sub_projection trx
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk37"><span class="highlight"><span class="nb">unfold</span> decide.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (filter
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      bool_decide (from_sub_projection a))
     (a :: trx))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (<span class="kr">if</span>
       <span class="kr">if</span> sub_index_prop_dec (projT1 (l a))
       <span class="kr">then</span> true
       <span class="kr">else</span> false
      <span class="kr">then</span>
       a
       :: filter
            (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
             bool_decide (from_sub_projection a)) trx
      <span class="kr">else</span>
       filter
         (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
          bool_decide (from_sub_projection a)) trx)
     Hall) =
<span class="kr">match</span> sub_index_prop_dec (projT1 (l a)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    composite_transition_item_sub_projection a e
    :: finite_trace_sub_projection trx
| in_right =&gt; finite_trace_sub_projection trx
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk38"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hall.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (<span class="kr">if</span> bool_decide (from_sub_projection a)
   <span class="kr">then</span>
    a
    :: filter
         (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
          =&gt;
          bool_decide (from_sub_projection a))
         trx
   <span class="kr">else</span>
    filter
      (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
       bool_decide (from_sub_projection a)) trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (<span class="kr">if</span>
       <span class="kr">if</span> sub_index_prop_dec (projT1 (l a))
       <span class="kr">then</span> true
       <span class="kr">else</span> false
      <span class="kr">then</span>
       a
       :: filter
            (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
             bool_decide (from_sub_projection a)) trx
      <span class="kr">else</span>
       filter
         (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
          bool_decide (from_sub_projection a)) trx)
     Hall) =
<span class="kr">match</span> sub_index_prop_dec (projT1 (l a)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    composite_transition_item_sub_projection a e
    :: finite_trace_sub_projection trx
| in_right =&gt; finite_trace_sub_projection trx
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk39"><span class="highlight"><span class="nb">unfold</span> bool_decide <span class="kr">in</span> Hall <span class="nb">at</span> <span class="mi">1</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (<span class="kr">if</span>
    <span class="kr">if</span> sub_index_prop_dec (projT1 (l a))
    <span class="kr">then</span> true
    <span class="kr">else</span> false
   <span class="kr">then</span>
    a
    :: filter
         (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
          =&gt;
          bool_decide (from_sub_projection a))
         trx
   <span class="kr">else</span>
    filter
      (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
       bool_decide (from_sub_projection a)) trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (<span class="kr">if</span>
       <span class="kr">if</span> sub_index_prop_dec (projT1 (l a))
       <span class="kr">then</span> true
       <span class="kr">else</span> false
      <span class="kr">then</span>
       a
       :: filter
            (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
             bool_decide (from_sub_projection a)) trx
      <span class="kr">else</span>
       filter
         (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
          bool_decide (from_sub_projection a)) trx)
     Hall) =
<span class="kr">match</span> sub_index_prop_dec (projT1 (l a)) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    composite_transition_item_sub_projection a e
    :: finite_trace_sub_projection trx
| in_right =&gt; finite_trace_sub_projection trx
<span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3a"><span class="highlight"><span class="nb">destruct</span> (sub_index_prop_dec (projT1 (l a))) <span class="nb">eqn</span>:Ha.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_left</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (a
   :: filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt; bool_decide (from_sub_projection a))
        trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (a
      :: filter
           (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
            bool_decide (from_sub_projection a)) trx)
     Hall) =
composite_transition_item_sub_projection a s
:: finite_trace_sub_projection trx</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk3b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_right</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (filter
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      bool_decide (from_sub_projection a)) trx)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk3b"><hr></label><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) trx)
     Hall) = finite_trace_sub_projection trx</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3c"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_left</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (a
   :: filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt; bool_decide (from_sub_projection a))
        trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (a
      :: filter
           (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
            bool_decide (from_sub_projection a)) trx)
     Hall) =
composite_transition_item_sub_projection a s
:: finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3d"><span class="highlight"><span class="nb">rewrite</span> list_annotate_unroll.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_left</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (a
   :: filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt; bool_decide (from_sub_projection a))
        trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (exist from_sub_projection a (Forall_hd Hall)
   :: list_annotate from_sub_projection
        (filter
           (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
            bool_decide (from_sub_projection a)) trx)
        (Forall_tl Hall)) =
composite_transition_item_sub_projection a s
:: finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3e"><span class="highlight"><span class="nb">rewrite</span> map_cons.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_left</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (a
   :: filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt; bool_decide (from_sub_projection a))
        trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection a
  (Forall_hd Hall)
:: map
     (<span class="kr">fun</span>
        <span class="nv">item</span> : {a : composite_transition_item IM
               | from_sub_projection a} =&gt;
      <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
      composite_transition_item_sub_projection item0 e)
     (list_annotate from_sub_projection
        (filter
           (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
            bool_decide (from_sub_projection a)) trx)
        (Forall_tl Hall)) =
composite_transition_item_sub_projection a s
:: finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk3f"><span class="highlight"><span class="nb">f_equal</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_left</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (a
   :: filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt; bool_decide (from_sub_projection a))
        trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection a
  (Forall_hd Hall) =
composite_transition_item_sub_projection a s</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk40" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_left</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (a
   :: filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt; bool_decide (from_sub_projection a))
        trx)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk40"><hr></label><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) trx)
     (Forall_tl Hall)) =
finite_trace_sub_projection trx</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk41"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_left</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (a
   :: filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt; bool_decide (from_sub_projection a))
        trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection a
  (Forall_hd Hall) =
composite_transition_item_sub_projection a s</span></div></blockquote></div></div></small><span class="alectryon-wsp">  </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> composite_transition_item_sub_projection_proof_irrelevance.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk42"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_left</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (a
   :: filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt; bool_decide (from_sub_projection a))
        trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) trx)
     (Forall_tl Hall)) =
finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> IHtrx.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk43"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtrx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span>
  <span class="nv">Hall</span> : Forall from_sub_projection
           (filter
              (<span class="kr">fun</span>
                 <span class="nv">a</span> : composite_transition_item
                      IM =&gt;
               bool_decide
                 (from_sub_projection a)) trx),
map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection
     item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
         =&gt;
         bool_decide (from_sub_projection a))
        trx) Hall) =
finite_trace_sub_projection trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop (projT1 (l a))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ha</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop_dec (projT1 (l a)) = in_right</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hall</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Forall from_sub_projection
  (filter
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      bool_decide (from_sub_projection a)) trx)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">map
  (<span class="kr">fun</span>
     <span class="nv">item</span> : {a : composite_transition_item IM
            | from_sub_projection a} =&gt;
   <span class="kr">let</span> (<span class="nv">item0</span>, e) := item <span class="kr">in</span>
   composite_transition_item_sub_projection item0 e)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) trx)
     Hall) = finite_trace_sub_projection trx</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> IHtrx.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">sub_projection_with_no_equivocation_constraints</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Existing Instance</span>  <span class="nf">IndEqDec</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span>
  (<span class="nv">constraint</span> : composite_label IM -&gt; composite_state IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">has_been_sent_capabilities</span> : <span class="kr">forall</span> <span class="nv">i</span> : index, (has_been_sent_capability (IM i)))
  {<span class="nv">index_listing</span> : list index}
  (<span class="nv">finite_index</span> : Listing index_listing)
  (<span class="nv">Free</span> := free_composite_vlsm IM)
  (<span class="nv">Sub_Free</span> := free_composite_vlsm sub_IM)
  (<span class="nv">X_has_been_sent_capability</span> : has_been_sent_capability Free := composite_has_been_sent_capability IM (free_constraint IM) finite_index has_been_sent_capabilities)
  (<span class="nv">X</span> := composite_vlsm IM constraint)
  (<span class="nv">Pre</span> := pre_loaded_with_all_messages_vlsm (free_composite_vlsm IM))
  .</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk44"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">sub_has_been_sent_capabilities</span> : <span class="kr">forall</span> <span class="nv">i</span> : sub_index, (has_been_sent_capability (sub_IM i)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : sub_index,
has_been_sent_capability (sub_IM i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk45"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : sub_index,
has_been_sent_capability (sub_IM i)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk46"><span class="highlight"><span class="nb">intros</span> [i Hi].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop i) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">has_been_sent_capability
  (sub_IM
     (exist
        (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
         bool_decide (sub_index_prop a) = true) i Hi))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> has_been_sent_capabilities.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">select_sub_indices</span>
  (<span class="nv">l</span> : list index)
  : list sub_index
  :=
  <span class="kr">match</span> l <span class="kr">with</span>
  | [] =&gt; []
  | h :: t =&gt;
    <span class="kr">let</span> <span class="nv">t&#39;</span> := select_sub_indices t <span class="kr">in</span>
    <span class="kr">match</span> decide (sub_index_prop h) <span class="kr">with</span>
    | <span class="nb">left</span> e =&gt; dec_exist _ h e :: t&#39;
    | _ =&gt; t&#39;
    <span class="kr">end</span>
  <span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">sub_index_listing</span> : list sub_index := select_sub_indices index_listing.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk47"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">in_select_sub_indices</span>
  (<span class="nv">a</span>: index)
  (<span class="nv">s</span>: sub_index_prop a)
  (<span class="nv">l</span>: list index)
  : In (dec_exist sub_index_prop a s) (select_sub_indices l) &lt;-&gt; In a l.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk48"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk49"><span class="highlight"><span class="nb">induction</span> l; [<span class="nb">simpl</span>; <span class="nb">intuition</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices (a0 :: l)) &lt;-&gt; In a (a0 :: l)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4a"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (dec_exist sub_index_prop a s)
  <span class="kr">match</span> decide (sub_index_prop a0) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      dec_exist sub_index_prop a0 e
      :: select_sub_indices l
  | in_right =&gt; select_sub_indices l
  <span class="kr">end</span> &lt;-&gt; a0 = a \/ In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4b"><span class="highlight"><span class="nb">destruct</span> (decide (sub_index_prop a0)); [|<span class="nb">rewrite</span> IHl].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (dec_exist sub_index_prop a s)
  (dec_exist sub_index_prop a0 s0
   :: select_sub_indices l) &lt;-&gt; a0 = a \/ In a l</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk4c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop a0</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk4c"><hr></label><div class="goal-conclusion"><span class="highlight">In a l &lt;-&gt; a0 = a \/ In a l</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4d"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (dec_exist sub_index_prop a s)
  (dec_exist sub_index_prop a0 s0
   :: select_sub_indices l) &lt;-&gt; a0 = a \/ In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk4e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk4e"><span class="highlight"><span class="nb">split</span>; <span class="nb">intros</span> [Heq | H]; [<span class="nb">left</span> |<span class="nb">right</span>; <span class="nb">apply</span> IHl; <span class="bp">assumption</span>| <span class="nb">left</span> |<span class="nb">right</span>; <span class="nb">apply</span> IHl; <span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_exist sub_index_prop a0 s0 =
dec_exist sub_index_prop a s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">a0 = a</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk4f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">a0 = a</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk4f"><hr></label><div class="goal-conclusion"><span class="highlight">dec_exist sub_index_prop a0 s0 =
dec_exist sub_index_prop a s</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk50"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_exist sub_index_prop a0 s0 =
dec_exist sub_index_prop a s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">a0 = a</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk51"><span class="highlight"><span class="nb">apply</span> dec_sig_eq_iff <span class="kr">in</span> Heq.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_proj1_sig (dec_exist sub_index_prop a0 s0) =
dec_proj1_sig (dec_exist sub_index_prop a s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">a0 = a</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk52"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">a0 = a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">dec_exist sub_index_prop a0 s0 =
dec_exist sub_index_prop a s</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk53"><span class="highlight"><span class="nb">apply</span> dec_sig_eq_iff.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">a0 = a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">dec_proj1_sig (dec_exist sub_index_prop a0 s0) =
dec_proj1_sig (dec_exist sub_index_prop a s)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk54"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop a0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a l &lt;-&gt; a0 = a \/ In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk55"><span class="highlight"><span class="nb">split</span>; [<span class="nb">intuition</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop a0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">a0 = a \/ In a l -&gt; In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk56"><span class="highlight"><span class="nb">intros</span> [Heq | H]; [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop a0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">a0 = a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk57"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l) &lt;-&gt; 
In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">contradiction</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk58"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_sub_index</span> : Listing sub_index_listing.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Listing sub_index_listing</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk59"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Listing sub_index_listing</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5a"><span class="highlight"><span class="nb">unfold</span> sub_index_listing.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Listing (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5b"><span class="highlight"><span class="nb">clear</span> -finite_index.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Listing (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5c"><span class="highlight"><span class="nb">destruct</span> finite_index <span class="kr">as</span> [Hnodup Hfinite].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Listing (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5d"><span class="highlight"><span class="nb">split</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup (select_sub_indices index_listing)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk5e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk5e"><hr></label><div class="goal-conclusion"><span class="highlight">Full (select_sub_indices index_listing)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk5f"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk60" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk60"><span class="highlight"><span class="nb">clear</span> Hfinite finite_index.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk61"><span class="highlight"><span class="nb">induction</span> index_listing; [<span class="nb">constructor</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l -&gt; NoDup (select_sub_indices l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup (select_sub_indices (a :: l))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk62"><span class="highlight"><span class="nb">inversion</span> Hnodup.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l -&gt; NoDup (select_sub_indices l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">x = a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">l0 = l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup (select_sub_indices (a :: l))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk63"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l -&gt; NoDup (select_sub_indices l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup (select_sub_indices (a :: l))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk64"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l -&gt; NoDup (select_sub_indices l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup
  <span class="kr">match</span> decide (sub_index_prop a) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      dec_exist sub_index_prop a e
      :: select_sub_indices l
  | in_right =&gt; select_sub_indices l
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk65"><span class="highlight">spec IHl H2.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (select_sub_indices l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup
  <span class="kr">match</span> decide (sub_index_prop a) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      dec_exist sub_index_prop a e
      :: select_sub_indices l
  | in_right =&gt; select_sub_indices l
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk66"><span class="highlight"><span class="nb">destruct</span> (decide (sub_index_prop a)); [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (select_sub_indices l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">NoDup
  (dec_exist sub_index_prop a s
   :: select_sub_indices l)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk67"><span class="highlight"><span class="nb">constructor</span>; [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (select_sub_indices l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~
In (dec_exist sub_index_prop a s)
  (select_sub_indices l)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk68"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (select_sub_indices l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk69"><span class="highlight"><span class="nb">elim</span> H1.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (select_sub_indices l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In (dec_exist sub_index_prop a s)
  (select_sub_indices l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6a"><span class="highlight"><span class="nb">apply</span> in_select_sub_indices <span class="kr">in</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (a :: l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ In a l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup l</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup (select_sub_indices l)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop a</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In a l</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In a l</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6b"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Full (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6c"><span class="highlight"><span class="nb">intros</span> subi.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">subi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In subi (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6d"><span class="highlight"><span class="nb">unfold</span> sub_index <span class="kr">in</span> subi.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">subi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_sig sub_index_prop</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In subi (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6e"><span class="highlight">destruct_dec_sig subi i Hi Heq.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">subi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_sig sub_index_prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">subi = dec_exist sub_index_prop i Hi</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In subi (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk6f"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (dec_exist sub_index_prop i Hi)
  (select_sub_indices index_listing)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk70"><span class="highlight"><span class="nb">apply</span> in_select_sub_indices.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list, index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnodup</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">NoDup index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfinite</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Full index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In i index_listing</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> Hfinite.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Instance</span> <span class="nf">Sub_Free_has_been_sent_capability</span>
  : has_been_sent_capability Sub_Free
  :=
  composite_has_been_sent_capability sub_IM (free_constraint sub_IM) finite_sub_index sub_has_been_sent_capabilities.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk71"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_trace_sub_projection_empty</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">trx</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_protocol_trace_from X s trx)
  (<span class="nv">Hempty</span> : finite_trace_sub_projection trx = [])
  (<span class="nv">t</span> : (vtransition_item X))
  (<span class="nv">Hin</span> : In t trx)
  : <span class="kr">forall</span> <span class="nv">j</span>, In j sub_index_list -&gt; destination t j = s j.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection trx = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t trx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk72"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection trx = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t trx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk73" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk73"><span class="highlight"><span class="nb">generalize dependent</span> t.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">trx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s trx</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection trx = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t trx -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk74"><span class="highlight"><span class="nb">induction</span> Htr; <span class="nb">simpl</span>; <span class="nb">intros</span> t Hin.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection [] = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">False</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk75" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection
  ({|
   l := l;
   input := iom;
   destination := s;
   output := oom |} :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := l;
input := iom;
destination := s;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk75"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk76"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection [] = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">False</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">inversion</span> Hin.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk77"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection
  ({|
   l := l;
   input := iom;
   destination := s;
   output := oom |} :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := l;
input := iom;
destination := s;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk78"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> [i l].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l)
  (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection
  ({|
   l := existT
          (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
          l;
   input := iom;
   destination := s;
   output := oom |} :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := s;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk79"><span class="highlight"><span class="nb">destruct</span> H <span class="kr">as</span> [[[_om Hs&#39;] [[_s Hiom] Hvalid]] Htransition].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom) = (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection
  ({|
   l := existT
          (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
          l;
   input := iom;
   destination := s;
   output := oom |} :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := s;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7a"><span class="highlight"><span class="nb">unfold</span> transition <span class="kr">in</span> Htransition; <span class="nb">simpl</span> <span class="kr">in</span> Htransition.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) l (s&#39; i, iom) <span class="kr">in</span>
 (state_update IM s&#39; i si&#39;, om&#39;)) =
(s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection
  ({|
   l := existT
          (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
          l;
   input := iom;
   destination := s;
   output := oom |} :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := s;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7b"><span class="highlight"><span class="nb">destruct</span> (vtransition (IM i) l (s&#39; i, iom)) <span class="kr">as</span> [si&#39; om&#39;] <span class="nb">eqn</span>:Hteq.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(state_update IM s&#39; i si&#39;, om&#39;) =
(s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection
  ({|
   l := existT
          (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
          l;
   input := iom;
   destination := s;
   output := oom |} :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := s;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7c"><span class="highlight"><span class="nb">inversion</span> Htransition; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection
  ({|
   l := existT
          (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
          l;
   input := iom;
   destination := state_update IM s&#39; i si&#39;;
   output := oom |} :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(state_update IM s&#39; i si&#39;, oom) =
(state_update IM s&#39; i si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7d"><span class="highlight"><span class="nb">clear</span> Htransition.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection
  ({|
   l := existT
          (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
          l;
   input := iom;
   destination := state_update IM s&#39; i si&#39;;
   output := oom |} :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7e"><span class="highlight"><span class="kr">match</span> <span class="kp">type of</span> Hempty <span class="kr">with</span>
      | finite_trace_sub_projection (<span class="nl">?i</span> :: _) = _ =&gt; <span class="nb">remember</span> i <span class="kr">as</span> item
    <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection (item :: tl) = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk7f"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hempty.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">match</span> decide (from_sub_projection item) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    composite_transition_item_sub_projection
      item e
    :: finite_trace_sub_projection tl
| in_right =&gt; finite_trace_sub_projection tl
<span class="kr">end</span> = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk80" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk80"><span class="highlight"><span class="nb">destruct</span> (decide (from_sub_projection item))
    ; [<span class="nb">inversion</span> Hempty|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = [] -&gt;
<span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk81"><span class="highlight"><span class="nb">specialize</span> (IHHtr Hempty).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk82"><span class="highlight"><span class="nb">rewrite</span> Heqitem <span class="kr">in</span> n.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
  input := iom;
  destination := state_update IM s&#39; i si&#39;;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk83"><span class="highlight"><span class="nb">unfold</span> from_sub_projection <span class="kr">in</span> n.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
sub_index_prop
  (projT1
     (Common.l
        {|
        l := existT
               (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
               l;
        input := iom;
        destination := state_update IM s&#39; i si&#39;;
        output := oom |}))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk84"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> n.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t \/ 
In t tl</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt; destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk85"><span class="highlight"><span class="nb">destruct</span> Hin <span class="kr">as</span> [Heq | Hin]; <span class="nb">intros</span> j Hj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">destination t j = s&#39; j</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk86" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk86"><hr></label><div class="goal-conclusion"><span class="highlight">destination t j = s&#39; j</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk87"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |} = t</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk88" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk88"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">destination
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
  input := iom;
  destination := state_update IM s&#39; i si&#39;;
  output := oom |} j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk89"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update IM s&#39; i si&#39; j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8a"><span class="highlight"><span class="nb">apply</span> state_update_neq.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">j &lt;&gt; i</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8b"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j = i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8c"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">contradiction</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8d"><span class="highlight">+</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk8e"><span class="highlight"><span class="nb">assert</span> (Hji : j &lt;&gt; i).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">j &lt;&gt; i</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk8f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hji</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;&gt; i</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk8f"><hr></label><div class="goal-conclusion"><span class="highlight">destination t j = s&#39; j</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk90" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk90"><span class="highlight">{</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">j &lt;&gt; i</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk91"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j = i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk92"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In i sub_index_list</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">contradiction</span>.</span></span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk93"><span class="highlight">}</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">t</span> : vtransition_item X,
In t tl -&gt;
<span class="kr">forall</span> <span class="nv">j</span> : index,
In j sub_index_list -&gt;
destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hji</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;&gt; i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk94"><span class="highlight"><span class="nb">specialize</span> (IHHtr _ Hin j Hj).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop X (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">t</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition_item X</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">destination t j = state_update IM s&#39; i si&#39; j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
       i l;
input := iom;
destination := state_update IM s&#39; i si&#39;;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hempty</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection tl = []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In t tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In j sub_index_list</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hji</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;&gt; i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">destination t j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">rewrite</span> state_update_neq <span class="kr">in</span> IHHtr; <span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk95"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_trace_sub_projection_app</span>
  (<span class="nv">tr1</span> <span class="nv">tr2</span> : list (composite_transition_item IM))
  : finite_trace_sub_projection (tr1 ++ tr2) =
    finite_trace_sub_projection tr1 ++ finite_trace_sub_projection tr2.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr1, tr2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_sub_projection (tr1 ++ tr2) =
finite_trace_sub_projection tr1 ++
finite_trace_sub_projection tr2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk96"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr1, tr2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_sub_projection (tr1 ++ tr2) =
finite_trace_sub_projection tr1 ++
finite_trace_sub_projection tr2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk97"><span class="highlight"><span class="nb">induction</span> tr1;[<span class="bp">reflexivity</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr1, tr2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection (tr1 ++ tr2) =
finite_trace_sub_projection tr1 ++
finite_trace_sub_projection tr2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_sub_projection ((a :: tr1) ++ tr2) =
finite_trace_sub_projection (a :: tr1) ++
finite_trace_sub_projection tr2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk98"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr1, tr2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection (tr1 ++ tr2) =
finite_trace_sub_projection tr1 ++
finite_trace_sub_projection tr2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span> decide (from_sub_projection a) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    composite_transition_item_sub_projection a e
    :: finite_trace_sub_projection (tr1 ++ tr2)
| in_right =&gt; finite_trace_sub_projection (tr1 ++ tr2)
<span class="kr">end</span> =
<span class="kr">match</span> decide (from_sub_projection a) <span class="kr">with</span>
| <span class="nb">left</span> e =&gt;
    composite_transition_item_sub_projection a e
    :: finite_trace_sub_projection tr1
| in_right =&gt; finite_trace_sub_projection tr1
<span class="kr">end</span> ++ finite_trace_sub_projection tr2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk99" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk99"><span class="highlight"><span class="kr">match goal with</span>
  |- <span class="kp">context</span> [decide <span class="nl">?d</span>] =&gt; <span class="nb">destruct</span> (decide d)
  <span class="kr">end</span>
  ; [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr1, tr2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection (tr1 ++ tr2) =
finite_trace_sub_projection tr1 ++
finite_trace_sub_projection tr2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection a f
:: finite_trace_sub_projection (tr1 ++ tr2) =
(composite_transition_item_sub_projection a f
 :: finite_trace_sub_projection tr1) ++
finite_trace_sub_projection tr2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9a"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr1, tr2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection (tr1 ++ tr2) =
finite_trace_sub_projection tr1 ++
finite_trace_sub_projection tr2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection a f
:: finite_trace_sub_projection (tr1 ++ tr2) =
composite_transition_item_sub_projection a f
:: finite_trace_sub_projection tr1 ++
   finite_trace_sub_projection tr2</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9b"><span class="highlight"><span class="nb">rewrite</span> IHtr1.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr1, tr2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_sub_projection (tr1 ++ tr2) =
finite_trace_sub_projection tr1 ++
finite_trace_sub_projection tr2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection a</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection a f
:: finite_trace_sub_projection tr1 ++
   finite_trace_sub_projection tr2 =
composite_transition_item_sub_projection a f
:: finite_trace_sub_projection tr1 ++
   finite_trace_sub_projection tr2</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9c"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_trace_sub_projection_list_in</span>
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">itemX</span> : composite_transition_item IM)
  (<span class="nv">HitemX</span> : In itemX tr)
  (<span class="nv">j</span> := projT1 (l itemX))
  (<span class="nv">Hj</span> : sub_index_prop j)
  : In (composite_transition_item_sub_projection itemX Hj) (finite_trace_sub_projection tr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In itemX tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In itemX tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9e"><span class="highlight"><span class="nb">apply</span> in_split <span class="kr">in</span> HitemX.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">l1</span> <span class="nv">l2</span> : list (composite_transition_item IM),
  tr = l1 ++ itemX :: l2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk9f"><span class="highlight"><span class="nb">destruct</span> HitemX <span class="kr">as</span> [pre [suf HitemX]].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ itemX :: suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka0"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection (pre ++ itemX :: suf))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka1"><span class="highlight"><span class="nb">change</span> (itemX :: suf) <span class="kr">with</span> ([itemX] ++ suf).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection (pre ++ [itemX] ++ suf))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka2"><span class="highlight"><span class="nb">rewrite</span>! finite_trace_sub_projection_app.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection pre ++
   finite_trace_sub_projection [itemX] ++
   finite_trace_sub_projection suf)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka3"><span class="highlight"><span class="nb">apply</span> in_app_iff.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection pre) \/
In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection [itemX] ++
   finite_trace_sub_projection suf)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka4"><span class="highlight"><span class="nb">right</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection [itemX] ++
   finite_trace_sub_projection suf)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka5"><span class="highlight"><span class="nb">apply</span> in_app_iff.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection [itemX]) \/
In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection suf)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka6"><span class="highlight"><span class="nb">left</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  (finite_trace_sub_projection [itemX])</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka7"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  <span class="kr">match</span> decide (from_sub_projection itemX) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      [composite_transition_item_sub_projection itemX
         e]
  | in_right =&gt; []
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka8"><span class="highlight"><span class="nb">destruct</span> (decide (from_sub_projection itemX)); [|<span class="bp">contradiction</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection itemX</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In (composite_transition_item_sub_projection itemX Hj)
  [composite_transition_item_sub_projection itemX f]</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chka9"><span class="highlight"><span class="nb">left</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre, suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">projT1 (l itemX)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection itemX</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition_item_sub_projection itemX f =
composite_transition_item_sub_projection itemX Hj</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> composite_transition_item_sub_projection_proof_irrelevance.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkaa"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_trace_sub_projection_list_in_rev</span>
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">j</span> : index)
  (<span class="nv">itemj</span> : composite_transition_item sub_IM)
  (<span class="nv">Hitemj</span> : In itemj  (finite_trace_sub_projection tr))
  : <span class="kr">exists</span>
    (<span class="nv">itemX</span> : composite_transition_item IM)
    (<span class="nv">HitemX</span> : from_sub_projection itemX),
    In itemX tr /\ composite_transition_item_sub_projection itemX HitemX = itemj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In itemj (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">itemX</span> : composite_transition_item IM) (<span class="nv">HitemX</span> : 
                                          from_sub_projection
                                            itemX),
  In itemX tr /\
  composite_transition_item_sub_projection itemX
    HitemX = itemj</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkab"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In itemj (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">itemX</span> : composite_transition_item IM) (<span class="nv">HitemX</span> : 
                                          from_sub_projection
                                            itemX),
  In itemX tr /\
  composite_transition_item_sub_projection itemX
    HitemX = itemj</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkac"><span class="highlight"><span class="nb">rewrite</span> &lt;- finite_trace_sub_projection_alt_iff <span class="kr">in</span> Hitemj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In itemj (finite_trace_sub_projection_alt tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">itemX</span> : composite_transition_item IM) (<span class="nv">HitemX</span> : 
                                          from_sub_projection
                                            itemX),
  In itemX tr /\
  composite_transition_item_sub_projection itemX
    HitemX = itemj</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkad"><span class="highlight"><span class="nb">apply</span> in_map_iff <span class="kr">in</span> Hitemj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">x</span> : {a : composite_transition_item IM
      | from_sub_projection a},
  (<span class="kr">let</span> (<span class="nv">item</span>, e) := x <span class="kr">in</span>
   composite_transition_item_sub_projection
     item e) = itemj /\
  In x
    (list_annotate from_sub_projection
       (filter
          (<span class="kr">fun</span>
             <span class="nv">a</span> : composite_transition_item IM
           =&gt;
           bool_decide
             (from_sub_projection a)) tr)
       (filter_Forall tr))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">itemX</span> : composite_transition_item IM) (<span class="nv">HitemX</span> : 
                                          from_sub_projection
                                            itemX),
  In itemX tr /\
  composite_transition_item_sub_projection itemX
    HitemX = itemj</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkae" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkae"><span class="highlight"><span class="nb">destruct</span> Hitemj <span class="kr">as</span> [(itemX, HitemX) [Heq Hin]].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection itemX</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item_sub_projection itemX
  HitemX = itemj</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      from_sub_projection a) itemX HitemX)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) tr)
     (filter_Forall tr))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">itemX</span> : composite_transition_item IM) (<span class="nv">HitemX</span> : 
                                          from_sub_projection
                                            itemX),
  In itemX tr /\
  composite_transition_item_sub_projection itemX
    HitemX = itemj</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkaf"><span class="highlight"><span class="kr">exists</span> <span class="nv">itemX</span>, HitemX.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection itemX</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item_sub_projection itemX
  HitemX = itemj</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      from_sub_projection a) itemX HitemX)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) tr)
     (filter_Forall tr))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In itemX tr /\
composite_transition_item_sub_projection itemX HitemX =
itemj</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb0"><span class="highlight"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection itemX</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item_sub_projection itemX
  HitemX = itemj</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      from_sub_projection a) itemX HitemX)
  (list_annotate from_sub_projection
     (filter
        (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
         bool_decide (from_sub_projection a)) tr)
     (filter_Forall tr))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In itemX tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb1"><span class="highlight"><span class="nb">apply</span> in_list_annotate_forget <span class="kr">in</span> Hin.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection itemX</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item_sub_projection itemX
  HitemX = itemj</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (`
   (exist
      (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
       from_sub_projection a) itemX HitemX))
  (filter
     (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
      bool_decide (from_sub_projection a)) tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In itemX tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb2"><span class="highlight"><span class="nb">apply</span> filter_In <span class="kr">in</span> Hin.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">itemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">HitemX</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection itemX</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item_sub_projection itemX
  HitemX = itemj</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (`
   (exist
      (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM =&gt;
       from_sub_projection a) itemX HitemX)) tr /\
bool_decide
  (from_sub_projection
     (`
      (exist
         (<span class="kr">fun</span> <span class="nv">a</span> : composite_transition_item IM
          =&gt; from_sub_projection a) itemX HitemX))) =
true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In itemX tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> Hin.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb3"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">preloaded_finite_trace_sub_projection_last_state</span>
  (<span class="nv">start</span> : composite_state IM)
  (<span class="nv">transitions</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_protocol_trace_from Pre start transitions)
  (<span class="nv">lstx</span> := finite_trace_last start transitions)
  (<span class="nv">lstj</span> := finite_trace_last 
            (composite_state_sub_projection start)
            (finite_trace_sub_projection transitions)
            )
  : lstj = composite_state_sub_projection lstx.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstx</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last start transitions</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lstj = composite_state_sub_projection lstx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb4"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstx</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last start transitions</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lstj = composite_state_sub_projection lstx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb5"><span class="highlight"><span class="nb">unfold</span> lstx.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstx</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last start transitions</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lstj =
composite_state_sub_projection
  (finite_trace_last start transitions)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb6"><span class="highlight"><span class="nb">unfold</span> lstj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstx</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last start transitions</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions) =
composite_state_sub_projection
  (finite_trace_last start transitions)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb7"><span class="highlight"><span class="nb">clear</span> lstx.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions) =
composite_state_sub_projection
  (finite_trace_last start transitions)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb8"><span class="highlight"><span class="nb">clear</span> lstj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre start transitions</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions) =
composite_state_sub_projection
  (finite_trace_last start transitions)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkb9"><span class="highlight"><span class="nb">induction</span> Htr; [<span class="bp">reflexivity</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (finite_trace_sub_projection
     ({|
      l := l;
      input := iom;
      destination := s;
      output := oom |} :: tl)) =
composite_state_sub_projection
  (finite_trace_last s&#39;
     ({|
      l := l;
      input := iom;
      destination := s;
      output := oom |} :: tl))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkba"><span class="highlight"><span class="kr">match goal with</span>
  |- <span class="kp">context</span>[finite_trace_sub_projection (<span class="nl">?i</span> :: _)] =&gt; <span class="nb">remember</span> i <span class="kr">as</span> item
  <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := l;
input := iom;
destination := s;
output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (finite_trace_sub_projection (item :: tl)) =
composite_state_sub_projection
  (finite_trace_last s&#39; (item :: tl))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbb"><span class="highlight"><span class="nb">rewrite</span> finite_trace_last_cons.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := l;
input := iom;
destination := s;
output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (finite_trace_sub_projection (item :: tl)) =
composite_state_sub_projection
  (finite_trace_last (destination item) tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbc"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := l;
input := iom;
destination := s;
output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  <span class="kr">match</span> decide (from_sub_projection item) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      composite_transition_item_sub_projection item e
      :: finite_trace_sub_projection tl
  | in_right =&gt; finite_trace_sub_projection tl
  <span class="kr">end</span> =
composite_state_sub_projection
  (finite_trace_last (destination item) tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbd"><span class="highlight"><span class="nb">destruct</span> (decide (from_sub_projection item)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := l;
input := iom;
destination := s;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (composite_transition_item_sub_projection item f
   :: finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last (destination item) tl)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chkbe" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := l;
input := iom;
destination := s;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ from_sub_projection item</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chkbe"><hr></label><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last (destination item) tl)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkbf"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := l;
input := iom;
destination := s;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (composite_transition_item_sub_projection item f
   :: finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last (destination item) tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc0"><span class="highlight"><span class="nb">rewrite</span> finite_trace_last_cons.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := l;
input := iom;
destination := s;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last
  (destination
     (composite_transition_item_sub_projection item f))
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last (destination item) tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc1"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last
  (destination
     (composite_transition_item_sub_projection
        {|
        l := l;
        input := iom;
        destination := s;
        output := oom |} f))
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last
     (destination
        {|
        l := l;
        input := iom;
        destination := s;
        output := oom |}) tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc2"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc3"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">item =
{|
l := l;
input := iom;
destination := s;
output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last (destination item) tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc4"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last
     (destination
        {|
        l := l;
        input := iom;
        destination := s;
        output := oom |}) tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc5"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (finite_trace_sub_projection tl) =
composite_state_sub_projection
  (finite_trace_last s tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc6"><span class="highlight"><span class="nb">rewrite</span> &lt;- IHHtr; <span class="nb">clear</span> IHHtr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s&#39;)
  (finite_trace_sub_projection tl) =
finite_trace_last (composite_state_sub_projection s)
  (finite_trace_sub_projection tl)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc7"><span class="highlight"><span class="nb">f_equal</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition Pre l (s&#39;, iom) (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc8"><span class="highlight"><span class="nb">destruct</span> H <span class="kr">as</span> [[[_om Hs&#39;] [[_s Hiom] Hvalid]] Htransition].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s&#39;, iom) = (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkc9"><span class="highlight"><span class="nb">unfold</span> transition <span class="kr">in</span> Htransition; <span class="nb">simpl</span> <span class="kr">in</span> Htransition.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (free_composite_vlsm IM) l
  (s&#39;, iom) = (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkca"><span class="highlight"><span class="nb">unfold</span> vtransition <span class="kr">in</span> Htransition.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (s&#39;, iom) = (s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection s</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkcb"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Htransition.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid l (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s&#39; i, iom) <span class="kr">in</span>
 (state_update IM s&#39; i si&#39;, om&#39;)) =
(s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkcc"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (i, l).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) l (s&#39; i, iom) <span class="kr">in</span>
 (state_update IM s&#39; i si&#39;, om&#39;)) =
(s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkcd"><span class="highlight"><span class="nb">destruct</span> (vtransition (IM i) l (s&#39; i, iom)) <span class="kr">as</span> [si&#39; om&#39;] <span class="nb">eqn</span>:Hteq.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre s tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(state_update IM s&#39; i si&#39;, om&#39;) =
(s, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
  input := iom;
  destination := s;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection s</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkce"><span class="highlight"><span class="nb">inversion</span> Htransition; <span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
  input := iom;
  destination := state_update IM s&#39; i si&#39;;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htransition</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(state_update IM s&#39; i si&#39;, oom) =
(state_update IM s&#39; i si&#39;, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection
  (state_update IM s&#39; i si&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkcf"><span class="highlight"><span class="nb">clear</span> Htransition.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
from_sub_projection
  {|
  l := existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i l;
  input := iom;
  destination := state_update IM s&#39; i si&#39;;
  output := oom |}</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection
  (state_update IM s&#39; i si&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd0"><span class="highlight"><span class="nb">unfold</span> from_sub_projection <span class="kr">in</span> n.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~
sub_index_prop
  (projT1
     (Common.l
        {|
        l := existT
               (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
               l;
        input := iom;
        destination := state_update IM s&#39; i si&#39;;
        output := oom |}))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection
  (state_update IM s&#39; i si&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd1"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> n.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; =
composite_state_sub_projection
  (state_update IM s&#39; i si&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd2"><span class="highlight"><span class="nb">apply</span> functional_extensionality_dep_good.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : sub_index,
composite_state_sub_projection s&#39; x =
composite_state_sub_projection
  (state_update IM s&#39; i si&#39;) x</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd3"><span class="highlight"><span class="nb">intros</span> (j, Hj).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop j) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39;
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) j Hj) =
composite_state_sub_projection
  (state_update IM s&#39; i si&#39;)
  (exist
     (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
      bool_decide (sub_index_prop a) = true) j Hj)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd4"><span class="highlight"><span class="nb">unfold</span> composite_state_sub_projection.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop j) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">s&#39;
  (`
   (exist
      (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
       bool_decide (sub_index_prop a) = true) j Hj)) =
state_update IM s&#39; i si&#39;
  (`
   (exist
      (<span class="kr">fun</span> <span class="nv">a</span> : index =&gt;
       bool_decide (sub_index_prop a) = true) j Hj))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd5"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop j) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">s&#39; j = state_update IM s&#39; i si&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd6"><span class="highlight"><span class="nb">symmetry</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop j) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update IM s&#39; i si&#39; j = s&#39; j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd7"><span class="highlight"><span class="nb">apply</span> (state_update_neq _ s&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">bool_decide (sub_index_prop j) = true</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">j &lt;&gt; i</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd8"><span class="highlight"><span class="nb">apply</span> bool_decide_eq_true_1 <span class="kr">in</span> Hj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Pre
  (state_update IM s&#39; i si&#39;) tl</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (s&#39;, _om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">_s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hiom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_prop Pre (_s, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvalid</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">valid
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
     l) (s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hteq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) l (s&#39; i, iom) = (si&#39;, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">~ sub_index_prop i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">j &lt;&gt; i</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">clear</span> -n Hj; <span class="bp">congruence</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkd9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkd9"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">X_incl_Pre</span> : VLSM_incl X Pre.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl X Pre</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkda" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkda"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl X Pre</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkdb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkdb"><span class="highlight"><span class="nb">apply</span> VLSM_incl_trans <span class="kr">with</span> (machine (free_composite_vlsm IM)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm (composite_vlsm_machine IM constraint))
  (mk_vlsm (machine (free_composite_vlsm IM)))</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chkdc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chkdc"><hr></label><div class="goal-conclusion"><span class="highlight">VLSM_incl (mk_vlsm (machine (free_composite_vlsm IM)))
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        (free_composite_vlsm IM)))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkdd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkdd"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm (composite_vlsm_machine IM constraint))
  (mk_vlsm (machine (free_composite_vlsm IM)))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> (constraint_free_incl IM constraint).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkde" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkde"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl (mk_vlsm (machine (free_composite_vlsm IM)))
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        (free_composite_vlsm IM)))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> vlsm_incl_pre_loaded_with_all_messages_vlsm.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkdf" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkdf"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_trace_sub_projection_last_state</span>
  (<span class="nv">start</span> : composite_state IM)
  (<span class="nv">transitions</span> : list (composite_transition_item IM))
  (<span class="nv">Htr</span> : finite_protocol_trace_from X start transitions)
  (<span class="nv">lstx</span> := finite_trace_last start transitions)
  (<span class="nv">lstj</span> := finite_trace_last
    (composite_state_sub_projection start)
    (finite_trace_sub_projection transitions))
  : lstj = composite_state_sub_projection lstx.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstx</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last start transitions</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lstj = composite_state_sub_projection lstx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke0"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstx</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last start transitions</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lstj = composite_state_sub_projection lstx</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke1"><span class="highlight"><span class="nb">apply</span> preloaded_finite_trace_sub_projection_last_state.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstx</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last start transitions</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Pre start transitions</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke2"><span class="highlight"><span class="nb">apply</span> VLSM_incl_finite_protocol_trace_from <span class="kr">with</span> (machine X); [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">start</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">transitions</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X start transitions</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstx</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last start transitions</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lstj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last
  (composite_state_sub_projection start)
  (finite_trace_sub_projection transitions)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl_part (machine X)
  (pre_loaded_with_all_messages_vlsm_machine
     (free_composite_vlsm IM))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> X_incl_Pre.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke3"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">transition_sub_projection</span>
  <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span> <span class="nv">s&#39;</span> <span class="nv">om&#39;</span>
  (<span class="nv">Ht</span> : composite_transition IM l  (s, om) = (s&#39;, om&#39;))
  (<span class="nv">Hsub</span> : sub_index_prop (projT1 l))
  : composite_transition sub_IM
    (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
      (dec_exist _ (projT1 l) Hsub)
      (projT2 l)
    )
    (composite_state_sub_projection s, om)
    = (composite_state_sub_projection s&#39;, om&#39;).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition IM l (s, om) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition sub_IM
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) Hsub)
     (projT2 l))
  (composite_state_sub_projection s, om) =
(composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke4"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition IM l (s, om) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_transition sub_IM
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) Hsub)
     (projT2 l))
  (composite_state_sub_projection s, om) =
(composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke5"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition IM l (s, om) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) Hsub))
     (projT2 l)
     (composite_state_sub_projection s
        (dec_exist sub_index_prop (projT1 l) Hsub),
     om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop (projT1 l) Hsub) si&#39;,
 om&#39;)) = (composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke6"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) Hsub))
     (projT2 l)
     (composite_state_sub_projection s
        (dec_exist sub_index_prop (projT1 l) Hsub),
     om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop (projT1 l) Hsub) si&#39;,
 om&#39;)) = (composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke7"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop
           (projT1
              (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
                 i li)) Hsub))
     (projT2
        (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li))
     (composite_state_sub_projection s
        (dec_exist sub_index_prop
           (projT1
              (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
                 i li)) Hsub), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop
       (projT1
          (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
             li)) Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke8"><span class="highlight"><span class="nb">unfold</span> vtransition.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition
     (projT2
        (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li))
     (composite_state_sub_projection s
        (dec_exist sub_index_prop
           (projT1
              (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n))
                 i li)) Hsub), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop
       (projT1
          (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
             li)) Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chke9" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chke9"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li
     (composite_state_sub_projection s
        (dec_exist sub_index_prop i Hsub), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop i Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkea" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkea"><span class="highlight"><span class="nb">unfold</span> composite_state_sub_projection <span class="nb">at</span> <span class="mi">1</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   transition li
     (s (` (dec_exist sub_index_prop i Hsub)), om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop i Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkeb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkeb"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li (s i, om) <span class="kr">in</span>
 (state_update IM s i si&#39;, om&#39;)) = 
(s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop i Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkec" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkec"><span class="highlight"><span class="nb">destruct</span> (vtransition (IM i) li (s i, om)) <span class="kr">as</span> (si&#39;, omi&#39;) <span class="nb">eqn</span>:Hti.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">omi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, omi&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(state_update IM s i si&#39;, omi&#39;) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop i Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection s&#39;, om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chked" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chked"><span class="highlight"><span class="nb">inversion</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">omi'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, omi&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(state_update IM s i si&#39;, omi&#39;) = (s&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_update IM s i si&#39; = s&#39;</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">omi&#39; = om&#39;</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop i Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection
   (state_update IM s i si&#39;), om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkee" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkee"><span class="highlight"><span class="nb">subst</span> omi&#39; s&#39;.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(state_update IM s i si&#39;, om&#39;) =
(state_update IM s i si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop i Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection
   (state_update IM s i si&#39;), om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkef" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkef"><span class="highlight"><span class="nb">clear</span> Ht.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) := transition li (s i, om) <span class="kr">in</span>
 (state_update sub_IM
    (composite_state_sub_projection s)
    (dec_exist sub_index_prop i Hsub) si&#39;, om&#39;)) =
(composite_state_sub_projection
   (state_update IM s i si&#39;), om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf0"><span class="highlight"><span class="kr">match goal with</span>
  |- (<span class="kr">let</span> (<span class="nv">_</span>, _) := <span class="nl">?t</span> <span class="kr">in</span> _) = _ =&gt;
    <span class="nb">replace</span> t <span class="kr">with</span> (si&#39;, om&#39;)
  <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(state_update sub_IM
   (composite_state_sub_projection s)
   (dec_exist sub_index_prop i Hsub) si&#39;, om&#39;) =
(composite_state_sub_projection
   (state_update IM s i si&#39;), om&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf1"><span class="highlight"><span class="nb">f_equal</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39; =
composite_state_sub_projection
  (state_update IM s i si&#39;)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf2"><span class="highlight"><span class="nb">apply</span> functional_extensionality_dep.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : sub_index,
state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39; x =
composite_state_sub_projection
  (state_update IM s i si&#39;) x</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf3"><span class="highlight"><span class="nb">intro</span> sub_j.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39; sub_j =
composite_state_sub_projection
  (state_update IM s i si&#39;) sub_j</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf4"><span class="highlight"><span class="nb">unfold</span> sub_index <span class="kr">in</span> sub_j.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_sig sub_index_prop</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39; sub_j =
composite_state_sub_projection
  (state_update IM s i si&#39;) sub_j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf5"><span class="highlight">destruct_dec_sig sub_j j Hj Heqj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_sig sub_index_prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_j = dec_exist sub_index_prop j Hj</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39; sub_j =
composite_state_sub_projection
  (state_update IM s i si&#39;) sub_j</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf6"><span class="highlight"><span class="nb">subst</span> sub_j.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop j Hj) =
composite_state_sub_projection
  (state_update IM s i si&#39;)
  (dec_exist sub_index_prop j Hj)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf7"><span class="highlight"><span class="nb">unfold</span> composite_state_sub_projection <span class="nb">at</span> <span class="mi">2</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop j Hj) =
state_update IM s i si&#39;
  (` (dec_exist sub_index_prop j Hj))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkf8" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkf8"><span class="highlight"><span class="nb">destruct</span> (decide (j = i)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j = i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop j Hj) =
state_update IM s i si&#39;
  (` (dec_exist sub_index_prop j Hj))</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chkf9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;&gt; i</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chkf9"><hr></label><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop j Hj) =
state_update IM s i si&#39;
  (` (dec_exist sub_index_prop j Hj))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfa" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfa"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">e</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j = i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop j Hj) =
state_update IM s i si&#39;
  (` (dec_exist sub_index_prop j Hj))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfb" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfb"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop i Hj) =
state_update IM s i si&#39;
  (` (dec_exist sub_index_prop i Hj))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfc" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfc"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop i Hj) =
state_update IM s i si&#39; i</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfd" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfd"><span class="highlight"><span class="nb">rewrite</span> state_update_eq.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop i Hj) = si&#39;</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> sub_IM_state_update_eq.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkfe" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkfe"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;&gt; i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">state_update sub_IM (composite_state_sub_projection s)
  (dec_exist sub_index_prop i Hsub) si&#39;
  (dec_exist sub_index_prop j Hj) =
state_update IM s i si&#39;
  (` (dec_exist sub_index_prop j Hj))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chkff" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chkff"><span class="highlight"><span class="nb">rewrite</span>! state_update_neq; [<span class="bp">reflexivity</span>|<span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;&gt; i</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">dec_exist sub_index_prop j Hj &lt;&gt;
dec_exist sub_index_prop i Hsub</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk100" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk100"><span class="highlight"><span class="nb">intro</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;&gt; i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_exist sub_index_prop j Hj =
dec_exist sub_index_prop i Hsub</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk101" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk101"><span class="highlight"><span class="nb">apply</span> dec_sig_eq_iff <span class="kr">in</span> contra.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om, om'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">si'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hti</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vtransition (IM i) li (s i, om) = (si&#39;, om&#39;)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">j</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop j</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">j &lt;&gt; i</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">dec_proj1_sig (dec_exist sub_index_prop j Hj) =
dec_proj1_sig
  (dec_exist sub_index_prop i Hsub)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">contradiction</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk102" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk102"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">valid_sub_projection</span>
  <span class="nv">l</span> <span class="nv">s</span> <span class="nv">om</span>
  (<span class="nv">Hv</span> : composite_valid IM l  (s, om))
  (<span class="nv">Hsub</span> : sub_index_prop (projT1 l))
  : composite_valid sub_IM
    (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
      (dec_exist _ (projT1 l) Hsub)
      (projT2 l)
    )
    (composite_state_sub_projection s, om).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_valid sub_IM
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) Hsub)
     (projT2 l))
  (composite_state_sub_projection s, om)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk103" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk103"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_valid sub_IM
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) Hsub)
     (projT2 l))
  (composite_state_sub_projection s, om)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk104" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk104"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l (s, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vvalid
  (sub_IM (dec_exist sub_index_prop (projT1 l) Hsub))
  (projT2 l)
  (composite_state_sub_projection s
     (dec_exist sub_index_prop (projT1 l) Hsub), om)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk105" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk105"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> Hv.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span> vvalid (IM i) li (s i, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop (projT1 l)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vvalid
  (sub_IM (dec_exist sub_index_prop (projT1 l) Hsub))
  (projT2 l)
  (composite_state_sub_projection s
     (dec_exist sub_index_prop (projT1 l) Hsub), om)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk106" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk106"><span class="highlight"><span class="nb">destruct</span> l <span class="kr">as</span> (i, li).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">li</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vlabel (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">om</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid (IM i) li (s i, om)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_prop
  (projT1
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
        li))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop
        (projT1
           (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
              li)) Hsub))
  (projT2
     (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i li))
  (composite_state_sub_projection s
     (dec_exist sub_index_prop
        (projT1
           (existT (<span class="kr">fun</span> <span class="nv">n</span> : index =&gt; vlabel (IM n)) i
              li)) Hsub), om)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">composite_state_sub_projection_lift</span>
  (<span class="nv">ss</span> : composite_state sub_IM)
  (<span class="nv">i</span> : index)
  :=
  <span class="kr">match</span> (decide (sub_index_prop i)) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt; ss (dec_exist _ i e)
  | _ =&gt; proj1_sig (composite_s0 IM) i
  <span class="kr">end</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">sub_constraint</span>
  (<span class="nv">l</span> : composite_label sub_IM)
  (<span class="nv">som</span> : composite_state sub_IM * option message)
  : <span class="kt">Prop</span>
  :=
  <span class="kr">let</span> <span class="nv">i</span> := proj1_sig (projT1 l) <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">li</span> := projT2 l <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">lx</span> : composite_label IM := (existT (<span class="kr">fun</span> <span class="nv">i</span> : index =&gt; vlabel (IM i)) i li) <span class="kr">in</span>
  <span class="kr">let</span> (<span class="nv">ss</span>, om) := som <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">s</span> := composite_state_sub_projection_lift ss <span class="kr">in</span>
  constraint lx (s, om).</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Existing Instance</span> <span class="nf">X_has_been_sent_capability</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Context</span>
  (<span class="nv">seed</span> : message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Hno_equiv</span> : constraint_subsumption IM constraint (no_equivocations Free))
  (<span class="nv">seeded_constraint</span> : composite_label sub_IM -&gt; composite_state sub_IM * option message -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Xj</span> := composite_no_equivocation_vlsm_with_pre_loaded sub_IM (free_constraint sub_IM) sub_has_been_sent_capabilities finite_sub_index seed)
  .</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">

</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk107" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk107"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Xj_incl_Pre_Sub_Free</span>
  : VLSM_incl Xj (pre_loaded_with_all_messages_vlsm Sub_Free).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl Xj
  (pre_loaded_with_all_messages_vlsm Sub_Free)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk108" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk108"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl Xj
  (pre_loaded_with_all_messages_vlsm Sub_Free)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk109" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk109"><span class="highlight"><span class="nb">subst</span> Xj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (composite_no_equivocation_vlsm_with_pre_loaded
     sub_IM (free_constraint sub_IM)
     sub_has_been_sent_capabilities finite_sub_index
     seed)
  (pre_loaded_with_all_messages_vlsm Sub_Free)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10a"><span class="highlight"><span class="nb">unfold</span> composite_no_equivocation_vlsm_with_pre_loaded.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           sub_has_been_sent_capabilities
           finite_sub_index seed)) seed)
  (pre_loaded_with_all_messages_vlsm Sub_Free)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10b"><span class="highlight"><span class="nb">specialize</span>
    (preloaded_constraint_subsumption_pre_loaded_with_all_messages_incl sub_IM
      (no_equivocations_additional_constraint_with_pre_loaded sub_IM
        (free_constraint sub_IM) sub_has_been_sent_capabilities
        finite_sub_index seed)
      (free_constraint sub_IM)
    ) <span class="kr">as</span> Hincl.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">preloaded_constraint_subsumption sub_IM
  (no_equivocations_additional_constraint_with_pre_loaded
     sub_IM (free_constraint sub_IM)
     sub_has_been_sent_capabilities
     finite_sub_index seed)
  (free_constraint sub_IM) -&gt;
VLSM_incl
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           sub_has_been_sent_capabilities
           finite_sub_index seed)))
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (free_constraint sub_IM)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           sub_has_been_sent_capabilities
           finite_sub_index seed)) seed)
  (pre_loaded_with_all_messages_vlsm Sub_Free)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10c"><span class="highlight">spec Hincl; [<span class="nb">intros</span> s Hs l om H; <span class="bp">exact</span> I|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           sub_has_been_sent_capabilities
           finite_sub_index seed)))
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (free_constraint sub_IM)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (pre_loaded_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           sub_has_been_sent_capabilities
           finite_sub_index seed)) seed)
  (pre_loaded_with_all_messages_vlsm Sub_Free)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10d"><span class="highlight"><span class="kr">match goal with</span>
  |- <span class="kp">context</span> [pre_loaded_vlsm <span class="nl">?v</span> _] =&gt;
    <span class="nb">apply</span> VLSM_incl_trans <span class="kr">with</span> (machine (pre_loaded_with_all_messages_vlsm v))
  <span class="kr">end</span>
  ; [| <span class="nb">apply</span> Hincl].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           sub_has_been_sent_capabilities
           finite_sub_index seed)))
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (free_constraint sub_IM)))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (VLSM_class_pre_loaded_with_messages
        (projT2
           (projT2
              (composite_vlsm sub_IM
                 (no_equivocations_additional_constraint_with_pre_loaded
                    sub_IM (free_constraint sub_IM)
                    sub_has_been_sent_capabilities
                    finite_sub_index seed)))) seed))
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed)))))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10e"><span class="highlight"><span class="nb">clear</span> Hincl.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (VLSM_class_pre_loaded_with_messages
        (projT2
           (projT2
              (composite_vlsm sub_IM
                 (no_equivocations_additional_constraint_with_pre_loaded
                    sub_IM (free_constraint sub_IM)
                    sub_has_been_sent_capabilities
                    finite_sub_index seed)))) seed))
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed)))))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk10f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk10f"><span class="highlight"><span class="kr">match goal with</span>
  |- <span class="kp">context</span> [pre_loaded_with_all_messages_vlsm <span class="nl">?v</span>] =&gt;
    <span class="nb">apply</span> VLSM_incl_trans <span class="kr">with</span> (machine (pre_loaded_vlsm v (<span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">True</span>)))
  <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (VLSM_class_pre_loaded_with_messages
        (projT2
           (projT2
              (composite_vlsm sub_IM
                 (no_equivocations_additional_constraint_with_pre_loaded
                    sub_IM (free_constraint sub_IM)
                    sub_has_been_sent_capabilities
                    finite_sub_index seed)))) seed))
  (mk_vlsm
     (machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed))
           (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))))</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk110" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk110"><hr></label><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM 
                 (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed))
           (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))))
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM 
                 (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed)))))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk111" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk111"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (VLSM_class_pre_loaded_with_messages
        (projT2
           (projT2
              (composite_vlsm sub_IM
                 (no_equivocations_additional_constraint_with_pre_loaded
                    sub_IM (free_constraint sub_IM)
                    sub_has_been_sent_capabilities
                    finite_sub_index seed)))) seed))
  (mk_vlsm
     (machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed))
           (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk112" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk112"><span class="highlight"><span class="kr">match goal with</span>
    |- <span class="kp">context</span> [pre_loaded_vlsm <span class="nl">?v</span> _] =&gt;
      <span class="nb">apply</span> (pre_loaded_vlsm_incl v seed (<span class="kr">fun</span> <span class="nv">m</span> =&gt; <span class="kt">True</span>))
    <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message, seed m -&gt; <span class="kt">True</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">intuition</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk113" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk113"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed))
           (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))))
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed)))))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk114" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk114"><span class="highlight"><span class="kr">match goal with</span>
    |- <span class="kp">context</span> [pre_loaded_with_all_messages_vlsm <span class="nl">?v</span>] =&gt;
      <span class="nb">specialize</span> (pre_loaded_with_all_messages_vlsm_is_pre_loaded_with_True v) <span class="kr">as</span> Hincl
    <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_eq
  (pre_loaded_with_all_messages_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           sub_has_been_sent_capabilities
           finite_sub_index seed)))
  (pre_loaded_vlsm
     (composite_vlsm sub_IM
        (no_equivocations_additional_constraint_with_pre_loaded
           sub_IM (free_constraint sub_IM)
           sub_has_been_sent_capabilities
           finite_sub_index seed))
     (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed))
           (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))))
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed)))))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk115" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk115"><span class="highlight"><span class="nb">apply</span> VLSM_eq_incl_iff <span class="kr">in</span> Hincl.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm sub_IM
           (no_equivocations_additional_constraint_with_pre_loaded
              sub_IM (free_constraint sub_IM)
              sub_has_been_sent_capabilities
              finite_sub_index seed))))
  (mk_vlsm
     (VLSM_class_pre_loaded_with_messages
        (projT2
           (projT2
              (composite_vlsm sub_IM
                 (no_equivocations_additional_constraint_with_pre_loaded
                    sub_IM
                    (free_constraint sub_IM)
                    sub_has_been_sent_capabilities
                    finite_sub_index seed))))
        (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))) /\
VLSM_incl
  (mk_vlsm
     (VLSM_class_pre_loaded_with_messages
        (projT2
           (projT2
              (composite_vlsm sub_IM
                 (no_equivocations_additional_constraint_with_pre_loaded
                    sub_IM
                    (free_constraint sub_IM)
                    sub_has_been_sent_capabilities
                    finite_sub_index seed))))
        (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>)))
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm sub_IM
           (no_equivocations_additional_constraint_with_pre_loaded
              sub_IM (free_constraint sub_IM)
              sub_has_been_sent_capabilities
              finite_sub_index seed))))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed))
           (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))))
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed)))))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk116" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk116"><span class="highlight"><span class="nb">apply</span> proj2 <span class="kr">in</span> Hincl.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hincl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM_incl
  (mk_vlsm
     (VLSM_class_pre_loaded_with_messages
        (projT2
           (projT2
              (composite_vlsm sub_IM
                 (no_equivocations_additional_constraint_with_pre_loaded
                    sub_IM
                    (free_constraint sub_IM)
                    sub_has_been_sent_capabilities
                    finite_sub_index seed))))
        (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>)))
  (mk_vlsm
     (pre_loaded_with_all_messages_vlsm_machine
        (composite_vlsm sub_IM
           (no_equivocations_additional_constraint_with_pre_loaded
              sub_IM (free_constraint sub_IM)
              sub_has_been_sent_capabilities
              finite_sub_index seed))))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl
  (mk_vlsm
     (machine
        (pre_loaded_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed))
           (<span class="kr">fun</span> <span class="nv">_</span> : message =&gt; <span class="kt">True</span>))))
  (mk_vlsm
     (machine
        (pre_loaded_with_all_messages_vlsm
           (composite_vlsm sub_IM
              (no_equivocations_additional_constraint_with_pre_loaded
                 sub_IM (free_constraint sub_IM)
                 sub_has_been_sent_capabilities
                 finite_sub_index seed)))))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Property of a composite trace requiring that every message received in an
transition involving a machine in the chosen subset must either belong to
the set specified by <span class="inlinecode"><span class="id" title="var">seed</span></span>, or it must <span class="inlinecode"><span class="id" title="var">have_been_sent</span></span> by some machine
in the chosen subset (prior to it being received).

</div><pre class="alectryon-io"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">trace_sub_item_input_is_seeded_or_sub_previously_sent</span>
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  : <span class="kt">Prop</span>
  :=
  <span class="kr">forall</span> <span class="nv">pre</span> <span class="nv">item</span> <span class="nv">suf</span> <span class="nv">m</span>,
    tr = pre ++ [item] ++ suf -&gt;
    input item = Some m -&gt;
    from_sub_projection item -&gt;
    seed m \/ <span class="kr">exists</span> <span class="nv">pre_item</span>, In pre_item pre /\ output pre_item = Some m /\ from_sub_projection pre_item.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">state_sub_item_input_is_seeded_or_sub_previously_sent</span>
  (<span class="nv">s</span> : composite_state IM)
  : <span class="kt">Prop</span>
  := <span class="kr">forall</span> <span class="nv">is</span> <span class="nv">tr</span>,
    finite_protocol_trace_init_to Pre <span class="kr">is</span> s tr -&gt;
    trace_sub_item_input_is_seeded_or_sub_previously_sent tr.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk117" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk117"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_protocol_trace_sub_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">Hmsg</span> :  trace_sub_item_input_is_seeded_or_sub_previously_sent tr)
  (<span class="nv">Htr</span> : finite_protocol_trace X s tr)
  : finite_protocol_trace Xj (composite_state_sub_projection s) (finite_trace_sub_projection tr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk118" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk118"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk119" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk119"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr His].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11a"><span class="highlight"><span class="nb">apply</span> (composite_initial_state_sub_projection s) <span class="kr">in</span> His.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11b"><span class="highlight"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11c"><span class="highlight"><span class="nb">apply</span> (initial_is_protocol Xj) <span class="kr">in</span> His <span class="kr">as</span> Hisp.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11d"><span class="highlight"><span class="nb">induction</span> tr <span class="nb">using</span> rev_ind; <span class="nb">simpl</span>
  ; [<span class="nb">constructor</span>; <span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr -&gt;
finite_protocol_trace_from X s tr -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11e"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr /\
finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr -&gt;
finite_protocol_trace_from X s tr -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk11f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk11f"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr Hx].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr -&gt;
finite_protocol_trace_from X s tr -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk120" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk120"><span class="highlight">spec IHtr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr -&gt;
finite_protocol_trace_from X s tr -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk121" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk121"><hr></label><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk122" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk122"><span class="highlight">{</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr -&gt;
finite_protocol_trace_from X s tr -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk123" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk123"><span class="highlight"><span class="nb">intros</span> pre item suf m Heq Hin_m Hitem.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr -&gt;
finite_protocol_trace_from X s tr -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tr = pre ++ [item] ++ suf</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">seed m \/
(<span class="kr">exists</span> <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item pre /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk124" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk124"><span class="highlight"><span class="nb">subst</span> tr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s (pre ++ [item] ++ suf))
  [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s
  (pre ++ [item] ++ suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  ((pre ++ [item] ++ suf) ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ [item] ++ suf) -&gt;
finite_protocol_trace_from X s
  (pre ++ [item] ++ suf) -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection
     (pre ++ [item] ++ suf))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">seed m \/
(<span class="kr">exists</span> <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item pre /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk125" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk125"><span class="highlight"><span class="nb">specialize</span> (Hmsg pre item (suf ++ [x]) m).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s (pre ++ [item] ++ suf))
  [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s
  (pre ++ [item] ++ suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(pre ++ [item] ++ suf) ++ [x] =
pre ++ [item] ++ suf ++ [x] -&gt;
input item = Some m -&gt;
from_sub_projection item -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item pre /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ [item] ++ suf) -&gt;
finite_protocol_trace_from X s
  (pre ++ [item] ++ suf) -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection
     (pre ++ [item] ++ suf))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">seed m \/
(<span class="kr">exists</span> <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item pre /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk126" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk126"><span class="highlight"><span class="nb">rewrite</span>! app_assoc <span class="kr">in</span> Hmsg.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s (pre ++ [item] ++ suf))
  [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s
  (pre ++ [item] ++ suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">((pre ++ [item]) ++ suf) ++ [x] =
((pre ++ [item]) ++ suf) ++ [x] -&gt;
input item = Some m -&gt;
from_sub_projection item -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item pre /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ [item] ++ suf) -&gt;
finite_protocol_trace_from X s
  (pre ++ [item] ++ suf) -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection
     (pre ++ [item] ++ suf))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">seed m \/
(<span class="kr">exists</span> <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item pre /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk127" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk127"><span class="highlight"><span class="nb">specialize</span> (Hmsg eq_refl Hin_m Hitem).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">suf</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s (pre ++ [item] ++ suf))
  [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s
  (pre ++ [item] ++ suf)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item pre /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ [item] ++ suf) -&gt;
finite_protocol_trace_from X s
  (pre ++ [item] ++ suf) -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection
     (pre ++ [item] ++ suf))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">input item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">seed m \/
(<span class="kr">exists</span> <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item pre /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">destruct</span> Hmsg <span class="kr">as</span> [Hseed | Hmsg]
    ; [<span class="nb">left</span> | <span class="nb">right</span>] ; <span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk128" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk128"><span class="highlight">}</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr -&gt;
finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk129" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk129"><span class="highlight">spec IHtr Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection (tr ++ [x]))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12a"><span class="highlight"><span class="nb">rewrite</span> finite_trace_sub_projection_app.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr ++
   finite_trace_sub_projection [x])</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12b"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr) /\
finite_protocol_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))
  (finite_trace_sub_projection [x])</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12c"><span class="highlight"><span class="nb">split</span>; [<span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (tr ++ [x])</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))
  (finite_trace_sub_projection [x])</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12d"><span class="highlight"><span class="nb">specialize</span> (Hmsg tr x []).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))
  (finite_trace_sub_projection [x])</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12e"><span class="highlight"><span class="kr">match goal with</span>
  |- finite_protocol_trace_from _ <span class="nl">?l</span> _ =&gt; <span class="nb">remember</span> l <span class="kr">as</span> lst
  <span class="kr">end</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj lst
  (finite_trace_sub_projection [x])</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk12f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk12f"><span class="highlight"><span class="nb">assert</span> (Hlst : protocol_state_prop Xj lst).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj lst</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk130" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk130"><hr></label><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj lst
  (finite_trace_sub_projection [x])</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk131" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk131"><span class="highlight">{</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj lst</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk132" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk132"><span class="highlight"><span class="nb">apply</span> finite_ptrace_last_pstate <span class="kr">in</span> IHtr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj lst</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk133" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk133"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk134" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk134"><span class="highlight">}</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj lst
  (finite_trace_sub_projection [x])</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk135" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk135"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj lst
  <span class="kr">match</span> decide (from_sub_projection x) <span class="kr">with</span>
  | <span class="nb">left</span> e =&gt;
      [composite_transition_item_sub_projection x e]
  | in_right =&gt; []
  <span class="kr">end</span></span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk136" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk136"><span class="highlight"><span class="nb">destruct</span> (decide (from_sub_projection x))
  ;[|<span class="nb">constructor</span>; <span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection x</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj lst
  [composite_transition_item_sub_projection x f]</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk137" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk137"><span class="highlight"><span class="nb">apply</span> (finite_ptrace_singleton Xj).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection x</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 (l x)) f)
     (projT2 (l x))) (lst, input x)
  (composite_state_sub_projection (destination x),
  output x)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk138" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk138"><span class="highlight"><span class="nb">inversion</span> Hx.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++ [x] = tr ++ [x] ++ [] -&gt;
input x = Some m -&gt;
from_sub_projection x -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr) [x]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection x</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tl</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (finite_trace_last s tr, iom) 
  (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">{|
l := l;
input := iom;
destination := s0;
output := oom |} = x</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">tl = []</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 (Common.l x)) f)
     (projT2 (Common.l x))) (lst, input x)
  (composite_state_sub_projection (destination x),
  output x)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk139" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk139"><span class="highlight"><span class="nb">subst</span> x tl.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">label</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] ++ [] -&gt;
input
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (finite_trace_last s tr, iom) 
  (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop
        (projT1
           (Common.l
              {|
              l := l;
              input := iom;
              destination := s0;
              output := oom |})) f)
     (projT2
        (Common.l
           {|
           l := l;
           input := iom;
           destination := s0;
           output := oom |})))
  (lst,
  input
    {|
    l := l;
    input := iom;
    destination := s0;
    output := oom |})
  (composite_state_sub_projection
     (destination
        {|
        l := l;
        input := iom;
        destination := s0;
        output := oom |}),
  output
    {|
    l := l;
    input := iom;
    destination := s0;
    output := oom |})</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13a"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_transition X l
  (finite_trace_last s tr, iom) 
  (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13b"><span class="highlight"><span class="nb">destruct</span> H3 <span class="kr">as</span> [Hv Ht].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid X l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13c"><span class="highlight"><span class="nb">specialize</span> (transition_sub_projection _ _ _ _ _ Ht f)
    <span class="kr">as</span> Htj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_valid X l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13d"><span class="highlight"><span class="nb">destruct</span> Hv <span class="kr">as</span> [_ [_ [Hv Hc]]].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13e"><span class="highlight"><span class="nb">specialize</span> (valid_sub_projection _ _ _ Hv f)
    <span class="kr">as</span> Hvj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk13f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk13f"><span class="highlight"><span class="nb">rewrite</span> &lt;- H1 <span class="kr">in</span> Htj, Hvj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk140" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk140"><span class="highlight"><span class="nb">assert</span> (Hlst&#39; : composite_state_sub_projection s&#39; = lst).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk141" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk141"><hr></label><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk142" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk142"><span class="highlight">{</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk143" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk143"><span class="highlight"><span class="nb">subst</span> lst s&#39;.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_state_sub_projection
  (finite_trace_last s tr) =
finite_trace_last (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk144" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk144"><span class="highlight"><span class="nb">symmetry</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s)
  (finite_trace_sub_projection tr) =
composite_state_sub_projection
  (finite_trace_last s tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk145" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk145"><span class="highlight"><span class="nb">apply</span> finite_trace_sub_projection_last_state.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection s)
     (finite_trace_sub_projection tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection
     (finite_trace_last s tr), iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from X s tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk146" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk146"><span class="highlight">}</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l))
  (composite_state_sub_projection s&#39;, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk147" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk147"><span class="highlight"><span class="nb">rewrite</span> Hlst&#39; <span class="kr">in</span> Htj, Hvj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_transition Xj
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)
  (composite_state_sub_projection s0, oom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk148" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk148"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; [<span class="bp">assumption</span> | | <span class="bp">assumption</span> | | <span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Xj iom</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk149" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk149"><hr></label><div class="goal-conclusion"><span class="highlight">no_equivocations_except_from
  (free_composite_vlsm sub_IM)
  (<span class="kr">fun</span> <span class="nv">m</span> : message =&gt;
   vinitial_message_prop 
     (free_composite_vlsm sub_IM) m \/ 
   seed m)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14a"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Xj iom</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14b"><span class="highlight"><span class="nb">destruct</span> iom <span class="kr">as</span> [m|]; [|<span class="nb">apply</span> (option_protocol_message_None Xj)].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : message,
tr ++
[{|
 l := l;
 input := Some m;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := Some m;
 destination := s0;
 output := oom |}] -&gt;
Some m = Some m0 -&gt;
from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |} -&gt;
seed m0 \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m0 /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">option_protocol_message_prop Xj (Some m)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14c"><span class="highlight"><span class="nb">apply</span> (option_protocol_message_Some Xj).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : message,
tr ++
[{|
 l := l;
 input := Some m;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := Some m;
 destination := s0;
 output := oom |}] -&gt;
Some m = Some m0 -&gt;
from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |} -&gt;
seed m0 \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m0 /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_message_prop Xj m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14d"><span class="highlight"><span class="nb">specialize</span> (Hmsg m eq_refl eq_refl f).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_message_prop Xj m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14e"><span class="highlight"><span class="nb">destruct</span> Hmsg <span class="kr">as</span> [Hseed | [item [Hitem [Hout Hsub_item]]]]
    ; [<span class="nb">apply</span> (initial_message_is_protocol Xj); <span class="nb">right</span>; <span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_message_prop Xj m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk14f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk14f"><span class="highlight"><span class="nb">specialize</span> (finite_trace_sub_projection_list_in tr item Hitem Hsub_item)
      <span class="kr">as</span> Hin_sub.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (composite_transition_item_sub_projection
     item Hsub_item)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_message_prop Xj m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk150" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk150"><span class="highlight"><span class="nb">apply</span> (protocol_trace_output_is_protocol Xj _ _ IHtr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (composite_transition_item_sub_projection
     item Hsub_item)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists (field_selector output m)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk151" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk151"><span class="highlight"><span class="nb">apply</span> Exists_exists.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (composite_transition_item_sub_projection
     item Hsub_item)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : transition_item,
  In x (finite_trace_sub_projection tr) /\
  field_selector output m x</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk152" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk152"><span class="highlight"><span class="nb">eexists</span> _.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (composite_transition_item_sub_projection
     item Hsub_item)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In <span class="nl">?Goal0</span> (finite_trace_sub_projection tr) /\
field_selector output m <span class="nl">?Goal0</span></span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk153" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk153"><span class="highlight"><span class="nb">split</span>; [<span class="nb">apply</span> Hin_sub|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hin_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In
  (composite_transition_item_sub_projection
     item Hsub_item)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">field_selector output m
  (composite_transition_item_sub_projection item
     Hsub_item)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk154" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk154"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint l (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">no_equivocations_except_from
  (free_composite_vlsm sub_IM)
  (<span class="kr">fun</span> <span class="nv">m</span> : message =&gt;
   vinitial_message_prop (free_composite_vlsm sub_IM)
     m \/ seed m)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk155" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk155"><span class="highlight"><span class="nb">apply</span> Hno_equiv <span class="kr">in</span> Hc.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">iom, oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := iom;
 destination := s0;
 output := oom |}] -&gt;
iom = Some m -&gt;
from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |} -&gt;
seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := iom;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := iom;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations Free l
  (finite_trace_last s tr, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, iom) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">no_equivocations_except_from
  (free_composite_vlsm sub_IM)
  (<span class="kr">fun</span> <span class="nv">m</span> : message =&gt;
   vinitial_message_prop (free_composite_vlsm sub_IM)
     m \/ seed m)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, iom)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk156" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk156"><span class="highlight"><span class="nb">destruct</span> iom <span class="kr">as</span> [m|]; [|<span class="bp">exact</span> I].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : message,
tr ++
[{|
 l := l;
 input := Some m;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := Some m;
 destination := s0;
 output := oom |}] -&gt;
Some m = Some m0 -&gt;
from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |} -&gt;
seed m0 \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m0 /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid IM l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">no_equivocations Free l
  (finite_trace_last s tr, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">transition l (finite_trace_last s tr, Some m) =
(s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_valid sub_IM
  (existT
     (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">no_equivocations_except_from
  (free_composite_vlsm sub_IM)
  (<span class="kr">fun</span> <span class="nv">m</span> : message =&gt;
   vinitial_message_prop (free_composite_vlsm sub_IM)
     m \/ seed m)
  (existT (<span class="kr">fun</span> <span class="nv">n</span> : sub_index =&gt; vlabel (sub_IM n))
     (dec_exist sub_index_prop (projT1 l) f)
     (projT2 l)) (lst, Some m)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk157" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk157"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : message,
tr ++
[{|
 l := l;
 input := Some m;
 destination := s0;
 output := oom |}] =
tr ++
[{|
 l := l;
 input := Some m;
 destination := s0;
 output := oom |}] -&gt;
Some m = Some m0 -&gt;
from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |} -&gt;
seed m0 \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m0 /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_has_been_sent sub_IM
  (free_constraint sub_IM)
  sub_has_been_sent_capabilities lst m \/
vinitial_message_prop (free_composite_vlsm sub_IM) m \/
seed m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk158" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk158"><span class="highlight"><span class="nb">specialize</span> (Hmsg m eq_refl eq_refl f).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">seed m \/
(<span class="kr">exists</span>
   <span class="nv">pre_item</span> : composite_transition_item IM,
   In pre_item tr /\
   output pre_item = Some m /\
   from_sub_projection pre_item)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_has_been_sent sub_IM
  (free_constraint sub_IM)
  sub_has_been_sent_capabilities lst m \/
vinitial_message_prop (free_composite_vlsm sub_IM) m \/
seed m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk159" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk159"><span class="highlight"><span class="nb">destruct</span> Hmsg <span class="kr">as</span> [Hseed | [item [Hitem [Hout Hsub_item]]]]
    ; [<span class="nb">right</span>; <span class="nb">right</span>; <span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_has_been_sent sub_IM
  (free_constraint sub_IM)
  sub_has_been_sent_capabilities lst m \/
vinitial_message_prop (free_composite_vlsm sub_IM) m \/
seed m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15a"><span class="highlight"><span class="nb">left</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_has_been_sent sub_IM
  (free_constraint sub_IM)
  sub_has_been_sent_capabilities lst m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15b"><span class="highlight"><span class="nb">specialize</span> (proper_sent Sub_Free lst) <span class="kr">as</span> Hproper.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst -&gt;
<span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_has_been_sent sub_IM
  (free_constraint sub_IM)
  sub_has_been_sent_capabilities lst m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15c"><span class="highlight"><span class="nb">assert</span> (Hlstp : protocol_state_prop (pre_loaded_with_all_messages_vlsm Sub_Free) lst).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst -&gt;
<span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free) lst</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk15d" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst -&gt;
<span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk15d"><hr></label><div class="goal-conclusion"><span class="highlight">composite_has_been_sent sub_IM
  (free_constraint sub_IM)
  sub_has_been_sent_capabilities lst m</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15e"><span class="highlight">{</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst -&gt;
<span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free) lst</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk15f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk15f"><span class="highlight"><span class="nb">apply</span> VLSM_incl_protocol_state <span class="kr">with</span> (MX := machine Xj); [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst -&gt;
<span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">VLSM_incl_part (machine Xj)
  (pre_loaded_with_all_messages_vlsm_machine Sub_Free)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">apply</span> Xj_incl_Pre_Sub_Free.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk160" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk160"><span class="highlight">}</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm
     Sub_Free) lst -&gt;
<span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_has_been_sent sub_IM
  (free_constraint sub_IM)
  sub_has_been_sent_capabilities lst m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk161" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk161"><span class="highlight">spec Hproper Hlstp.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">composite_has_been_sent sub_IM
  (free_constraint sub_IM)
  sub_has_been_sent_capabilities lst m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk162" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk162"><span class="highlight"><span class="nb">apply</span> Hproper.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">selected_message_exists_in_all_preloaded_traces
  Sub_Free (field_selector output) lst m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk163" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk163"><span class="highlight"><span class="nb">apply</span> has_been_sent_consistency; [<span class="nb">apply</span> Sub_Free_has_been_sent_capability| <span class="bp">assumption</span>| ].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">selected_message_exists_in_some_preloaded_traces
  Sub_Free (field_selector output) lst m</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk164" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk164"><span class="highlight"><span class="kr">exists</span> (<span class="nv">composite_state_sub_projection</span> <span class="nv">s</span>), (finite_trace_sub_projection tr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span>
  <span class="nv">_</span> : finite_protocol_trace_init_to
        (pre_loaded_with_all_messages_vlsm Sub_Free)
        (composite_state_sub_projection s) lst
        (finite_trace_sub_projection tr),
  trace_has_message (field_selector output) m
    (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk165" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk165"><span class="highlight"><span class="nb">split</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_init_to
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  (composite_state_sub_projection s) lst
  (finite_trace_sub_projection tr)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk166" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk166"><hr></label><div class="goal-conclusion"><span class="highlight">trace_has_message (field_selector output) m
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk167" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk167"><span class="highlight">{</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_init_to
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  (composite_state_sub_projection s) lst
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk168" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk168"><span class="highlight"><span class="nb">split</span>;[|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from_to
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  (composite_state_sub_projection s) lst
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk169" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk169"><span class="highlight"><span class="nb">apply</span> (VLSM_incl_finite_protocol_trace_from_to _ _ Xj_incl_Pre_Sub_Free).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from_to (mk_vlsm (machine Xj))
  (composite_state_sub_projection s) lst
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16a"><span class="highlight"><span class="nb">apply</span> ptrace_add_last.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from (mk_vlsm (machine Xj))
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk16b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk16b"><hr></label><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s)
  (finite_trace_sub_projection tr) = lst</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16c"><span class="highlight"><span class="bp">assumption</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s)
  (finite_trace_sub_projection tr) = lst</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">       </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="nb">symmetry</span>;<span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16d"><span class="highlight">}</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_has_message (field_selector output) m
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16e"><span class="highlight"><span class="nb">unfold</span> trace_has_message.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Exists (field_selector output m)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk16f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk16f"><span class="highlight"><span class="nb">apply</span> Exists_exists.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">exists</span> <span class="nv">x</span> : transition_item,
  In x (finite_trace_sub_projection tr) /\
  field_selector output m x</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk170" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk170"><span class="highlight"><span class="kr">exists</span> (<span class="nv">composite_transition_item_sub_projection</span> <span class="nv">item</span> <span class="nv">Hsub_item</span>).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In
  (composite_transition_item_sub_projection item
     Hsub_item) (finite_trace_sub_projection tr) /\
field_selector output m
  (composite_transition_item_sub_projection item
     Hsub_item)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk171" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk171"><span class="highlight"><span class="nb">split</span>; [|<span class="bp">assumption</span>].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In
  (composite_transition_item_sub_projection item
     Hsub_item) (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk172" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk172"><span class="highlight"><span class="nb">apply</span> finite_trace_sub_projection_list_in.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s0</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">oom</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">option message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_label IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_transition_item IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hitem</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">In item tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hout</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">output item = Some m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hsub_item</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X
  (finite_trace_last s tr)
  [{|
   l := l;
   input := Some m;
   destination := s0;
   output := oom |}]</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hisp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHtr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state sub_IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">lst =
finite_trace_last
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">from_sub_projection
  {|
  l := l;
  input := Some m;
  destination := s0;
  output := oom |}</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s0 []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
vvalid (IM i) li
  (finite_trace_last s tr i, Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hc</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_has_been_sent IM 
  (free_constraint IM) has_been_sent_capabilities
  (finite_trace_last s tr) m \/
vinitial_message_prop Free m</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Ht</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">i</span>, li) := l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition (IM i) li
     (finite_trace_last s tr i, Some m) <span class="kr">in</span>
 (state_update IM (finite_trace_last s tr) i si&#39;,
 om&#39;)) = (s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">s&#39; = finite_trace_last s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">(<span class="kr">let</span> (<span class="nv">si&#39;</span>, om&#39;) :=
   vtransition
     (sub_IM
        (dec_exist sub_index_prop (projT1 l) f))
     (projT2 l)
     (lst
        (dec_exist sub_index_prop (projT1 l) f),
     Some m) <span class="kr">in</span>
 (state_update sub_IM lst
    (dec_exist sub_index_prop (projT1 l) f) si&#39;,
 om&#39;)) =
(composite_state_sub_projection s0, oom)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hvj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">vvalid
  (sub_IM
     (dec_exist sub_index_prop (projT1 l) f))
  (projT2 l)
  (lst (dec_exist sub_index_prop (projT1 l) f),
  Some m)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state_sub_projection s&#39; = lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlstp</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop
  (pre_loaded_with_all_messages_vlsm Sub_Free)
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hproper</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : message,
has_been_sent_prop Sub_Free
  (has_been_sent Sub_Free) lst m</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">In item tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk173" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk173"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">protocol_state_sub_projection</span>
  (<span class="nv">s</span> : state)
  (<span class="nv">Hs</span> : state_sub_item_input_is_seeded_or_sub_previously_sent s)
  (<span class="nv">Hps</span> : protocol_state_prop X s)
  : protocol_state_prop Xj (composite_state_sub_projection s).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk174" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk174"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop X s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk175" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk175"><span class="highlight"><span class="nb">apply</span> protocol_state_has_trace <span class="kr">in</span> Hps.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hps</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span> (<span class="nv">is</span> : state) (<span class="nv">tr</span> : list transition_item),
  finite_protocol_trace_init_to X <span class="kr">is</span> s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk176" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk176"><span class="highlight"><span class="nb">destruct</span> Hps <span class="kr">as</span> [<span class="kr">is</span> [tr Htr]].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to X <span class="kr">is</span> s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk177" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk177"><span class="highlight"><span class="nb">specialize</span> (Hs _ _ (VLSM_incl_finite_protocol_trace_init_to _ _ X_incl_Pre _ _ _ Htr)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to X <span class="kr">is</span> s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk178" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk178"><span class="highlight"><span class="nb">apply</span> ptrace_get_last <span class="kr">in</span> Htr <span class="kr">as</span> Hlst.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to X <span class="kr">is</span> s tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk179" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk179"><span class="highlight"><span class="nb">apply</span> ptrace_forget_last <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17a"><span class="highlight"><span class="nb">specialize</span> (finite_trace_sub_projection_last_state _ _ (proj1 Htr)) <span class="kr">as</span> Hlst&#39;.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17b"><span class="highlight"><span class="nb">apply</span> (finite_protocol_trace_sub_projection _ _ Hs) <span class="kr">in</span> Htr <span class="kr">as</span> Hptr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17c"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17d"><span class="highlight"><span class="nb">destruct</span> Hptr <span class="kr">as</span> [Hptr _].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17e"><span class="highlight"><span class="nb">apply</span> finite_ptrace_last_pstate <span class="kr">in</span> Hptr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> tr <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection tr) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk17f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk17f"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr) =
composite_state_sub_projection
  (finite_trace_last <span class="kr">is</span> tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk180" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk180"><span class="highlight"><span class="nb">rewrite</span> Hlst&#39; <span class="kr">in</span> Hptr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> tr = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr) =
composite_state_sub_projection
  (finite_trace_last <span class="kr">is</span> tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection s)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk181" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk181"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hptr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlst'</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection tr) =
composite_state_sub_projection
  (finite_trace_last <span class="kr">is</span> tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">protocol_state_prop Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> tr))</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk182" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk182"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">finite_protocol_trace_from_sub_projection</span>
  (<span class="nv">s</span> : composite_state IM)
  (<span class="nv">tr</span> : list (composite_transition_item IM))
  (<span class="nv">lst</span> := finite_trace_last s tr)
  (<span class="nv">Hmsg</span> : state_sub_item_input_is_seeded_or_sub_previously_sent lst)
  (<span class="nv">Htr</span> : finite_protocol_trace_from X s tr)
  : finite_protocol_trace_from Xj (composite_state_sub_projection s) (finite_trace_sub_projection tr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk183" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk183"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk184" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk184"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_complete_left <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">exists</span>
  (<span class="nv">is</span> : state) (<span class="nv">trs</span> : list transition_item),
  finite_protocol_trace X <span class="kr">is</span> (trs ++ tr) /\
  finite_trace_last <span class="kr">is</span> trs = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk185" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk185"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [<span class="kr">is</span> [pre [Htr Hs]]].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk186" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk186"><span class="highlight"><span class="nb">assert</span> (Hpre := proj1 Htr).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk187" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk187"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff <span class="kr">in</span> Hpre.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre /\
finite_protocol_trace_from X
  (finite_trace_last <span class="kr">is</span> pre) tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk188" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk188"><span class="highlight"><span class="nb">destruct</span> Hpre <span class="kr">as</span> [Hpre _].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk189" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk189"><span class="highlight"><span class="nb">specialize</span> (finite_trace_sub_projection_last_state _ _ Hpre) <span class="kr">as</span> Hpre_lst.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18a"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_sub_projection <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection (pre ++ tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk18b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk18b"><hr></label><div class="goal-conclusion"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18c"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection (pre ++ tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18d"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [Htr His].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection (pre ++ tr))</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18e"><span class="highlight"><span class="nb">rewrite</span> finite_trace_sub_projection_app <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection pre ++
   finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk18f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk18f"><span class="highlight"><span class="nb">apply</span> finite_protocol_trace_from_app_iff <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection pre) /\
finite_protocol_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection pre))
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk190" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk190"><span class="highlight"><span class="nb">destruct</span> Htr <span class="kr">as</span> [_ Htr].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection pre))
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s)
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk191" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk191"><span class="highlight"><span class="nb">subst</span> s.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection pre))
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">initial_state_prop
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> pre))
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk192" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk192"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (finite_trace_last
     (composite_state_sub_projection <span class="kr">is</span>)
     (finite_trace_sub_projection pre))
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection pre) =
composite_state_sub_projection
  (finite_trace_last <span class="kr">is</span> pre)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> pre))
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk193" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk193"><span class="highlight"><span class="nb">rewrite</span> Hpre_lst <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">_composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> pre))
  (finite_trace_sub_projection tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">His</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_initial_state_prop sub_IM
  (composite_state_sub_projection <span class="kr">is</span>)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last
  (composite_state_sub_projection <span class="kr">is</span>)
  (finite_trace_sub_projection pre) =
composite_state_sub_projection
  (finite_trace_last <span class="kr">is</span> pre)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection
     (finite_trace_last <span class="kr">is</span> pre))
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk194" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk194"><span class="highlight">-</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  lst</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk195" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk195"><span class="highlight"><span class="nb">specialize</span> (Hmsg <span class="kr">is</span> (pre ++ tr)).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk196" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk196"><span class="highlight"><span class="nb">apply</span> Hmsg.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst (pre ++ tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk197" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk197"><span class="highlight"><span class="nb">apply</span> VLSM_incl_finite_protocol_trace_init_to;
    [<span class="nb">apply</span> X_incl_Pre|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_init_to
  (mk_vlsm (composite_vlsm_machine IM constraint)) <span class="kr">is</span>
  lst (pre ++ tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk198" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk198"><span class="highlight"><span class="nb">apply</span> ptrace_add_last.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace
  (mk_vlsm (composite_vlsm_machine IM constraint)) <span class="kr">is</span>
  (pre ++ tr)</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="SubProjectionTraces-v-chk199" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><label class="goal-separator alectryon-extra-goal-label" for="SubProjectionTraces-v-chk199"><hr></label><div class="goal-conclusion"><span class="highlight">finite_trace_last <span class="kr">is</span> (pre ++ tr) = lst</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19a" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19a"><span class="highlight"><span class="bp">assumption</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last <span class="kr">is</span> (pre ++ tr) = lst</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19b" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19b"><span class="highlight"><span class="nb">rewrite</span> finite_trace_last_app.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr = lst</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19c" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19c"><span class="highlight"><span class="nb">unfold</span> lst.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_state IM</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last s tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last <span class="kr">is</span> pre = s</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr =
finite_trace_last s tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19d" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19d"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list (composite_transition_item IM)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">is</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">pre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">lst</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hmsg</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_init_to Pre <span class="kr">is</span> lst
  (pre ++ tr) -&gt;
trace_sub_item_input_is_seeded_or_sub_previously_sent
  (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace X <span class="kr">is</span> (pre ++ tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X <span class="kr">is</span> pre</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hpre_lst</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">let</span> <span class="nv">lstx</span> := finite_trace_last <span class="kr">is</span> pre <span class="kr">in</span>
<span class="kr">let</span> <span class="nv">lstj</span> :=
  finite_trace_last
    (composite_state_sub_projection <span class="kr">is</span>)
    (finite_trace_sub_projection pre) <span class="kr">in</span>
lstj = composite_state_sub_projection lstx</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr =
finite_trace_last (finite_trace_last <span class="kr">is</span> pre) tr</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19e" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19e"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">in_futures_sub_projection</span>
  (<span class="nv">s1</span> <span class="nv">s2</span> : state)
  (<span class="nv">Hs2</span> : state_sub_item_input_is_seeded_or_sub_previously_sent s2)
  (<span class="nv">Hfutures</span> : in_futures X s1 s2)
  : in_futures Xj (composite_state_sub_projection s1) (composite_state_sub_projection s2).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfutures</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">in_futures X s1 s2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">in_futures Xj (composite_state_sub_projection s1)
  (composite_state_sub_projection s2)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk19f" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk19f"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfutures</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">in_futures X s1 s2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">in_futures Xj (composite_state_sub_projection s1)
  (composite_state_sub_projection s2)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a0" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a0"><span class="highlight"><span class="nb">destruct</span> Hfutures <span class="kr">as</span> [tr Htr].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from_to X s1 s2 tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">in_futures Xj (composite_state_sub_projection s1)
  (composite_state_sub_projection s2)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a1" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a1"><span class="highlight"><span class="nb">apply</span> ptrace_get_last <span class="kr">in</span> Htr <span class="kr">as</span> Heq_s2.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from_to X s1 s2 tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq_s2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last s1 tr = s2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">in_futures Xj (composite_state_sub_projection s1)
  (composite_state_sub_projection s2)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a2" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a2"><span class="highlight"><span class="nb">apply</span> ptrace_forget_last <span class="kr">in</span> Htr.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  s2</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s1 tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heq_s2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_trace_last s1 tr = s2</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">in_futures Xj (composite_state_sub_projection s1)
  (composite_state_sub_projection s2)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a3" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a3"><span class="highlight"><span class="nb">subst</span> s2.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  (finite_trace_last s1 tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s1 tr</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">in_futures Xj (composite_state_sub_projection s1)
  (composite_state_sub_projection
     (finite_trace_last s1 tr))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a4" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a4"><span class="highlight"><span class="nb">specialize</span> (finite_protocol_trace_from_sub_projection s1 tr Hs2 Htr); <span class="nb">intros</span> Htrj.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  (finite_trace_last s1 tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s1 tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htrj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s1)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">in_futures Xj (composite_state_sub_projection s1)
  (composite_state_sub_projection
     (finite_trace_last s1 tr))</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a5" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a5"><span class="highlight"><span class="kr">exists</span> (<span class="nv">finite_trace_sub_projection</span> <span class="nv">tr</span>).</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  (finite_trace_last s1 tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s1 tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htrj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s1)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from_to Xj
  (composite_state_sub_projection s1)
  (composite_state_sub_projection
     (finite_trace_last s1 tr))
  (finite_trace_sub_projection tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a6" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a6"><span class="highlight"><span class="nb">apply</span> ptrace_add_last;[<span class="bp">assumption</span>|].</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  (finite_trace_last s1 tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s1 tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htrj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s1)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_trace_last (composite_state_sub_projection s1)
  (finite_trace_sub_projection tr) =
composite_state_sub_projection
  (finite_trace_last s1 tr)</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="SubProjectionTraces-v-chk1a7" style="display: none" type="checkbox"><label class="alectryon-input" for="SubProjectionTraces-v-chk1a7"><span class="highlight"><span class="nb">apply</span> finite_trace_sub_projection_last_state.</span></label><small class="alectryon-output"><div class="alectryon-output-sticky-wrapper"><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">message, index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kt">Type</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IndEqDec</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">EqDecision index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IM</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">index -&gt; VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub_index_list</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hi0_sub</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">sub_index_list &lt;&gt; []</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label IM -&gt;
composite_state IM * option message -&gt;
<span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">has_been_sent_capabilities</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight"><span class="kr">forall</span> <span class="nv">i</span> : index,
has_been_sent_capability
  (IM i)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">index_listing</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list index</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">finite_index</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">Listing index_listing</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Sub_Free</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">free_composite_vlsm sub_IM</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X_has_been_sent_capability</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_has_been_sent_capability
  IM (free_constraint IM)
  finite_index
  has_been_sent_capabilities</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">has_been_sent_capability
  Free</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_vlsm IM constraint</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Pre</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">pre_loaded_with_all_messages_vlsm
  (free_composite_vlsm IM)</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seed</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hno_equiv</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">constraint_subsumption IM constraint
  (no_equivocations Free)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">seeded_constraint</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">composite_label sub_IM -&gt;
composite_state sub_IM *
option message -&gt; <span class="kt">Prop</span></span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Xj</span><span><span class="hyp-body-block"><span class="hyp-punct">:=</span><span class="hyp-body"><span class="highlight">composite_no_equivocation_vlsm_with_pre_loaded
  sub_IM (free_constraint sub_IM)
  sub_has_been_sent_capabilities finite_sub_index
  seed</span></span></span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">VLSM message</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">tr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">list transition_item</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hs2</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">state_sub_item_input_is_seeded_or_sub_previously_sent
  (finite_trace_last s1 tr)</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htr</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from X s1 tr</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Htrj</span><span><span class="hyp-type-block"><span class="hyp-punct">:</span><span class="hyp-type"><span class="highlight">finite_protocol_trace_from Xj
  (composite_state_sub_projection s1)
  (finite_trace_sub_projection tr)</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">finite_protocol_trace_from X s1 tr</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="highlight">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">sub_projection_with_no_equivocation_constraints</span>.</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="highlight"><span class="kn">End</span> <span class="nf">sub_composition</span>.</span></span></span></pre></article></body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Nat.html#"><span class="id" title="library">Nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">Logic.FunctionalExtensionality</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Logic.FinFun.html#"><span class="id" title="library">Coq.Logic.FinFun</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Logic.Eqdep.html#"><span class="id" title="library">Coq.Logic.Eqdep</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CasperCBC</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#"><span class="id" title="library">Lib.StreamExtras</span></a> <a class="idref" href="CasperCBC.Lib.ListExtras.html#"><span class="id" title="library">Lib.ListExtras</span></a> <a class="idref" href="CasperCBC.Lib.Preamble.html#"><span class="id" title="library">Lib.Preamble</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#"><span class="id" title="library">VLSM.Common</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#"><span class="id" title="library">VLSM.Composition</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="ProjectionTraces" class="idref" href="#ProjectionTraces"><span class="id" title="section">ProjectionTraces</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="index:2" class="idref" href="#index:2"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="IndEqDec:3" class="idref" href="#IndEqDec:3"><span class="id" title="binder">IndEqDec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#index:2"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:4" class="idref" href="#IM:4"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#index:2"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#message:1"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="i0:5" class="idref" href="#i0:5"><span class="id" title="binder">i0</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#index:2"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="constraint:6" class="idref" href="#constraint:6"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#IM:4"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#IM:4"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#message:1"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="X:7" class="idref" href="#X:7"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#IM:4"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#i0:5"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#constraint:6"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;(<a id="j:8" class="idref" href="#j:8"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#index:2"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Xj:9" class="idref" href="#Xj:9"><span class="id" title="binder">Xj</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#IM:4"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#i0:5"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#constraint:6"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#j:8"><span class="id" title="variable">j</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="finite_trace_projection_list" class="idref" href="#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a><br/>
&nbsp;&nbsp;(<a id="trx:10" class="idref" href="#trx:10"><span class="id" title="binder">trx</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:10"><span class="id" title="variable">trx</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">item</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">trx</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="tail:13" class="idref" href="#tail:13"><span class="id" title="binder">tail</span></a> := <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list:11"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:10"><span class="id" title="variable">trx</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s:14" class="idref" href="#s:14"><span class="id" title="binder">s</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="l:15" class="idref" href="#l:15"><span class="id" title="binder">l</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <span class="id" title="var">item</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="x:16" class="idref" href="#x:16"><span class="id" title="binder">x</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#l:15"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#x:16"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="lj:17" class="idref" href="#lj:17"><span class="id" title="binder">lj</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#l:15"><span class="id" title="variable">l</span></a>) <span class="id" title="var">e</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="CasperCBC.VLSM.Common.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#lj:17"><span class="id" title="variable">lj</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <span class="id" title="var">item</span>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:14"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <span class="id" title="var">item</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tail:13"><span class="id" title="variable">tail</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tail:13"><span class="id" title="variable">tail</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="from_projection" class="idref" href="#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;(<a id="a:18" class="idref" href="#a:18"><span class="id" title="binder">a</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:18"><span class="id" title="variable">a</span></a>).<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a id="dec_from_projection" class="idref" href="#dec_from_projection"><span class="id" title="instance">dec_from_projection</span></a> (<a id="a:19" class="idref" href="#a:19"><span class="id" title="binder">a</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>) : <a class="idref" href="CasperCBC.Lib.Classes.html#Decision"><span class="id" title="class">Decision</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:19"><span class="id" title="variable">a</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <span class="id" title="var">a</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="finite_trace_projection_list_alt" class="idref" href="#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a><br/>
&nbsp;&nbsp;(<a id="trx:20" class="idref" href="#trx:20"><span class="id" title="binder">trx</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="ftrx:22" class="idref" href="#ftrx:22"><span class="id" title="binder">ftrx</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:21" class="idref" href="#a:21"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:21"><span class="id" title="variable">a</span></a>)) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:20"><span class="id" title="variable">trx</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hall:23" class="idref" href="#Hall:23"><span class="id" title="binder">Hall</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ftrx:22"><span class="id" title="variable">ftrx</span></a>)<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="item:25" class="idref" href="#item:25"><span class="id" title="binder">item</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="a:24" class="idref" href="#a:24"><span class="id" title="binder">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:24"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="item:26" class="idref" href="#item:26"><span class="id" title="binder">item</span></a>, <a id="e:27" class="idref" href="#e:27"><span class="id" title="binder">e</span></a>) := <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:25"><span class="id" title="variable">item</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="lj:28" class="idref" href="#lj:28"><span class="id" title="binder">lj</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:26"><span class="id" title="variable">item</span></a>)) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#e:27"><span class="id" title="variable">e</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="CasperCBC.VLSM.Common.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#lj:28"><span class="id" title="variable">lj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:26"><span class="id" title="variable">item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:26"><span class="id" title="variable">item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:26"><span class="id" title="variable">item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_annotate"><span class="id" title="definition">list_annotate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ftrx:22"><span class="id" title="variable">ftrx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hall:23"><span class="id" title="variable">Hall</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_projection_list_alt_iff" class="idref" href="#finite_trace_projection_list_alt_iff"><span class="id" title="lemma">finite_trace_projection_list_alt_iff</span></a><br/>
&nbsp;&nbsp;(<a id="trx:29" class="idref" href="#trx:29"><span class="id" title="binder">trx</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="ftrx:31" class="idref" href="#ftrx:31"><span class="id" title="binder">ftrx</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:30" class="idref" href="#a:30"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:30"><span class="id" title="variable">a</span></a>)) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:29"><span class="id" title="variable">trx</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hall:32" class="idref" href="#Hall:32"><span class="id" title="binder">Hall</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ftrx:31"><span class="id" title="variable">ftrx</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:29"><span class="id" title="variable">trx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hall:32"><span class="id" title="variable">Hall</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:29"><span class="id" title="variable">trx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ftrx</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> <span class="id" title="var">ftrx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">trx</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> (<span class="id" title="keyword">fun</span> <a id="n:34" class="idref" href="#n:34"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:33"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a>) <span class="id" title="var">a</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hunroll</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:37" class="idref" href="#a:37"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:35"><span class="id" title="variable">a</span></a>)) (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">trx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:38" class="idref" href="#a:38"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:36"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a>, <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#dec_from_projection"><span class="id" title="instance">dec_from_projection</span></a>, <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> (<span class="id" title="keyword">fun</span> <a id="n:42" class="idref" href="#n:42"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:39"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <span class="id" title="var">a</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> (<span class="id" title="keyword">fun</span> <a id="n:44" class="idref" href="#n:44"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:41"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a>) <span class="id" title="var">a</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> (<span class="id" title="keyword">fun</span> <a id="n:43" class="idref" href="#n:43"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:40"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a>) <span class="id" title="var">a</span>)))) <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hunroll</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_annotate_unroll"><span class="id" title="lemma">list_annotate_unroll</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtrx</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#Forall_tl"><span class="id" title="definition">Forall_tl</span></a> <span class="id" title="var">Hall</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHtrx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#Forall_hd"><span class="id" title="definition">Forall_hd</span></a> <span class="id" title="var">Hall</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Logic.Eqdep.html#EqdepTheory.UIP"><span class="id" title="lemma">UIP</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hunroll</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:47" class="idref" href="#a:47"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:45"><span class="id" title="variable">a</span></a>)) (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">trx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:48" class="idref" href="#a:48"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:46"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a>, <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#dec_from_projection"><span class="id" title="instance">dec_from_projection</span></a>, <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> (<span class="id" title="keyword">fun</span> <a id="n0:52" class="idref" href="#n0:52"><span class="id" title="binder">n0</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n0:49"><span class="id" title="variable">n0</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <span class="id" title="var">a</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> (<span class="id" title="keyword">fun</span> <a id="n:54" class="idref" href="#n:54"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:51"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a>) <span class="id" title="var">a</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> (<span class="id" title="keyword">fun</span> <a id="n:53" class="idref" href="#n:53"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; @<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:50"><span class="id" title="variable">n</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a>) <span class="id" title="var">a</span>)))) <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hunroll</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtrx</span> <span class="id" title="var">Hall</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHtrx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_projection_empty" class="idref" href="#finite_trace_projection_empty"><span class="id" title="lemma">finite_trace_projection_empty</span></a><br/>
&nbsp;&nbsp;(<a id="s:55" class="idref" href="#s:55"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="trx:56" class="idref" href="#trx:56"><span class="id" title="binder">trx</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:57" class="idref" href="#Htr:57"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:55"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:56"><span class="id" title="variable">trx</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hempty:58" class="idref" href="#Hempty:58"><span class="id" title="binder">Hempty</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:56"><span class="id" title="variable">trx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;(<a id="t:59" class="idref" href="#t:59"><span class="id" title="binder">t</span></a> : (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hin:60" class="idref" href="#Hin:60"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#t:59"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:56"><span class="id" title="variable">trx</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#t:59"><span class="id" title="variable">t</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:55"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hs'</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hiom</span>] <span class="id" title="var">Hvalid</span>]] <span class="id" title="var">Htransition</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htransition</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htransition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htransition</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htransition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">Hin</span>]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hempty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHtr</span> <span class="id" title="var">Hempty</span> <span class="id" title="var">t</span> <span class="id" title="var">Hin</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_projection_list_app" class="idref" href="#finite_trace_projection_list_app"><span class="id" title="lemma">finite_trace_projection_list_app</span></a><br/>
&nbsp;&nbsp;(<a id="tr1:61" class="idref" href="#tr1:61"><span class="id" title="binder">tr1</span></a> <a id="tr2:62" class="idref" href="#tr2:62"><span class="id" title="binder">tr2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr1:61"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr2:62"><span class="id" title="variable">tr2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr1:61"><span class="id" title="variable">tr1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr2:62"><span class="id" title="variable">tr2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr1</span>;[<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> ?<span class="id" title="var">d</span>] =&gt; <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHtr1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_finite_trace_projection_last_state" class="idref" href="#preloaded_finite_trace_projection_last_state"><span class="id" title="lemma">preloaded_finite_trace_projection_last_state</span></a><br/>
&nbsp;&nbsp;(<a id="start:63" class="idref" href="#start:63"><span class="id" title="binder">start</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="transitions:64" class="idref" href="#transitions:64"><span class="id" title="binder">transitions</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:65" class="idref" href="#Htr:65"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#start:63"><span class="id" title="variable">start</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#transitions:64"><span class="id" title="variable">transitions</span></a>)<br/>
&nbsp;&nbsp;(<a id="lstx:66" class="idref" href="#lstx:66"><span class="id" title="binder">lstx</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#transitions:64"><span class="id" title="variable">transitions</span></a>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#start:63"><span class="id" title="variable">start</span></a>)<br/>
&nbsp;&nbsp;(<a id="lstj:67" class="idref" href="#lstj:67"><span class="id" title="binder">lstj</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#transitions:64"><span class="id" title="variable">transitions</span></a>)) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#start:63"><span class="id" title="variable">start</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#lstj:67"><span class="id" title="variable">lstj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#lstx:66"><span class="id" title="variable">lstx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">lstx</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">lstj</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">lstx</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">lstj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i</span> <span class="id" title="var">l</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hs'</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hiom</span>] <span class="id" title="var">Hvalid</span>]] <span class="id" title="var">Htransition</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htransition</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htransition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htransition</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htransition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htransition</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Htransition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">s'</span> <span class="id" title="var">i</span> <span class="id" title="var">si'</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">n</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hupd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hupd</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_projection_last_state" class="idref" href="#finite_trace_projection_last_state"><span class="id" title="lemma">finite_trace_projection_last_state</span></a><br/>
&nbsp;&nbsp;(<a id="start:68" class="idref" href="#start:68"><span class="id" title="binder">start</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="transitions:69" class="idref" href="#transitions:69"><span class="id" title="binder">transitions</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:70" class="idref" href="#Htr:70"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#start:68"><span class="id" title="variable">start</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#transitions:69"><span class="id" title="variable">transitions</span></a>)<br/>
&nbsp;&nbsp;(<a id="lstx:71" class="idref" href="#lstx:71"><span class="id" title="binder">lstx</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#transitions:69"><span class="id" title="variable">transitions</span></a>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#start:68"><span class="id" title="variable">start</span></a>)<br/>
&nbsp;&nbsp;(<a id="lstj:72" class="idref" href="#lstj:72"><span class="id" title="binder">lstj</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#transitions:69"><span class="id" title="variable">transitions</span></a>)) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#start:68"><span class="id" title="variable">start</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#lstj:72"><span class="id" title="variable">lstj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#lstx:71"><span class="id" title="variable">lstx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#preloaded_finite_trace_projection_last_state"><span class="id" title="lemma">preloaded_finite_trace_projection_last_state</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl_finite_trace"><span class="id" title="lemma">VLSM_incl_finite_trace</span></a>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_incl_pre_loaded_with_all_messages_vlsm"><span class="id" title="lemma">vlsm_incl_pre_loaded_with_all_messages_vlsm</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;projection&nbsp;of&nbsp;a&nbsp;finite&nbsp;protocol&nbsp;trace&nbsp;remains&nbsp;a&nbsp;protocol&nbsp;trace&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_ptrace_projection" class="idref" href="#finite_ptrace_projection"><span class="id" title="lemma">finite_ptrace_projection</span></a><br/>
&nbsp;&nbsp;(<a id="s:73" class="idref" href="#s:73"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Psj:74" class="idref" href="#Psj:74"><span class="id" title="binder">Psj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:73"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;(<a id="trx:75" class="idref" href="#trx:75"><span class="id" title="binder">trx</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:76" class="idref" href="#Htr:76"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:73"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:75"><span class="id" title="variable">trx</span></a>)<br/>
&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:73"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:75"><span class="id" title="variable">trx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">lx</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Ps'</span> [<span class="id" title="var">Piom</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">Hc</span>]]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpp</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">oom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ps'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Ps'</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Piom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Piom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hps</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">oom</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">lx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">oom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a>) <span class="id" title="var">si'</span> <span class="id" title="var">oom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">lx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Psj</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">os'j</span> <span class="id" title="var">Psj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_message_projection"><span class="id" title="lemma">protocol_message_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Piom</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">sj</span> <span class="id" title="var">HPjiom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> <span class="id" title="var">lx</span> (<span class="id" title="var">s'</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">os'j</span> <span class="id" title="var">Psj</span> <span class="id" title="var">sj</span> <span class="id" title="var">iom</span> <span class="id" title="var">HPjiom</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">iom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">im</span>|]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Heqlx</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> (<span class="id" title="keyword">fun</span> <a id="n:78" class="idref" href="#n:78"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:77"><span class="id" title="variable">n</span></a>)) <span class="id" title="var">lx</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">lx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqlx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_message_projection"><span class="id" title="lemma">protocol_message_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Piom</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">HPjiom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">lx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHtr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;projection&nbsp;of&nbsp;a&nbsp;preloaded&nbsp;finite&nbsp;protocol&nbsp;trace&nbsp;remains&nbsp;a&nbsp;preloaded&nbsp;protocol&nbsp;trace&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="preloaded_finite_ptrace_projection" class="idref" href="#preloaded_finite_ptrace_projection"><span class="id" title="lemma">preloaded_finite_ptrace_projection</span></a><br/>
&nbsp;&nbsp;(<a id="s:79" class="idref" href="#s:79"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Psj:80" class="idref" href="#Psj:80"><span class="id" title="binder">Psj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:79"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;(<a id="trx:81" class="idref" href="#trx:81"><span class="id" title="binder">trx</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:82" class="idref" href="#Htr:82"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:79"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:81"><span class="id" title="variable">trx</span></a>)<br/>
&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:79"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:81"><span class="id" title="variable">trx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">lx</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Ps'</span> [<span class="id" title="var">Piom</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">Hc</span>]]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpp</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">oom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ht</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ps'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Ps'</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Piom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Piom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hps</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <span class="id" title="var">s</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">oom</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">lx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">si'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">oom</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">si'</span> <span class="id" title="var">oom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">lx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Psj</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">os'j</span> <span class="id" title="var">Psj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)) <span class="id" title="var">lx</span> (<span class="id" title="var">s'</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">os'j</span> <span class="id" title="var">Psj</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hgen</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))) <span class="id" title="var">iom</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hgen</span>; [<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_message_protocol_prop"><span class="id" title="lemma">pre_loaded_with_all_messages_message_protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hgen</span>; [| <span class="id" title="tactic">apply</span> <span class="id" title="var">Hgen</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Heqlx</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a>@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> (<span class="id" title="keyword">fun</span> <a id="n:84" class="idref" href="#n:84"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:83"><span class="id" title="variable">n</span></a>)) <span class="id" title="var">lx</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">lx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqlx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_message_protocol_prop"><span class="id" title="lemma">pre_loaded_with_all_messages_message_protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">lx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hteq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHtr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_state_projection" class="idref" href="#protocol_state_projection"><span class="id" title="lemma">protocol_state_projection</span></a><br/>
&nbsp;&nbsp;(<a id="s:85" class="idref" href="#s:85"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hps:86" class="idref" href="#Hps:86"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:85"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:85"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hps</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_is_run"><span class="id" title="lemma">protocol_is_run</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">Hps</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">run</span> <span class="id" title="var">Heqfinal</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#run_is_trace"><span class="id" title="lemma">run_is_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">run</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">Htrace</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_run_last_state"><span class="id" title="lemma">vlsm_run_last_state</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">run</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">run</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">run</span> <span class="id" title="var">Hrun</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqfinal</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">run</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">Htrace</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htrace</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htrace</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_ptrace_projection"><span class="id" title="lemma">finite_ptrace_projection</span></a> <span class="id" title="var">start</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hstartj</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> (<span class="id" title="var">start</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">start</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">Hstartj</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">istartj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpstartj</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<span class="id" title="var">start</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> <span class="id" title="var">istartj</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hpinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hproj</span> <span class="id" title="var">Hpstartj</span> <span class="id" title="var">_</span> <span class="id" title="var">Htrace</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#trace_is_run"><span class="id" title="lemma">trace_is_run</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<span class="id" title="var">start</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <span class="id" title="var">transitions</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrun</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hrun</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> <span class="id" title="var">Hproj</span> <span class="id" title="var">Hstartj</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrun</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">run</span> [<span class="id" title="var">Hrun</span> [<span class="id" title="var">Hstart</span> <span class="id" title="var">Htrans</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#run_is_protocol"><span class="id" title="lemma">run_is_protocol</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">run</span> <span class="id" title="var">Hrun</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_run_last_state"><span class="id" title="lemma">vlsm_run_last_state</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">run</span> <span class="id" title="var">Hrun</span>)); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hlast'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htrans</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hstart</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#final"><span class="id" title="projection">final</span></a> <span class="id" title="var">run</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">s'</span>, <span class="id" title="var">om</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_last_state"><span class="id" title="lemma">finite_trace_projection_last_state</span></a> <span class="id" title="var">start</span> <span class="id" title="var">transitions</span> <span class="id" title="var">Htrace</span>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">Hlast</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_futures_projection" class="idref" href="#in_futures_projection"><span class="id" title="lemma">in_futures_projection</span></a><br/>
&nbsp;&nbsp;(<a id="s1:87" class="idref" href="#s1:87"><span class="id" title="binder">s1</span></a> <a id="s2:88" class="idref" href="#s2:88"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfutures:89" class="idref" href="#Hfutures:89"><span class="id" title="binder">Hfutures</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s1:87"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s2:88"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s1:87"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s2:88"><span class="id" title="variable">s2</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_protocol_fst"><span class="id" title="lemma">in_futures_protocol_fst</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hfutures</span>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">HpsX1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#protocol_state_projection"><span class="id" title="lemma">protocol_state_projection</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">HpsX1</span>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hps1j</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfutures</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hs2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_ptrace_projection"><span class="id" title="lemma">finite_ptrace_projection</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">Hps1j</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">Htrj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <span class="id" title="var">tr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_last_state"><span class="id" title="lemma">finite_trace_projection_last_state</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="in_projection" class="idref" href="#in_projection"><span class="id" title="definition">in_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;(<a id="tr:90" class="idref" href="#tr:90"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;&nbsp;(<a id="n:91" class="idref" href="#n:91"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:91"><span class="id" title="variable">n</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:90"><span class="id" title="variable">tr</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="in_projection_dec" class="idref" href="#in_projection_dec"><span class="id" title="definition">in_projection_dec</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span> (<a id="tr:92" class="idref" href="#tr:92"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Preamble.html#bounding"><span class="id" title="definition">bounding</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#in_projection"><span class="id" title="definition">in_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:92"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="ss:93" class="idref" href="#ss:93"><span class="id" title="binder">ss</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#monotone_nat_stream"><span class="id" title="definition">monotone_nat_stream</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#filtering_subsequence"><span class="id" title="definition">filtering_subsequence</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:92"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:93"><span class="id" title="variable">ss</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="infinite_trace_projection_stream" class="idref" href="#infinite_trace_projection_stream"><span class="id" title="definition">infinite_trace_projection_stream</span></a><br/>
&nbsp;&nbsp;(<a id="ss:94" class="idref" href="#ss:94"><span class="id" title="binder">ss</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="ks:95" class="idref" href="#ks:95"><span class="id" title="binder">ks</span></a>: <a class="idref" href="CasperCBC.Lib.StreamExtras.html#monotone_nat_stream"><span class="id" title="definition">monotone_nat_stream</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfilter:96" class="idref" href="#Hfilter:96"><span class="id" title="binder">Hfilter</span></a>: <a class="idref" href="CasperCBC.Lib.StreamExtras.html#filtering_subsequence"><span class="id" title="definition">filtering_subsequence</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:94"><span class="id" title="variable">ss</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ks:95"><span class="id" title="variable">ks</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="subs:97" class="idref" href="#subs:97"><span class="id" title="binder">subs</span></a> := <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_subsequence"><span class="id" title="definition">stream_subsequence</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:94"><span class="id" title="variable">ss</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ks:95"><span class="id" title="variable">ks</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="HForAll:98" class="idref" href="#HForAll:98"><span class="id" title="binder">HForAll</span></a> := <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_filter_Forall"><span class="id" title="lemma">stream_filter_Forall</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:94"><span class="id" title="variable">ss</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ks:95"><span class="id" title="variable">ks</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hfilter:96"><span class="id" title="variable">Hfilter</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="subsP:99" class="idref" href="#subsP:99"><span class="id" title="binder">subsP</span></a> := <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_annotate"><span class="id" title="definition">stream_annotate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#subs:97"><span class="id" title="variable">subs</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#HForAll:98"><span class="id" title="variable">HForAll</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="item:101" class="idref" href="#item:101"><span class="id" title="binder">item</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="a:100" class="idref" href="#a:100"><span class="id" title="binder">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:100"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="item:102" class="idref" href="#item:102"><span class="id" title="binder">item</span></a>, <a id="e:103" class="idref" href="#e:103"><span class="id" title="binder">e</span></a>) := <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:101"><span class="id" title="variable">item</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="lj:104" class="idref" href="#lj:104"><span class="id" title="binder">lj</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:102"><span class="id" title="variable">item</span></a>)) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#e:103"><span class="id" title="variable">e</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="CasperCBC.VLSM.Common.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#lj:104"><span class="id" title="variable">lj</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:102"><span class="id" title="variable">item</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:102"><span class="id" title="variable">item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#item:102"><span class="id" title="variable">item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#subsP:99"><span class="id" title="variable">subsP</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_projection_stream" class="idref" href="#finite_trace_projection_stream"><span class="id" title="lemma">finite_trace_projection_stream</span></a><br/>
&nbsp;&nbsp;(<a id="ss:105" class="idref" href="#ss:105"><span class="id" title="binder">ss</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="ks:106" class="idref" href="#ks:106"><span class="id" title="binder">ks</span></a>: <a class="idref" href="CasperCBC.Lib.StreamExtras.html#monotone_nat_stream"><span class="id" title="definition">monotone_nat_stream</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfilter:107" class="idref" href="#Hfilter:107"><span class="id" title="binder">Hfilter</span></a>: <a class="idref" href="CasperCBC.Lib.StreamExtras.html#filtering_subsequence"><span class="id" title="definition">filtering_subsequence</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:105"><span class="id" title="variable">ss</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ks:106"><span class="id" title="variable">ks</span></a>)<br/>
&nbsp;&nbsp;(<a id="n:108" class="idref" href="#n:108"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="kn:109" class="idref" href="#kn:109"><span class="id" title="binder">kn</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:108"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ks:106"><span class="id" title="variable">ks</span></a>))<br/>
&nbsp;&nbsp;(<a id="ss_to_kn:110" class="idref" href="#ss_to_kn:110"><span class="id" title="binder">ss_to_kn</span></a> := <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:105"><span class="id" title="variable">ss</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Nat.html#succ"><span class="id" title="definition">succ</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#kn:109"><span class="id" title="variable">kn</span></a>))<br/>
&nbsp;&nbsp;(<a id="sproj:111" class="idref" href="#sproj:111"><span class="id" title="binder">sproj</span></a> := <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#infinite_trace_projection_stream"><span class="id" title="definition">infinite_trace_projection_stream</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:105"><span class="id" title="variable">ss</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ks:106"><span class="id" title="variable">ks</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hfilter:107"><span class="id" title="variable">Hfilter</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sproj:111"><span class="id" title="variable">sproj</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Nat.html#succ"><span class="id" title="definition">succ</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n:108"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss_to_kn:110"><span class="id" title="variable">ss_to_kn</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">sproj</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#infinite_trace_projection_stream"><span class="id" title="definition">infinite_trace_projection_stream</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix_map"><span class="id" title="lemma">stream_prefix_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix_annotate"><span class="id" title="lemma">stream_prefix_annotate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_subsequence"><span class="id" title="definition">stream_subsequence</span></a> <span class="id" title="var">ss</span> <span class="id" title="var">ks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_filter_Forall"><span class="id" title="lemma">stream_filter_Forall</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <span class="id" title="var">ss</span> <span class="id" title="var">ks</span> <span class="id" title="var">Hfilter</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Nat.html#succ"><span class="id" title="definition">succ</span></a> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hall</span> <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="a:113" class="idref" href="#a:113"><span class="id" title="binder">a</span></a> : @<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:112"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_annotate"><span class="id" title="definition">stream_annotate</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_subsequence"><span class="id" title="definition">stream_subsequence</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <span class="id" title="var">ss</span> <span class="id" title="var">ks</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_filter_Forall"><span class="id" title="lemma">stream_filter_Forall</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <span class="id" title="var">ss</span> <span class="id" title="var">ks</span> <span class="id" title="var">Hfilter</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Nat.html#succ"><span class="id" title="definition">succ</span></a> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_annotate"><span class="id" title="definition">list_annotate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> (<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> (<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_subsequence"><span class="id" title="definition">stream_subsequence</span></a> <span class="id" title="var">ss</span> <span class="id" title="var">ks</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Nat.html#succ"><span class="id" title="definition">succ</span></a> <span class="id" title="var">n</span>)) <span class="id" title="var">Hall</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_filter_prefix"><span class="id" title="lemma">stream_filter_prefix</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ss</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ks</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hfilter</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="tactic">intros</span> <span class="id" title="var">Hsfilter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">sp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsfilter</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Nat.html#succ"><span class="id" title="definition">succ</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">Hall</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hsfilter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">ss_to_kn</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">kn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt_iff"><span class="id" title="lemma">finite_trace_projection_list_alt_iff</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trace_projection" class="idref" href="#trace_projection"><span class="id" title="definition">trace_projection</span></a><br/>
&nbsp;&nbsp;(<a id="Hproj_dec:114" class="idref" href="#Hproj_dec:114"><span class="id" title="binder">Hproj_dec</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#in_projection_dec"><span class="id" title="definition">in_projection_dec</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:115" class="idref" href="#tr:115"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vTrace"><span class="id" title="definition">vTrace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#vTrace"><span class="id" title="definition">vTrace</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">ls</span> | <span class="id" title="var">s</span> <span class="id" title="var">ss</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> (<span class="id" title="var">s</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <span class="id" title="var">ls</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hproj_dec</span> <span class="id" title="var">ss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hproj_dec</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n1</span> <span class="id" title="var">_</span>] | [<span class="id" title="var">ks</span> <span class="id" title="var">Hfilter</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> (<span class="id" title="var">s</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> (<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <span class="id" title="var">ss</span> <span class="id" title="var">n1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> (<span class="id" title="var">s</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#infinite_trace_projection_stream"><span class="id" title="definition">infinite_trace_projection_stream</span></a> <span class="id" title="var">ss</span> <span class="id" title="var">ks</span> <span class="id" title="var">Hfilter</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trace_projection_initial_state" class="idref" href="#trace_projection_initial_state"><span class="id" title="lemma">trace_projection_initial_state</span></a><br/>
&nbsp;&nbsp;(<a id="Hproj_dec:116" class="idref" href="#Hproj_dec:116"><span class="id" title="binder">Hproj_dec</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#in_projection_dec"><span class="id" title="definition">in_projection_dec</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:117" class="idref" href="#tr:117"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vTrace"><span class="id" title="definition">vTrace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#trace_first"><span class="id" title="definition">trace_first</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trace_projection"><span class="id" title="definition">trace_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hproj_dec:116"><span class="id" title="variable">Hproj_dec</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:117"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#trace_first"><span class="id" title="definition">trace_first</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:117"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hproj_dec</span> <span class="id" title="var">s0</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">s1</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="infinite_ptrace_projection" class="idref" href="#infinite_ptrace_projection"><span class="id" title="lemma">infinite_ptrace_projection</span></a><br/>
&nbsp;&nbsp;(<a id="s:118" class="idref" href="#s:118"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="ss:119" class="idref" href="#ss:119"><span class="id" title="binder">ss</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Psj:120" class="idref" href="#Psj:120"><span class="id" title="binder">Psj</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:118"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:121" class="idref" href="#Htr:121"><span class="id" title="binder">Htr</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from"><span class="id" title="inductive">infinite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:118"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:119"><span class="id" title="variable">ss</span></a>)<br/>
&nbsp;&nbsp;(<a id="fs:122" class="idref" href="#fs:122"><span class="id" title="binder">fs</span></a> : <a class="idref" href="CasperCBC.Lib.StreamExtras.html#monotone_nat_stream"><span class="id" title="definition">monotone_nat_stream</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfs:123" class="idref" href="#Hfs:123"><span class="id" title="binder">Hfs</span></a>: <a class="idref" href="CasperCBC.Lib.StreamExtras.html#filtering_subsequence"><span class="id" title="definition">filtering_subsequence</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:119"><span class="id" title="variable">ss</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#fs:122"><span class="id" title="variable">fs</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from"><span class="id" title="inductive">infinite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s:118"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#infinite_trace_projection_stream"><span class="id" title="definition">infinite_trace_projection_stream</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ss:119"><span class="id" title="variable">ss</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#fs:122"><span class="id" title="variable">fs</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hfs:123"><span class="id" title="variable">Hfs</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from_prefix_rev"><span class="id" title="lemma">infinite_protocol_trace_from_prefix_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from_prefix"><span class="id" title="lemma">infinite_protocol_trace_from_prefix</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">s</span> <span class="id" title="var">ss</span> <span class="id" title="var">Htr</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hftr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [| <span class="id" title="var">n</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_stream"><span class="id" title="lemma">finite_trace_projection_stream</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_ptrace_projection"><span class="id" title="lemma">finite_ptrace_projection</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hftr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;projection&nbsp;of&nbsp;an&nbsp;protocol&nbsp;trace&nbsp;remains&nbsp;a&nbsp;protocol&nbsp;trace&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ptrace_from_projection" class="idref" href="#ptrace_from_projection"><span class="id" title="lemma">ptrace_from_projection</span></a><br/>
&nbsp;&nbsp;(<a id="Hproj_dec:124" class="idref" href="#Hproj_dec:124"><span class="id" title="binder">Hproj_dec</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#in_projection_dec"><span class="id" title="definition">in_projection_dec</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:125" class="idref" href="#tr:125"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vTrace"><span class="id" title="definition">vTrace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Psj:126" class="idref" href="#Psj:126"><span class="id" title="binder">Psj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#trace_first"><span class="id" title="definition">trace_first</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:125"><span class="id" title="variable">tr</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htr:127" class="idref" href="#Htr:127"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_from_prop"><span class="id" title="definition">ptrace_from_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:125"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#ptrace_from_prop"><span class="id" title="definition">ptrace_from_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trace_projection"><span class="id" title="definition">trace_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hproj_dec:124"><span class="id" title="variable">Hproj_dec</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:125"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">ls</span> | <span class="id" title="var">s</span> <span class="id" title="var">ss</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_ptrace_projection"><span class="id" title="lemma">finite_ptrace_projection</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hproj_dec</span> <span class="id" title="var">ss</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">n</span> <span class="id" title="var">_</span>]|<span class="id" title="var">Hinf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_ptrace_projection"><span class="id" title="lemma">finite_ptrace_projection</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from_prefix"><span class="id" title="lemma">infinite_protocol_trace_from_prefix</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ks</span> <span class="id" title="var">HFilter</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#infinite_ptrace_projection"><span class="id" title="lemma">infinite_ptrace_projection</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_trace_projection" class="idref" href="#protocol_trace_projection"><span class="id" title="lemma">protocol_trace_projection</span></a><br/>
&nbsp;&nbsp;(<a id="Hproj_dec:128" class="idref" href="#Hproj_dec:128"><span class="id" title="binder">Hproj_dec</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#in_projection_dec"><span class="id" title="definition">in_projection_dec</span></a>)<br/>
&nbsp;&nbsp;(<a id="tr:129" class="idref" href="#tr:129"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vTrace"><span class="id" title="definition">vTrace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htr:130" class="idref" href="#Htr:130"><span class="id" title="binder">Htr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:129"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trace_projection"><span class="id" title="definition">trace_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hproj_dec:128"><span class="id" title="variable">Hproj_dec</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:129"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hfrom</span> := <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_from"><span class="id" title="lemma">protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinit</span> := <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_initial"><span class="id" title="lemma">protocol_trace_initial</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_from_iff"><span class="id" title="lemma">protocol_trace_from_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ptrace_from_projection"><span class="id" title="lemma">ptrace_from_projection</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_iff"><span class="id" title="lemma">protocol_state_prop_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#initial_state_projection"><span class="id" title="lemma">initial_state_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hinit</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trace_projection_initial_state"><span class="id" title="lemma">trace_projection_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#initial_state_projection"><span class="id" title="lemma">initial_state_projection</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;axiomatize&nbsp;projection&nbsp;friendliness&nbsp;as&nbsp;the&nbsp;converse&nbsp;of&nbsp;protocol_trace_projection&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="finite_projection_friendly" class="idref" href="#finite_projection_friendly"><span class="id" title="definition">finite_projection_friendly</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:131" class="idref" href="#sj:131"><span class="id" title="binder">sj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trj:132" class="idref" href="#trj:132"><span class="id" title="binder">trj</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htrj:133" class="idref" href="#Htrj:133"><span class="id" title="binder">Htrj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sj:131"><span class="id" title="variable">sj</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trj:132"><span class="id" title="variable">trj</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="sx:134" class="idref" href="#sx:134"><span class="id" title="binder">sx</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) (<a id="trx:135" class="idref" href="#trx:135"><span class="id" title="binder">trx</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sx:134"><span class="id" title="variable">sx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:135"><span class="id" title="variable">trx</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sx:134"><span class="id" title="variable">sx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sj:131"><span class="id" title="variable">sj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:135"><span class="id" title="variable">trx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trj:132"><span class="id" title="variable">trj</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="projection_friendly" class="idref" href="#projection_friendly"><span class="id" title="definition">projection_friendly</span></a><br/>
&nbsp;&nbsp;(<a id="Hproj_dec:136" class="idref" href="#Hproj_dec:136"><span class="id" title="binder">Hproj_dec</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#in_projection_dec"><span class="id" title="definition">in_projection_dec</span></a>)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;(<a id="trj:137" class="idref" href="#trj:137"><span class="id" title="binder">trj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vTrace"><span class="id" title="definition">vTrace</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;(<a id="Htrj:138" class="idref" href="#Htrj:138"><span class="id" title="binder">Htrj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trj:137"><span class="id" title="variable">trj</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="tr:139" class="idref" href="#tr:139"><span class="id" title="binder">tr</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vTrace"><span class="id" title="definition">vTrace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:139"><span class="id" title="variable">tr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trace_projection"><span class="id" title="definition">trace_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hproj_dec:136"><span class="id" title="variable">Hproj_dec</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:139"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trj:137"><span class="id" title="variable">trj</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="projection_friendly_finite" class="idref" href="#projection_friendly_finite"><span class="id" title="lemma">projection_friendly_finite</span></a><br/>
&nbsp;&nbsp;(<a id="Hproj_dec:140" class="idref" href="#Hproj_dec:140"><span class="id" title="binder">Hproj_dec</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#in_projection_dec"><span class="id" title="definition">in_projection_dec</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hfr:141" class="idref" href="#Hfr:141"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#projection_friendly"><span class="id" title="definition">projection_friendly</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hproj_dec:140"><span class="id" title="variable">Hproj_dec</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_projection_friendly"><span class="id" title="definition">finite_projection_friendly</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_projection_friendly"><span class="id" title="definition">finite_projection_friendly</span></a>;  <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfr</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">sj</span> <span class="id" title="var">trj</span>) <span class="id" title="var">Htrj</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfr</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">s</span> <span class="id" title="var">tr</span>| <span class="id" title="var">s</span> <span class="id" title="var">tr</span>] [<span class="id" title="var">Htr</span> <span class="id" title="var">Heq</span>]].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trace_projection"><span class="id" title="definition">trace_projection</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trace_projection"><span class="id" title="definition">trace_projection</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hproj_dec</span> <span class="id" title="var">tr</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">n1</span> <span class="id" title="var">_</span>] | (<span class="id" title="var">ks</span>, <span class="id" title="var">Hfilter</span>)]; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <span class="id" title="var">tr</span> <span class="id" title="var">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from_prefix"><span class="id" title="lemma">infinite_protocol_trace_from_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="projection_friendly_in_futures'" class="idref" href="#projection_friendly_in_futures'"><span class="id" title="lemma">projection_friendly_in_futures'</span></a><br/>
&nbsp;&nbsp;(<a id="sx:142" class="idref" href="#sx:142"><span class="id" title="binder">sx</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="trx:143" class="idref" href="#trx:143"><span class="id" title="binder">trx</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;(<a id="Htrx:144" class="idref" href="#Htrx:144"><span class="id" title="binder">Htrx</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace"><span class="id" title="definition">finite_protocol_trace</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sx:142"><span class="id" title="variable">sx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:143"><span class="id" title="variable">trx</span></a>)<br/>
&nbsp;&nbsp;(<a id="sj:145" class="idref" href="#sj:145"><span class="id" title="binder">sj</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hsx:146" class="idref" href="#Hsx:146"><span class="id" title="binder">Hsx</span></a>: <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sx:142"><span class="id" title="variable">sx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sj:145"><span class="id" title="variable">sj</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hall:148" class="idref" href="#Hall:148"><span class="id" title="binder">Hall</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:147" class="idref" href="#a:147"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:147"><span class="id" title="variable">a</span></a>)) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:143"><span class="id" title="variable">trx</span></a>))<br/>
&nbsp;&nbsp;(<a id="s1:149" class="idref" href="#s1:149"><span class="id" title="binder">s1</span></a> <a id="s2:150" class="idref" href="#s2:150"><span class="id" title="binder">s2</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;(<a id="n1:151" class="idref" href="#n1:151"><span class="id" title="binder">n1</span></a> <a id="n2:152" class="idref" href="#n2:152"><span class="id" title="binder">n2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hle:153" class="idref" href="#Hle:153"><span class="id" title="binder">Hle</span></a>: <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n1:151"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n2:152"><span class="id" title="variable">n2</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs1:154" class="idref" href="#Hs1:154"><span class="id" title="binder">Hs1</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sj:145"><span class="id" title="variable">sj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:143"><span class="id" title="variable">trx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hall:148"><span class="id" title="variable">Hall</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n1:151"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s1:149"><span class="id" title="variable">s1</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hs2:155" class="idref" href="#Hs2:155"><span class="id" title="binder">Hs2</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sj:145"><span class="id" title="variable">sj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#trx:143"><span class="id" title="variable">trx</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hall:148"><span class="id" title="variable">Hall</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#n2:152"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s2:150"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="sX1:156" class="idref" href="#sX1:156"><span class="id" title="binder">sX1</span></a> <a id="sX2:157" class="idref" href="#sX2:157"><span class="id" title="binder">sX2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX1:156"><span class="id" title="variable">sX1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s1:149"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX2:157"><span class="id" title="variable">sX2</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s2:150"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX1:156"><span class="id" title="variable">sX1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX2:157"><span class="id" title="variable">sX2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">HsX1</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="nX1:162" class="idref" href="#nX1:162"><span class="id" title="binder">nX1</span></a> <a id="nX2:163" class="idref" href="#nX2:163"><span class="id" title="binder">nX2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="sX1:164" class="idref" href="#sX1:164"><span class="id" title="binder">sX1</span></a> <a id="sX2:165" class="idref" href="#sX2:165"><span class="id" title="binder">sX2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#nX1:158"><span class="id" title="variable">nX1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#nX2:159"><span class="id" title="variable">nX2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX1:160"><span class="id" title="variable">sX1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">s1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX2:161"><span class="id" title="variable">sX2</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">s2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">sx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">trx</span>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#nX1:158"><span class="id" title="variable">nX1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX1:160"><span class="id" title="variable">sX1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">sx</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">trx</span>) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#nX2:159"><span class="id" title="variable">nX2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX2:161"><span class="id" title="variable">sX2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> 0; <span class="id" title="tactic">exists</span> 0; <span class="id" title="tactic">exists</span> <span class="id" title="var">sx</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">sx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs1</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> 0; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs1</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hs1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_list_annotate"><span class="id" title="lemma">nth_error_list_annotate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:167" class="idref" href="#a:167"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:166"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="tactic">intros</span> [<span class="id" title="var">oitem</span> [<span class="id" title="var">Hoa</span> <span class="id" title="var">Hnth</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="a:171" class="idref" href="#a:171"><span class="id" title="binder">a</span></a> : @<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:169"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_annotate"><span class="id" title="definition">list_annotate</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="a:170" class="idref" href="#a:170"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:168"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span>) <span class="id" title="var">Hall</span>) <span class="id" title="var">n2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">oitem</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hoa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">oitem</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">item</span> <span class="id" title="var">Hitem</span>]|]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_filter"><span class="id" title="lemma">nth_error_filter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hnth</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">nX2</span> [<span class="id" title="var">Hindex</span> <span class="id" title="var">Hnth</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">nX2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">sx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a>)) <span class="id" title="var">trx</span> <span class="id" title="var">nX2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">item</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hle</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt"><span class="id" title="definition">finite_trace_projection_list_alt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_list_annotate"><span class="id" title="lemma">nth_error_list_annotate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:173" class="idref" href="#a:173"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:172"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="tactic">intros</span> [<span class="id" title="var">oitem2</span> [<span class="id" title="var">Hoa2</span> <span class="id" title="var">Hn2th</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_list_annotate"><span class="id" title="lemma">nth_error_list_annotate</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:175" class="idref" href="#a:175"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:174"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">n1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); <span class="id" title="tactic">intros</span> [<span class="id" title="var">oitem1</span> [<span class="id" title="var">Hoa1</span> <span class="id" title="var">Hn1th</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="a:179" class="idref" href="#a:179"><span class="id" title="binder">a</span></a> : @<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:177"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_annotate"><span class="id" title="definition">list_annotate</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="a:178" class="idref" href="#a:178"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:176"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span>) <span class="id" title="var">Hall</span>) <span class="id" title="var">n2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">oitem2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hoa2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="a:183" class="idref" href="#a:183"><span class="id" title="binder">a</span></a> : @<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:181"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_annotate"><span class="id" title="definition">list_annotate</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="a:182" class="idref" href="#a:182"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:180"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span>) <span class="id" title="var">Hall</span>) <span class="id" title="var">n1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">oitem1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hoa1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">oitem2</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">item2</span> <span class="id" title="var">Hitem2</span>]|]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">oitem1</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">item1</span> <span class="id" title="var">Hitem1</span>]|]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hs1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1th</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2th</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1th</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2th</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_filter"><span class="id" title="lemma">nth_error_filter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn1th</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_filter"><span class="id" title="lemma">nth_error_filter</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn2th</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hn2th</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">nX2</span> [<span class="id" title="var">Hindex2</span> <span class="id" title="var">Hn2th</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hn1th</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">nX1</span> [<span class="id" title="var">Hindex1</span> <span class="id" title="var">Hn1th</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">nX1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">nX2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">item2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hle'</span> : <span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">n2</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_filter_index_le"><span class="id" title="lemma">nth_error_filter_index_le</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hle'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hindex1</span> <span class="id" title="var">Hindex2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a>)) <span class="id" title="var">trx</span> <span class="id" title="var">nX1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">item1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a>)) <span class="id" title="var">trx</span> <span class="id" title="var">nX2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">item2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HsX1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">nX1</span> [<span class="id" title="var">nX2</span> [<span class="id" title="var">sX1</span> [<span class="id" title="var">sX2</span> [<span class="id" title="var">HleX</span> [<span class="id" title="var">Hps1</span> [<span class="id" title="var">Hps2</span> [<span class="id" title="var">HsX1</span> <span class="id" title="var">HsX2</span>]]]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">sX1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">sX2</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness_reverse"><span class="id" title="lemma">in_futures_witness_reverse</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">sX1</span> <span class="id" title="var">sX2</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">sx</span> <span class="id" title="var">trx</span>) <span class="id" title="var">Htrx</span>) <span class="id" title="var">nX1</span> <span class="id" title="var">nX2</span> <span class="id" title="var">HleX</span> <span class="id" title="var">HsX1</span> <span class="id" title="var">HsX2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="projection_friendly_in_futures" class="idref" href="#projection_friendly_in_futures"><span class="id" title="lemma">projection_friendly_in_futures</span></a><br/>
&nbsp;&nbsp;(<a id="Hfr:184" class="idref" href="#Hfr:184"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_projection_friendly"><span class="id" title="definition">finite_projection_friendly</span></a>)<br/>
&nbsp;&nbsp;(<a id="s1:185" class="idref" href="#s1:185"><span class="id" title="binder">s1</span></a> <a id="s2:186" class="idref" href="#s2:186"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hfuture:187" class="idref" href="#Hfuture:187"><span class="id" title="binder">Hfuture</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s1:185"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s2:186"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="sX1:188" class="idref" href="#sX1:188"><span class="id" title="binder">sX1</span></a> <a id="sX2:189" class="idref" href="#sX2:189"><span class="id" title="binder">sX2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX1:188"><span class="id" title="variable">sX1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s1:185"><span class="id" title="variable">s1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX2:189"><span class="id" title="variable">sX2</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#s2:186"><span class="id" title="variable">s2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX1:188"><span class="id" title="variable">sX1</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#sX2:189"><span class="id" title="variable">sX2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#in_futures_witness"><span class="id" title="lemma">in_futures_witness</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">Hfuture</span>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> [<span class="id" title="var">trj</span> [<span class="id" title="var">n1</span> [<span class="id" title="var">n2</span> [<span class="id" title="var">Hle</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hfuture</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">trj</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">trj</span> <span class="id" title="var">Htrj</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#trace_prefix_fn_protocol"><span class="id" title="lemma">trace_prefix_fn_protocol</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> <span class="id" title="var">trj</span> <span class="id" title="var">Htrj</span> <span class="id" title="var">n2</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">Hpref</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#trace_prefix_fn"><span class="id" title="definition">trace_prefix_fn</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces.Xj"><span class="id" title="variable">Xj</span></a> <span class="id" title="var">trj</span> <span class="id" title="var">n2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">trj2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">trj2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sj'</span> <span class="id" title="var">lj'</span> | <span class="id" title="var">sj'</span> <span class="id" title="var">lj'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">trj</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sj</span> <span class="id" title="var">lj</span> | <span class="id" title="var">sj</span> <span class="id" title="var">lj</span>]<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqtrj2</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">subst</span> <span class="id" title="var">sj'</span> <span class="id" title="var">lj'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfr</span> <span class="id" title="var">sj</span> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <span class="id" title="var">lj</span> <span class="id" title="var">n2</span>) <span class="id" title="var">Hpref</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sx</span> [<span class="id" title="var">trx</span> [<span class="id" title="var">Htrx</span> [<span class="id" title="var">Hsx</span> <span class="id" title="var">Hproj</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hall</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:191" class="idref" href="#a:191"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:190"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#filter_Forall"><span class="id" title="definition">filter_Forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt_iff"><span class="id" title="lemma">finite_trace_projection_list_alt_iff</span></a> <span class="id" title="var">trx</span> <span class="id" title="var">Hall</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hs1'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">sj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">lj</span>) <span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">sj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <span class="id" title="var">lj</span> <span class="id" title="var">n2</span>)) <span class="id" title="var">n1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_nth"><span class="id" title="lemma">list_prefix_nth</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hs2'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">sj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">lj</span>) <span class="id" title="var">n2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">sj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix"><span class="id" title="definition">list_prefix</span></a> <span class="id" title="var">lj</span> <span class="id" title="var">n2</span>)) <span class="id" title="var">n2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">n2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_map"><span class="id" title="lemma">list_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#list_prefix_nth"><span class="id" title="lemma">list_prefix_nth</span></a>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#projection_friendly_in_futures'"><span class="id" title="lemma">projection_friendly_in_futures'</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">sx</span> <span class="id" title="var">trx</span> <span class="id" title="var">sj</span> <span class="id" title="var">Hall</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hs1</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hs2</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfr</span> <span class="id" title="var">sj</span> (<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <span class="id" title="var">lj</span> <span class="id" title="var">n2</span>) <span class="id" title="var">Hpref</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sx</span> [<span class="id" title="var">trx</span> [<span class="id" title="var">Htrx</span> [<span class="id" title="var">Hsx</span> <span class="id" title="var">Hproj</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hall</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="a:193" class="idref" href="#a:193"><span class="id" title="binder">a</span></a> =&gt; <a class="idref" href="CasperCBC.Lib.Classes.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#from_projection"><span class="id" title="definition">from_projection</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#a:192"><span class="id" title="variable">a</span></a>)) <span class="id" title="var">trx</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#filter_Forall"><span class="id" title="definition">filter_Forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list_alt_iff"><span class="id" title="lemma">finite_trace_projection_list_alt_iff</span></a> <span class="id" title="var">trx</span> <span class="id" title="var">Hall</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hproj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hs1'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <span class="id" title="var">n1</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">sj</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">lj</span>))) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">sj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <span class="id" title="var">lj</span> <span class="id" title="var">n2</span>)) <span class="id" title="var">n1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix_map"><span class="id" title="lemma">stream_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix_nth"><span class="id" title="lemma">stream_prefix_nth</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hs2'</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Str_nth"><span class="id" title="definition">Str_nth</span></a> <span class="id" title="var">n2</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#Cons"><span class="id" title="constructor">Cons</span></a> <span class="id" title="var">sj</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <span class="id" title="var">lj</span>))) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<span class="id" title="var">sj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> (<a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix"><span class="id" title="definition">stream_prefix</span></a> <span class="id" title="var">lj</span> <span class="id" title="var">n2</span>)) <span class="id" title="var">n2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">n2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix_map"><span class="id" title="lemma">stream_prefix_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n2</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">sn2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqsn2</span> <span class="id" title="tactic">at</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#stream_prefix_nth"><span class="id" title="lemma">stream_prefix_nth</span></a>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#projection_friendly_in_futures'"><span class="id" title="lemma">projection_friendly_in_futures'</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">sx</span> <span class="id" title="var">trx</span> <span class="id" title="var">sj</span> <span class="id" title="var">Hall</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hproj</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hs1</span> || <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hs2</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces"><span class="id" title="section">ProjectionTraces</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="ProjectionTraces_membership" class="idref" href="#ProjectionTraces_membership"><span class="id" title="section">ProjectionTraces_membership</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;{<a id="message:194" class="idref" href="#message:194"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="index:195" class="idref" href="#index:195"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="IndEqDec:196" class="idref" href="#IndEqDec:196"><span class="id" title="binder">IndEqDec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#index:195"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;(<a id="IM:197" class="idref" href="#IM:197"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#index:195"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#message:194"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;(<a id="i0:198" class="idref" href="#i0:198"><span class="id" title="binder">i0</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#index:195"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="constraint:199" class="idref" href="#constraint:199"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#IM:197"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#IM:197"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#message:194"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;(<a id="X:200" class="idref" href="#X:200"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#IM:197"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#i0:198"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#constraint:199"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_projection_list_in" class="idref" href="#finite_trace_projection_list_in"><span class="id" title="lemma">finite_trace_projection_list_in</span></a><br/>
&nbsp;&nbsp;(<a id="tr:201" class="idref" href="#tr:201"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="itemX:202" class="idref" href="#itemX:202"><span class="id" title="binder">itemX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;(<a id="HitemX:203" class="idref" href="#HitemX:203"><span class="id" title="binder">HitemX</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:202"><span class="id" title="variable">itemX</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:201"><span class="id" title="variable">tr</span></a>)<br/>
&nbsp;&nbsp;(<a id="j:204" class="idref" href="#j:204"><span class="id" title="binder">j</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:202"><span class="id" title="variable">itemX</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#Build_transition_item"><span class="id" title="constructor">Build_transition_item</span></a> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#j:204"><span class="id" title="variable">j</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:202"><span class="id" title="variable">itemX</span></a>)) (<a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:202"><span class="id" title="variable">itemX</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:202"><span class="id" title="variable">itemX</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#j:204"><span class="id" title="variable">j</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:202"><span class="id" title="variable">itemX</span></a>)) (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#j:204"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:201"><span class="id" title="variable">tr</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; [<span class="id" title="tactic">inversion</span> <span class="id" title="var">HitemX</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HitemX</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HitemX</span> | <span class="id" title="var">HitemX</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">j</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> ?<span class="id" title="var">eq</span>] =&gt; <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> <span class="id" title="var">eq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id" title="tactic">elim</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">e</span> <span class="id" title="keyword">with</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.index"><span class="id" title="variable">index</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <span class="id" title="var">itemX</span>))) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Logic.Eqdep.html#EqdepTheory.UIP"><span class="id" title="lemma">UIP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">spec</span> <span class="id" title="var">IHtr</span> <span class="id" title="var">HitemX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> ?<span class="id" title="var">eq</span>] =&gt; <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> <span class="id" title="var">eq</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;;[|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="finite_trace_projection_list_in_rev" class="idref" href="#finite_trace_projection_list_in_rev"><span class="id" title="lemma">finite_trace_projection_list_in_rev</span></a><br/>
&nbsp;&nbsp;(<a id="tr:205" class="idref" href="#tr:205"><span class="id" title="binder">tr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.X"><span class="id" title="variable">X</span></a>))<br/>
&nbsp;&nbsp;(<a id="j:206" class="idref" href="#j:206"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="itemj:207" class="idref" href="#itemj:207"><span class="id" title="binder">itemj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#j:206"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hitemj:208" class="idref" href="#Hitemj:208"><span class="id" title="binder">Hitemj</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemj:207"><span class="id" title="variable">itemj</span></a>  (<a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#finite_trace_projection_list"><span class="id" title="definition">finite_trace_projection_list</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.i0"><span class="id" title="variable">i0</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.constraint"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#j:206"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:205"><span class="id" title="variable">tr</span></a>))<br/>
&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="itemX:209" class="idref" href="#itemX:209"><span class="id" title="binder">itemX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Houtput:210" class="idref" href="#Houtput:210"><span class="id" title="binder">Houtput</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:209"><span class="id" title="variable">itemX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemj:207"><span class="id" title="variable">itemj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinput:211" class="idref" href="#Hinput:211"><span class="id" title="binder">Hinput</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:209"><span class="id" title="variable">itemX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemj:207"><span class="id" title="variable">itemj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hl1:212" class="idref" href="#Hl1:212"><span class="id" title="binder">Hl1</span></a> : <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#j:206"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:209"><span class="id" title="variable">itemX</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hl2:213" class="idref" href="#Hl2:213"><span class="id" title="binder">Hl2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:209"><span class="id" title="variable">itemX</span></a>)) <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#Hl1:212"><span class="id" title="variable">Hl1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemj:207"><span class="id" title="variable">itemj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hdestination:214" class="idref" href="#Hdestination:214"><span class="id" title="binder">Hdestination</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:209"><span class="id" title="variable">itemX</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#j:206"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemj:207"><span class="id" title="variable">itemj</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#itemX:209"><span class="id" title="variable">itemX</span></a> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#tr:205"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; [<span class="id" title="var">contradict</span> <span class="id" title="var">Hitemj</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hitemj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">Hitemj</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="keyword">context</span> [<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> ?<span class="id" title="var">eq</span>] =&gt; <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> <span class="id" title="var">eq</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hitemj</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hitemj</span> | <span class="id" title="var">Hitemj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">itemj</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IHtr</span> <span class="id" title="var">Hitemj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHtr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">itemX</span> [<span class="id" title="var">Houtput</span> [<span class="id" title="var">Hinput</span> [<span class="id" title="var">Hl1</span> [<span class="id" title="var">Hl2</span> [<span class="id" title="var">Hdestination</span> <span class="id" title="var">HitemX</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">itemX</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>| <span class="id" title="tactic">assumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Hl1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Hl2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Hdestination</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">spec</span> <span class="id" title="var">IHtr</span> <span class="id" title="var">Hitemj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHtr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">itemX</span> [<span class="id" title="var">Houtput</span> [<span class="id" title="var">Hinput</span> [<span class="id" title="var">Hl1</span> [<span class="id" title="var">Hl2</span> [<span class="id" title="var">Hdestination</span> <span class="id" title="var">HitemX</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">itemX</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>| <span class="id" title="tactic">assumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">Hl1</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Hl2</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">Hdestination</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#ProjectionTraces_membership"><span class="id" title="section">ProjectionTraces_membership</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>

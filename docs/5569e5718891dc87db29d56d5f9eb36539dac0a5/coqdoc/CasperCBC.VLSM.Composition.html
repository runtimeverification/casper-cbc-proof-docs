<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#"><span class="id" title="library">Streams</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Nat.html#"><span class="id" title="library">Nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">Logic.FunctionalExtensionality</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FinFun.html#"><span class="id" title="library">Coq.Logic.FinFun</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.Eqdep.html#"><span class="id" title="library">Coq.Logic.Eqdep</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CasperCBC</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.StreamExtras.html#"><span class="id" title="library">StreamExtras</span></a> <a class="idref" href="CasperCBC.Lib.ListExtras.html#"><span class="id" title="library">ListExtras</span></a> <a class="idref" href="CasperCBC.Lib.Preamble.html#"><span class="id" title="library">Preamble</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#"><span class="id" title="library">VLSM.Common</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

This module provides Coq definitions for composite VLSMs and their projections
to components.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="VLSM_composition" class="idref" href="#VLSM_composition"><span class="id" title="section">VLSM_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab18"></a><h1 class="section">VLSM composition</h1>


<div class="paragraph"> </div>

Let us fix a type for <tt>message</tt>s, and an <tt>index</tt> type for the VLSM components
such that equality on <tt>index</tt> is decidable.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="message:1" class="idref" href="#message:1"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="index:2" class="idref" href="#index:2"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="IndEqDec:3" class="idref" href="#IndEqDec:3"><span class="id" title="binder">IndEqDec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#index:2"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IM:4" class="idref" href="#IM:4"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#index:2"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:1"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_composition.composite_type" class="idref" href="#VLSM_composition.composite_type"><span class="id" title="section">composite_type</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab19"></a><h2 class="section">The type of a composite VLSM</h2>


<div class="paragraph"> </div>

Let IM be a family of VLSMs indexed by <tt>index</tt>. Note that all
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span>s share the same type of <tt>message</tt>s.

<div class="paragraph"> </div>


<div class="paragraph"> </div>


<div class="paragraph"> </div>

A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> is an indexed family of <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span>s, yielding for each
index <tt>n</tt> a <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span> of <span class="inlinecode"><span class="id" title="keyword">type</span></span> <tt>IT n</tt>, the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="record">VLSM_type</span></a></span> corresponding to
machine <tt>n</tt>.

<div class="paragraph"> </div>

Note that the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> type is the dependent product type of the
family of <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.FullNode.Validator.State.html#state"><span class="id" title="definition">state</span></a></span> types corresponding to each index.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="_composite_state" class="idref" href="#_composite_state"><span class="id" title="definition">_composite_state</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="n:5" class="idref" href="#n:5"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:5"><span class="id" title="variable">n</span></a>).<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> is a pair between an index <tt>N</tt> and a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="projection">label</span></a></span> of <tt>IT n</tt>.

<div class="paragraph"> </div>

Note that the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> type is the dependent sum of the family of
types <tt>[@label _ (IT n) | n &lt;- index]</tt>.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="_composite_label" class="idref" href="#_composite_label"><span class="id" title="definition">_composite_label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#sigT"><span class="id" title="inductive">sigT</span></a> (<span class="id" title="keyword">fun</span> <a id="n:6" class="idref" href="#n:6"><span class="id" title="binder">n</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:6"><span class="id" title="variable">n</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_type" class="idref" href="#composite_type"><span class="id" title="definition">composite_type</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="class">VLSM_type</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#_composite_state"><span class="id" title="definition">_composite_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#_composite_label"><span class="id" title="definition">_composite_label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_state" class="idref" href="#composite_state"><span class="id" title="definition">composite_state</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_label" class="idref" href="#composite_label"><span class="id" title="definition">composite_label</span></a> := @<a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>

<br/>
</div>

<div class="doc">
A very useful operation on <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span>s is updating the state corresponding
to a component:

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="state_update" class="idref" href="#state_update"><span class="id" title="definition">state_update</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:7" class="idref" href="#s:7"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:8" class="idref" href="#i:8"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:9" class="idref" href="#si:9"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:8"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:10" class="idref" href="#j:10"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:10"><span class="id" title="variable">j</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#j:10"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:8"><span class="id" title="variable">i</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">e</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> (<span class="id" title="keyword">fun</span> <a id="i:11" class="idref" href="#i:11"><span class="id" title="binder">i</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:11"><span class="id" title="variable">i</span></a>)) <a class="idref" href="CasperCBC.VLSM.Composition.html#si:9"><span class="id" title="variable">si</span></a> <span class="id" title="var">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="CasperCBC.VLSM.Composition.html#s:7"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:10"><span class="id" title="variable">j</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The next few results describe several properties of the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a></span> operation.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_neq" class="idref" href="#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:12" class="idref" href="#s:12"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:13" class="idref" href="#i:13"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:14" class="idref" href="#si:14"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:13"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:15" class="idref" href="#j:15"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hneq:16" class="idref" href="#Hneq:16"><span class="id" title="binder">Hneq</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#j:15"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:13"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:12"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:13"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:14"><span class="id" title="variable">si</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:15"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:12"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:15"><span class="id" title="variable">j</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_eq" class="idref" href="#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:17" class="idref" href="#s:17"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:18" class="idref" href="#i:18"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:19" class="idref" href="#si:19"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:18"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:17"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:18"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:19"><span class="id" title="variable">si</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:18"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:19"><span class="id" title="variable">si</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a>, <a class="idref" href="CasperCBC.Lib.Classes.html#decide_rel"><span class="id" title="definition">decide_rel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.Preamble.html#eq_dec_refl"><span class="id" title="lemma">eq_dec_refl</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_id" class="idref" href="#state_update_id"><span class="id" title="lemma">state_update_id</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:20" class="idref" href="#s:20"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:21" class="idref" href="#i:21"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:22" class="idref" href="#si:22"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:21"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Heq:23" class="idref" href="#Heq:23"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#s:20"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:21"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:22"><span class="id" title="variable">si</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:20"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:21"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:22"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:20"><span class="id" title="variable">s</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_twice" class="idref" href="#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:24" class="idref" href="#s:24"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:25" class="idref" href="#i:25"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:26" class="idref" href="#si:26"><span class="id" title="binder">si</span></a> <a id="si':27" class="idref" href="#si':27"><span class="id" title="binder">si'</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:25"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:25"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:26"><span class="id" title="variable">si</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#i:25"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si':27"><span class="id" title="variable">si'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:25"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si':27"><span class="id" title="variable">si'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="state_update_twice_neq" class="idref" href="#state_update_twice_neq"><span class="id" title="lemma">state_update_twice_neq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:28" class="idref" href="#s:28"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:29" class="idref" href="#i:29"><span class="id" title="binder">i</span></a> <a id="j:30" class="idref" href="#j:30"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:31" class="idref" href="#si:31"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:29"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:32" class="idref" href="#sj:32"><span class="id" title="binder">sj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:30"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hij:33" class="idref" href="#Hij:33"><span class="id" title="binder">Hij</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#j:30"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:29"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:28"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:29"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:31"><span class="id" title="variable">si</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#j:30"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#sj:32"><span class="id" title="variable">sj</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:28"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:30"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#sj:32"><span class="id" title="variable">sj</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#i:29"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:31"><span class="id" title="variable">si</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality_dep_good"><span class="id" title="definition">functional_extensionality_dep_good</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)); <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> ; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_type"><span class="id" title="section">composite_type</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_composition.composite_sig" class="idref" href="#VLSM_composition.composite_sig"><span class="id" title="section">composite_sig</span></a>.<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab20"></a><h2 class="section">The signature of a composite VLSM</h2>


<div class="paragraph"> </div>

Assume an non-empty <tt>index</tt> type and let <tt>IT</tt> be
an <tt>index</tt>ed family of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="record">VLSM_type</span></a></span>s, and for each index <tt>i</tt>, let <tt>IS i</tt> be
a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span>ature of type <tt>IT i</tt>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="i0:34" class="idref" href="#i0:34"><span class="id" title="binder">i0</span></a>: <a class="idref" href="CasperCBC.Lib.Classes.html#Inhabited"><span class="id" title="class">Inhabited</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>}.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span> has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_state_prop"><span class="id" title="definition">initial_state_prop</span></a></span>erty if all of its component
states have the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_state_prop"><span class="id" title="definition">initial_state_prop</span></a></span>erty in the corresponding component signature.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_initial_state_prop" class="idref" href="#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:35" class="idref" href="#s:35"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="n:36" class="idref" href="#n:36"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>, <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:36"><span class="id" title="variable">n</span></a>) (<a class="idref" href="CasperCBC.VLSM.Composition.html#s:35"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:36"><span class="id" title="variable">n</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_initial_state" class="idref" href="#composite_initial_state"><span class="id" title="definition">composite_initial_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#sig"><span class="id" title="inductive">sig</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_s0" class="idref" href="#composite_s0"><span class="id" title="definition">composite_s0</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_initial_state"><span class="id" title="definition">composite_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="keyword">fun</span> (<a id="n:38" class="idref" href="#n:38"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>) =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:37"><span class="id" title="variable">n</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>]. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
A message has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_message_prop"><span class="id" title="definition">initial_message_prop</span></a></span>erty in the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_sig"><span class="id" title="definition">composite_sig</span></a></span>nature
iff it has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ListValidator.ListValidator.html#initial_message_prop"><span class="id" title="definition">initial_message_prop</span></a></span>erty in any of the component signatures.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_initial_message_prop" class="idref" href="#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a> (<a id="m:39" class="idref" href="#m:39"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>) : <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="n:40" class="idref" href="#n:40"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>) (<a id="mi:41" class="idref" href="#mi:41"><span class="id" title="binder">mi</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message"><span class="id" title="definition">vinitial_message</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:40"><span class="id" title="variable">n</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#mi:41"><span class="id" title="variable">mi</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:39"><span class="id" title="variable">m</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;An&nbsp;explicit&nbsp;argument&nbsp;for&nbsp;the&nbsp;initial&nbsp;state&nbsp;witness&nbsp;is&nbsp;no&nbsp;longer&nbsp;required:&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_m0" class="idref" href="#composite_m0"><span class="id" title="definition">composite_m0</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vm0"><span class="id" title="definition">vm0</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#inhabitant"><span class="id" title="method">inhabitant</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_l0" class="idref" href="#composite_l0"><span class="id" title="definition">composite_l0</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.Lib.Classes.html#inhabitant"><span class="id" title="method">inhabitant</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vl0"><span class="id" title="definition">vl0</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.Lib.Classes.html#inhabitant"><span class="id" title="method">inhabitant</span></a>)) .<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_sig" class="idref" href="#composite_sig"><span class="id" title="definition">composite_sig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|   <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_initial_state_prop"><span class="id" title="definition">composite_initial_state_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_initial_message_prop"><span class="id" title="definition">composite_initial_message_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_m0"><span class="id" title="definition">composite_m0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_l0"><span class="id" title="definition">composite_l0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
We can always "lift" state <tt>sj</tt> from component <tt>j</tt> to a composite state by
updating an initial composite state, say <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="projection">s0</span></a></span>, to <tt>sj</tt> on component <tt>j</tt>.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_state" class="idref" href="#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:42" class="idref" href="#j:42"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:43" class="idref" href="#sj:43"><span class="id" title="binder">sj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:42"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s0X:44" class="idref" href="#s0X:44"><span class="id" title="binder">s0X</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s0X:44"><span class="id" title="variable">s0X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:42"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#sj:43"><span class="id" title="variable">sj</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_transition_item" class="idref" href="#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:45" class="idref" href="#j:45"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="item:46" class="idref" href="#item:46"><span class="id" title="binder">item</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:45"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s0X:47" class="idref" href="#s0X:47"><span class="id" title="binder">s0X</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: @<a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">item</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">input</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">destination</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">output</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_finite_trace" class="idref" href="#lift_to_composite_finite_trace"><span class="id" title="definition">lift_to_composite_finite_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:48" class="idref" href="#j:48"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trj:49" class="idref" href="#trj:49"><span class="id" title="binder">trj</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition_item"><span class="id" title="definition">vtransition_item</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:48"><span class="id" title="variable">j</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:48"><span class="id" title="variable">j</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#trj:49"><span class="id" title="variable">trj</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_to_composite_trace" class="idref" href="#lift_to_composite_trace"><span class="id" title="definition">lift_to_composite_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:50" class="idref" href="#j:50"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="trj:51" class="idref" href="#trj:51"><span class="id" title="binder">trj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vTrace"><span class="id" title="definition">vTrace</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:50"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: @<a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#trj:51"><span class="id" title="variable">trj</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">l</span> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#Finite"><span class="id" title="constructor">Finite</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:50"><span class="id" title="variable">j</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_finite_trace"><span class="id" title="definition">lift_to_composite_finite_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:50"><span class="id" title="variable">j</span></a> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> <span class="id" title="var">s</span> <span class="id" title="var">l</span> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#Infinite"><span class="id" title="constructor">Infinite</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:50"><span class="id" title="variable">j</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:50"><span class="id" title="variable">j</span></a>) <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_sig"><span class="id" title="section">composite_sig</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_composition.composite_vlsm" class="idref" href="#VLSM_composition.composite_vlsm"><span class="id" title="section">composite_vlsm</span></a>.<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab21"></a><h2 class="section">Constrained VLSM composition</h2>


<div class="paragraph"> </div>

Assume an non-empty <tt>index</tt> type, let
<pre>IT</pre>
 be an <tt>index</tt>ed family of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="record">VLSM_type</span></a></span>s, and for each index <tt>i</tt>, let
<pre>IS i</pre>
 be a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="record">VLSM_sign</span></a></span>ature of type <tt>IT i</tt> and <tt>IM i</tt> be a VLSM of
signature <tt>IS i</tt>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="i0:53" class="idref" href="#i0:53"><span class="id" title="binder">i0</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#Inhabited"><span class="id" title="class">Inhabited</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>}.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="projection">transition</span></a></span> function for the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a></span> is defined as follows
takes a transition in the VLSM corresponding to the given <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span>
and returnes the produced message together with the state updated on that
component:

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_transition" class="idref" href="#composite_transition"><span class="id" title="definition">composite_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:54" class="idref" href="#l:54"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:55" class="idref" href="#som:55"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:56" class="idref" href="#s:56"><span class="id" title="binder">s</span></a>, <a id="om:57" class="idref" href="#om:57"><span class="id" title="binder">om</span></a>) := <a class="idref" href="CasperCBC.VLSM.Composition.html#som:55"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:58" class="idref" href="#i:58"><span class="id" title="binder">i</span></a>, <a id="li:59" class="idref" href="#li:59"><span class="id" title="binder">li</span></a>) := <a class="idref" href="CasperCBC.VLSM.Composition.html#l:54"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="si':60" class="idref" href="#si':60"><span class="id" title="binder">si'</span></a>, <a id="om':61" class="idref" href="#om':61"><span class="id" title="binder">om'</span></a>) := <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:58"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#li:59"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:56"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:58"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:57"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:56"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:58"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si':60"><span class="id" title="variable">si'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>  <a class="idref" href="CasperCBC.VLSM.Composition.html#om':61"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Given a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span> <tt>(i, li)</tt> and a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span>-message
pair <tt>(s, om)</tt>, <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_valid"><span class="id" title="definition">free_composite_valid</span></a></span>ity is defined as <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span>ity in
the <tt>i</tt>th component <tt>IM i</tt>.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="free_composite_valid" class="idref" href="#free_composite_valid"><span class="id" title="definition">free_composite_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:62" class="idref" href="#l:62"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:63" class="idref" href="#som:63"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="keyword">Prop</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="s:64" class="idref" href="#s:64"><span class="id" title="binder">s</span></a>, <a id="om:65" class="idref" href="#om:65"><span class="id" title="binder">om</span></a>) := <a class="idref" href="CasperCBC.VLSM.Composition.html#som:63"><span class="id" title="variable">som</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="i:66" class="idref" href="#i:66"><span class="id" title="binder">i</span></a>, <a id="li:67" class="idref" href="#li:67"><span class="id" title="binder">li</span></a>) := <a class="idref" href="CasperCBC.VLSM.Composition.html#l:62"><span class="id" title="variable">l</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:66"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#li:67"><span class="id" title="variable">li</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:64"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:66"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:65"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
A <tt>constraint</tt> for a composite VLSM is a <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span>ity condition defined
directly on <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a></span>s and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a></span>s, thus being able to
impose a global condition.

<div class="paragraph"> </div>

<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#constrained_composite_valid"><span class="id" title="definition">constrained_composite_valid</span></a></span>ity interposes such a <tt>constraint</tt> on top of
the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_valid"><span class="id" title="definition">free_composite_valid</span></a></span>ity.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="constrained_composite_valid" class="idref" href="#constrained_composite_valid"><span class="id" title="definition">constrained_composite_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:68" class="idref" href="#constraint:68"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:69" class="idref" href="#l:69"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="som:70" class="idref" href="#som:70"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_valid"><span class="id" title="definition">free_composite_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:69"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#som:70"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:68"><span class="id" title="variable">constraint</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:69"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#som:70"><span class="id" title="variable">som</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_vlsm_machine" class="idref" href="#composite_vlsm_machine"><span class="id" title="definition">composite_vlsm_machine</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:71" class="idref" href="#constraint:71"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_sig"><span class="id" title="definition">composite_sig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|  <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_transition"><span class="id" title="definition">composite_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;  <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#constrained_composite_valid"><span class="id" title="definition">constrained_composite_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:71"><span class="id" title="variable">constraint</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_vlsm" class="idref" href="#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:72" class="idref" href="#constraint:72"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_machine"><span class="id" title="definition">composite_vlsm_machine</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:72"><span class="id" title="variable">constraint</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_transition_state_neq" class="idref" href="#composite_transition_state_neq"><span class="id" title="lemma">composite_transition_state_neq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="constraint:73" class="idref" href="#constraint:73"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:74" class="idref" href="#l:74"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:75" class="idref" href="#s:75"><span class="id" title="binder">s</span></a> <a id="s':76" class="idref" href="#s':76"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:77" class="idref" href="#om:77"><span class="id" title="binder">om</span></a> <a id="om':78" class="idref" href="#om':78"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:79" class="idref" href="#Ht:79"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:73"><span class="id" title="variable">constraint</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#l:74"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:75"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:77"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':76"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om':78"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:80" class="idref" href="#i:80"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hi:81" class="idref" href="#Hi:81"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#i:80"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:74"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#s':76"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:80"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:75"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:80"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">il</span>, <span class="id" title="var">l</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">il</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'</span>, <span class="id" title="var">omi'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">omi'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_transition_state_eq" class="idref" href="#composite_transition_state_eq"><span class="id" title="lemma">composite_transition_state_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="constraint:82" class="idref" href="#constraint:82"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:83" class="idref" href="#l:83"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:84" class="idref" href="#s:84"><span class="id" title="binder">s</span></a> <a id="s':85" class="idref" href="#s':85"><span class="id" title="binder">s'</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:86" class="idref" href="#om:86"><span class="id" title="binder">om</span></a> <a id="om':87" class="idref" href="#om':87"><span class="id" title="binder">om'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:88" class="idref" href="#Ht:88"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:82"><span class="id" title="variable">constraint</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#l:83"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:84"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:86"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':85"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om':87"><span class="id" title="variable">om'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="il:89" class="idref" href="#il:89"><span class="id" title="binder">il</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:83"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#s':85"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#il:89"><span class="id" title="variable">il</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#il:89"><span class="id" title="variable">il</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:83"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:84"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#il:89"><span class="id" title="variable">il</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:86"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">il</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> <span class="id" title="var">il</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">il</span>, <span class="id" title="var">l</span>). <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">il</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'</span>, <span class="id" title="var">omi'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_composition.composite_vlsm.constraint_subsumption_part_one" class="idref" href="#VLSM_composition.composite_vlsm.constraint_subsumption_part_one"><span class="id" title="section">constraint_subsumption_part_one</span></a>.<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab22"></a><h2 class="section">Constraint subssumption</h2>


<div class="paragraph"> </div>

A <tt>constraint1</tt> is subssumed by <tt>constraint2</tt> if <tt>constraint1&gt; is stronger
than &lt;&lt;constraint2</tt> for any input.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="constraint_subsumption" class="idref" href="#constraint_subsumption"><span class="id" title="definition">constraint_subsumption</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint1:90" class="idref" href="#constraint1:90"><span class="id" title="binder">constraint1</span></a> <a id="constraint2:91" class="idref" href="#constraint2:91"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="l:92" class="idref" href="#l:92"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a>) (<a id="som:93" class="idref" href="#som:93"><span class="id" title="binder">som</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Composition.html#constraint1:90"><span class="id" title="variable">constraint1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:92"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#som:93"><span class="id" title="variable">som</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint2:91"><span class="id" title="variable">constraint2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:92"><span class="id" title="variable">l</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#som:93"><span class="id" title="variable">som</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint1:94" class="idref" href="#constraint1:94"><span class="id" title="binder">constraint1</span></a> <a id="constraint2:95" class="idref" href="#constraint2:95"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsubsumption:96" class="idref" href="#Hsubsumption:96"><span class="id" title="binder">Hsubsumption</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint_subsumption"><span class="id" title="definition">constraint_subsumption</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint1:94"><span class="id" title="variable">constraint1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint2:95"><span class="id" title="variable">constraint2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X1:97" class="idref" href="#X1:97"><span class="id" title="binder">X1</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint1:94"><span class="id" title="variable">constraint1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X2:98" class="idref" href="#X2:98"><span class="id" title="binder">X2</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint2:95"><span class="id" title="variable">constraint2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
Let <tt>X1</tt>, <tt>X2</tt> be two compositions of the same family of VLSMs but with
constraints <tt>constraint1</tt> and <tt>constraint2&gt;, respectively. Further assume
that &lt;&lt;constraint1</tt> is subssumed by <tt>constraint2</tt>.

<div class="paragraph"> </div>

We will show that <tt>X1</tt> is trace-included into <tt>X2</tt> by applying
Lemma <span class="inlinecode"><span class="id" title="var">basic_VLSM_inclusion</span></span>

</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
Then <tt>X1</tt> is trace-included into <tt>X2</tt>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_constraint_subsumption_incl" class="idref" href="#preloaded_constraint_subsumption_incl"><span class="id" title="lemma">preloaded_constraint_subsumption_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption.X2"><span class="id" title="variable">X2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption.X1"><span class="id" title="variable">X1</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption.X2"><span class="id" title="variable">X2</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">assumption</span> || <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_protocol_valid"><span class="id" title="lemma">preloaded_constraint_subsumption_protocol_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_constraint_subsumption_pre_loaded_with_all_messages_incl" class="idref" href="#preloaded_constraint_subsumption_pre_loaded_with_all_messages_incl"><span class="id" title="lemma">preloaded_constraint_subsumption_pre_loaded_with_all_messages_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption.X1"><span class="id" title="variable">X1</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption.X2"><span class="id" title="variable">X2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption.X1"><span class="id" title="variable">X1</span></a>)) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption.X2"><span class="id" title="variable">X2</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">assumption</span> || <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_preloaded_protocol_valid"><span class="id" title="lemma">preloaded_constraint_subsumption_preloaded_protocol_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.preloaded_constraint_subsumption"><span class="id" title="section">preloaded_constraint_subsumption</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="VLSM_composition.composite_vlsm.constraint_subsumption_part_two" class="idref" href="#VLSM_composition.composite_vlsm.constraint_subsumption_part_two"><span class="id" title="section">constraint_subsumption_part_two</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint1:141" class="idref" href="#constraint1:141"><span class="id" title="binder">constraint1</span></a> <a id="constraint2:142" class="idref" href="#constraint2:142"><span class="id" title="binder">constraint2</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsubsumption:143" class="idref" href="#Hsubsumption:143"><span class="id" title="binder">Hsubsumption</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint_subsumption"><span class="id" title="definition">constraint_subsumption</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint1:141"><span class="id" title="variable">constraint1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint2:142"><span class="id" title="variable">constraint2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X1:144" class="idref" href="#X1:144"><span class="id" title="binder">X1</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint1:141"><span class="id" title="variable">constraint1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X2:145" class="idref" href="#X2:145"><span class="id" title="binder">X2</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint2:142"><span class="id" title="variable">constraint2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_subsumption_can_emit" class="idref" href="#constraint_subsumption_can_emit"><span class="id" title="lemma">constraint_subsumption_can_emit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:146" class="idref" href="#m:146"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hm:147" class="idref" href="#Hm:147"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:146"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X2"><span class="id" title="variable">X2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:146"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_can_emit"><span class="id" title="lemma">preloaded_constraint_subsumption_can_emit</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.constraint1"><span class="id" title="variable">constraint1</span></a> ; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_weaker"><span class="id" title="lemma">preloaded_constraint_subsumption_weaker</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_subsumption_preloaded_protocol_valid" class="idref" href="#constraint_subsumption_preloaded_protocol_valid"><span class="id" title="lemma">constraint_subsumption_preloaded_protocol_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:148" class="idref" href="#l:148"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:149" class="idref" href="#s:149"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:150" class="idref" href="#om:150"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:151" class="idref" href="#Hv:151"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X1"><span class="id" title="variable">X1</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#l:148"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:149"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:150"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X2"><span class="id" title="variable">X2</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#l:148"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:149"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:150"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_preloaded_protocol_valid"><span class="id" title="lemma">preloaded_constraint_subsumption_preloaded_protocol_valid</span></a>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_weaker"><span class="id" title="lemma">preloaded_constraint_subsumption_weaker</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_subsumption_preloaded_protocol_prop" class="idref" href="#constraint_subsumption_preloaded_protocol_prop"><span class="id" title="lemma">constraint_subsumption_preloaded_protocol_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:152" class="idref" href="#s:152"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:153" class="idref" href="#om:153"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:154" class="idref" href="#Hps:154"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X1"><span class="id" title="variable">X1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:152"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:153"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X2"><span class="id" title="variable">X2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:152"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:153"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_preloaded_protocol_prop"><span class="id" title="lemma">preloaded_constraint_subsumption_preloaded_protocol_prop</span></a>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_weaker"><span class="id" title="lemma">preloaded_constraint_subsumption_weaker</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_subsumption_byzantine_message_prop" class="idref" href="#constraint_subsumption_byzantine_message_prop"><span class="id" title="lemma">constraint_subsumption_byzantine_message_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:155" class="idref" href="#m:155"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hm:156" class="idref" href="#Hm:156"><span class="id" title="binder">Hm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#byzantine_message_prop"><span class="id" title="definition">byzantine_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:155"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#byzantine_message_prop"><span class="id" title="definition">byzantine_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X2"><span class="id" title="variable">X2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:155"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_byzantine_message_prop"><span class="id" title="lemma">preloaded_constraint_subsumption_byzantine_message_prop</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.constraint1"><span class="id" title="variable">constraint1</span></a>; [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_weaker"><span class="id" title="lemma">preloaded_constraint_subsumption_weaker</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;end&nbsp;hide&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Then <tt>X1</tt> is trace-included into <tt>X2</tt>.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_subsumption_incl" class="idref" href="#constraint_subsumption_incl"><span class="id" title="lemma">constraint_subsumption_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X2"><span class="id" title="variable">X2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_incl"><span class="id" title="lemma">preloaded_constraint_subsumption_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_weaker"><span class="id" title="lemma">preloaded_constraint_subsumption_weaker</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_subsumption_pre_loaded_with_all_messages_incl" class="idref" href="#constraint_subsumption_pre_loaded_with_all_messages_incl"><span class="id" title="lemma">constraint_subsumption_pre_loaded_with_all_messages_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X1"><span class="id" title="variable">X1</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two.X2"><span class="id" title="variable">X2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_pre_loaded_with_all_messages_incl"><span class="id" title="lemma">preloaded_constraint_subsumption_pre_loaded_with_all_messages_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_constraint_subsumption_weaker"><span class="id" title="lemma">preloaded_constraint_subsumption_weaker</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm.constraint_subsumption_part_two"><span class="id" title="section">constraint_subsumption_part_two</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constraint_free_incl" class="idref" href="#constraint_free_incl"><span class="id" title="lemma">constraint_free_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:157" class="idref" href="#constraint:157"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:157"><span class="id" title="variable">constraint</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint_subsumption_incl"><span class="id" title="lemma">constraint_subsumption_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_prop_composite_free_lift_generalized_initial" class="idref" href="#protocol_prop_composite_free_lift_generalized_initial"><span class="id" title="lemma">protocol_prop_composite_free_lift_generalized_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:158" class="idref" href="#P:158"><span class="id" title="binder">P</span></a> <a id="Q:159" class="idref" href="#Q:159"><span class="id" title="binder">Q</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PimpliesQ:161" class="idref" href="#PimpliesQ:161"><span class="id" title="binder">PimpliesQ</span></a> : <span class="id" title="keyword">forall</span> <a id="m:160" class="idref" href="#m:160"><span class="id" title="binder">m</span></a>, <a class="idref" href="CasperCBC.VLSM.Composition.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:160"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#Q:159"><span class="id" title="variable">Q</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:160"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:162" class="idref" href="#j:162"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:163" class="idref" href="#sj:163"><span class="id" title="binder">sj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:162"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:164" class="idref" href="#om:164"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hp:165" class="idref" href="#Hp:165"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:162"><span class="id" title="variable">j</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#P:158"><span class="id" title="variable">P</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#sj:163"><span class="id" title="variable">sj</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:164"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:166" class="idref" href="#s:166"><span class="id" title="binder">s</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:162"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#sj:163"><span class="id" title="variable">sj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#Q:159"><span class="id" title="variable">Q</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:166"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:164"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">sj</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">sjom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">om</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">sj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqsjom</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqsjom</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a>; <span class="id" title="tactic">clear</span> <span class="id" title="var">s0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hinit</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">Q</span>) (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="keyword">is</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_s0"><span class="id" title="definition">composite_s0</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">s0</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hinit</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">six</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">s</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <span class="id" title="var">six</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">Q</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">Hjm</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">Q</span>) <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">s</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">Q</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">om</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">m</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">Hinit</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_message"><span class="id" title="constructor">protocol_initial_message</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hjm</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hjm</span> | <span class="id" title="var">HPm</span>]; [|<span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">PimpliesQ</span>; <span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">Hjm</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp1</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp2</span> <span class="id" title="var">_s</span> <span class="id" title="var">om</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>) (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">sj</span>) <span class="id" title="var">om0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">Q</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">Q</span>)) <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">_s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [<span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">replace</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">sj</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If @(sj, om)@ has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty for component and @s@ is the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a></span> of @sj@, then
@(s, om)@ has the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty for the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a></span>.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_prop_composite_free_lift" class="idref" href="#protocol_prop_composite_free_lift"><span class="id" title="lemma">protocol_prop_composite_free_lift</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:167" class="idref" href="#j:167"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:168" class="idref" href="#sj:168"><span class="id" title="binder">sj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:167"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:169" class="idref" href="#om:169"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hp:170" class="idref" href="#Hp:170"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:167"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#sj:168"><span class="id" title="variable">sj</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:169"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:171" class="idref" href="#s:171"><span class="id" title="binder">s</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:167"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#sj:168"><span class="id" title="variable">sj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:171"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:169"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_is_add_initial_False_protocol_prop"><span class="id" title="lemma">vlsm_is_add_initial_False_protocol_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_is_add_initial_False_protocol_prop"><span class="id" title="lemma">vlsm_is_add_initial_False_protocol_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_prop_composite_free_lift_generalized_initial"><span class="id" title="lemma">protocol_prop_composite_free_lift_generalized_initial</span></a> <span class="id" title="var">P</span> <span class="id" title="var">P</span>); [|<span class="id" title="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">m</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="can_emit_composite_free_lift" class="idref" href="#can_emit_composite_free_lift"><span class="id" title="lemma">can_emit_composite_free_lift</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P:172" class="idref" href="#P:172"><span class="id" title="binder">P</span></a> <a id="Q:173" class="idref" href="#Q:173"><span class="id" title="binder">Q</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PimpliesQ:175" class="idref" href="#PimpliesQ:175"><span class="id" title="binder">PimpliesQ</span></a> : <span class="id" title="keyword">forall</span> <a id="m:174" class="idref" href="#m:174"><span class="id" title="binder">m</span></a>, <a class="idref" href="CasperCBC.VLSM.Composition.html#P:172"><span class="id" title="variable">P</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:174"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#Q:173"><span class="id" title="variable">Q</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#m:174"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:176" class="idref" href="#j:176"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="m:177" class="idref" href="#m:177"><span class="id" title="binder">m</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Htrj:178" class="idref" href="#Htrj:178"><span class="id" title="binder">Htrj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:176"><span class="id" title="variable">j</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#P:172"><span class="id" title="variable">P</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#m:177"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#can_emit"><span class="id" title="definition">can_emit</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vlsm_add_initial_messages"><span class="id" title="definition">vlsm_add_initial_messages</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#Q:173"><span class="id" title="variable">Q</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#m:177"><span class="id" title="variable">m</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htrj</span> <span class="id" title="keyword">as</span> [(<span class="id" title="var">s</span>,<span class="id" title="var">om</span>) [<span class="id" title="var">l</span> [<span class="id" title="var">s'</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">s'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_prop_composite_free_lift_generalized_initial"><span class="id" title="lemma">protocol_prop_composite_free_lift_generalized_initial</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">PimpliesQ</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_prop_composite_free_lift_generalized_initial"><span class="id" title="lemma">protocol_prop_composite_free_lift_generalized_initial</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">PimpliesQ</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">exists</span> <span class="id" title="var">_om</span>;<span class="id" title="tactic">assumption</span>| <span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="var">j</span> <span class="id" title="var">_s</span>); <span class="id" title="tactic">assumption</span>| ..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><span class="id" title="keyword">let</span> (<span class="id" title="var">_</span>, <span class="id" title="var">_</span>) := ?<span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">replace</span> <span class="id" title="var">t</span> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Updating a composite initial state with a component initial state
    yields a composite initial state 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_free_update_initial_state_with_initial" class="idref" href="#composite_free_update_initial_state_with_initial"><span class="id" title="lemma">composite_free_update_initial_state_with_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:179" class="idref" href="#s:179"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:180" class="idref" href="#Hs:180"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:179"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:181" class="idref" href="#i:181"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:182" class="idref" href="#si:182"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:181"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsi:183" class="idref" href="#Hsi:183"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:181"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#si:182"><span class="id" title="variable">si</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:179"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:181"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:182"><span class="id" title="variable">si</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Updating a composite protocol state for the free composition with
    a component initial state yields a composite protocol state 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="composite_free_update_state_with_initial" class="idref" href="#composite_free_update_state_with_initial"><span class="id" title="lemma">composite_free_update_state_with_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:184" class="idref" href="#s:184"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:185" class="idref" href="#Hs:185"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:184"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:186" class="idref" href="#i:186"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="si:187" class="idref" href="#si:187"><span class="id" title="binder">si</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:186"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsi:188" class="idref" href="#Hsi:188"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:186"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#si:187"><span class="id" title="variable">si</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:184"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:186"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:187"><span class="id" title="variable">si</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_ind"><span class="id" title="lemma">protocol_state_prop_ind</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">remember</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <span class="id" title="var">s</span> <span class="id" title="var">i</span> <span class="id" title="var">si</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">s'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hs'</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <span class="id" title="var">s'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_free_update_initial_state_with_initial"><span class="id" title="lemma">composite_free_update_initial_state_with_initial</span></a>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>. <span class="id" title="tactic">replace</span> <span class="id" title="var">s'</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs'</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hps</span> [<span class="id" title="var">Hom</span> <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">j</span>, <span class="id" title="var">lj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">j</span>) <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">sj'</span>, <span class="id" title="var">omj'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Htj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span> <span class="id" title="var">om'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_twice_neq"><span class="id" title="lemma">state_update_twice_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_om</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_s</span> <span class="id" title="var">Hom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">j</span> <span class="id" title="var">lj</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hs</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">n'</span> : <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">intro</span> <span class="id" title="var">contra</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">elim</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgen</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Htj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hgen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition.composite_vlsm"><span class="id" title="section">composite_vlsm</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#VLSM_composition"><span class="id" title="section">VLSM_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">
   These basic projection lemmas relate
   the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a></span> and <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a></span> of
   a composite VLSM back to those conditions holding
   over projections to individual components of the state.

<div class="paragraph"> </div>

   Because the composition may have validly produced
   messages that are not protocol in an individual
   component (by interaction between components),
   We cannot just use properties <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span> <span class="inlinecode">(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>
   or <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a></span> <span class="inlinecode">(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>.
   For simplicity these lemmas use
   <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> <span class="inlinecode">(<a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span>)</span>.

<div class="paragraph"> </div>

   This does not precisely reflect the set of
   messages and transitions that can actually be
   seen in projections of transitions of the composite VLSM,
   but seems to be the best we can do with a result
   type that doesn't mention the other components or
   the composition constraint of the composite.

<div class="paragraph"> </div>

   Later in this file a
   <span class="inlinecode"><span class="id" title="var">composite_constrained_projection_vlsm</span></span> is defined
   that shares the states of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Liveness.SimpleFragileProtocol.html#IM"><span class="id" title="definition">IM</span></a></span> <span class="inlinecode"><span class="id" title="var">i</span></span> which is more
   precise.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_state_project_preloaded_to_preloaded" class="idref" href="#protocol_state_project_preloaded_to_preloaded"><span class="id" title="lemma">protocol_state_project_preloaded_to_preloaded</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="message:189" class="idref" href="#message:189"><span class="id" title="binder">message</span></a> `{<a id="EqDecision0:191" class="idref" href="#EqDecision0:191"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:191" class="idref" href="#EqDecision0:191"><span class="id" title="binder">index</span></a>} `{<a id="H:192" class="idref" href="#H:192"><span class="id" title="binder">Inhabited</span></a> <a id="H:192" class="idref" href="#H:192"><span class="id" title="binder">index</span></a>} (<a id="IM:193" class="idref" href="#IM:193"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#index:190"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:189"><span class="id" title="variable">message</span></a>) <a id="constraint:194" class="idref" href="#constraint:194"><span class="id" title="binder">constraint</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:195" class="idref" href="#X:195"><span class="id" title="binder">X</span></a>:=<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:193"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:194"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:196" class="idref" href="#s:196"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:195"><span class="id" title="variable">X</span></a>)) <a id="i:197" class="idref" href="#i:197"><span class="id" title="binder">i</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:195"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#s:196"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#IM:193"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:197"><span class="id" title="variable">i</span></a>)) (<a class="idref" href="CasperCBC.VLSM.Composition.html#s:196"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:197"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hproto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_state_prop_iff"><span class="id" title="lemma">preloaded_protocol_state_prop_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> (<span class="id" title="var">VLSM_type</span>:=(@<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <span class="id" title="var">_</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>)))) <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">som</span>:=<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">s</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">som</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">som</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_initial_state"><span class="id" title="constructor">preloaded_protocol_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_initial_state"><span class="id" title="constructor">preloaded_protocol_initial_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj2_sig"><span class="id" title="definition">proj2_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#surjective_pairing"><span class="id" title="lemma">surjective_pairing</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">j</span>) <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_protocol_generated"><span class="id" title="constructor">preloaded_protocol_generated</span></a>;[<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">IHHproto1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_state_project_preloaded" class="idref" href="#protocol_state_project_preloaded"><span class="id" title="lemma">protocol_state_project_preloaded</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="message:198" class="idref" href="#message:198"><span class="id" title="binder">message</span></a> `{<a id="EqDecision0:200" class="idref" href="#EqDecision0:200"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:200" class="idref" href="#EqDecision0:200"><span class="id" title="binder">index</span></a>} `{<a id="H:201" class="idref" href="#H:201"><span class="id" title="binder">Inhabited</span></a> <a id="H:201" class="idref" href="#H:201"><span class="id" title="binder">index</span></a>} (<a id="IM:202" class="idref" href="#IM:202"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#index:199"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:198"><span class="id" title="variable">message</span></a>) <a id="constraint:203" class="idref" href="#constraint:203"><span class="id" title="binder">constraint</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:204" class="idref" href="#X:204"><span class="id" title="binder">X</span></a>:=<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:202"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:203"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:205" class="idref" href="#s:205"><span class="id" title="binder">s</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:204"><span class="id" title="variable">X</span></a>) <a id="i:206" class="idref" href="#i:206"><span class="id" title="binder">i</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:204"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:205"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#IM:202"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:206"><span class="id" title="variable">i</span></a>)) (<a class="idref" href="CasperCBC.VLSM.Composition.html#s:205"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:206"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <span class="id" title="var">X</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">om</span> <span class="id" title="var">Hproto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_state_project_preloaded_to_preloaded"><span class="id" title="lemma">protocol_state_project_preloaded_to_preloaded</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_weaken_protocol_prop"><span class="id" title="lemma">preloaded_weaken_protocol_prop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_preloaded_project_active" class="idref" href="#protocol_transition_preloaded_project_active"><span class="id" title="lemma">protocol_transition_preloaded_project_active</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:207" class="idref" href="#message:207"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:209" class="idref" href="#EqDecision0:209"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:209" class="idref" href="#EqDecision0:209"><span class="id" title="binder">V</span></a>} `{<a id="H:210" class="idref" href="#H:210"><span class="id" title="binder">Inhabited</span></a> <a id="H:210" class="idref" href="#H:210"><span class="id" title="binder">V</span></a>} {<a id="IM:211" class="idref" href="#IM:211"><span class="id" title="binder">IM</span></a>: <a class="idref" href="CasperCBC.VLSM.Composition.html#V:208"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:207"><span class="id" title="variable">message</span></a>} {<a id="constraint:212" class="idref" href="#constraint:212"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:213" class="idref" href="#X:213"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:211"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:212"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:214" class="idref" href="#l:214"><span class="id" title="binder">l</span></a> <a id="s:215" class="idref" href="#s:215"><span class="id" title="binder">s</span></a> <a id="im:216" class="idref" href="#im:216"><span class="id" title="binder">im</span></a> <a id="s':217" class="idref" href="#s':217"><span class="id" title="binder">s'</span></a> <a id="om:218" class="idref" href="#om:218"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:213"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#l:214"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:215"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#im:216"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':217"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#om:218"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#IM:211"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:214"><span class="id" title="variable">l</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:214"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:215"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:214"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#im:216"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':217"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:214"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:218"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hptrans</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpvalid</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hproto_s</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hcvalid</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[|<span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">revert</span> <span class="id" title="var">Hproto_s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_state_project_preloaded_to_preloaded"><span class="id" title="lemma">protocol_state_project_preloaded_to_preloaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#any_message_is_protocol_in_preloaded"><span class="id" title="lemma">any_message_is_protocol_in_preloaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">Hconstraint</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">j</span>) <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">im</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_project_active" class="idref" href="#protocol_transition_project_active"><span class="id" title="lemma">protocol_transition_project_active</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:219" class="idref" href="#message:219"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:221" class="idref" href="#EqDecision0:221"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:221" class="idref" href="#EqDecision0:221"><span class="id" title="binder">V</span></a>} `{<a id="H:222" class="idref" href="#H:222"><span class="id" title="binder">Inhabited</span></a> <a id="H:222" class="idref" href="#H:222"><span class="id" title="binder">V</span></a>} {<a id="IM:223" class="idref" href="#IM:223"><span class="id" title="binder">IM</span></a>: <a class="idref" href="CasperCBC.VLSM.Composition.html#V:220"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:219"><span class="id" title="variable">message</span></a>} {<a id="constraint:224" class="idref" href="#constraint:224"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:225" class="idref" href="#X:225"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:223"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:224"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="l:226" class="idref" href="#l:226"><span class="id" title="binder">l</span></a> <a id="s:227" class="idref" href="#s:227"><span class="id" title="binder">s</span></a> <a id="im:228" class="idref" href="#im:228"><span class="id" title="binder">im</span></a> <a id="s':229" class="idref" href="#s':229"><span class="id" title="binder">s'</span></a> <a id="om:230" class="idref" href="#om:230"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:225"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:226"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:227"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#im:228"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':229"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#om:230"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#IM:223"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:226"><span class="id" title="variable">l</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:226"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:227"><span class="id" title="variable">s</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:226"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#im:228"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':229"><span class="id" title="variable">s'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:226"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:230"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_weaken_protocol_transition"><span class="id" title="lemma">preloaded_weaken_protocol_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_transition_preloaded_project_active"><span class="id" title="lemma">protocol_transition_preloaded_project_active</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_preloaded_project_any" class="idref" href="#protocol_transition_preloaded_project_any"><span class="id" title="lemma">protocol_transition_preloaded_project_any</span></a> {<a id="V:231" class="idref" href="#V:231"><span class="id" title="binder">V</span></a>} (<a id="i:232" class="idref" href="#i:232"><span class="id" title="binder">i</span></a>:<a class="idref" href="CasperCBC.VLSM.Composition.html#V:231"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:233" class="idref" href="#message:233"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:234" class="idref" href="#EqDecision0:234"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:234" class="idref" href="#EqDecision0:234"><span class="id" title="binder">V</span></a>} `{<a id="H:235" class="idref" href="#H:235"><span class="id" title="binder">Inhabited</span></a> <a id="H:235" class="idref" href="#H:235"><span class="id" title="binder">V</span></a>} {<a id="IM:236" class="idref" href="#IM:236"><span class="id" title="binder">IM</span></a>: <a class="idref" href="CasperCBC.VLSM.Composition.html#V:231"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:233"><span class="id" title="variable">message</span></a>} {<a id="constraint:237" class="idref" href="#constraint:237"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:238" class="idref" href="#X:238"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:236"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:237"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:239" class="idref" href="#l:239"><span class="id" title="binder">l</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:238"><span class="id" title="variable">X</span></a>) <a id="s:240" class="idref" href="#s:240"><span class="id" title="binder">s</span></a> <a id="im:241" class="idref" href="#im:241"><span class="id" title="binder">im</span></a> <a id="s':242" class="idref" href="#s':242"><span class="id" title="binder">s'</span></a> <a id="om:243" class="idref" href="#om:243"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:238"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#l:239"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:240"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#im:241"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':242"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#om:243"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:240"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:232"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s':242"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:232"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="li:244" class="idref" href="#li:244"><span class="id" title="binder">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#l:239"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:232"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#li:244"><span class="id" title="variable">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#IM:236"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:232"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Composition.html#li:244"><span class="id" title="variable">li</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:240"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:232"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#im:241"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':242"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:232"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#om:243"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">j</span> <span class="id" title="var">lj</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;[<span class="id" title="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hptrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_transition_preloaded_project_active"><span class="id" title="lemma">protocol_transition_preloaded_project_active</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hptrans</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpvalid</span> <span class="id" title="var">Htrans</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<span class="id" title="var">IM</span> <span class="id" title="var">j</span>) <span class="id" title="var">lj</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">j</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">im</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion_clear</span> <span class="id" title="var">Htrans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_transition_project_any" class="idref" href="#protocol_transition_project_any"><span class="id" title="lemma">protocol_transition_project_any</span></a> {<a id="V:245" class="idref" href="#V:245"><span class="id" title="binder">V</span></a>} (<a id="i:246" class="idref" href="#i:246"><span class="id" title="binder">i</span></a>:<a class="idref" href="CasperCBC.VLSM.Composition.html#V:245"><span class="id" title="variable">V</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:247" class="idref" href="#message:247"><span class="id" title="binder">message</span></a>} `{<a id="EqDecision0:248" class="idref" href="#EqDecision0:248"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:248" class="idref" href="#EqDecision0:248"><span class="id" title="binder">V</span></a>} `{<a id="H:249" class="idref" href="#H:249"><span class="id" title="binder">Inhabited</span></a> <a id="H:249" class="idref" href="#H:249"><span class="id" title="binder">V</span></a>} {<a id="IM:250" class="idref" href="#IM:250"><span class="id" title="binder">IM</span></a>: <a class="idref" href="CasperCBC.VLSM.Composition.html#V:245"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:247"><span class="id" title="variable">message</span></a>} {<a id="constraint:251" class="idref" href="#constraint:251"><span class="id" title="binder">constraint</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:252" class="idref" href="#X:252"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:250"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:251"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:253" class="idref" href="#l:253"><span class="id" title="binder">l</span></a>:<a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:252"><span class="id" title="variable">X</span></a>) <a id="s:254" class="idref" href="#s:254"><span class="id" title="binder">s</span></a> <a id="im:255" class="idref" href="#im:255"><span class="id" title="binder">im</span></a> <a id="s':256" class="idref" href="#s':256"><span class="id" title="binder">s'</span></a> <a id="om:257" class="idref" href="#om:257"><span class="id" title="binder">om</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#X:252"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:253"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:254"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#im:255"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':256"><span class="id" title="variable">s'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#om:257"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:254"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:246"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s':256"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:246"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="li:258" class="idref" href="#li:258"><span class="id" title="binder">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#l:253"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:246"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#li:258"><span class="id" title="variable">li</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#IM:250"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:246"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Composition.html#li:258"><span class="id" title="variable">li</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:254"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:246"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#im:255"><span class="id" title="variable">im</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s':256"><span class="id" title="variable">s'</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:246"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#om:257"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#preloaded_weaken_protocol_transition"><span class="id" title="lemma">preloaded_weaken_protocol_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hproto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#protocol_transition_preloaded_project_any"><span class="id" title="lemma">protocol_transition_preloaded_project_any</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="projections" class="idref" href="#projections"><span class="id" title="section">projections</span></a>.<br/>
</div>

<div class="doc">
<a id="lab23"></a><h1 class="section">Composite VLSM projections</h1>


<div class="paragraph"> </div>

Let us fix an indexed set of VLSMs <tt>IM</tt> and their composition <tt>X</tt> using <tt>constraint</tt>.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="message:259" class="idref" href="#message:259"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="index:260" class="idref" href="#index:260"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="IndEqDec:261" class="idref" href="#IndEqDec:261"><span class="id" title="binder">IndEqDec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#index:260"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IM:262" class="idref" href="#IM:262"><span class="id" title="binder">IM</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#index:260"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:259"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<a id="i0:263" class="idref" href="#i0:263"><span class="id" title="binder">i0</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#Inhabited"><span class="id" title="class">Inhabited</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#index:260"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="T:264" class="idref" href="#T:264"><span class="id" title="binder">T</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:262"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="constraint:265" class="idref" href="#constraint:265"><span class="id" title="binder">constraint</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_label"><span class="id" title="definition">composite_label</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:262"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_state"><span class="id" title="definition">composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:262"><span class="id" title="variable">IM</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:259"><span class="id" title="variable">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:266" class="idref" href="#X:266"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm"><span class="id" title="definition">composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:262"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#constraint:265"><span class="id" title="variable">constraint</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_type"><span class="id" title="record">VLSM_type</span></a></span> of a projection of <tt>X</tt> to component <tt>i</tt> is the
type of the <tt>i</tt>th component of <tt>X</tt>.
We defined the signature of the projection to be the same as that of the component,
with the exception that the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_message"><span class="id" title="method">initial_message</span></a></span>s for the projection are defined
to be all <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>s of <tt>X</tt>:

<div class="paragraph"> </div>


</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_vlsm_constrained_projection_sig" class="idref" href="#composite_vlsm_constrained_projection_sig"><span class="id" title="definition">composite_vlsm_constrained_projection_sig</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:267" class="idref" href="#i:267"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_sign"><span class="id" title="class">VLSM_sign</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:267"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|   <a class="idref" href="CasperCBC.VLSM.Common.html#initial_state_prop"><span class="id" title="method">initial_state_prop</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:267"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_prop"><span class="id" title="method">initial_message_prop</span></a> := <span class="id" title="keyword">fun</span> <a id="pmi:268" class="idref" href="#pmi:268"><span class="id" title="binder">pmi</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="xm:269" class="idref" href="#xm:269"><span class="id" title="binder">xm</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#xm:269"><span class="id" title="variable">xm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#pmi:268"><span class="id" title="variable">pmi</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:267"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a class="idref" href="CasperCBC.VLSM.Common.html#m0"><span class="id" title="method">m0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vm0"><span class="id" title="definition">vm0</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:267"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;   <a class="idref" href="CasperCBC.VLSM.Common.html#l0"><span class="id" title="method">l0</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#vl0"><span class="id" title="definition">vl0</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:267"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#projection_valid"><span class="id" title="definition">projection_valid</span></a></span>ity is defined as the projection of <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span>ity of <tt>X</tt>:

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="projection_valid" class="idref" href="#projection_valid"><span class="id" title="definition">projection_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:270" class="idref" href="#i:270"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="li:271" class="idref" href="#li:271"><span class="id" title="binder">li</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:270"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="siomi:272" class="idref" href="#siomi:272"><span class="id" title="binder">siomi</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:270"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="si:273" class="idref" href="#si:273"><span class="id" title="binder">si</span></a>, <a id="omi:274" class="idref" href="#omi:274"><span class="id" title="binder">omi</span></a>) := <a class="idref" href="CasperCBC.VLSM.Composition.html#siomi:272"><span class="id" title="variable">siomi</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="s:275" class="idref" href="#s:275"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Composition.html#s:275"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:270"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#si:273"><span class="id" title="variable">si</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:270"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#li:271"><span class="id" title="variable">li</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:275"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#omi:274"><span class="id" title="variable">omi</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Since <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#projection_valid"><span class="id" title="definition">projection_valid</span></a></span>ity is derived from <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span>ity, which in turn
depends on <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span>ity in the component, it is easy to see that
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#projection_valid"><span class="id" title="definition">projection_valid</span></a></span>ity implies <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="projection">valid</span></a></span>ity in the component.

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="projection_valid_implies_valid" class="idref" href="#projection_valid_implies_valid"><span class="id" title="lemma">projection_valid_implies_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:276" class="idref" href="#i:276"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="li:277" class="idref" href="#li:277"><span class="id" title="binder">li</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:276"><span class="id" title="variable">i</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="siomi:278" class="idref" href="#siomi:278"><span class="id" title="binder">siomi</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:276"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hcomposite:279" class="idref" href="#Hcomposite:279"><span class="id" title="binder">Hcomposite</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_valid"><span class="id" title="definition">projection_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:276"><span class="id" title="variable">i</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#li:277"><span class="id" title="variable">li</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#siomi:278"><span class="id" title="variable">siomi</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:276"><span class="id" title="variable">i</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#li:277"><span class="id" title="variable">li</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#siomi:278"><span class="id" title="variable">siomi</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">siomi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">si</span> <span class="id" title="var">omi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hcomposite</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> [<span class="id" title="var">Hsi</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hvalid</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hvalid</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hvalid</span> <span class="id" title="var">Hconstraint</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We define the projection of <tt>X</tt> to index <tt>i</tt> as the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#VLSM"><span class="id" title="section">VLSM</span></a></span> whose signature
is the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection_sig"><span class="id" title="definition">composite_vlsm_constrained_projection_sig</span></a></span>nature corresponding to <tt>i</tt>,
having the same transition function as <tt>IM i</tt>, the <tt>i</tt>th component of

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_vlsm_constrained_projection_machine" class="idref" href="#composite_vlsm_constrained_projection_machine"><span class="id" title="definition">composite_vlsm_constrained_projection_machine</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:280" class="idref" href="#i:280"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_class"><span class="id" title="class">VLSM_class</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection_sig"><span class="id" title="definition">composite_vlsm_constrained_projection_sig</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:280"><span class="id" title="variable">i</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|  <a class="idref" href="CasperCBC.VLSM.Common.html#transition"><span class="id" title="method">transition</span></a> :=  <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:280"><span class="id" title="variable">i</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;  <a class="idref" href="CasperCBC.VLSM.Common.html#valid"><span class="id" title="method">valid</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_valid"><span class="id" title="definition">projection_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:280"><span class="id" title="variable">i</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_vlsm_constrained_projection" class="idref" href="#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:281" class="idref" href="#i:281"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Common.html#mk_vlsm"><span class="id" title="definition">mk_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection_machine"><span class="id" title="definition">composite_vlsm_constrained_projection_machine</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:281"><span class="id" title="variable">i</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="projections.fixed_projection" class="idref" href="#projections.fixed_projection"><span class="id" title="section">fixed_projection</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab24"></a><h2 class="section">Projection traces are Byzantine</h2>


<div class="paragraph"> </div>

Let us fix an index <tt>j</tt> and let <tt>Xj</tt> be the projection of <tt>X</tt> on
component <tt>j</tt>.

<div class="paragraph"> </div>

In this section we establish some basic properties for projections, building up
to Lemma <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#proj_pre_loaded_with_all_messages_incl"><span class="id" title="lemma">proj_pre_loaded_with_all_messages_incl</span></a></span>, which guarantees that all
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s of <tt>Xj</tt> are also <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s for the
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> associated to the component <tt>IM j</tt>.
In particular this ensures that the byzantine traces of <tt>IM j</tt> include all
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.CommonTraces.html#protocol_trace"><span class="id" title="inductive">protocol_trace</span></a></span>s of <tt>Xj</tt> (see Lemma <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ByzantineTraces.html#pre_loaded_with_all_messages_alt_eq"><span class="id" title="lemma">pre_loaded_with_all_messages_alt_eq</span></a></span>).

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="j:282" class="idref" href="#j:282"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Xj:283" class="idref" href="#Xj:283"><span class="id" title="binder">Xj</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:282"><span class="id" title="variable">j</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
As a basic property of the definition of initial states it follows that
the <tt>j</tt>th component of an <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_state"><span class="id" title="method">initial_state</span></a></span> of <tt>X</tt> is initial for <tt>Xj</tt>
<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="initial_state_projection" class="idref" href="#initial_state_projection"><span class="id" title="lemma">initial_state_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:284" class="idref" href="#s:284"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinit:285" class="idref" href="#Hinit:285"><span class="id" title="binder">Hinit</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:284"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#s:284"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hinit</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Since all <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message"><span class="id" title="definition">protocol_message</span></a></span>s of <tt>X</tt> become <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#initial_message"><span class="id" title="method">initial_message</span></a></span>s in <tt>Xj</tt>, the
following result is not surprising.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_message_projection" class="idref" href="#protocol_message_projection"><span class="id" title="lemma">protocol_message_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="iom:286" class="idref" href="#iom:286"><span class="id" title="binder">iom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="HpmX:287" class="idref" href="#HpmX:287"><span class="id" title="binder">HpmX</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#iom:286"><span class="id" title="variable">iom</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#iom:286"><span class="id" title="variable">iom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">iom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">im</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_message"><span class="id" title="constructor">protocol_initial_message</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a> ); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpim</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_message_prop"><span class="id" title="definition">protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> <span class="id" title="var">im</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hini</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a> <span class="id" title="var">im</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">im</span> <span class="id" title="var">Hpim</span>); <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hinit</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">im</span> <span class="id" title="var">Hini</span>)); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Interestingly enough, <tt>Xj</tt> cannot produce any additional messages than
the initial ones available from <tt>X</tt>.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="protocol_message_projection_rev" class="idref" href="#protocol_message_projection_rev"><span class="id" title="lemma">protocol_message_projection_rev</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="iom:288" class="idref" href="#iom:288"><span class="id" title="binder">iom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpmj:289" class="idref" href="#Hpmj:289"><span class="id" title="binder">Hpmj</span></a>: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#iom:288"><span class="id" title="variable">iom</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#iom:288"><span class="id" title="variable">iom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpmj</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sj</span> <span class="id" title="var">Hpmj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hpmj</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">im</span> <span class="id" title="var">Him</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">om</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">om</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Him</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">m</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sX</span> [<span class="id" title="var">Heqs</span> <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> (<span class="id" title="keyword">fun</span> <a id="n:291" class="idref" href="#n:291"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:290"><span class="id" title="variable">n</span></a>)) <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_type"><span class="id" title="definition">composite_type</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>) <span class="id" title="var">sX</span> <span class="id" title="var">om</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span> <span class="id" title="var">om'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Heqsom'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Ht</span> := <span class="id" title="var">Heqsom'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqsom'</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqsom'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>) (<span class="id" title="var">sX</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">om</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">sj</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">iom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">Heqsom'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqsom'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sX</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">sj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#type"><span class="id" title="definition">type</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Composition.html#state_update"><span class="id" title="definition">state_update</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">sX</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">sj</span>) <span class="id" title="var">om'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="keyword">fun</span> <a id="n:293" class="idref" href="#n:293"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:292"><span class="id" title="variable">n</span></a>)) <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">l</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">sX</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop_valid_out"><span class="id" title="lemma">protocol_prop_valid_out</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
As a stepping stone towards proving trace inclusion between <tt>Xj</tt> and
the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a></span> associated to <tt>IM j</tt>, we prove that the
<span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a></span>erty is transferred.

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="proj_pre_loaded_with_all_messages_protocol_prop" class="idref" href="#proj_pre_loaded_with_all_messages_protocol_prop"><span class="id" title="lemma">proj_pre_loaded_with_all_messages_protocol_prop</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PreLoaded:294" class="idref" href="#PreLoaded:294"><span class="id" title="binder">PreLoaded</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:295" class="idref" href="#s:295"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:296" class="idref" href="#om:296"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hps:297" class="idref" href="#Hps:297"><span class="id" title="binder">Hps</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:295"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:296"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#PreLoaded:294"><span class="id" title="variable">PreLoaded</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:295"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:296"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> <span class="id" title="var">PreLoaded</span> <span class="id" title="keyword">is</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">im</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">Him</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">om0</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Him</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Him</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>) <span class="id" title="var">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_message"><span class="id" title="constructor">protocol_initial_message</span></a> <span class="id" title="var">PreLoaded</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">Him</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <span class="id" title="var">PreLoaded</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span> <span class="id" title="var">_s</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_valid_implies_valid"><span class="id" title="lemma">projection_valid_implies_valid</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We can now finally prove the main result for this section:

</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="proj_pre_loaded_with_all_messages_incl" class="idref" href="#proj_pre_loaded_with_all_messages_incl"><span class="id" title="lemma">proj_pre_loaded_with_all_messages_incl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="PreLoaded:298" class="idref" href="#PreLoaded:298"><span class="id" title="binder">PreLoaded</span></a> := <a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM_incl"><span class="id" title="abbreviation">VLSM_incl</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#PreLoaded:298"><span class="id" title="variable">PreLoaded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#basic_VLSM_incl"><span class="id" title="lemma">basic_VLSM_incl</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection.Xj"><span class="id" title="variable">Xj</span></a>) (<a class="idref" href="CasperCBC.VLSM.Common.html#machine"><span class="id" title="definition">machine</span></a> <span class="id" title="var">PreLoaded</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">assumption</span> || <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#initial_message_is_protocol"><span class="id" title="lemma">initial_message_is_protocol</span></a>; <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_valid_implies_valid"><span class="id" title="lemma">projection_valid_implies_valid</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.fixed_projection"><span class="id" title="section">fixed_projection</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="projections.projection_friendliness_sufficient_condition" class="idref" href="#projections.projection_friendliness_sufficient_condition"><span class="id" title="section">projection_friendliness_sufficient_condition</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab25"></a><h2 class="section">A sufficient condition for being <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ProjectionTraces.html#projection_friendly"><span class="id" title="definition">projection_friendly</span></a></span>.</h2>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;(<a id="j:299" class="idref" href="#j:299"><span class="id" title="binder">j</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;(<a id="Xj:300" class="idref" href="#Xj:300"><span class="id" title="binder">Xj</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#j:299"><span class="id" title="variable">j</span></a>)<br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
  This condition states that <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a></span>ity in a projection <tt>Xj</tt>
<div class="paragraph"> </div>

  can be lifted to any <span class="inlinecode"><a class="idref" href="CasperCBC.CBC.LightNode.html#protocol_state"><span class="id" title="inductive">protocol_state</span></a></span> in <tt>X</tt> which projects to the
  corresponding <tt>Xj</tt> state.
  
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="projection_friendliness_sufficient_condition" class="idref" href="#projection_friendliness_sufficient_condition"><span class="id" title="definition">projection_friendliness_sufficient_condition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="keyword">forall</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lj:301" class="idref" href="#lj:301"><span class="id" title="binder">lj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:302" class="idref" href="#sj:302"><span class="id" title="binder">sj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:303" class="idref" href="#om:303"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpv:304" class="idref" href="#Hpv:304"><span class="id" title="binder">Hpv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#lj:301"><span class="id" title="variable">lj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#sj:302"><span class="id" title="variable">sj</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:303"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:305" class="idref" href="#s:305"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:306" class="idref" href="#Hs:306"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:305"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hsi:307" class="idref" href="#Hsi:307"><span class="id" title="binder">Hsi</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#s:305"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#sj:302"><span class="id" title="variable">sj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">_</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#lj:301"><span class="id" title="variable">lj</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:305"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:303"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="projection_friendliness_sufficient_condition_protocol_message" class="idref" href="#projection_friendliness_sufficient_condition_protocol_message"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:308" class="idref" href="#l:308"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:309" class="idref" href="#s:309"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:310" class="idref" href="#om:310"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:311" class="idref" href="#Hv:311"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:308"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:309"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:310"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#option_protocol_message_prop"><span class="id" title="definition">option_protocol_message_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:310"><span class="id" title="variable">om</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpsj</span> [<span class="id" title="var">Hpmj</span> [<span class="id" title="var">sx</span> [<span class="id" title="var">Hs</span> [<span class="id" title="var">HpsX</span> [<span class="id" title="var">HpmX</span> <span class="id" title="var">Hv</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lift_to_composite_state_initial" class="idref" href="#lift_to_composite_state_initial"><span class="id" title="lemma">lift_to_composite_state_initial</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="sj:312" class="idref" href="#sj:312"><span class="id" title="binder">sj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinitj:313" class="idref" href="#Hinitj:313"><span class="id" title="binder">Hinitj</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#sj:312"><span class="id" title="variable">sj</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#sj:312"><span class="id" title="variable">sj</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="CasperCBC.VLSM.Common.html#s0"><span class="id" title="method">s0</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="projection_friendliness_sufficient_condition_protocol_state" class="idref" href="#projection_friendliness_sufficient_condition_protocol_state"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfr:314" class="idref" href="#Hfr:314"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition"><span class="id" title="definition">projection_friendliness_sufficient_condition</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:315" class="idref" href="#s:315"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:316" class="idref" href="#om:316"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hp:317" class="idref" href="#Hp:317"><span class="id" title="binder">Hp</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_prop"><span class="id" title="inductive">protocol_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:315"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:316"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:315"><span class="id" title="variable">s</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">som</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">om</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heqsom</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqsom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="keyword">is</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">is'</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state_initial"><span class="id" title="lemma">lift_to_composite_state_initial</span></a> <span class="id" title="var">is'</span> <span class="id" title="var">Hinit</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intro</span> <span class="id" title="var">HinitX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">is'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">initX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">initX</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">initX</span> <span class="id" title="var">HinitX</span>)); <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">s</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>. <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_id"><span class="id" title="lemma">state_update_id</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp1</span> <span class="id" title="var">s</span> <span class="id" title="var">_om</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">om0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">s0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="keyword">fun</span> <a id="n:319" class="idref" href="#n:319"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:318"><span class="id" title="variable">n</span></a>)) <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">l</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_valid"><span class="id" title="lemma">protocol_generated_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <span class="id" title="var">Hp1</span> <span class="id" title="var">Hp2</span> <span class="id" title="var">Hv</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">Hpvj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfr</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">Hpvj</span> <span class="id" title="var">_</span> <span class="id" title="var">IHHp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="tactic">at</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfr</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_protocol_message"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_message</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hpvj</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span>  [<span class="id" title="var">_sX</span> <span class="id" title="var">HpmX</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHp1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_omX</span> <span class="id" title="var">HpsX</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated"><span class="id" title="constructor">protocol_generated</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="keyword">fun</span> <a id="n:321" class="idref" href="#n:321"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:320"><span class="id" title="variable">n</span></a>)) <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_omX</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">HpsX</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_sX</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">om</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">HpmX</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hfr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">l</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>) <span class="id" title="var">s</span> <span class="id" title="var">om</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="projection_friendliness_sufficient_condition_valid" class="idref" href="#projection_friendliness_sufficient_condition_valid"><span class="id" title="lemma">projection_friendliness_sufficient_condition_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfr:322" class="idref" href="#Hfr:322"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition"><span class="id" title="definition">projection_friendliness_sufficient_condition</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:323" class="idref" href="#l:323"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:324" class="idref" href="#s:324"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om:325" class="idref" href="#om:325"><span class="id" title="binder">om</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hv:326" class="idref" href="#Hv:326"><span class="id" title="binder">Hv</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_valid"><span class="id" title="definition">protocol_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:323"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s:324"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:325"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#vvalid"><span class="id" title="definition">vvalid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="keyword">fun</span> <a id="n:327" class="idref" href="#n:327"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:327"><span class="id" title="variable">n</span></a>)) <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:323"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:324"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om:325"><span class="id" title="variable">om</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_protocol_state"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_state</span></a> <span class="id" title="var">Hfr</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> <span class="id" title="var">HpsX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfr</span> <span class="id" title="var">l</span> <span class="id" title="var">s</span> <span class="id" title="var">om</span> <span class="id" title="var">Hv</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <span class="id" title="var">s</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">_om</span> <span class="id" title="var">Hpsj</span>] [<span class="id" title="var">Hpmj</span> [<span class="id" title="var">_sx</span> [<span class="id" title="var">Hs</span> [<span class="id" title="var">_HpsX</span> [<span class="id" title="var">HpmX</span> <span class="id" title="var">Hv</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">HpsX</span> <span class="id" title="var">_om</span> <span class="id" title="var">Hpsj</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="tactic">at</span> 2 <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hfr</span> <span class="id" title="var">HpsX</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="projection_friendliness_sufficient_condition_protocol_transition" class="idref" href="#projection_friendliness_sufficient_condition_protocol_transition"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfr:328" class="idref" href="#Hfr:328"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition"><span class="id" title="definition">projection_friendliness_sufficient_condition</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:329" class="idref" href="#l:329"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="is:330" class="idref" href="#is:330"><span class="id" title="binder">is</span></a> <a id="os:331" class="idref" href="#os:331"><span class="id" title="binder">os</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="iom:332" class="idref" href="#iom:332"><span class="id" title="binder">iom</span></a> <a id="oom:333" class="idref" href="#oom:333"><span class="id" title="binder">oom</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:334" class="idref" href="#Ht:334"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:329"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#is:330"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#iom:332"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#os:331"><span class="id" title="variable">os</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#oom:333"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> (<span class="id" title="keyword">fun</span> <a id="n:335" class="idref" href="#n:335"><span class="id" title="binder">n</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.index"><span class="id" title="variable">index</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Common.html#vlabel"><span class="id" title="definition">vlabel</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#n:335"><span class="id" title="variable">n</span></a>)) <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:329"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#is:330"><span class="id" title="variable">is</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#iom:332"><span class="id" title="variable">iom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#os:331"><span class="id" title="variable">os</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#oom:333"><span class="id" title="variable">oom</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">_om</span> <span class="id" title="var">Hps</span>] [[<span class="id" title="var">_s</span> <span class="id" title="var">Hpm</span>] <span class="id" title="var">Hv</span>]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_generated_valid"><span class="id" title="lemma">protocol_generated_valid</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <span class="id" title="var">Hps</span> <span class="id" title="var">Hpm</span> <span class="id" title="var">Hv</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">Hpv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_protocol_state"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_state</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">_om</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_protocol_message"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_message</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpv</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_valid"><span class="id" title="lemma">projection_friendliness_sufficient_condition_valid</span></a> <span class="id" title="var">Hfr</span> <span class="id" title="var">l</span> <span class="id" title="keyword">is</span> <span class="id" title="var">iom</span> <span class="id" title="var">Hpv</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">HvX</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_valid"><span class="id" title="lemma">projection_friendliness_sufficient_condition_valid</span></a> <span class="id" title="var">Hfr</span> <span class="id" title="var">l</span> <span class="id" title="keyword">is</span> <span class="id" title="var">iom</span> <span class="id" title="var">Hpv</span>); <span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hctr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>) <span class="id" title="var">l</span> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> (@<a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.message"><span class="id" title="variable">message</span></a>) <span class="id" title="keyword">is</span> <span class="id" title="var">iom</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">os</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">oom</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_twice"><span class="id" title="lemma">state_update_twice</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="projection_friendliness_sufficient_condition_finite_ptrace" class="idref" href="#projection_friendliness_sufficient_condition_finite_ptrace"><span class="id" title="lemma">projection_friendliness_sufficient_condition_finite_ptrace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfr:336" class="idref" href="#Hfr:336"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition"><span class="id" title="definition">projection_friendliness_sufficient_condition</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:337" class="idref" href="#s:337"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:338" class="idref" href="#ls:338"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpxt:339" class="idref" href="#Hpxt:339"><span class="id" title="binder">Hpxt</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:337"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#ls:338"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#finite_protocol_trace_from"><span class="id" title="inductive">finite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:337"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#ls:338"><span class="id" title="variable">ls</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hpxt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_protocol_state"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_state</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_protocol_transition"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_transition</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="projection_friendliness_sufficient_condition_infinite_ptrace" class="idref" href="#projection_friendliness_sufficient_condition_infinite_ptrace"><span class="id" title="lemma">projection_friendliness_sufficient_condition_infinite_ptrace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfr:340" class="idref" href="#Hfr:340"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition"><span class="id" title="definition">projection_friendliness_sufficient_condition</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:341" class="idref" href="#s:341"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#state"><span class="id" title="method">state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ls:342" class="idref" href="#ls:342"><span class="id" title="binder">ls</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#Stream"><span class="id" title="inductive">Stream</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#transition_item"><span class="id" title="record">transition_item</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpxt:343" class="idref" href="#Hpxt:343"><span class="id" title="binder">Hpxt</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from"><span class="id" title="inductive">infinite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:341"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#ls:342"><span class="id" title="variable">ls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#infinite_protocol_trace_from"><span class="id" title="inductive">infinite_protocol_trace_from</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state"><span class="id" title="definition">lift_to_composite_state</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s:341"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.Streams.html#map"><span class="id" title="definition">Streams.map</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_transition_item"><span class="id" title="definition">lift_to_composite_transition_item</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#ls:342"><span class="id" title="variable">ls</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">ls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">cofix</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[<span class="id" title="var">l</span> <span class="id" title="var">input</span> <span class="id" title="var">destination</span> <span class="id" title="var">output</span>] <span class="id" title="var">ls</span>] <span class="id" title="var">s</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.StreamExtras.html#map_Cons"><span class="id" title="lemma">map_Cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_protocol_transition"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_transition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
  The result below shows that the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition"><span class="id" title="definition">projection_friendliness_sufficient_condition</span></a></span>
  might be too strong, in the sense that it allows any trace from the
  projection to be lifted direclty to <tt>X</tt>
<div class="paragraph"> </div>

  (all other machines stay in their initial state).
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="projection_friendliness_sufficient_condition_protocol_trace" class="idref" href="#projection_friendliness_sufficient_condition_protocol_trace"><span class="id" title="lemma">projection_friendliness_sufficient_condition_protocol_trace</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfr:344" class="idref" href="#Hfr:344"><span class="id" title="binder">Hfr</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition"><span class="id" title="definition">projection_friendliness_sufficient_condition</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:345" class="idref" href="#t:345"><span class="id" title="binder">t</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#Trace"><span class="id" title="inductive">Trace</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hpt:346" class="idref" href="#Hpt:346"><span class="id" title="binder">Hpt</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.Xj"><span class="id" title="variable">Xj</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#t:345"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_trace_prop"><span class="id" title="definition">protocol_trace_prop</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.X"><span class="id" title="variable">X</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_trace"><span class="id" title="definition">lift_to_composite_trace</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition.j"><span class="id" title="variable">j</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#t:345"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">ls</span>| <span class="id" title="var">s</span> <span class="id" title="var">ss</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hxt</span> <span class="id" title="var">Hinit</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_finite_ptrace"><span class="id" title="lemma">projection_friendliness_sufficient_condition_finite_ptrace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state_initial"><span class="id" title="lemma">lift_to_composite_state_initial</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projection_friendliness_sufficient_condition_infinite_ptrace"><span class="id" title="lemma">projection_friendliness_sufficient_condition_infinite_ptrace</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#lift_to_composite_state_initial"><span class="id" title="lemma">lift_to_composite_state_initial</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections.projection_friendliness_sufficient_condition"><span class="id" title="section">projection_friendliness_sufficient_condition</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#projections"><span class="id" title="section">projections</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="free_projections" class="idref" href="#free_projections"><span class="id" title="section">free_projections</span></a>.<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab26"></a><h2 class="section">Projections of free compositions</h2>


<div class="paragraph"> </div>

These projections are simple instances of the projections defined above in which
the composition constraint is taken to be <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a></span>.

<div class="paragraph"> </div>

All results from regular projections carry to these "free" projections.

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="message:347" class="idref" href="#message:347"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="index:348" class="idref" href="#index:348"><span class="id" title="binder">index</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="IndEqDec:349" class="idref" href="#IndEqDec:349"><span class="id" title="binder">IndEqDec</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#index:348"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="IM:350" class="idref" href="#IM:350"><span class="id" title="binder">IM</span></a> :<a class="idref" href="CasperCBC.VLSM.Composition.html#index:348"><span class="id" title="variable">index</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:347"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="i0:351" class="idref" href="#i0:351"><span class="id" title="binder">i0</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#Inhabited"><span class="id" title="class">Inhabited</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#index:348"><span class="id" title="variable">index</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="X:352" class="idref" href="#X:352"><span class="id" title="binder">X</span></a> := <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#IM:350"><span class="id" title="variable">IM</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="composite_vlsm_free_projection" class="idref" href="#composite_vlsm_free_projection"><span class="id" title="definition">composite_vlsm_free_projection</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:353" class="idref" href="#i:353"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_constrained_projection"><span class="id" title="definition">composite_vlsm_constrained_projection</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_constraint"><span class="id" title="definition">free_constraint</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#i:353"><span class="id" title="variable">i</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="preloaded_composed_protocol_state" class="idref" href="#preloaded_composed_protocol_state"><span class="id" title="lemma">preloaded_composed_protocol_state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:354" class="idref" href="#s:354"><span class="id" title="binder">s</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hs:355" class="idref" href="#Hs:355"><span class="id" title="binder">Hs</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#s:354"><span class="id" title="variable">s</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:356" class="idref" href="#i:356"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop"><span class="id" title="definition">protocol_state_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:356"><span class="id" title="variable">i</span></a>)) (<a class="idref" href="CasperCBC.VLSM.Composition.html#s:354"><span class="id" title="variable">s</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:356"><span class="id" title="variable">i</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="keyword">using</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_ind"><span class="id" title="lemma">protocol_state_prop_ind</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_iff"><span class="id" title="lemma">protocol_state_prop_iff</span></a>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hs</span> <span class="id" title="var">i</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_state_prop"><span class="id" title="definition">vinitial_state_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">s</span> <span class="id" title="var">i</span>) <span class="id" title="var">Hs</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hps</span> [<span class="id" title="var">Hpm</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>]]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>, <span class="id" title="var">li'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i'</span>) <span class="id" title="var">li'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">i'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'</span>, <span class="id" title="var">omi'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ht'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">s'</span> <span class="id" title="var">omi'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">i'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHs</span> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_state_prop_iff"><span class="id" title="lemma">protocol_state_prop_iff</span></a>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">li'</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">exists</span> <span class="id" title="var">om'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">om</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">Him</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a>  (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">m</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m</span> <span class="id" title="var">Him</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">im</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_message"><span class="id" title="constructor">protocol_initial_message</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">im</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_with_all_messages_projection_protocol_transition_eq" class="idref" href="#pre_loaded_with_all_messages_projection_protocol_transition_eq"><span class="id" title="lemma">pre_loaded_with_all_messages_projection_protocol_transition_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:357" class="idref" href="#s1:357"><span class="id" title="binder">s1</span></a> <a id="s2:358" class="idref" href="#s2:358"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om1:359" class="idref" href="#om1:359"><span class="id" title="binder">om1</span></a> <a id="om2:360" class="idref" href="#om2:360"><span class="id" title="binder">om2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:361" class="idref" href="#l:361"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:362" class="idref" href="#Ht:362"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#l:361"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s1:357"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om1:359"><span class="id" title="variable">om1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s2:358"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om2:360"><span class="id" title="variable">om2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:363" class="idref" href="#i:363"><span class="id" title="binder">i</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:361"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:363"><span class="id" title="variable">i</span></a>)) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:361"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s1:357"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:363"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om1:359"><span class="id" title="variable">om1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s2:358"><span class="id" title="variable">s2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:363"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om2:360"><span class="id" title="variable">om2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hs1</span> [<span class="id" title="var">Hom1</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>]]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">il</span> <span class="id" title="var">l</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">unfold</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">clear</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span> <span class="id" title="var">il</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'</span>, <span class="id" title="var">om'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Htj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_eq"><span class="id" title="lemma">state_update_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_composed_protocol_state"><span class="id" title="lemma">preloaded_composed_protocol_state</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">om1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m1</span>|]; <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#vs0"><span class="id" title="definition">vs0</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hm1</span> : <a class="idref" href="CasperCBC.VLSM.Common.html#vinitial_message_prop"><span class="id" title="definition">vinitial_message_prop</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>)) <span class="id" title="var">m1</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">m1</span> <span class="id" title="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#proj1_sig"><span class="id" title="definition">proj1_sig</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">m1</span> <span class="id" title="var">Hm1</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_message"><span class="id" title="constructor">protocol_initial_message</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#protocol_initial_state"><span class="id" title="constructor">protocol_initial_state</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_with_all_messages_projection_protocol_transition_neq" class="idref" href="#pre_loaded_with_all_messages_projection_protocol_transition_neq"><span class="id" title="lemma">pre_loaded_with_all_messages_projection_protocol_transition_neq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:364" class="idref" href="#s1:364"><span class="id" title="binder">s1</span></a> <a id="s2:365" class="idref" href="#s2:365"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="om1:366" class="idref" href="#om1:366"><span class="id" title="binder">om1</span></a> <a id="om2:367" class="idref" href="#om2:367"><span class="id" title="binder">om2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.message"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:368" class="idref" href="#l:368"><span class="id" title="binder">l</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#label"><span class="id" title="method">label</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Ht:369" class="idref" href="#Ht:369"><span class="id" title="binder">Ht</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#protocol_transition"><span class="id" title="definition">protocol_transition</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#l:368"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s1:364"><span class="id" title="variable">s1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om1:366"><span class="id" title="variable">om1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="CasperCBC.VLSM.Composition.html#s2:365"><span class="id" title="variable">s2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#om2:367"><span class="id" title="variable">om2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:370" class="idref" href="#i:370"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hi:371" class="idref" href="#Hi:371"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#i:370"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#l:368"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Composition.html#s1:364"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:370"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s2:365"><span class="id" title="variable">s2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:370"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hs1</span> [<span class="id" title="var">Hom1</span> [<span class="id" title="var">Hv</span> <span class="id" title="var">_</span>]]] <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">il</span> <span class="id" title="var">l</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#vtransition"><span class="id" title="definition">vtransition</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <span class="id" title="var">il</span>) <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s1</span> <span class="id" title="var">il</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">om1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">si'</span>, <span class="id" title="var">om'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Htj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Ht</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#state_update_neq"><span class="id" title="lemma">state_update_neq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pre_loaded_with_all_messages_projection_in_futures" class="idref" href="#pre_loaded_with_all_messages_projection_in_futures"><span class="id" title="lemma">pre_loaded_with_all_messages_projection_in_futures</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s1:372" class="idref" href="#s1:372"><span class="id" title="binder">s1</span></a> <a id="s2:373" class="idref" href="#s2:373"><span class="id" title="binder">s2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#vstate"><span class="id" title="definition">vstate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.X"><span class="id" title="variable">X</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hfutures:374" class="idref" href="#Hfutures:374"><span class="id" title="binder">Hfutures</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.X"><span class="id" title="variable">X</span></a>) <a class="idref" href="CasperCBC.VLSM.Composition.html#s1:372"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#s2:373"><span class="id" title="variable">s2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:375" class="idref" href="#i:375"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.index"><span class="id" title="variable">index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#in_futures"><span class="id" title="definition">in_futures</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:375"><span class="id" title="variable">i</span></a>))  (<a class="idref" href="CasperCBC.VLSM.Composition.html#s1:372"><span class="id" title="variable">s1</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:375"><span class="id" title="variable">i</span></a>) (<a class="idref" href="CasperCBC.VLSM.Composition.html#s2:373"><span class="id" title="variable">s2</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:375"><span class="id" title="variable">i</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfutures</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tr</span> [<span class="id" title="var">Htr</span> <span class="id" title="var">Hlast</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">s1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">tr</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#preloaded_composed_protocol_state"><span class="id" title="lemma">preloaded_composed_protocol_state</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHtr</span> <span class="id" title="var">s</span> <span class="id" title="var">H2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="CasperCBC.Lib.Classes.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#pre_loaded_with_all_messages_projection_protocol_transition_eq"><span class="id" title="lemma">pre_loaded_with_all_messages_projection_protocol_transition_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHtr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">tri</span> [<span class="id" title="var">Htri</span> <span class="id" title="var">Hlasti</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="CasperCBC.VLSM.Common.html#l"><span class="id" title="projection">l</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <span class="id" title="var">l</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#input"><span class="id" title="projection">input</span></a> := <span class="id" title="var">iom</span>; <a class="idref" href="CasperCBC.VLSM.Common.html#destination"><span class="id" title="projection">destination</span></a> := <span class="id" title="var">s</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>); <a class="idref" href="CasperCBC.VLSM.Common.html#output"><span class="id" title="projection">output</span></a> := <span class="id" title="var">oom</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">tri</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="CasperCBC.VLSM.Common.html#finite_ptrace_extend"><span class="id" title="constructor">finite_ptrace_extend</span></a> (<a class="idref" href="CasperCBC.VLSM.Common.html#pre_loaded_with_all_messages_vlsm"><span class="id" title="definition">pre_loaded_with_all_messages_vlsm</span></a> (<a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections.IM"><span class="id" title="variable">IM</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <span class="id" title="var">l</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CasperCBC.Lib.ListExtras.html#unroll_last"><span class="id" title="lemma">unroll_last</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CasperCBC.VLSM.Composition.html#pre_loaded_with_all_messages_projection_protocol_transition_neq"><span class="id" title="lemma">pre_loaded_with_all_messages_projection_protocol_transition_neq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H3</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs1i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hs1i</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#free_projections"><span class="id" title="section">free_projections</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="binary_free_composition" class="idref" href="#binary_free_composition"><span class="id" title="section">binary_free_composition</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<a id="lab27"></a><h1 class="section">Free composition of two VLSMs</h1>


<div class="paragraph"> </div>

This serves an example of how composition can be built, but is also being
used in definiting the <span class="inlinecode"><a class="idref" href="CasperCBC.VLSM.ByzantineTraces.html#byzantine_trace_prop"><span class="id" title="definition">byzantine_trace_prop</span></a></span>erties.

<div class="paragraph"> </div>

This instantiates the regular composition using the <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a></span> type as an <tt>index</tt>.

<div class="paragraph"> </div>


</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="message:376" class="idref" href="#message:376"><span class="id" title="binder">message</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="M1:377" class="idref" href="#M1:377"><span class="id" title="binder">M1</span></a> <a id="M2:378" class="idref" href="#M2:378"><span class="id" title="binder">M2</span></a> : <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#message:376"><span class="id" title="variable">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="binary_index" class="idref" href="#binary_index"><span class="id" title="definition">binary_index</span></a> : <span class="id" title="keyword">Set</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="first" class="idref" href="#first"><span class="id" title="definition">first</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="second" class="idref" href="#second"><span class="id" title="definition">second</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="binary_index_dec" class="idref" href="#binary_index_dec"><span class="id" title="instance">binary_index_dec</span></a> :  <a class="idref" href="CasperCBC.Lib.Classes.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a> := <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="binary_index_inhabited" class="idref" href="#binary_index_inhabited"><span class="id" title="instance">binary_index_inhabited</span></a> : <a class="idref" href="CasperCBC.Lib.Classes.html#Inhabited"><span class="id" title="class">Inhabited</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CasperCBC.Lib.Classes.html#populate"><span class="id" title="constructor">populate</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#first"><span class="id" title="definition">first</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="binary_IM" class="idref" href="#binary_IM"><span class="id" title="definition">binary_IM</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="i:379" class="idref" href="#i:379"><span class="id" title="binder">i</span></a> : <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_index"><span class="id" title="definition">binary_index</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_free_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#i:379"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_free_composition.M1"><span class="id" title="variable">M1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> =&gt; <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_free_composition.M2"><span class="id" title="variable">M2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="binary_free_composition" class="idref" href="#binary_free_composition"><span class="id" title="definition">binary_free_composition</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="CasperCBC.VLSM.Common.html#VLSM"><span class="id" title="definition">VLSM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_free_composition.message"><span class="id" title="variable">message</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Composition.html#free_composite_vlsm"><span class="id" title="definition">free_composite_vlsm</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_IM"><span class="id" title="definition">binary_IM</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="binary_free_composition_fst" class="idref" href="#binary_free_composition_fst"><span class="id" title="definition">binary_free_composition_fst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_free_projection"><span class="id" title="definition">composite_vlsm_free_projection</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_IM"><span class="id" title="definition">binary_IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#first"><span class="id" title="definition">first</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="binary_free_composition_snd" class="idref" href="#binary_free_composition_snd"><span class="id" title="definition">binary_free_composition_snd</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="CasperCBC.VLSM.Composition.html#composite_vlsm_free_projection"><span class="id" title="definition">composite_vlsm_free_projection</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_IM"><span class="id" title="definition">binary_IM</span></a> <a class="idref" href="CasperCBC.VLSM.Composition.html#second"><span class="id" title="definition">second</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CasperCBC.VLSM.Composition.html#binary_free_composition"><span class="id" title="section">binary_free_composition</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
